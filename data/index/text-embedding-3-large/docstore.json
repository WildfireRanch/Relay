{"docstore/ref_doc_info": {"0586af43-bf90-4393-9c42-8fbe729e109a": {"node_ids": ["fa3b7297-4388-4695-b5e4-f15167a391b4"], "metadata": {"tier": "global", "file_path": "/app/docs/generated/global_context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "af045316-2444-434a-b391-6dab4c2ff1d4": {"node_ids": ["c00fc62f-ec56-46a8-8f37-995227e24d73"], "metadata": {"file_path": "/app/docs/imported/relay_code_update_250603.md", "file_name": "relay_code_update_250603.md", "file_size": 1982, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b40729fc-472b-4e2e-bf7c-295aea0e2ab7": {"node_ids": ["6552e0fd-ccbb-4e75-9b2e-e98045397391"], "metadata": {"file_path": "/app/docs/imported/relay_code_update_250605.md", "file_name": "relay_code_update_250605.md", "file_size": 2876, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9ef4c14f-f20e-462c-8d04-245210a10931": {"node_ids": ["2df295fe-05ba-4979-9d7a-a39ec2fe043a"], "metadata": {"file_path": "/app/docs/imported/relay_code_update_250606.md", "file_name": "relay_code_update_250606.md", "file_size": 3248, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b23e1497-6700-4cb4-bbd8-86eb3a04ee9f": {"node_ids": ["ecd560d1-2f07-4ae8-985e-fa70d1ecb886", "bbc0c915-33ea-44ad-b9e4-c7e154eee90c"], "metadata": {"file_path": "/app/docs/imported/repository_overview_250606.md", "file_name": "repository_overview_250606.md", "file_size": 7775, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9ccc8290-c664-4b39-a2e7-a6c70e6455ea": {"node_ids": ["5f336f0f-d45f-4533-8cb1-b5749de65a0a"], "metadata": {"file_path": "/app/docs/imported/test_placeholder.md", "file_name": "test_placeholder.md", "file_size": 0, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1ee99886-cad7-475d-8cf9-ac27341df244": {"node_ids": ["6ee7cb35-1ab6-4465-9984-a96306c53c90", "eaebc08d-f4a5-4a92-b083-7c2f724b001e", "f38caa9c-d00c-4daf-81b3-de90b0a98f8d"], "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "493c8071-8e75-40a8-97c1-9a4963aa98e2": {"node_ids": ["d7bdf921-0696-46cd-92b4-8a88f48d8983"], "metadata": {"file_path": "/app/docs/imported/\ud83d\udd27_google_docs_sync_integration.md", "file_name": "\ud83d\udd27_google_docs_sync_integration.md", "file_size": 3065, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c7081819-8165-475b-8418-4f6e7ae1e5af": {"node_ids": ["a32012a9-cfb4-4348-a4da-a4f307855c60"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/gmail.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ec241d19-322e-4f3a-a687-655effb18a66": {"node_ids": ["49aac477-69c9-4865-b87f-696ffa1dbd0f"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/summarize_memory.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "83586bda-1f60-4d3d-9d13-13be055d9559": {"node_ids": ["52a61899-7700-4010-8d4a-18796f6304d3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/status_code.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "47027b86-f8a8-41e4-96a4-039e46066578": {"node_ids": ["ab01e946-537f-4a25-8257-1cc148af3390"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/MemoryAgent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "3691fab0-e6a0-4aa8-a019-8b09d04bcde3": {"node_ids": ["40723709-99e9-4311-ba95-7a02866227b7"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/feasibility_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f42014d8-f52f-432c-a23e-c4adf818bb80": {"node_ids": ["c7a655e2-4172-4208-9d9a-1332998199a2"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_planner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "706fbb7c-ddd2-48f6-af6c-3a0807367940": {"node_ids": ["ae4615be-fd2f-49da-83c1-1e6a323bdeee"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/echo_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a832645a-9453-4736-8025-aecf9a5eba91": {"node_ids": ["f9c59816-a0ef-40cb-b282-377372e52016"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/patch_utils.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8f8367db-5cac-4e15-93d0-a9d286be123f": {"node_ids": ["d6f61d78-a790-4f7e-b76e-94b7f5e0b72d"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/cron_generate_auto_context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "3369d11c-8de4-437f-ba9a-0e316cafabab": {"node_ids": ["cda99eb6-93b2-47db-bd8d-1192bd5652d3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/memory.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1d6cd9fb-a361-4f78-992d-b56f76f279f8": {"node_ids": ["aefde810-25d5-4631-a13a-70cdc7084817"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/index_codebase.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b0e405ef-9256-458a-81d1-66a8a3acde9a": {"node_ids": ["0d3b7044-3fda-4cb4-a2f3-fb8c763cb880"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/graph.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "866b3fed-1f8f-4c4a-982d-5b6f98dec92d": {"node_ids": ["840156a8-2c98-4f5d-81fa-b238f06477b7"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/neo4j_driver.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "cc8c11db-2437-4b90-92d2-3f71f09b3fd4": {"node_ids": ["7497ab53-31f3-439e-aa18-a99b31a24a48"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/base.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "db8bb5a5-afd2-4451-9558-92b9c4565f3a": {"node_ids": ["03f3e38a-8912-430a-a49a-8a976586ecb8"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/search.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "4c25d2cf-5b1c-4588-b796-b32b0e82982c": {"node_ids": ["788f7a29-c3c8-4b0c-8351-d2ac2b329ab6"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/inject_header.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9a5843de-2db2-44e3-940b-9f80b60d7f83": {"node_ids": ["a3ab03dd-3e6e-4b0d-995f-05a6e34db1da"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/embeddings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5ff9ffae-496b-4bf3-90ac-f7b447b1c627": {"node_ids": ["f108f1eb-1f3a-427e-a712-24be0b1fabba"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/logs_sessions.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "76964f07-5872-4b8a-84cc-631239c2cd1b": {"node_ids": ["e470bb1c-cef7-426f-a971-74931a6b7fa6"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/impact_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "151ba076-2f4d-4bf5-b03e-439d6caf12bd": {"node_ids": ["a535e976-59d2-4b32-b8e7-b9464a22e437"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/redundancy_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "699da9e9-54a1-443b-8eb2-b6827196f08b": {"node_ids": ["aa2cc713-394f-4ab3-91de-b32b8a765d47"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/safety_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b1cc43bf-4589-478e-81ff-0e07cb4e666d": {"node_ids": ["37100292-9746-4187-8333-28d4d0b4dde8"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/settings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7fb56dc7-e6fd-47e8-9550-ee9c1ac40e78": {"node_ids": ["e2bbe2dc-7647-4136-b112-e818e83e2f17"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/planner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f69c4fcb-0c74-4e0c-aae1-60de6e84cfef": {"node_ids": ["51addb2d-3b71-4c90-8bc4-77e4653e9148"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/dependency_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "88e8d530-a607-46e6-83dc-8869caa28d4d": {"node_ids": ["2796e9bc-73c7-4160-9c85-d7a11b2aadd3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/mcp.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a892dcf7-2ecb-4529-8234-2e7db7818063": {"node_ids": ["93525d34-0f25-48df-9d2d-08e796afd8a7"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/sync_context_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "bbd7339a-c4cb-4319-8db4-a4c4834c9631": {"node_ids": ["63600eb1-fb86-4593-9a93-1c94b5ef99c2"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/codex.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "57885cc7-b129-463a-ad0c-bab1e0299b69": {"node_ids": ["290dced9-29eb-4d88-9dca-4479052f5f64"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/google_docs_sync.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1fa4b4dd-7527-44a9-ac74-37d0de1245e4": {"node_ids": ["f34b79c8-0626-4ace-b47c-e4bc01867f1a"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/kb.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8aa7876a-b637-4ad9-b75c-3073683f1a5f": {"node_ids": ["bc840d87-1fee-4c5d-ae06-5988d234c350"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/robustness_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2cb798a6-7b13-4919-9eee-db4d36ee6a2d": {"node_ids": ["0493059e-e22c-4679-8a3f-42b7a5e4c359"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/logging.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b9cdee30-3ede-46b1-a11f-33e47fab4409": {"node_ids": ["17dfb2c1-e905-47bb-a9a2-2100d4155d78"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/relay_mcp.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "218c7a63-04e1-40cc-9d10-0de6d414d4c5": {"node_ids": ["94b5c87a-4fa7-45c6-b3fe-a6adab2cf745"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/ethical_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "da30af58-8099-4b15-8bcc-1de96ed7e084": {"node_ids": ["3e3509a7-e37c-408a-bbb4-5dce5f64613a"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/logger.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a19f0d88-6b00-4d92-88d5-7c6bbe6f393e": {"node_ids": ["6f57ce86-3154-4bb6-aa4f-60e075b7d7d2"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_admin_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "e64c2eaa-2ad0-431a-a479-4ed02839f757": {"node_ids": ["d6042ce2-38b7-47a1-affe-d7768e79482b"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_context_engine.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ed4011cd-c225-4fe0-b628-eea9c7c94519": {"node_ids": ["f8b56a8c-0c88-4743-81ae-b7b4de4906a7"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/simulation_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ada3dd06-c709-4a5b-b32e-f5109ea9c4f9": {"node_ids": ["d77f08bd-f843-44c6-a5fe-040d1977f638"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/trainer_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "caf9723a-55d3-4cfc-b543-c0ea2195247d": {"node_ids": ["0ce6869c-84df-4bbc-b6fc-083764d3ec41"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/control_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a8d18b7c-d006-46d9-b90a-b28d53b1c1a0": {"node_ids": ["8cef1c91-7d1e-426e-9316-239c2b4d16b6"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/delete_embeddings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c5ba274a-8e60-4949-937f-05ad9855bb8f": {"node_ids": ["13bcb590-4b05-4adf-822d-a4cd14e0bb57"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/intent_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "e3d52a18-e42a-412c-930c-487f4c4b53e0": {"node_ids": ["de3773de-562c-4e08-9b5e-af3e1a50f434"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "cf756839-05c1-45c6-94a3-d951cac05534": {"node_ids": ["777f3bc7-07c3-4ec7-bb7f-61570df6f9c6"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/batch_generate_headers.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "cd74ef63-f1f2-461a-b333-dc4c29d31454": {"node_ids": ["56421468-52d0-4a9d-8adf-380025fcd13b"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/readme.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "6318a13f-30ce-4a53-abb8-bd66a8fefd0b": {"node_ids": ["5108fc89-72a5-4e3f-81bc-c882a1f45fa3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/performance_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "194092e5-0abb-4a5c-bffb-ee7e092c512d": {"node_ids": ["81ee9871-7ace-4162-b451-5956b74d6606"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/clarity_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1cc10e7d-e036-4644-8f49-1672e73ab575": {"node_ids": ["2851ddbe-50b9-48bf-8311-f1d0f926c598"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/memory_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5d57c41e-b51e-498c-9a63-f7d1803f1e5b": {"node_ids": ["511c972e-7fbb-49b3-afcb-540299d408f8"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/main.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7005b7a1-ef4b-4945-b4c5-56d8a93b2526": {"node_ids": ["ba80b972-49b9-42d0-b94e-4d35046d99a9"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b39d371e-7a93-4175-9f8b-53a63cb50dab": {"node_ids": ["00bb5452-6964-41bb-800f-93ab00fbef9d"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c759b981-cc25-4b8a-a95c-ac88c5923b62": {"node_ids": ["7a35a378-0f57-4ae0-af3b-10234d5514c3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/google.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "4f61e4d8-ba03-4a38-b1b6-62e551cd88e4": {"node_ids": ["ca259773-107a-41b0-86e6-b4ee8fa56810"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/status.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "631386d9-3f6f-4fba-ac09-41cfcd4dc881": {"node_ids": ["b751cb63-12d6-4bc1-8b45-89161560795a"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/debug.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1a0c998e-412a-4b25-8183-c295693faa19": {"node_ids": ["2ffc3ac1-a207-428c-967c-469dea281fc4"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/consensus_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8b1a66d5-95b0-4881-9aa7-a1aa06bc2021": {"node_ids": ["1314631e-dc91-4350-b05c-50dc3f9144e8"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/admin.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "079002c0-f34b-434a-9f3b-3325cba87150": {"node_ids": ["7aed4226-78d2-4cc7-ba9a-1a412cf4b104"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_graph_neoagent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a6d03698-43b5-4d29-a3c4-a3d40e8d63b1": {"node_ids": ["31b5c45e-f8d7-4dd4-846b-58929693f3ba"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/oauth.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2a307c34-6be5-4315-908d-3520f5cfc103": {"node_ids": ["1906bdff-e669-4cfd-9d57-b5fa79e96439"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/ask.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f8e36951-a586-495c-8430-b1581ab5171f": {"node_ids": ["5ca8da93-38b5-4af6-95ce-711ec9a85dba"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_ask_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "60517c13-e858-46e2-a691-91a58f497b75": {"node_ids": ["34c2e11c-f37c-4e52-8b5f-bd79a67aaad4"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/queue.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "00d024be-4d97-4f77-8633-1fe1c4127654": {"node_ids": ["3bcdda6c-6045-4c33-bef7-0881cd2e8778"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/control.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "27c94ff6-0210-4edd-a5a9-2275d89a570f": {"node_ids": ["b329a323-4653-49a4-9665-d970b8a3a77b"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_mcp_route.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "62046d2b-288e-407d-8cc5-e2d2a362cb37": {"node_ids": ["d664cb3e-6bb5-4792-ba25-49860df6c13a"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/context_injector.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "22ba7221-ecd2-4f2c-854d-8e92248c568b": {"node_ids": ["9c0bb9f3-68ad-4131-859c-b1bdbeee2ce0"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/run.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8ce3153f-9047-4f88-ad4a-cccfb0a15063": {"node_ids": ["26825a22-74fd-42bb-a7ef-52941c344e53"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/graph_store.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "be04420b-d3a0-473d-90c2-f138dfb87bf8": {"node_ids": ["1e9b83dd-965a-4433-995b-e8ad9e5df2e5"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/semantic_retriever.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "0f994d4d-46ee-4818-a0b3-d7fefeb1e786": {"node_ids": ["2b34de60-1fed-494c-a6af-29ed061d26f3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/metaplanner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "34c7103e-02cb-4843-ad7f-de78e0baffeb": {"node_ids": ["c2014479-5256-459c-9d1d-4785cc68b621"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "700e52d7-7330-4174-bd96-7928b51e86a2": {"node_ids": ["458b5cd4-689b-440e-bb4c-9e19c3a2d4c5"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/admin_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "01eed8f2-3ae7-4874-8c3c-35be85bd47b9": {"node_ids": ["69b726b7-e20b-438f-bea9-5bff7f558095"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_cors.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "cc182959-b317-415c-9c1c-ceeaa1430253": {"node_ids": ["b088f73e-3db0-446d-983f-f6d6125eb1ca"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs_utils.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7f6768d4-2ab4-413a-a8f6-67fa96788f14": {"node_ids": ["618c2382-03af-4979-ac99-d3c0e558aac8"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/logs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "3ea4235d-f7e0-402a-bd81-91275b7b54e0": {"node_ids": ["af8e7e43-37ac-426e-8f44-aa155bc84649"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/structure_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c390b163-1003-4526-b36a-bf9e0a9b58e6": {"node_ids": ["e7163aa2-5c93-4cb4-93fa-c340048e13cb"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/discover_features.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b1187c71-9afd-48fe-98bd-2f4bb72492a5": {"node_ids": ["03945c5a-3954-4b7b-a376-900f639817f0"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/janitor_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "717377a8-6523-47e8-8be8-462768ff93d2": {"node_ids": ["4fb83fee-2883-42b4-8c47-bbddee036470"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/logic_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "dfc27b3f-6c16-41ab-ab7e-72002b633d34": {"node_ids": ["c30390ca-58d5-4636-9ebd-b8d50380dadd"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/mcp_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8e3f21f9-be9b-4acd-bafc-66ff95e3a053": {"node_ids": ["0b6304ab-af6c-4266-8d6b-43e3975e5bcf"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/context_engine.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9721de75-c6c1-4040-a130-7efbd4e3b7c4": {"node_ids": ["62d1e9cd-0da1-4767-8ed8-9f09508718f4"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/parse_file_metadata.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "0bb9738c-e6a8-43bf-af91-aa1c3b5760d7": {"node_ids": ["cead9c57-7750-4f97-a4e9-4a9e0bc0c270"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/temporal_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "bbf34297-c7a9-43ee-b147-a7c42af0f8c9": {"node_ids": ["15ea1835-d244-4289-a869-76b1ad5e4ca5"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/index.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "866bc93b-b49b-4bec-b97d-156405070c7f": {"node_ids": ["bad9f179-f5e0-434b-b9dd-4ef54271e26b"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b3727c53-fc98-45f5-a9fb-972cd26b51af": {"node_ids": ["021fde1e-6e0b-4617-adff-7ad4b9ce441d"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/env_checker.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "60d19c98-1262-4e6c-80db-0c19120d464d": {"node_ids": ["f7ba813b-16c1-4420-a78f-7e32cce1b83e"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/reflection_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f35ddf0a-4e8d-4a55-9bd5-ecf82f1b9aeb": {"node_ids": ["2a8ae901-08bb-4cb6-b91b-b65b92dfd19c"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/sync_google_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "46f4c5d2-36a0-4bf1-b5a2-2f84441b2d7f": {"node_ids": ["307fc2d5-aac1-4f16-b5f8-8cef256da6cd"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/openai_client.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5931455f-0d08-4c91-bb83-7d0d7b14ceb4": {"node_ids": ["b190f598-66cf-4a98-96a2-430b5d9b91f3"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/indexer.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ebe8adf1-9d7d-4871-af0d-a9f53ba9ae61": {"node_ids": ["839daeb2-fa9c-4dae-af95-9e7519331239"], "metadata": {"tier": "project_docs", "file_path": "/app/docs/codex_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c9d7aaae-bc9a-4c73-9d50-346268aa4db8": {"node_ids": ["800c35cf-55b7-4bc5-a072-a19f001936b5"], "metadata": {"file_path": "/app/backend/solark_browser/cookies.json", "file_name": "cookies.json", "file_type": "application/json", "file_size": 2, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9077e178-8f15-44e9-ad9d-975861e37d0c": {"node_ids": ["a977954b-996d-4444-9aa8-d57015cca2d8"], "metadata": {"file_path": "/app/backend/solark_browser/fetch_plant_flow.js", "file_name": "fetch_plant_flow.js", "file_type": "application/javascript", "file_size": 2363, "creation_date": "2025-07-11", "last_modified_date": "2025-07-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "22e58bfe-1fb2-41d2-b690-c1b8ee564428": {"node_ids": ["9cbd0e0a-e1ae-4938-97a6-c135dce6f29d"], "metadata": {"file_path": "/app/backend/solark_browser/fetch_token.js", "file_name": "fetch_token.js", "file_type": "application/javascript", "file_size": 1593, "creation_date": "2025-07-11", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "e12c7cca-8dc3-4d64-8623-e21436403c00": {"node_ids": ["477d3ad6-2ad7-4315-b2d0-05099e47647e"], "metadata": {"file_path": "/app/backend/solark_browser/package.json", "file_name": "package.json", "file_type": "application/json", "file_size": 320, "creation_date": "2025-07-12", "last_modified_date": "2025-07-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1ad10336-bdd3-4a8f-ab34-03a8692683cc": {"node_ids": ["e898b90d-10b8-479c-8e71-7077efc8a39e"], "metadata": {"file_path": "/app/backend/solark_browser/plant_flow.json", "file_name": "plant_flow.json", "file_type": "application/json", "file_size": 496, "creation_date": "2025-07-11", "last_modified_date": "2025-07-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8400a2ac-0dd5-402f-b7a0-0507aaaa2fed": {"node_ids": ["ba805bac-32b7-4106-9baf-afd099676599", "27db908a-e5b7-457c-a455-38cf5eaa2ca4"], "metadata": {"file_path": "/app/backend/solark_browser/poll_and_insert.py", "file_name": "poll_and_insert.py", "file_type": "text/x-python", "file_size": 5491, "creation_date": "2025-07-15", "last_modified_date": "2025-07-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "92efd620-bf7e-4537-9b81-1f8dfc95e8f1": {"node_ids": ["035138a9-fbb0-42d3-8f07-17d61b3e275b"], "metadata": {"file_path": "/app/backend/solark_monitor/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 87, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1": {"node_ids": ["fdb2f2ea-94d7-47cd-8830-b87cc1eefde3", "c37acf98-252e-44ec-968d-864e9e5a95d6", "aca8ae74-c095-4102-8838-d5d22dfdb9fe", "1a2ddcda-b2fd-4281-adca-c3b783c793f4", "e40b1c73-e52a-45c6-9a13-60a6b09e739c", "1a12b08e-97f9-4dd9-a13c-4f5ca695801f", "5edab4fc-99c1-4a16-b7a8-d4b3beff515e", "e793cbfc-e405-4fd3-9e16-310b019fee2e", "79e9c3df-b8fd-475a-a9ad-df427e14657f", "4636ec65-14cc-4314-9eab-eda66d3a9113", "d2be4e48-0769-460c-85cf-39068f32a10b", "7f7ea703-49d6-4625-ac69-72bdea7ece75", "8aac0fe7-b02a-496c-a4de-4481efb2288f"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "609a7723-7cbb-4198-b043-bfd4efe26ae7": {"node_ids": ["3aa3000b-acbf-45b2-a993-9d2e9622893c"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/graham-campbell/result-type/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 904, "creation_date": "2025-07-10", "last_modified_date": "2024-07-20", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5f22111a-9d20-4635-97ce-2ef748506993": {"node_ids": ["533037ab-3fda-44b6-9af9-d53b5581b289", "2ee49449-2def-49fd-b42a-c4499b56d0e8", "70b3becc-2225-445f-ba06-f94d504e8cc5", "51c1e8a0-5951-4463-bbaa-4cc991904b31", "d9aced91-ffd6-46b7-9e1a-c4667231edfd", "08ff3283-e0f4-4ede-b452-6a823125af3a", "368b613d-c4f5-4b96-9264-cb0cdf9b5902", "4b079d8e-1391-4121-8838-9ef4718b83a7", "26dcb355-18fc-46d5-95d4-0fc2d697ff25", "e1179d0f-3370-4b47-a449-ce4f7419e136", "2b3c289b-5ca8-47c5-badb-a1348667e7ec", "d6aaec6c-2ca6-4af0-9150-bb2853f31bb6", "311eacbf-0110-4005-bd0a-c7111291d73f", "833a52c3-70cf-4b5c-b188-1853d9071f9c", "bc32060a-3181-46f9-aa87-1ebcdd37d94f", "4dd43627-0a1e-4496-b07b-776848ca1c83", "0017552c-0793-436d-96e1-3c5efdee073b", "a4fc5142-9cbb-43df-a51a-4b128aaee962", "d10e31c6-3db1-40a5-83a1-75900ecb8596", "0b479a11-278c-47a7-a7fb-77e01ee529f8", "6909c186-e9a6-4da0-98f0-8bc8b5f4bfd4", "2a4dd005-aee4-470e-a168-303b84ea67fb", "cf3aac61-b26d-4041-994d-3c26d8646505", "0e7f2f10-72b9-406a-b41d-2ff641397791", "2bc74048-2e67-4757-bdcf-fbeea2d2a3c1", "8181e022-4203-40cc-8eab-256541a4393b", "6adf27f1-0fbf-426c-977b-65da9180d774"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5": {"node_ids": ["87d56891-1197-46b8-9cf7-b77dc461eb16", "a0f1fd04-4e68-495f-ae95-fd1afb5576bd", "82daa5c7-81c7-4a8b-8993-feadeffe036c", "7f29552f-2fa6-425c-b2db-37a3e570bf30", "46df35c0-582f-43f0-b7fb-0dece7f1ea54", "bdabbe82-6aa6-4faf-b6f5-edaefd9a38a7", "7c539327-0adf-4e25-ae04-cf1ca4df0551", "b2c5f6e0-c579-4ac3-aa46-32e26c979319", "eff232ee-145d-4c04-a46f-3458567d8767", "1d2e3a0d-6317-4791-adbe-8f06694002c3", "a155c5fc-d860-4df1-97bf-b222f835bf33", "2d6e8521-dccd-4ae4-b171-83510eaa4e39", "050a3a2c-5acd-41d0-9cec-3cd69a81e1a2", "4be1b1ed-39f6-4529-a24c-d4bb392953ca", "8fb8d2ed-f17e-4393-b005-ff3049397ab2", "d08c5d0d-5e39-4345-98c3-56ed3bdbc005"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "11ef7807-b134-4d02-b8c4-66e21dc4facf": {"node_ids": ["600c4618-12db-4492-9f3a-fea59e67fe56", "ff55eb6b-664b-44a0-8e1e-b3e6d4cf7b22"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 3868, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "fad0ded2-aa29-424b-87b8-9b44781ad117": {"node_ids": ["ebf8969f-7afc-48b9-8288-2d621c0d609b"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/promises/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 2797, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "bc77d36d-3e81-49b9-b152-a30b13439e1f": {"node_ids": ["287bd5d2-0491-44fb-98a3-3f844aa8177e"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/promises/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1493, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ab1cfa15-11da-4fff-bbdf-a317f3dd904e": {"node_ids": ["82fe0e89-540f-4e62-9e12-b2d1e199fbec", "193c224d-f3bc-4eaa-bd35-ed70fbb56ede", "bab72163-74e4-44dc-93d6-aa0117fa0796", "4e8b9384-8c05-49d7-83ca-723f069413c0", "55e26c71-3d2f-4f58-8cdc-4c66fa53aee4"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a75ba012-e1af-4fcf-950c-5320f85c4c58": {"node_ids": ["d81540d0-0a0c-4c53-ba96-cc1012db90bb"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 2541, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "40f075e9-bf92-4ed0-ad07-16199637e94d": {"node_ids": ["ffb7de70-0a0b-40eb-913e-be81e86d43f4"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/phpoption/phpoption/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1270, "creation_date": "2025-07-10", "last_modified_date": "2024-07-20", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d4f089a7-3a19-4a6c-a6a1-e70a66cc3cbe": {"node_ids": ["adeb366b-0227-436e-993b-55d3a6c7c927"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-client/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 505, "creation_date": "2025-07-10", "last_modified_date": "2023-09-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9a27e8e8-bca7-4ed2-89d4-0dca44fc207a": {"node_ids": ["62481a49-c4b1-4c91-9c00-190413aa5b5a"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-client/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 727, "creation_date": "2025-07-10", "last_modified_date": "2023-09-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "cde23128-cad9-4585-91c5-c180d025d187": {"node_ids": ["6fbbee5e-21e9-4a66-ae10-a3db4be020cf"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-factory/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 799, "creation_date": "2025-07-10", "last_modified_date": "2024-04-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "30d6008a-7156-423a-8089-d09cf91992b3": {"node_ids": ["dfde2677-aaf9-43f7-9b0d-a1f62642ab49"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 1075, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2b373b16-a535-48b8-8264-2db1afad22c6": {"node_ids": ["f7b0304f-215d-44cd-bc38-06cbd4882adb"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 627, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a0704ccb-bad2-4643-8ce5-b0010d58b241": {"node_ids": ["534f2ef3-ef07-4a63-8d33-523c740c3dba", "935c5349-65e3-41d8-b343-b6d7bb963da4", "f8b09eb5-4323-474c-bdde-788e3fa23604"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b380de43-9ae8-4630-8530-5fba9b332bd4": {"node_ids": ["8de0a06b-fcf6-47df-a19d-cea907b5c09c", "ddb1b6b4-58a5-4512-8a32-72fdb3ee1b49"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Usage.md", "file_name": "PSR7-Usage.md", "file_size": 5492, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "24315215-37ad-4481-a949-ada47ebefb4f": {"node_ids": ["f01ae7c7-31c2-497b-b803-e1667724ec1a"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/ralouphie/getallheaders/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 465, "creation_date": "2025-07-10", "last_modified_date": "2019-03-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "4da0f121-ba17-4815-a304-da46468d3fa8": {"node_ids": ["8e2425c4-545b-48d4-97fb-0f329683a554"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/deprecation-contracts/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 157, "creation_date": "2025-07-10", "last_modified_date": "2024-09-25", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "41e6c757-76f7-49e2-ac82-0c9af7a47c8a": {"node_ids": ["ebb55676-d16c-4bde-b52c-ae310754fbd4"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/deprecation-contracts/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 841, "creation_date": "2025-07-10", "last_modified_date": "2024-09-25", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7e582451-665e-4d45-bc38-c3c07ad7c817": {"node_ids": ["91a71609-be8a-4d92-8921-76a68b4c19b8"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-ctype/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 961, "creation_date": "2025-07-10", "last_modified_date": "2024-09-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a39f6f2a-ab49-405c-979d-54346bbc899b": {"node_ids": ["e2c08bf5-54c0-490b-b597-d8437016241a"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-mbstring/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1010, "creation_date": "2025-07-10", "last_modified_date": "2024-12-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "829932e1-5c51-4abc-99f1-3b5d627126e3": {"node_ids": ["ebd638d8-39bd-4b98-a5ce-161e1ec352e4"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-php80/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1013, "creation_date": "2025-07-10", "last_modified_date": "2025-01-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "dd4bd519-6f83-44cb-8756-3b2181bacd03": {"node_ids": ["b1a77881-22f7-41f6-b757-d3451bf621e4"], "metadata": {"file_path": "/app/backend/solark_monitor/vendor/vlucas/phpdotenv/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1659, "creation_date": "2025-07-10", "last_modified_date": "2025-04-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d45e242f-f10f-4b41-836e-4e686b6932d7": {"node_ids": ["7fe13b48-4c77-4dff-9dc4-9f53f8f5c907"], "metadata": {"file_path": "/app/frontend/components.json", "file_name": "components.json", "file_type": "application/json", "file_size": 428, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "53df26b3-b951-4e0e-a474-a0037f26f89d": {"node_ids": ["e1b58b9b-a1ed-4347-9948-d44c87705068"], "metadata": {"file_path": "/app/frontend/next-env.d.ts", "file_name": "next-env.d.ts", "file_size": 211, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "754fbf18-fa85-49ef-b444-016910f9425b": {"node_ids": ["26fe8ad1-98b9-45f3-a037-c7889ce99d22"], "metadata": {"file_path": "/app/frontend/next.config.ts", "file_name": "next.config.ts", "file_size": 133, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "bf84fca2-df74-4029-b51c-89d2d44816f1": {"node_ids": ["857ecffb-85c2-4312-83e3-614077a63b06"], "metadata": {"file_path": "/app/frontend/package.json", "file_name": "package.json", "file_type": "application/json", "file_size": 1299, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "4296355d-479c-44bb-b60d-483d45c1d4b1": {"node_ids": ["68d0c78c-aee2-4843-aea2-d429776ba807"], "metadata": {"file_path": "/app/frontend/postcss.config.js", "file_name": "postcss.config.js", "file_type": "application/javascript", "file_size": 121, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "37cb8db6-4e94-4b2d-8f21-9bc60f5ef623": {"node_ids": ["da82d75f-7075-46b2-b121-6b0422f7971f"], "metadata": {"file_path": "/app/frontend/src/app/MermaidGraph/page.tsx", "file_name": "page.tsx", "file_size": 398, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c8f5951a-3b9e-42c0-97c4-b9ed09806a77": {"node_ids": ["f7cb2ce6-a029-4338-9725-4151b1d66f52"], "metadata": {"file_path": "/app/frontend/src/app/action-queue/page.tsx", "file_name": "page.tsx", "file_size": 320, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f70506b9-168d-4e5f-b798-a189da9c9126": {"node_ids": ["4c576ad4-e1b6-47e7-a618-e6e8f343a992"], "metadata": {"file_path": "/app/frontend/src/app/api/docs/list/route.ts", "file_name": "route.ts", "file_size": 215, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "41d8555e-3847-4b7e-aedd-122714b9c269": {"node_ids": ["9a012e7a-4f90-45bc-a7e8-412a22f72ce1"], "metadata": {"file_path": "/app/frontend/src/app/api/docs/view/route.ts", "file_name": "route.ts", "file_size": 358, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7c83fa77-fd44-4139-990b-9c2f280426b6": {"node_ids": ["cb7ea229-7540-43a3-81c2-1fda97512a9b"], "metadata": {"file_path": "/app/frontend/src/app/api/kb/search/route.ts", "file_name": "route.ts", "file_size": 389, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8a3c3712-f8bf-4de3-878b-3f60b204b7cb": {"node_ids": ["1b0915ec-f18b-45b6-ad7e-6d22a6100201"], "metadata": {"file_path": "/app/frontend/src/app/api/status/summary/route.ts", "file_name": "route.ts", "file_size": 220, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a75282ec-5426-4705-b4a3-cf8eb8ffca9c": {"node_ids": ["6c58dc28-c6c9-467f-8dcf-edbf2b358d85", "9647adc1-b8e7-4220-8332-3305114c2bf6"], "metadata": {"file_path": "/app/frontend/src/app/ask/page.tsx", "file_name": "page.tsx", "file_size": 5898, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a952629f-3554-4cfb-a3a9-7f3fc6cd4617": {"node_ids": ["e9e97799-4ae8-48fc-b84c-772509651d81"], "metadata": {"file_path": "/app/frontend/src/app/audit/page.tsx", "file_name": "page.tsx", "file_size": 261, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a2287776-760c-4750-9d54-8e34fcb7790f": {"node_ids": ["e45ffb0a-48d6-4dbb-8bc7-80fdf33a63b5"], "metadata": {"file_path": "/app/frontend/src/app/codex/page.tsx", "file_name": "page.tsx", "file_size": 3861, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1f52bb5e-5527-4ead-917e-3698d69e883d": {"node_ids": ["9b265d65-99a5-4a3d-9583-8f45490b7217"], "metadata": {"file_path": "/app/frontend/src/app/control/page.tsx", "file_name": "page.tsx", "file_size": 893, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "daccb6a2-084c-40fa-8805-cbe98cf053d8": {"node_ids": ["705e9116-db44-4ec7-a7f3-51b890687cfa"], "metadata": {"file_path": "/app/frontend/src/app/dashboard/page.tsx", "file_name": "page.tsx", "file_size": 173, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d357c4c3-f764-487e-b32a-62f89a2c5e77": {"node_ids": ["582e57ca-774b-447b-9ba3-9bde4ae890ea"], "metadata": {"file_path": "/app/frontend/src/app/docs/page.tsx", "file_name": "page.tsx", "file_size": 217, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "286c068c-ea4f-4b1d-840b-08ba53e1c421": {"node_ids": ["074565ed-1b0b-4d34-9835-7e188b79e9e9"], "metadata": {"file_path": "/app/frontend/src/app/email/page.tsx", "file_name": "page.tsx", "file_size": 253, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9f6a7c1d-60f7-4ae5-9db2-823ffccc1c28": {"node_ids": ["4c374582-e34b-44d8-9b20-b74f9a964d80"], "metadata": {"file_path": "/app/frontend/src/app/gmail-ops/page.tsx", "file_name": "page.tsx", "file_size": 340, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c6f923eb-d868-409b-89b9-ac2a1a11f3b7": {"node_ids": ["1cc10007-0f8b-4eb2-8a2b-a51e62508544"], "metadata": {"file_path": "/app/frontend/src/app/janitor/page.tsx", "file_name": "page.tsx", "file_size": 184, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "0a4b441a-a6cb-46cc-aa10-ee91d2fd9913": {"node_ids": ["3642bf29-c47f-4202-8a0c-f86ad557859a"], "metadata": {"file_path": "/app/frontend/src/app/layout.tsx", "file_name": "layout.tsx", "file_size": 514, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "17719e89-ab8c-499c-9748-9edf49a82a5c": {"node_ids": ["153f053c-5af8-491d-9415-4e68d74c7859"], "metadata": {"file_path": "/app/frontend/src/app/logs/page.tsx", "file_name": "page.tsx", "file_size": 248, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d1bfe65c-28e3-4992-bffb-5825640cdd08": {"node_ids": ["44837b55-578d-4fe4-9f75-093c8804c91f"], "metadata": {"file_path": "/app/frontend/src/app/page.tsx", "file_name": "page.tsx", "file_size": 1969, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8a9ea1a9-34c1-43c7-8e57-9aa932d8506d": {"node_ids": ["d24367d1-aec8-4706-8eb4-b3b736961c95"], "metadata": {"file_path": "/app/frontend/src/app/planner/page.tsx", "file_name": "page.tsx", "file_size": 171, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5fa920a0-50c1-4c4b-8e16-b150b537936b": {"node_ids": ["f356be95-84bb-4af2-b20d-5bb84072c937"], "metadata": {"file_path": "/app/frontend/src/app/search/page.tsx", "file_name": "page.tsx", "file_size": 248, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9377a47f-46c2-4867-8316-add61c6da567": {"node_ids": ["6d622a73-65bf-487a-aacf-0135940bd173"], "metadata": {"file_path": "/app/frontend/src/app/settings/page.tsx", "file_name": "page.tsx", "file_size": 353, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "272e87a0-91e2-432e-aae9-b5fb9ffe7444": {"node_ids": ["8061263a-047e-468e-a339-50a86d1f0cdf"], "metadata": {"file_path": "/app/frontend/src/app/status/page.tsx", "file_name": "page.tsx", "file_size": 284, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "84c8f2e1-1494-4ff3-aef9-de480f737563": {"node_ids": ["66d3d858-719f-4aa6-b017-c999939770f3", "b248f7f2-e3ac-4be8-810c-8d93c5d8e1ed", "01d94ed4-6737-4fd4-a45e-82b8dc1eb208", "6a7e29fe-76af-40a6-92f3-1d6352c4db37"], "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "638fe33f-050b-4e62-905f-e229dc0772e1": {"node_ids": ["3264aed3-bc99-4b69-b264-7350e2945113"], "metadata": {"file_path": "/app/frontend/src/components/AskAgent/ChatMessage.tsx", "file_name": "ChatMessage.tsx", "file_size": 908, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "6acff44f-e035-4df2-a482-2f37a1d52800": {"node_ids": ["9628fd2d-2c1c-4918-8454-6eb1a3d27961"], "metadata": {"file_path": "/app/frontend/src/components/AskAgent/ChatWindow.tsx", "file_name": "ChatWindow.tsx", "file_size": 1669, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "6f132efe-0260-4c0e-b318-0ddea78861bd": {"node_ids": ["182f69c3-30b2-4558-804d-e9a8e72d710d"], "metadata": {"file_path": "/app/frontend/src/components/AskAgent/InputBar.tsx", "file_name": "InputBar.tsx", "file_size": 1460, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "512b20ea-86b8-4126-8a8d-896010f5867b": {"node_ids": ["fd97a52b-11e4-4d03-8396-32f3ab0129dc"], "metadata": {"file_path": "/app/frontend/src/components/AskAgent/hooks.ts", "file_name": "hooks.ts", "file_size": 3634, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ff1cbba5-90d0-4f2c-883a-b0c47300b208": {"node_ids": ["cb400dcb-02fc-40b4-a390-e138996fb6e2", "ded4df9c-1c44-49c0-a7b5-a8916d7d6da0"], "metadata": {"file_path": "/app/frontend/src/components/AskAgent/useAskEcho.ts", "file_name": "useAskEcho.ts", "file_size": 5907, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "74181fcf-6715-451a-9f01-70dad7b3f492": {"node_ids": ["162ef16d-c319-4da0-bf27-8c040fbc560f", "681cd387-4e45-40e5-9efa-fada0d9a122d", "d698cddc-4039-4d4b-a368-f17a2007921b", "da09405c-05b3-433e-96c0-fd1fd0ca72d2", "3d4a843f-4b2a-4d1b-93d7-9ced81e2c746"], "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ed177ef1-de4e-4ba0-a581-b2d09a06d946": {"node_ids": ["76ad0a4d-dd58-4505-a59b-1400c63dd820"], "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexEditor.tsx", "file_name": "CodexEditor.tsx", "file_size": 842, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7be35d74-13cc-43a1-8339-7541afdfc08a": {"node_ids": ["23a940da-7769-4ca8-a007-66de5637e5ca"], "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexPatchView.tsx", "file_name": "CodexPatchView.tsx", "file_size": 1321, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "bba0e0b8-7ee4-4ce0-be9b-e5e3e946d0bd": {"node_ids": ["afde9662-254f-4aa8-89d4-cfcc965ccbae"], "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexPromptBar.tsx", "file_name": "CodexPromptBar.tsx", "file_size": 1423, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "212bb3ac-6ae0-4466-9ae5-42c5787b7cc8": {"node_ids": ["6480e81f-fb2a-48ee-94cf-ddc46c5bf5ee"], "metadata": {"file_path": "/app/frontend/src/components/Codex/index.ts", "file_name": "index.ts", "file_size": 277, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7cc742d0-c5e5-4646-8a49-2b9f3a1e07fe": {"node_ids": ["c7b59a9a-5f89-47ff-8c2f-469b06d25f28"], "metadata": {"file_path": "/app/frontend/src/components/Codex/page.tsx", "file_name": "page.tsx", "file_size": 2108, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "27a6dbac-d228-4ba6-a9be-26e884cd8356": {"node_ids": ["601534df-c3a8-4a8d-b300-377886a3fe68", "ee518652-8d33-45e3-95fa-f07c71f23f7a"], "metadata": {"file_path": "/app/frontend/src/components/DocsSyncPanel.tsx", "file_name": "DocsSyncPanel.tsx", "file_size": 5149, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "6445f7bb-e68d-43eb-bc9d-de57b1131ff1": {"node_ids": ["871a6ede-7e19-4512-96d7-e5ac9020f274", "c607b158-7956-4e3e-89f1-b3865c9423e6", "9138d686-bd6e-4912-952e-49a9ae95a89e"], "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5d579761-247a-4833-aa30-4aa31ff4412f": {"node_ids": ["d3632c0a-6cc4-4d53-9190-71a2ed4d3329"], "metadata": {"file_path": "/app/frontend/src/components/GmailOps/GmailOpsPanel.tsx", "file_name": "GmailOpsPanel.tsx", "file_size": 3509, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c6803de6-5ee4-4125-8431-3340f4931143": {"node_ids": ["8c8ebcdf-a579-47be-bf10-688d6c29ccae", "35650091-39cb-4623-b66a-c600f4ba4834"], "metadata": {"file_path": "/app/frontend/src/components/LogsPanel/LogsPanel.tsx", "file_name": "LogsPanel.tsx", "file_size": 7092, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "4af4f50f-370c-4bd3-b80c-48029bd21a1c": {"node_ids": ["96a3cf01-2bb1-44e2-b517-6d4ac7461b47", "c379f768-4f68-4b85-8221-bd49ed132db5", "05cb4718-5266-46b0-af81-3502bcd51122", "23225086-f91f-4f78-b618-445c606ce599", "ac98af0d-f350-4f9b-9dc7-7eff049e9f7f"], "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f25cf645-70eb-4cd6-8478-42a8b1c9d2cc": {"node_ids": ["60cfc60e-936f-4610-8fed-a074816c04ca"], "metadata": {"file_path": "/app/frontend/src/components/MermaidGraph.tsx", "file_name": "MermaidGraph.tsx", "file_size": 408, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "416a7264-956d-48d6-9fb1-d3c068366ec9": {"node_ids": ["3c76ff70-82d7-4738-a28a-460e5749a1f1"], "metadata": {"file_path": "/app/frontend/src/components/SafeMarkdown.tsx", "file_name": "SafeMarkdown.tsx", "file_size": 3365, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "bbb5ff5f-c763-4222-ae30-a4a8fec94cc2": {"node_ids": ["588893be-708d-445f-9f5b-14d31392b654", "b36dafba-90e3-4c28-b0c7-738c5f487505"], "metadata": {"file_path": "/app/frontend/src/components/SearchPanel.tsx", "file_name": "SearchPanel.tsx", "file_size": 4576, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "7ccbcf9a-aa7e-4c84-bd6b-f77c189cbc6e": {"node_ids": ["3de37428-c55c-457d-9e83-f23b72d95555"], "metadata": {"file_path": "/app/frontend/src/components/Sidebar/Sidebar.tsx", "file_name": "Sidebar.tsx", "file_size": 1657, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "abdd1972-b2e2-48b6-81f2-53eafa90f318": {"node_ids": ["4fb1ab5c-ff78-48a6-adc8-ad7c9268e72c"], "metadata": {"file_path": "/app/frontend/src/components/StatusPanel.tsx", "file_name": "StatusPanel.tsx", "file_size": 4399, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "428a3c91-498d-4ab4-95c7-ef6be02f473f": {"node_ids": ["f2184771-2cad-4ab6-bd53-54f536f4cc28"], "metadata": {"file_path": "/app/frontend/src/components/dashboard/Dashboard.stories.tsx", "file_name": "Dashboard.stories.tsx", "file_size": 152, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a942bc55-b158-43fd-b032-721672aa0a8c": {"node_ids": ["0cb652fa-530d-40ef-ab53-1b5e56383d41"], "metadata": {"file_path": "/app/frontend/src/components/dashboard/Dashboard.tsx", "file_name": "Dashboard.tsx", "file_size": 3449, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "563794c6-00e2-4f3d-aa0c-af991bdc4558": {"node_ids": ["55f6cbd0-d231-4f21-b3db-f277dc3822f1"], "metadata": {"file_path": "/app/frontend/src/components/index.ts", "file_name": "index.ts", "file_size": 717, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "65d4c4cf-dee6-459f-9c8a-078b29106ce1": {"node_ids": ["42b32e2e-5958-4943-b0b7-94fe672c5df0"], "metadata": {"file_path": "/app/frontend/src/components/ui/AskAgent/AskAgent.tsx", "file_name": "AskAgent.tsx", "file_size": 1644, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2e38772e-12bc-46d7-8d86-18b5c5aedbdd": {"node_ids": ["809de6fd-3e9e-4678-9888-568d63099cfe"], "metadata": {"file_path": "/app/frontend/src/components/ui/badge.tsx", "file_name": "badge.tsx", "file_size": 882, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ccf087e4-9ffe-47ed-900f-ce34e42f410b": {"node_ids": ["293cff5d-33e0-4d56-8684-84a7da2ed30a"], "metadata": {"file_path": "/app/frontend/src/components/ui/button.tsx", "file_name": "button.tsx", "file_size": 2123, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "33a1398b-c0fc-4961-9a1d-3fe6dda49492": {"node_ids": ["bc90d625-2307-40fc-91c6-0e0f54e59955"], "metadata": {"file_path": "/app/frontend/src/components/ui/card.tsx", "file_name": "card.tsx", "file_size": 1989, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "74b5bfe5-2a9e-4b96-ad23-eed88a33b4f0": {"node_ids": ["a7946a32-1459-41da-91d5-a28b4d9eb043"], "metadata": {"file_path": "/app/frontend/src/components/ui/input.tsx", "file_name": "input.tsx", "file_size": 967, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "e8c403c1-b4f9-4198-bf82-f7f6560fbdc5": {"node_ids": ["4c532350-13b1-4bd2-8cfc-04f27c63855c"], "metadata": {"file_path": "/app/frontend/src/components/ui/label.tsx", "file_name": "label.tsx", "file_size": 611, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "3f474d81-0cd6-4ba8-a0a0-528253f57c85": {"node_ids": ["a9171cbc-7957-410b-9703-3559811a7c1c"], "metadata": {"file_path": "/app/frontend/src/components/ui/progress.tsx", "file_name": "progress.tsx", "file_size": 683, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b3a19d06-4684-4fa0-8ac0-739358908416": {"node_ids": ["2f694c50-49a1-40a7-b558-12f7e3e510b6"], "metadata": {"file_path": "/app/frontend/src/components/ui/textarea.tsx", "file_name": "textarea.tsx", "file_size": 759, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "158ad2fb-63cb-45f4-aad6-034415c6d5f6": {"node_ids": ["67109efd-410a-4834-8c73-7332d46026ed"], "metadata": {"file_path": "/app/frontend/src/lib/api.ts", "file_name": "api.ts", "file_size": 278, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "25c02450-2509-495e-a5d7-49ec897c7e2d": {"node_ids": ["de723bbf-86ed-4e56-9f9b-b5a83b25e656"], "metadata": {"file_path": "/app/frontend/src/lib/toMDString.ts", "file_name": "toMDString.ts", "file_size": 539, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "771dc622-6b0b-4eca-8abf-06c1a2b0f84a": {"node_ids": ["37ffab05-330c-4b92-b3b1-b54fdf29c5c0"], "metadata": {"file_path": "/app/frontend/src/lib/utils.ts", "file_name": "utils.ts", "file_size": 273, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "819ced54-a80a-4ae0-905e-9f5acf7a9e00": {"node_ids": ["4a1a20a6-6da1-4d59-966b-21728bfa5be1"], "metadata": {"file_path": "/app/frontend/src/types/react-syntax-highlighter.d.ts", "file_name": "react-syntax-highlighter.d.ts", "file_size": 317, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "32e424bb-9646-4ffb-a4b5-cff32bdbdcf6": {"node_ids": ["5e401298-50ba-4fc7-b0e4-d2b919ff7e81", "fc59dcbc-afc6-494b-a215-e64327404c14"], "metadata": {"file_path": "/app/frontend/sync/sync_google_docs.py", "file_name": "sync_google_docs.py", "file_type": "text/x-python", "file_size": 5308, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "0e0aa969-d8c2-4bb6-a135-e08f0700bc79": {"node_ids": ["6716489e-95d6-4170-af2f-1839a296d8bb"], "metadata": {"file_path": "/app/frontend/tailwind.config.js", "file_name": "tailwind.config.js", "file_type": "application/javascript", "file_size": 923, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2d351948-b3e0-4286-9043-ee86fb4847c8": {"node_ids": ["7c31bc10-29eb-41b5-8d8b-aaf60c8ab9a1"], "metadata": {"file_path": "/app/frontend/types/next-auth.d.ts", "file_name": "next-auth.d.ts", "file_size": 655, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "8e5e00f7-ba30-49b7-be3e-b49b88145958": {"node_ids": ["07b60809-d644-4b27-81e5-65a600f51d8d"], "metadata": {"file_path": "/app/frontend/vitest.config.ts", "file_name": "vitest.config.ts", "file_size": 629, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2e33b2ab-f387-432c-9938-70b7c8eab311": {"node_ids": ["6b53868a-8826-49c4-a063-f7fbc5ef5136"], "metadata": {"file_path": "/app/frontend/vitest.shims.d.ts", "file_name": "vitest.shims.d.ts", "file_size": 62, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "e4727b0c-6303-499a-98e5-1a383d2df8e6": {"node_ids": ["6323901f-858e-4c02-ac2e-320c5d430842"], "metadata": {"file_path": "/app/services/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "0d9aa071-f457-4fdc-be1a-1831222b8325": {"node_ids": ["5ceee623-db21-447f-b8c5-9b77a46ba385"], "metadata": {"file_path": "/app/services/_init_.py", "file_name": "_init_.py", "file_type": "text/x-python", "file_size": 98, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "9b0e2d30-4ee0-42ab-b017-f31e95d938a8": {"node_ids": ["f1c5df75-5b78-4fd5-8607-9e5ff21befcc"], "metadata": {"file_path": "/app/services/action_queue.py", "file_name": "action_queue.py", "file_type": "text/x-python", "file_size": 670, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d5957cd9-995d-4fe2-9eb9-63374b176813": {"node_ids": ["ad729b16-65a1-462d-bccf-a08f1b3b501b", "c20fc30e-9a84-4b9f-b4eb-805386bc41ea", "8f335690-1924-44a9-87d9-2c92779df3bd", "5b714d03-e694-470f-9d8a-75768212d3c0"], "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "01e6acbd-91fd-42fc-a97d-3f52f428f928": {"node_ids": ["cd9bad05-68aa-4f13-afc8-83c704d9909b"], "metadata": {"file_path": "/app/services/config.py", "file_name": "config.py", "file_type": "text/x-python", "file_size": 541, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1dae8122-396a-4dd2-b7e7-b3f7d21d3842": {"node_ids": ["d0d5b2b0-9537-4599-9b01-0e81b00c5a57"], "metadata": {"file_path": "/app/services/context_engine.py", "file_name": "context_engine.py", "file_type": "text/x-python", "file_size": 1582, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "c2122b8c-e1ab-42cd-9102-529fb328176f": {"node_ids": ["617fa82e-528f-4ecb-8ca2-1a40f4d8d4ac", "586e7e8a-26e6-482c-813a-8b4a7a1c55d5", "b6d96529-ab8b-44cf-b035-fbdf61d0fd71"], "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2760374a-0143-4162-b121-a16ae2a93df7": {"node_ids": ["3f82252e-2254-4a28-9f51-a30a77aaecfe"], "metadata": {"file_path": "/app/services/delete_embeddings.py", "file_name": "delete_embeddings.py", "file_type": "text/x-python", "file_size": 3181, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a914b9c7-c65e-46c2-8f0b-aa056eafa77c": {"node_ids": ["0b62e877-6092-49c9-97b5-56a6a14dc64e"], "metadata": {"file_path": "/app/services/docs_utils.py", "file_name": "docs_utils.py", "file_type": "text/x-python", "file_size": 4555, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ba59e68c-b4ff-42e8-ab62-904044e23810": {"node_ids": ["5b6f04fe-f2e2-4827-8981-f8d1943d6196"], "metadata": {"file_path": "/app/services/env_checker.py", "file_name": "env_checker.py", "file_type": "text/x-python", "file_size": 2122, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "68be0038-76e1-4592-ad76-feb0bc25c791": {"node_ids": ["31311ca4-dcd8-444a-bc86-27a659f5b5ac", "36ef8216-5298-4380-a294-f5a98bdea665"], "metadata": {"file_path": "/app/services/github_actions.py", "file_name": "github_actions.py", "file_type": "text/x-python", "file_size": 6443, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ff311b0e-81c4-46a6-8716-712f923fcafa": {"node_ids": ["1a131d8f-cbd7-4e88-9ad4-0ec0dc5cf230"], "metadata": {"file_path": "/app/services/gmail.py", "file_name": "gmail.py", "file_type": "text/x-python", "file_size": 3679, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "2788a7fb-0c13-4940-bcf4-00f8e667e10d": {"node_ids": ["3ca65b70-9464-424e-a780-0f488a7da7c0"], "metadata": {"file_path": "/app/services/google.py", "file_name": "google.py", "file_type": "text/x-python", "file_size": 1902, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "909dd98e-0694-4459-a1a5-14ffbfe6584a": {"node_ids": ["1b9d0abd-10da-4f73-b0c5-fc81edd78e3d", "acc4f59b-003b-4ebc-80bf-58f2b77ff254"], "metadata": {"file_path": "/app/services/google_docs_sync.py", "file_name": "google_docs_sync.py", "file_type": "text/x-python", "file_size": 6379, "creation_date": "2025-08-11", "last_modified_date": "2025-08-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1b794e97-6d50-46cd-ad00-1c9fc2edee80": {"node_ids": ["041b41c1-5a0a-438d-bb1a-b11f1b9e4ca5"], "metadata": {"file_path": "/app/services/graph.py", "file_name": "graph.py", "file_type": "text/x-python", "file_size": 3857, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d3698f2b-197f-4b44-9f74-afadd30b6ca3": {"node_ids": ["c9130195-bee9-4067-bf3c-51a6e70c2a2d", "5eff4ab7-a96d-46aa-91d2-719274fdee2b"], "metadata": {"file_path": "/app/services/indexer.py", "file_name": "indexer.py", "file_type": "text/x-python", "file_size": 7719, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d9c218b8-2469-46aa-80cb-1a2de5ffc38b": {"node_ids": ["1176edad-bb91-4075-9762-2a0ac70355d4", "328c48b9-dca0-4348-9524-a3a84eb56146", "98116255-8c8e-497b-8e49-1cc5077b841a", "b170668e-3ac5-45e1-b447-9dfa31c91eee", "344c4d54-81ff-438d-8ea6-e15cb4bd7428"], "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "e8f2fd47-aa00-4e98-b2c9-e19ba9fe6cc5": {"node_ids": ["e99b5dc3-1c82-43fb-a29b-2ab9d1020e04"], "metadata": {"file_path": "/app/services/logger.py", "file_name": "logger.py", "file_type": "text/x-python", "file_size": 1302, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "fd14f87f-0312-4d2c-b90f-55dbc54df855": {"node_ids": ["73049401-6879-4776-9960-1b650fa33b9d"], "metadata": {"file_path": "/app/services/logs.py", "file_name": "logs.py", "file_type": "text/x-python", "file_size": 2533, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a02b3d32-5e53-46e4-bd12-3e64f02dc01d": {"node_ids": ["4b7295a8-08e2-485c-bd36-e6d667b6ad89"], "metadata": {"file_path": "/app/services/memory.py", "file_name": "memory.py", "file_type": "text/x-python", "file_size": 2530, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "b5dfcd96-7560-4c64-8d7b-eb37bcfb251b": {"node_ids": ["be0a21e4-92d8-4cc7-9b30-d4d8e8736b7e"], "metadata": {"file_path": "/app/services/neo4j_driver.py", "file_name": "neo4j_driver.py", "file_type": "text/x-python", "file_size": 2764, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "59b1af06-1a16-42b9-b599-4bb7b62dcc41": {"node_ids": ["d07314e8-e784-46df-926e-dc8591b82d1d"], "metadata": {"file_path": "/app/services/queue.py", "file_name": "queue.py", "file_type": "text/x-python", "file_size": 867, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "fd4e44fa-6c6b-4cc1-a168-a755fd12cacd": {"node_ids": ["bd81ef25-52d1-4fd7-8fac-d540698dea85"], "metadata": {"file_path": "/app/services/semantic_retriever.py", "file_name": "semantic_retriever.py", "file_type": "text/x-python", "file_size": 2138, "creation_date": "2025-07-13", "last_modified_date": "2025-07-13", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "eab75e70-88b5-4292-93c5-62ca8097f72e": {"node_ids": ["243e53fb-718c-46c6-847b-fdc198e3e897"], "metadata": {"file_path": "/app/services/settings.py", "file_name": "settings.py", "file_type": "text/x-python", "file_size": 1564, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "35bff56c-aa2c-471f-ac7e-38b11f6e9623": {"node_ids": ["352e50bd-4041-43e6-baba-ad7f3182fda5"], "metadata": {"file_path": "/app/services/summarize_memory.py", "file_name": "summarize_memory.py", "file_type": "text/x-python", "file_size": 1492, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "839cf95f-3d0c-4f49-914e-146ce49a500a": {"node_ids": ["4045acca-7c7c-4c8e-870b-59c95effb7ab"], "metadata": {"file_path": "/app/routes/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "370f91a2-e6c6-44fd-bb00-c3e402b480ac": {"node_ids": ["745196d7-0177-4262-a579-ceb0c2fed024", "aca7aa55-e0fd-4bbf-91e4-26b64c82075a"], "metadata": {"file_path": "/app/routes/admin.py", "file_name": "admin.py", "file_type": "text/x-python", "file_size": 8127, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "d9f1599b-c6df-4a72-93f6-553de0f14938": {"node_ids": ["22b01e02-8219-4cab-b88e-69b270b6f690"], "metadata": {"file_path": "/app/routes/admin_routes.py", "file_name": "admin_routes.py", "file_type": "text/x-python", "file_size": 1415, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "3259b3ea-190f-4370-b8ca-a2bf6099ee91": {"node_ids": ["5e225d9b-4bc3-4302-8888-3f797afc3788", "6aa4aa57-3a80-4e79-a9e2-6c5484435d57"], "metadata": {"file_path": "/app/routes/ask.py", "file_name": "ask.py", "file_type": "text/x-python", "file_size": 8320, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "91ae219a-7b06-4859-851a-d194168f8f0a": {"node_ids": ["2426f942-d8f6-4210-b8c0-0ff09cf456c3"], "metadata": {"file_path": "/app/routes/codex.py", "file_name": "codex.py", "file_type": "text/x-python", "file_size": 2675, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "1589627b-e286-468c-8683-b722866fdfac": {"node_ids": ["98931f20-960f-46f7-b393-a6ed8a3f11b5", "45a23438-9e4a-4b1f-a48f-c0da4db3cd7f"], "metadata": {"file_path": "/app/routes/context.py", "file_name": "context.py", "file_type": "text/x-python", "file_size": 4834, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "550ab989-7266-4ba3-8f7d-fb3997604359": {"node_ids": ["860fd782-3638-4791-8108-eca938f081f2", "c1edf92d-c4a3-41fc-a231-937043823c81", "7167263b-9f15-479f-a18d-aa21af50d846"], "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f2ac2c15-b346-4f7b-86c3-7c6727516673": {"node_ids": ["41d34ca6-51d4-40bb-80ac-a91af2217051"], "metadata": {"file_path": "/app/routes/debug.py", "file_name": "debug.py", "file_type": "text/x-python", "file_size": 1071, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "43d94c9d-c438-4918-bc57-d6203464af11": {"node_ids": ["eb11256f-18d9-4018-bef0-cc91242f353e", "871d8e56-f95a-4e35-ad16-3821faf655ce"], "metadata": {"file_path": "/app/routes/docs.py", "file_name": "docs.py", "file_type": "text/x-python", "file_size": 8925, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "0aa5f664-d604-41b9-835b-9e67e02c9ebd": {"node_ids": ["01450b42-b296-465e-b688-1cc41f6b3ee4"], "metadata": {"file_path": "/app/routes/embeddings.py", "file_name": "embeddings.py", "file_type": "text/x-python", "file_size": 2419, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "dc80056d-41f7-4254-85f4-ac621240a508": {"node_ids": ["e743fd2f-ef2a-4974-ace7-3763fba29dd0", "a3a95083-8439-4c5b-b7d7-4c20691681c7"], "metadata": {"file_path": "/app/routes/github_proxy.py", "file_name": "github_proxy.py", "file_type": "text/x-python", "file_size": 4653, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "407114f8-4297-4934-82cc-5f0b35ff681f": {"node_ids": ["950bdf37-0955-44d2-af82-fe85d8e153d5"], "metadata": {"file_path": "/app/routes/index.py", "file_name": "index.py", "file_type": "text/x-python", "file_size": 1998, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "5771e42a-0ac9-4d0e-b6a4-5fd3a83abe82": {"node_ids": ["f8c3d138-5159-4cf0-9fb9-f797963d2f4d"], "metadata": {"file_path": "/app/routes/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 3771, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "fd493bb4-7905-416e-8e72-977ac426fdb0": {"node_ids": ["da0ccd92-d0f6-44d7-92ae-bc1fba68b199"], "metadata": {"file_path": "/app/routes/logs.py", "file_name": "logs.py", "file_type": "text/x-python", "file_size": 1009, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "f036ec8d-e692-48df-a0eb-15ee8582f38b": {"node_ids": ["00a2ef53-7e13-4a12-b790-1fb9fb5b5aac"], "metadata": {"file_path": "/app/routes/logs_sessions.py", "file_name": "logs_sessions.py", "file_type": "text/x-python", "file_size": 1351, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "34842591-2885-45ca-a1d7-4fceeacd1e58": {"node_ids": ["7cad7f7d-8d70-4104-8374-179c517d60a2"], "metadata": {"file_path": "/app/routes/mcp.py", "file_name": "mcp.py", "file_type": "text/x-python", "file_size": 2311, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "cfef4dce-12aa-413e-8964-73fc842ec310": {"node_ids": ["aea18028-5e7f-44f2-b3fa-fe3df1795835", "3be98f36-17e8-4e64-9ebd-70d8938cf539"], "metadata": {"file_path": "/app/routes/oauth.py", "file_name": "oauth.py", "file_type": "text/x-python", "file_size": 5462, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "ce3e6856-3dc5-4a43-8a2d-27b374f56b18": {"node_ids": ["dacbbe57-6bdd-4988-af2c-5772ebaef4b4"], "metadata": {"file_path": "/app/routes/search.py", "file_name": "search.py", "file_type": "text/x-python", "file_size": 3114, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "586e6e69-198f-4810-b04f-40b336c7e0f3": {"node_ids": ["7a129efd-f054-43e9-9140-86cc6b03a7c3"], "metadata": {"file_path": "/app/routes/status.py", "file_name": "status.py", "file_type": "text/x-python", "file_size": 4601, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "440e260f-abad-418d-8625-6954a2066a6b": {"node_ids": ["f51bf376-5b25-449a-9913-a9e226025534"], "metadata": {"file_path": "/app/routes/status_code.py", "file_name": "status_code.py", "file_type": "text/x-python", "file_size": 2214, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}, "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38": {"node_ids": ["744eda12-d396-4ee4-be20-b1ffff7f6c0c", "67c60400-9402-4fef-8fdf-f16cd5205294", "1befcdd4-39a7-4714-b0e3-b6e1454f9855", "f2f22e8f-ce50-40c9-bfa6-ce4990cc269f"], "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}}}, "docstore/data": {"fa3b7297-4388-4695-b5e4-f15167a391b4": {"__data__": {"id_": "fa3b7297-4388-4695-b5e4-f15167a391b4", "embedding": null, "metadata": {"tier": "global", "file_path": "/app/docs/generated/global_context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0586af43-bf90-4393-9c42-8fbe729e109a", "node_type": "4", "metadata": {"tier": "global", "file_path": "/app/docs/generated/global_context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "615dddf5ce067e42d61d7cd313231762136c23d689e2f57917cde671f509699c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Global Project Context\n\nRelay uses this file as a sample manual context. Replace this text with your own project notes.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 121, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c00fc62f-ec56-46a8-8f37-995227e24d73": {"__data__": {"id_": "c00fc62f-ec56-46a8-8f37-995227e24d73", "embedding": null, "metadata": {"file_path": "/app/docs/imported/relay_code_update_250603.md", "file_name": "relay_code_update_250603.md", "file_size": 1982, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "af045316-2444-434a-b391-6dab4c2ff1d4", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/relay_code_update_250603.md", "file_name": "relay_code_update_250603.md", "file_size": 1982, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d089e64c0648fda042009662907acc917e3d75324b4c40d8c05c6f6a622f51c2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\u2705 Relay Project Summary \u2013 Status as of Commit\n\ud83d\ude80 Frontend (Next.js + React)\npage.tsx\nServes as the homepage\u000b\nIncludes:\u000b\nAskAgent \u2013 GPT-powered interaction module\u000b\nSearchPanel \u2013 semantic search into synced docs\u000b\nLink to /docs route with DocsViewer\u000b\nSearchPanel.tsx\nPOSTs to /api/kb/search\u000b\nDisplays top-k semantic matches with:\u000b\ntitle\u000b\nsnippet\u000b\nsimilarity score\u000b\nDocsViewer.tsx\nFetches file list from /api/docs/list\u000b\nLoads content from /api/docs/view?path=...\u000b\nClean 2-panel layout for viewing Markdown files\u000b\nScrollable, responsive, and client-friendly\u000b\n\ud83e\udde0 Backend (FastAPI + LangChain)\nCore Routes\n/kb/search\nAccepts { query: string, k: int }\u000b\nReturns top-k cosine similarity matches from kb.sqlite3\u000b\n/docs/list, /docs/view\nLists and returns content of .md or .txt files in /docs\u000b\n/docs/sync\\_google\nTriggers sync from Google Drive \u2192 Markdown files under /docs/imported\u000b\n/check/env\\_keys\nScans services/ for os.getenv(...) calls\u000b\nVerifies existence in .env\u000b\nFlags missing, unused, or stale keys\u000b\n\ud83d\udcc1 Backend Modules\nservices/kb.py\nEmbeds .md docs using OpenAIEmbeddings\u000b\nStores chunks + vectors + metadata in SQLite\u000b\nUses cosine similarity to power semantic search\u000b\nStores title, last\\_updated, and embedding for each chunk\u000b\nservices/settings.py\nCentralized config loader\u000b\nCalls load\\_dotenv() at startup\u000b\nProvides assert\\_env(...) for safe env enforcement\u000b\nservices/google\\_docs\\_sync.py\nAuths with Google via OAuth\u000b\nLocates your Command\\_Center folder\u000b\nPulls .gdoc content \u2192 Markdown\u000b\nSaves to docs/imported/\\*.md\u000b\nRebuilt from scratch after Codespace reset\u000b\n\ud83e\udde0 AI Readiness\nLangChain + OpenAI fully integrated\u000b\ntext-embedding-3-small model powering embeddings\u000b\nGPT-4o agent available via /ask route\u000b\nModular structure ready for more agents or chain workflows\u000b\n\ud83e\udde9 Final Touches Before Commit\nAll code saved and updated\u000b\nFixed missing file (google\\_docs\\_sync.py)\u000b\nFully documented .env structure and validation\u000b\nReact panels: Search + DocsViewer operational", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1954, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6552e0fd-ccbb-4e75-9b2e-e98045397391": {"__data__": {"id_": "6552e0fd-ccbb-4e75-9b2e-e98045397391", "embedding": null, "metadata": {"file_path": "/app/docs/imported/relay_code_update_250605.md", "file_name": "relay_code_update_250605.md", "file_size": 2876, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b40729fc-472b-4e2e-bf7c-295aea0e2ab7", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/relay_code_update_250605.md", "file_name": "relay_code_update_250605.md", "file_size": 2876, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4e0feb2508edd56532c707faf7472975b20c48cc9f50d79ab289498c937eab42", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\u2705 Relay Project Summary \u2013 Updated (As of Today)\n\ud83d\ude80 Frontend (Next.js + React)\npage.tsx\n\u2705 GET /api/docs/list \u2192 returns `{ \"files\": [...] }`\n\ud83d\udd01 /docs/sync\\_google is deprecated \u2014 replaced by `/docs/sync` (returns `{ \"synced_docs\": [...] }`)\nAskAgent.tsx\n\u2705 Sends GET requests to /ask (CORS-safe, no preflight)\u000b\n\u2705 Displays GPT-4o output with loading state\u000b\n\u2705 Stripped headers to eliminate CORS preflight errors\u000b\n\u2705 Uses process.env.NEXT\\_PUBLIC\\_RELAY\\_KEY for dev logs only\u000b\nSearchPanel.tsx\n\u2705 POST /api/kb/search\u000b\n\u2705 Displays top-k semantic matches from FastAPI:\u000b\nTitle\u000b\nSnippet\u000b\nSimilarity score\u000b\n\u2705 Type-safe with KBResult\u000b\n\u2705 Includes enter key trigger and loading spinner\u000b\nDocsViewer.tsx\n\u2705 GET /api/docs/list\u000b\n\u2705 GET /api/docs/view?path=...\u000b\n\u2705 Two-panel native layout (left = file list, right = scrollable viewer)\u000b\n\u2705 Pulls from /docs/imported/ and /docs/generated/\u000b\n\ud83e\udde0 Backend (FastAPI + LangChain)\nCore Routes\n\ud83d\udd01 /docs/sync\\_google is deprecated \u2014 replaced by /docs/sync with better logging\n\ud83d\udcc1 Backend Modules\nservices/kb.py\n\u2705 Embeds docs using text-embedding-3-small\u000b\n\u2705 SQLite stores: path, chunks, cosine sim metadata\u000b\n\u2705 KB result scoring used in /api/kb/search\u000b\nservices/settings.py\n\u2705 .env loaded early via load\\_dotenv()\u000b\n\u2705 assert\\_env() enforces critical keys (OPENAI\\_API\\_KEY, etc.)\u000b\nservices/google\\_docs\\_sync.py\n\u2705 Uses run\\_console() for CLI OAuth\u000b\n\u2705 Pulls .gdoc from Command\\_Center/\u000b\n\u2705 Converts to Markdown, saved to /docs/imported/\\*.md\u000b\n\u26a0\ufe0f Requires token.json (manual upload to Railway)\u000b\nservices/agent.py\n\u2705 Handles GPT query routing, context building\u000b\n\u2705 read\\_source\\_files() now honors RELAY\\_PROJECT\\_ROOT \u2705\u000b\n\u2705 Logs missing folders, loads code/doc context dynamically\u000b\n\u2705 Queues patch suggestions via /control/queue\\_action\u000b\n\u2705 GPT answers: human-like, citation-aware, can trigger actions\u000b\n\ud83e\udde0 AI Integration\n\u2705 GPT-4o for natural language responses, summaries, patch generation\u000b\n\u2705 LangChain + OpenAI embeddings for search\u000b\n\u2705 .env includes:\u000b\nOPENAI\\_API\\_KEY\u000b\nAPI\\_KEY\u000b\nRELAY\\_PROJECT\\_ROOT=/app \u2705\u000b\n\ud83e\udde9 Project Infrastructure & Reliability\n\u2705 FastAPI runs on port 8080\u000b\n\u2705 CORS fully configured (wildfire + localhost + vercel) \u2705\u000b\n\u2705 /ask OPTIONS issue solved (wildcard + no custom headers) \u2705\u000b\n\u2705 All doc folders created at boot (/docs/imported, /docs/generated)\u000b\n\u2705 Canvas patch system live (tracked in Vercel + Railway)\u000b\n\u2705 .env.example documents required keys\u000b\n\u2705 API keys now redacted in logs\u000b\n\ud83d\udd27 Remaining TODOs\nAdd same env-root logic to read\\_docs() function\u000b\nReinstate X-API-Key support securely (via Vercel backend proxy or signed tokens)\u000b\nEnable patch approval UI in control panel\u000b\nOptionally add /status/version route for deploy traceability\u000b\nLet me know if you\u2019d like this saved to /docs/generated/relay\\_status.md or queued to /control/queue\\_action.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2756, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2df295fe-05ba-4979-9d7a-a39ec2fe043a": {"__data__": {"id_": "2df295fe-05ba-4979-9d7a-a39ec2fe043a", "embedding": null, "metadata": {"file_path": "/app/docs/imported/relay_code_update_250606.md", "file_name": "relay_code_update_250606.md", "file_size": 3248, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9ef4c14f-f20e-462c-8d04-245210a10931", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/relay_code_update_250606.md", "file_name": "relay_code_update_250606.md", "file_size": 3248, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "231b2437f7b834947f04492767674a30865b8f573a67f52db4171696577795a3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Relay Command Center \u2013 Version 1\nOverview\nRelay Command Center is a modular, full-stack AI-enabled backend and frontend platform designed to control, synchronize, and observe your solar-powered infrastructure, miner operations, and external documents via GPT-based interactions and automation.\nThis document summarizes Version 1 (V1) of the system, covering all features implemented across the project folder, including backend API, frontend controls, OAuth integration, and document synchronization logic.\n\u2705 Backend (FastAPI)\nCore API Endpoints\nGET / \u2013 Health check endpoint\nPOST /ask \u2013 GPT-4-powered agent Q&A endpoint (Relay Agent)\nPOST /control/queue\\_action \u2013 Allows the agent to propose and queue actions\nGET /status/summary \u2013 Provides system health/status insights\nPOST /docs/sync\\_google \u2013 Syncs Google Docs from COMMAND\\_CENTER folder and converts them to Markdown\nGET /docs/list \u2013 Lists all imported Markdown files\nGET /docs/view?path=... \u2013 Returns contents of a specific document\nGET /debug/env \u2013 Diagnostic endpoint to verify environment variable loading (like GOOGLE\\_CREDS\\_JSON)\nOAuth Flow\nGET /google/auth \u2013 Launches Google OAuth using credentials in GOOGLE\\_CREDS\\_JSON\nGET /google/callback \u2013 Finalizes OAuth and writes token.json to frontend/sync/token.json\nInfrastructure\nAuto-creates required folders (docs/imported, docs/generated)\nModular routing structure with ask, status, control, docs, oauth, debug\nCORS-enabled for frontend origins:\nhttps://relay.wildfireranch.us\nhttps://status.wildfireranch.us\nhttp://localhost:3000\n\u2705 Google Docs Sync\nEnvironment Variables\nGOOGLE\\_CREDS\\_JSON \u2013 base64-encoded client\\_secret.json\nGOOGLE\\_TOKEN\\_JSON \u2013 base64-encoded token.json after successful auth (optional, used for persistent access)\nSync Logic\nUses google-auth, googleapiclient, and markdownify\nPulls files from folder: COMMAND\\_CENTER in Google Drive\nConverts content to Markdown\nSaves as .md files in docs/imported\nToken-based auth is triggered automatically unless token.json is missing or invalid (then triggers browser flow)\n\u2705 Frontend (Next.js + React)\nDocs Viewer UI\nDisplays document list and contents\nTwo-panel layout: sidebar (doc list) and content viewer\nScrollable and responsive\nSync Button\n\ud83d\udd04 Sync Google Docs button in the UI\nTriggers POST to /docs/sync\\_google\nRefreshes doc list after completion\nHandles sync status and error feedback inline\n\ud83e\udde0 Intelligence\nGPT-backed agent available via /ask\nSupports knowledge base lookups across synced Markdown docs\nPreloaded with GOOGLE\\_CREDS\\_JSON and OPENAI\\_API\\_KEY\nSmart routing, debug logging, and error feedback\n\ud83e\uddea Developer Support\n.env-ready variable structure (with base64-encoded credentials)\n.env.local used for frontend local overrides (e.g. NEXT\\_PUBLIC\\_RELAY\\_KEY)\nSupports local testing and live Railway/Vercel deployment\n\ud83d\ude80 Deployment Targets\nBackend (FastAPI): Railway \u2013 https://relay.wildfireranch.us\nFrontend (Next.js): Vercel \u2013 https://status.wildfireranch.us\n\ud83c\udfc1 Version 1 Milestone Complete\nNext steps (future versions): frontend action queue, miner controls, agent decision visualizer, and token bootstrap tool.\nVersion: Relay Command Center V1\u000bDate: 2025-06-06\u000bLead: Bret Westwood\u000bBuilt with Echo \ud83d\udcac", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3194, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ecd560d1-2f07-4ae8-985e-fa70d1ecb886": {"__data__": {"id_": "ecd560d1-2f07-4ae8-985e-fa70d1ecb886", "embedding": null, "metadata": {"file_path": "/app/docs/imported/repository_overview_250606.md", "file_name": "repository_overview_250606.md", "file_size": 7775, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b23e1497-6700-4cb4-bbd8-86eb3a04ee9f", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/repository_overview_250606.md", "file_name": "repository_overview_250606.md", "file_size": 7775, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1d0c4fcdc42c62932adcd8f42ec7871af67323a08cf873e19c3d14840cc30b9d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bbc0c915-33ea-44ad-b9e4-c7e154eee90c", "node_type": "1", "metadata": {}, "hash": "c512d0f3779c22b4ee2d8b96642942cead582c6265c707b036872dd5310dc031", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "to newcomer\nJun 6\nWildfireRanch/Relay\nArchive\nShare\nExplain the codebase to a newcomer. What is the general structure, what are the important things to know, and what are some pointers for things to learn next?\nCopy\nRepository Overview\nThis project hosts \u201cRelay,\u201d a small FastAPI backend with a Next.js/React frontend. The repository structure is straightforward:\n/main.py \u2013 FastAPI application entry\n/routes/ \u2013 REST endpoints\n/services/ \u2013 Core backend logic\n/frontend/ \u2013 Next.js frontend\n/docs/ \u2013 Generated/Imported docs\n/data/ & /logs/ \u2013 Action queue and logging files\n/tests/ \u2013 (mostly empty) test placeholders\nBackend\nmain.py initializes FastAPI, loads environment variables, configures CORS and mounts the route modules:\n9 from dotenv import load\\_dotenv\n10 load\\_dotenv()\n...\n35 app.add\\_middleware(\n...\n49 app.include\\_router(ask.router)\n50 app.include\\_router(status.router)\n51 app.include\\_router(control.router)\n52 app.include\\_router(docs.router)\n53 app.include\\_router(oauth.router)\nServices\nservices/agent.py\nImplements the OpenAI-powered assistant. It determines if code/doc context is needed, can auto-generate docs, and queues new files through /control/queue\\_action.\nKey logic includes the system prompt and context gathering helpers:\n15 SYSTEM\\_PROMPT = \"\"\"\nYou are Relay...\n...\n30 def needs\\_code\\_context(query: str) -> bool:\n...\n41 async def answer(user_id: str, query: str, context: Optional[str] = None, stream: bool = False):\n...\n85 async def generate\\_doc\\_for\\_path(rel\\_path: str) -> str:\n...\n136 def read\\_source\\_files(roots=[\"services\"], exts=[\".py\", \".tsx\", \".ts\"]):\n...\n166 def read\\_docs(root=\"docs\", exts=[\".md\", \".txt\"]):\nservices/google\\_docs\\_sync.py\nHandles Google OAuth, downloads docs from a specified Drive folder, converts them to Markdown, and saves them under docs/imported:\n1 # File: services/google\\_docs\\_sync.py\n...\n31 def get\\_google\\_service():\n...\n138 def sync\\_google\\_docs() -> list:\n...\n152 if enabled:\n153 sync\\_google\\_docs()\nservices/kb.py\nEmbeds markdown docs into a SQLite-based vector database using LangChain to enable semantic search:\n11 DOCS\\_DIR = ROOT / \"docs\"\n...\n35 def embed\\_docs():\n...\n53 def cosine\\_similarity(v1, v2):\n...\n58 def search(query, k=4):\nOther helpers include logging (services/logs.py) and environment validation (services/settings.py).\nRoutes\nFastAPI endpoints live in routes/. Examples:\nroutes/ask.py \u2013 exposes /ask for user questions and /test\\_openai for verifying OpenAI access.\nroutes/control.py \u2013 provides endpoints for writing files, queuing actions, approving queued actions, and retrieving logs:\n14 def auth(key: str = Header(..., alias=\"X-API-Key\")):\n...\n45 @router.post(\"/write\\_file\")\n...\n69 @router.post(\"/queue\\_action\")\n...\n94 @router.post(\"/approve\\_action\")\n...\n134 @router.get(\"/list\\_log\")\nroutes/docs.py \u2013 manages document syncing and knowledge-base refreshing:\n31 @router.post(\"/update\\_context\")\n...\n58 @router.post(\"/sync\\_google\")\n63 @router.post(\"/sync\")\n74 @router.post(\"/refresh\\_kb\")\n85 @router.post(\"/full\\_sync\")\n98 @router.get(\"/list\")\n109 @router.get(\"/view\")\nFrontend\nThe frontend/ folder contains a Next.js app. The home page (src/app/page.tsx) links to Docs, Control, and Status pages and embeds several React components:\n3 import AskAgent from \"@/components/AskAgent/AskAgent\"\n...\n10 \n...\n23 \n...\n29 \n33 \nKey components include:\nAskAgent \u2013 simple form that queries /ask.\nActionQueuePanel \u2013 lists and approves queued actions by hitting /control/\\* endpoints.\nDocsViewer \u2013 displays Markdown files and allows manual Google Docs sync.\nSearchPanel \u2013 calls the /kb/search API.\nThe frontend also has minimal API routes under src/app/api/ that forward requests to the backend, allowing the Next.js app to act as a thin UI over the FastAPI service.\nData and Logging\nQueued actions are stored in data/pending\\_actions.json, and executed actions are logged to logs/actions.log. Basic session logs are written via services/logs.py. The docs directory (docs/) contains imported or generated documentation used by the knowledge base.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4042, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bbc0c915-33ea-44ad-b9e4-c7e154eee90c": {"__data__": {"id_": "bbc0c915-33ea-44ad-b9e4-c7e154eee90c", "embedding": null, "metadata": {"file_path": "/app/docs/imported/repository_overview_250606.md", "file_name": "repository_overview_250606.md", "file_size": 7775, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b23e1497-6700-4cb4-bbd8-86eb3a04ee9f", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/repository_overview_250606.md", "file_name": "repository_overview_250606.md", "file_size": 7775, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1d0c4fcdc42c62932adcd8f42ec7871af67323a08cf873e19c3d14840cc30b9d", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ecd560d1-2f07-4ae8-985e-fa70d1ecb886", "node_type": "1", "metadata": {"file_path": "/app/docs/imported/repository_overview_250606.md", "file_name": "repository_overview_250606.md", "file_size": 7775, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d0f2291b2f5044634632e8f721dfe4a34a5f0fbaf40610180dc2cd0df1b179f7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The home page (src/app/page.tsx) links to Docs, Control, and Status pages and embeds several React components:\n3 import AskAgent from \"@/components/AskAgent/AskAgent\"\n...\n10 \n...\n23 \n...\n29 \n33 \nKey components include:\nAskAgent \u2013 simple form that queries /ask.\nActionQueuePanel \u2013 lists and approves queued actions by hitting /control/\\* endpoints.\nDocsViewer \u2013 displays Markdown files and allows manual Google Docs sync.\nSearchPanel \u2013 calls the /kb/search API.\nThe frontend also has minimal API routes under src/app/api/ that forward requests to the backend, allowing the Next.js app to act as a thin UI over the FastAPI service.\nData and Logging\nQueued actions are stored in data/pending\\_actions.json, and executed actions are logged to logs/actions.log. Basic session logs are written via services/logs.py. The docs directory (docs/) contains imported or generated documentation used by the knowledge base.\nGetting Started / Next Steps\nEnvironment Setup \u2013 ensure .env contains OPENAI\\_API\\_KEY, GOOGLE\\_CREDS\\_JSON, optional GOOGLE\\_TOKEN\\_JSON, and API\\_KEY. main.py loads these via dotenv on startup.\nRunning Locally \u2013 start the backend (python main.py or uvicorn main:app) and the frontend (npm run dev within frontend/).\nDocs Sync and KB \u2013 explore services/google\\_docs\\_sync.py and the /docs routes to understand how Google Docs are pulled and embedded.\nAgent Logic \u2013 services/agent.py is central to how the assistant gathers context and answers questions; studying its helper functions is useful for extending functionality.\nTesting \u2013 the tests/ directory contains placeholders. Adding real tests (for routes, sync logic, etc.) would be a logical area for improvement.\nOverall, the project integrates OpenAI, Google Drive, and a simple knowledge base to provide a conversational assistant with access to synced documentation and the ability to queue file changes. The Next.js frontend offers a small dashboard for user interaction. Future work might include fleshing out tests, expanding route functionality, or enhancing the frontend.\ncan you put this in a pasteable document\nCopy\nBelow is a pasteable Markdown document summarizing the repository structure, components, and suggested next steps:\nRelay Repository Overview\nThis project contains a small FastAPI backend paired with a Next.js/React frontend. The layout is straightforward:\n/main.py \u2013 FastAPI application entry point\n/routes/ \u2013 REST API endpoints\n/services/ \u2013 Core backend logic\n/frontend/ \u2013 Next.js frontend\n/docs/ \u2013 Generated/imported documentation\n/data/ & /logs/ \u2013 Queued actions and logs\n/tests/ \u2013 Mostly empty placeholders\nBackend\nmain.py initializes FastAPI, loads environment variables, configures CORS, and registers route modules.\nKey Service Modules\nservices/agent.py \u2013 Implements the OpenAI\u2011powered assistant. Handles context gathering, question answering, and documentation generation.\nservices/google\\_docs\\_sync.py \u2013 Syncs documentation from a Google Drive folder and stores Markdown files under docs/imported.\nservices/kb.py \u2013 Embeds Markdown docs into a SQLite vector database for semantic search.\nOther helper modules manage logging and environment validation.\nRoutes\nroutes/ask.py \u2013 /ask endpoint and an OpenAI test route.\nroutes/control.py \u2013 Endpoints for writing files, queuing/approving actions, and retrieving logs.\nroutes/docs.py \u2013 Manages document syncing and knowledge-base refreshing.\nFrontend\nLocated in frontend/, the Next.js app serves a dashboard with components to interact with the backend:\nAskAgent \u2013 Form for querying /ask.\nActionQueuePanel \u2013 Approve queued actions via /control/\\*.\nDocsViewer \u2013 Display Markdown docs and sync with Google Docs.\nSearchPanel \u2013 Query the knowledge base.\nData and Logging\ndata/pending\\_actions.json \u2013 Stores queued actions.\nlogs/actions.log \u2013 Logs executed actions.\ndocs/ \u2013 Contains imported/generated docs used by the knowledge base.\nGetting Started\nEnvironment Variables \u2013 Ensure .env includes OPENAI\\_API\\_KEY, GOOGLE\\_CREDS\\_JSON, optional GOOGLE\\_TOKEN\\_JSON, and API\\_KEY.\nRun Locally \u2013 Start the backend (python main.py or uvicorn main:app) and the frontend (npm run dev inside frontend/).\nDocs & KB \u2013 Study services/google\\_docs\\_sync.py and the /docs routes to see how documentation is synced and indexed.\nAgent Logic \u2013 Review services/agent.py to understand how context is gathered and responses are generated.\nTesting \u2013 The tests/ directory is mostly empty. Adding real tests for routes and sync logic is a natural improvement.\nThis text can be copied directly into any document or note-taking tool.", "mimetype": "text/plain", "start_char_idx": 3133, "end_char_idx": 7681, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5f336f0f-d45f-4533-8cb1-b5749de65a0a": {"__data__": {"id_": "5f336f0f-d45f-4533-8cb1-b5749de65a0a", "embedding": null, "metadata": {"file_path": "/app/docs/imported/test_placeholder.md", "file_name": "test_placeholder.md", "file_size": 0, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9ccc8290-c664-4b39-a2e7-a6c70e6455ea", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/test_placeholder.md", "file_name": "test_placeholder.md", "file_size": 0, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4f90d6c86c020a543bda647737378cc2604e99f81ec7335c9e2a2e42da2dfde8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 0, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6ee7cb35-1ab6-4465-9984-a96306c53c90": {"__data__": {"id_": "6ee7cb35-1ab6-4465-9984-a96306c53c90", "embedding": null, "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1ee99886-cad7-475d-8cf9-ac27341df244", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "578db2dd3d01a039aba8a50cf097df4d60f9ddb55a59bfd26ba4ef77b573d532", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eaebc08d-f4a5-4a92-b083-7c2f724b001e", "node_type": "1", "metadata": {}, "hash": "b298ec73cfc8ec3f9d302c8f927345d8cd813f2c9719f85cab75cc872e0d97fc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "1. Functionality\nConversational AI Agent (/ask): Leverages GPT\u20114o to handle free\u2011form queries, cite sources, and suggest code patches based on context.\nSemantic Knowledge Base (/kb/search): Performs vector similarity searches over imported Markdown docs (Google\u2011synced or generated) using SQLite + LangChain embeddings.\nGoogle Docs Sync (/docs/sync): OAuth2\u2011powered flow that imports designated Drive documents into docs/imported, converting them to Markdown and refreshing the KB.\nDocumentation Browser (/docs/list, /docs/view): Lists available docs and serves their content for in\u2011app viewing.\nAction Queue & Patch Approval (/control/queue\\_action, /control/approve\\_action): Stages file writes or code modifications for developer review before applying changes.\nEnvironment Validator (/check/env\\_keys): Validates required environment variables at startup, preventing misconfigurations.\nDashboard UI: Next.js/React interface with panels:\nAskAgent \u2013 Chat interface for AI queries\nSearchPanel \u2013 KB lookup by keyword\nDocsViewer \u2013 Two\u2011pane Markdown viewer with sync trigger\nActionQueuePanel \u2013 Pending patches list and one\u2011click approval\n2. How to Use\nPrerequisites: Node.js, Python 3.12+, uvicorn, npm, and valid Google OAuth credentials.\nEnvironment Setup\u000bcp .env.example .env\n# Populate with:\n# OPENAI\\_API\\_KEY, API\\_KEY, GOOGLE\\_CREDS\\_JSON, (optional) GOOGLE\\_TOKEN\\_JSON\nInstall & Launch Services\u000b# Backend\npip install -r requirements.txt\nuvicorn main:app --reload --port 8080\n# Frontend\ncd frontend\nnpm install\nnpm run dev # runs on port 3000\nSync Documentation\nIn browser, go to http://localhost:8080/docs/sync\nAuthenticate via Google (first run)\nConfirm import: Markdown files appear under docs/imported.\nInteract\nAskAgent: Ask questions in Dashboard, view citations and suggestions.\nSearchPanel: Search KB for context or troubleshooting docs.\nDocsViewer: Navigate synced docs; click \u201cSync\u201d to refresh.\nActionQueuePanel: Review queued patches, click \u201cApprove\u201d to apply.\nDirect API Calls\u000bGET /ask?query=Your+question\nPOST /api/kb/search { query: string, k: number }\nPOST /control/queue\\_action { patch details }\nPOST /control/approve\\_action { action\\_id }\nPOST /docs/sync\nGET /docs/list\nGET /docs/view?path=imported/YourDoc.md\n3. Technical Details\nProject Structure\n/ # Root\n\u251c\u2500 main.py # FastAPI startup & route registration\n\u251c\u2500 routes/\n\u2502 \u251c\u2500 ask.py # /ask endpoint logic\n\u2502 \u251c\u2500 control.py # queue\\_action, approve\\_action\n\u2502 \u251c\u2500 docs.py # sync, list, view routes\n\u2502 \u2514\u2500 check.py # /check/env\\_keys\n\u251c\u2500 services/\n\u2502 \u251c\u2500 agent.py # GPT prompt composition & context loader\n\u2502 \u251c\u2500 kb.py # embedding & search utils\n\u2502 \u251c\u2500 google\\_docs\\_sync.py # OAuth flow & Drive MD conversion\n\u2502 \u2514\u2500 settings.py # Env var schema & loader\n\u251c\u2500 docs/\n\u2502 \u251c\u2500 imported/ # Google\u2011sync Markdown files\n\u2502 \u2514\u2500 generated/ # AI\u2011generated summaries\n\u251c\u2500 data/\n\u2502 \u2514\u2500 pending\\_actions.json # Queued patch state\n\u251c\u2500 logs/\n\u2502 \u2514\u2500 actions.log # Patch application history\n\u251c\u2500 frontend/\n\u2502 \u251c\u2500 src/app/page.tsx # Main Dashboard layout\n\u2502 \u251c\u2500 components/\n\u2502 \u2502 \u251c\u2500 AskAgent.tsx\n\u2502 \u2502 \u251c\u2500 SearchPanel.tsx\n\u2502 \u2502 \u251c\u2500 DocsViewer.tsx\n\u2502 \u2502 \u2514\u2500 ActionQueuePanel.tsx\n\u2502 \u2514\u2500 api/ # Next.js API proxy (optional)\n\u2514\u2500 tests/ # Unit/integration test stubs\nKey Code Highlights\nSYSTEM\\_PROMPT in services/agent.py: Central AI persona & context roles.\nContext Loaders: agent.read\\_source\\_files() reads code snippets; agent.read\\_docs() pulls Markdown docs.\nEmbeddings: kb.embed\\_doc() & kb.search() use OpenAI's embedding model, cache in SQLite DB.\nOAuth2 Flow: google\\_docs\\_sync.py uses InstalledAppFlow for local webserver auth, token persistence.\nPatch Workflow: data/pending\\_actions.json stores staged patch diffs; control.py applies approved diffs to disk.\n4.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3674, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eaebc08d-f4a5-4a92-b083-7c2f724b001e": {"__data__": {"id_": "eaebc08d-f4a5-4a92-b083-7c2f724b001e", "embedding": null, "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1ee99886-cad7-475d-8cf9-ac27341df244", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "578db2dd3d01a039aba8a50cf097df4d60f9ddb55a59bfd26ba4ef77b573d532", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6ee7cb35-1ab6-4465-9984-a96306c53c90", "node_type": "1", "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4aa2485df5812a6240c1b5b1abbd0e8cbe044b8a83b4d8998824e3086e8bedb3", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f38caa9c-d00c-4daf-81b3-de90b0a98f8d", "node_type": "1", "metadata": {}, "hash": "3f7b84fec6e34c374f9d424c32c61d147f3c6859f20b5c02b79f482361e1f48c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Context Loaders: agent.read\\_source\\_files() reads code snippets; agent.read\\_docs() pulls Markdown docs.\nEmbeddings: kb.embed\\_doc() & kb.search() use OpenAI's embedding model, cache in SQLite DB.\nOAuth2 Flow: google\\_docs\\_sync.py uses InstalledAppFlow for local webserver auth, token persistence.\nPatch Workflow: data/pending\\_actions.json stores staged patch diffs; control.py applies approved diffs to disk.\n4. Actual Routes & Descriptions\nThese endpoints are loaded from current code:\nGET / \u2014 Sanity check (uptime, load balancer) (main.py)\nGET /ask \u2014 AI query interface (routes/ask.py)\nGET /check/env\\_keys \u2014 Env var validation (routes/check.py)\nPOST /docs/sync \u2014 Trigger Google Docs import (routes/docs.py)\nGET /docs/list \u2014 List available docs (routes/docs.py)\nGET /docs/view \u2014 Serve markdown content (routes/docs.py)\nPOST /control/queue\\_action \u2014 Stage file/patch write (routes/control.py)\nPOST /control/approve\\_action \u2014 Approve and apply staged action (routes/control.py)\nPOST /api/kb/search \u2014 Semantic search payload (routes/kb.py)\n5. Impact & Metrics (Placeholders)\nGoogle Docs Imported: \\_\\_ docs\nMarkdown Files: \\_\\_ files in docs/imported\nAPI Hits: /ask \\_\\_ calls, KB search \\_\\_ calls\nPatches Queued/Applied: \\_\\_ / \\_\\_\nAvg. Latency: /ask \\_\\_ ms, /api/kb/search \\_\\_ ms\nOnboarding Time: Setup from zero to running in \\_\\_ minutes\nFill in with real telemetry to quantify v1 success.\nEnd of Release Notes & Documentation for v1.\nV1 Relay Command Center \u2013 Release Notes & Documentation\n1. Functionality\nConversational AI Agent (/ask): Leverages GPT\u20114o to handle free\u2011form queries, cite sources, and suggest code patches based on context.\nSemantic Knowledge Base (/kb/search): Performs vector similarity searches over imported Markdown docs (Google\u2011synced or generated) using SQLite + LangChain embeddings.\nGoogle Docs Sync (/docs/sync): OAuth2\u2011powered flow that imports designated Drive documents into docs/imported, converting them to Markdown and refreshing the KB.\nDocumentation Browser (/docs/list, /docs/view): Lists available docs and serves their content for in\u2011app viewing.\nAction Queue & Patch Approval (/control/queue\\_action, /control/approve\\_action): Stages file writes or code modifications for developer review before applying changes.\nEnvironment Validator (/check/env\\_keys): Validates required environment variables at startup, preventing misconfigurations.\nDashboard UI: Next.js/React interface with panels:\nAskAgent \u2013 Chat interface for AI queries\nSearchPanel \u2013 KB lookup by keyword\nDocsViewer \u2013 Two\u2011pane Markdown viewer with sync trigger\nActionQueuePanel \u2013 Pending patches list and one\u2011click approval\n2. How to Use\nPrerequisites: Node.js, Python 3.12+, uvicorn, npm, and valid Google OAuth credentials.\nEnvironment Setup\ncp .env.example .env\n# Populate with:\n# OPENAI\\_API\\_KEY, API\\_KEY, GOOGLE\\_CREDS\\_JSON, (optional) GOOGLE\\_TOKEN\\_JSON\nInstall & Launch Services\n# Backend\npip install -r requirements.txt\nuvicorn main:app --reload --port 8080\n# Frontend\ncd frontend\nnpm install\nnpm run dev # runs on port 3000\nSync Documentation\nIn browser, go to http://localhost:8080/docs/sync\nAuthenticate via Google (first run)\nConfirm import: Markdown files appear under docs/imported.\nInteract\nAskAgent: Ask questions in Dashboard, view citations and suggestions.\nSearchPanel: Search KB for context or troubleshooting docs.\nDocsViewer: Navigate synced docs; click \u201cSync\u201d to refresh.\nActionQueuePanel: Review queued patches, click \u201cApprove\u201d to apply.\nDirect API Calls\nGET /ask?query=Your+question\nPOST /api/kb/search { query: string, k: number }\nPOST /control/queue\\_action { patch details }\nPOST /control/approve\\_action { action\\_id }\nPOST /docs/sync\nGET /docs/list\nGET /docs/view?path=imported/YourDoc.md\n3.", "mimetype": "text/plain", "start_char_idx": 3259, "end_char_idx": 6998, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f38caa9c-d00c-4daf-81b3-de90b0a98f8d": {"__data__": {"id_": "f38caa9c-d00c-4daf-81b3-de90b0a98f8d", "embedding": null, "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1ee99886-cad7-475d-8cf9-ac27341df244", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "578db2dd3d01a039aba8a50cf097df4d60f9ddb55a59bfd26ba4ef77b573d532", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eaebc08d-f4a5-4a92-b083-7c2f724b001e", "node_type": "1", "metadata": {"file_path": "/app/docs/imported/v1_documentation_250606.md", "file_name": "v1_documentation_250606.md", "file_size": 9879, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "142c65964c89f31558421bc476b65d7cb205268b44711bd030b75cf109e953c3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Interact\nAskAgent: Ask questions in Dashboard, view citations and suggestions.\nSearchPanel: Search KB for context or troubleshooting docs.\nDocsViewer: Navigate synced docs; click \u201cSync\u201d to refresh.\nActionQueuePanel: Review queued patches, click \u201cApprove\u201d to apply.\nDirect API Calls\nGET /ask?query=Your+question\nPOST /api/kb/search { query: string, k: number }\nPOST /control/queue\\_action { patch details }\nPOST /control/approve\\_action { action\\_id }\nPOST /docs/sync\nGET /docs/list\nGET /docs/view?path=imported/YourDoc.md\n3. Technical Details\nProject Structure\n/ # Root\n\u251c\u2500 main.py # FastAPI startup & route registration\n\u251c\u2500 routes/\n\u2502 \u251c\u2500 ask.py # /ask endpoint logic\n\u2502 \u251c\u2500 control.py # queue\\_action, approve\\_action\n\u2502 \u251c\u2500 docs.py # sync, list, view routes\n\u2502 \u2514\u2500 check.py # /check/env\\_keys\n\u251c\u2500 services/\n\u2502 \u251c\u2500 agent.py # GPT prompt composition & context loader\n\u2502 \u251c\u2500 kb.py # embedding & search utils\n\u2502 \u251c\u2500 google\\_docs\\_sync.py # OAuth flow & Drive MD conversion\n\u2502 \u2514\u2500 settings.py # Env var schema & loader\n\u251c\u2500 docs/\n\u2502 \u251c\u2500 imported/ # Google\u2011sync Markdown files\n\u2502 \u2514\u2500 generated/ # AI\u2011generated summaries\n\u251c\u2500 data/\n\u2502 \u2514\u2500 pending\\_actions.json # Queued patch state\n\u251c\u2500 logs/\n\u2502 \u2514\u2500 actions.log # Patch application history\n\u251c\u2500 frontend/\n\u2502 \u251c\u2500 src/app/page.tsx # Main Dashboard layout\n\u2502 \u251c\u2500 components/\n\u2502 \u2502 \u251c\u2500 AskAgent.tsx\n\u2502 \u2502 \u251c\u2500 SearchPanel.tsx\n\u2502 \u2502 \u251c\u2500 DocsViewer.tsx\n\u2502 \u2502 \u2514\u2500 ActionQueuePanel.tsx\n\u2502 \u2514\u2500 api/ # Next.js API proxy (optional)\n\u2514\u2500 tests/ # Unit/integration test stubs\nKey Code Highlights\nSYSTEM\\_PROMPT in services/agent.py: Central AI persona & context roles.\nContext Loaders: agent.read\\_source\\_files() reads code snippets; agent.read\\_docs() pulls Markdown docs.\nEmbeddings: kb.embed\\_doc() & kb.search() use OpenAI's embedding model, cache in SQLite DB.\nOAuth2 Flow: google\\_docs\\_sync.py uses InstalledAppFlow for local webserver auth, token persistence.\nPatch Workflow: data/pending\\_actions.json stores staged patch diffs; control.py applies approved diffs to disk.\n4. Actual Routes & Descriptions\nThese endpoints are loaded from current code:\nGET / \u2014 Sanity check (uptime, load balancer) (main.py)\nGET /ask \u2014 AI query interface (routes/ask.py)\nGET /check/env\\_keys \u2014 Env var validation (routes/check.py)\nPOST /docs/sync \u2014 Trigger Google Docs import (routes/docs.py)\nGET /docs/list \u2014 List available docs (routes/docs.py)\nGET /docs/view \u2014 Serve markdown content (routes/docs.py)\nPOST /control/queue\\_action \u2014 Stage file/patch write (routes/control.py)\nPOST /control/approve\\_action \u2014 Approve and apply staged action (routes/control.py)\nPOST /api/kb/search \u2014 Semantic search payload (routes/kb.py)\n5. Impact & Metrics (Placeholders)\nGoogle Docs Imported: \\_\\_ docs\nMarkdown Files: \\_\\_ files in docs/imported\nAPI Hits: /ask \\_\\_ calls, KB search \\_\\_ calls\nPatches Queued/Applied: \\_\\_ / \\_\\_\nAvg. Latency: /ask \\_\\_ ms, /api/kb/search \\_\\_ ms\nOnboarding Time: Setup from zero to running in \\_\\_ minutes\nFill in with real telemetry to quantify v1 success.\nEnd of Release Notes & Documentation for v1.", "mimetype": "text/plain", "start_char_idx": 6474, "end_char_idx": 9465, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d7bdf921-0696-46cd-92b4-8a88f48d8983": {"__data__": {"id_": "d7bdf921-0696-46cd-92b4-8a88f48d8983", "embedding": null, "metadata": {"file_path": "/app/docs/imported/\ud83d\udd27_google_docs_sync_integration.md", "file_name": "\ud83d\udd27_google_docs_sync_integration.md", "file_size": 3065, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "493c8071-8e75-40a8-97c1-9a4963aa98e2", "node_type": "4", "metadata": {"file_path": "/app/docs/imported/\ud83d\udd27_google_docs_sync_integration.md", "file_name": "\ud83d\udd27_google_docs_sync_integration.md", "file_size": 3065, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "project_docs", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c1e1383a713669c60514fcadb568c8920f5a2dd5d414ae3b820965db67a908ca", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\ud83d\udd27 Google Docs Sync Integration\nPurpose: To synchronize Google Docs from a specific folder in Google Drive into your local application, converting them into Markdown files for further processing.\nKey Components:\nEnvironment Variables:\u000b\nGOOGLE\\_CREDS\\_JSON: Base64-encoded Google OAuth 2.0 credentials JSON.\u000b\nGOOGLE\\_TOKEN\\_JSON: Base64-encoded token JSON obtained after user authorization.\u000b\nFile Paths:\u000b\nCREDENTIALS\\_PATH: Path to store decoded credentials (/tmp/credentials.json).\u000b\nTOKEN\\_PATH: Path to store decoded token (frontend/sync/token.json).\u000b\nIMPORT\\_PATH: Directory to store imported Markdown files (docs/imported).\u000b\nFolder Configuration:\u000b\nCOMMAND\\_CENTER\\_FOLDER\\_NAME: Name of the folder in Google Drive to sync (COMMAND\\_CENTER).\u000b\nWorkflow:\nCredential Handling:\u000b\nCheck if CREDENTIALS\\_PATH exists. If not, decode GOOGLE\\_CREDS\\_JSON and write to this path.\u000b\nCheck if TOKEN\\_PATH exists. If not, decode GOOGLE\\_TOKEN\\_JSON (if available) and write to this path.\u000b\nAuthentication:\u000b\nIf TOKEN\\_PATH exists, load credentials from it.\u000b\nIf credentials are invalid or don't exist:\u000b\nInitiate OAuth flow using InstalledAppFlow.from\\_client\\_secrets\\_file.\u000b\nRun local server to obtain user authorization and generate new token.\u000b\nSave new token to TOKEN\\_PATH.\u000b\nGoogle Drive Interaction:\u000b\nBuild drive\\_service and docs\\_service using authenticated credentials.\u000b\nLocate the folder ID for COMMAND\\_CENTER\\_FOLDER\\_NAME.\u000b\nRetrieve all Google Docs within this folder.\u000b\nFor each document:\u000b\nFetch content using docs\\_service.\u000b\nConvert content to Markdown using markdownify.\u000b\nSave the Markdown file to IMPORT\\_PATH.\u000b\n\ud83d\udee0\ufe0f Error Handling and Debugging\nCommon Issues Encountered:\nMissing Environment Variables:\u000b\nError: \u274c Missing GOOGLE\\_CREDS\\_JSON in environment variables\u000b\nSolution: Ensure that GOOGLE\\_CREDS\\_JSON is correctly set in your environment.\u000b\nSyntax Errors:\u000b\nError: SyntaxError: 'return' outside function\u000b\nCause: Incorrect indentation or misplaced return statement.\u000b\nSolution: Ensure that all code blocks are properly indented and that return statements are within function scopes.\u000b\nAttribute Errors:\u000b\nError: AttributeError: 'InstalledAppFlow' object has no attribute 'run\\_console'\u000b\nCause: Incorrect method used for initiating OAuth flow.\u000b\nSolution: Use run\\_local\\_server(port=0) instead of run\\_console() for local development.\u000b\nOAuth Redirect URI Mismatch:\u000b\nError: Error 400: redirect\\_uri\\_mismatch\u000b\nCause: The redirect URI used in the application doesn't match any of the authorized redirect URIs in the Google Cloud Console.\u000b\nSolution:\u000b\nNavigate to Google Cloud Console Credentials page.\u000b\nSelect your OAuth 2.0 Client ID.\u000b\nIn the \"Authorized redirect URIs\" section, add the exact redirect URI used by your application (e.g., http://localhost:8080/).\u000b\nSave the changes.\u000b\n\ud83d\udd04 Full Sync Process\nEndpoint: POST /docs/full\\_sync\nFunctionality:\nInitiates the Google Docs synchronization process.\u000b\nEmbeds the synchronized Markdown documents into the knowledge base.\u000b\nLogs the synchronization activity for auditing and tracking purposes.serverfault.com", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3051, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a32012a9-cfb4-4348-a4da-a4f307855c60": {"__data__": {"id_": "a32012a9-cfb4-4348-a4da-a4f307855c60", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/gmail.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c7081819-8165-475b-8418-4f6e7ae1e5af", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/gmail.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "99beade379f26ca8b0c5415b0c8fdf0e2bd55836805249f9b1c7b2b8616e7a51", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `gmail.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides utility functions for interacting with the Gmail API, including sending emails and managing email listings.\n\n## Upstream\n- ENV: GOOGLE_CREDS_JSON, NOTIFY_FROM_EMAIL, NOTIFY_FROM_EMAIL\n- Imports: os, googleapiclient.discovery, email.mime.text, base64, pathlib, google.oauth2.service_account\n\n## Downstream\n- \u2014\n\n## Contents\n- `get_email()`\n- `get_gmail_service()`\n- `list_emails()`\n- `send_email()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 469, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "49aac477-69c9-4865-b87f-696ffa1dbd0f": {"__data__": {"id_": "49aac477-69c9-4865-b87f-696ffa1dbd0f", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/summarize_memory.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ec241d19-322e-4f3a-a687-655effb18a66", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/summarize_memory.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b012f7e548bf7d7409b34ac656008683df9439f24a882a366ecba064538c0540", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `summarize_memory.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provide a summary of memory usage and management within the system, utilizing OpenAI services for analysis.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, openai, utils.openai_client\n\n## Downstream\n- services.context_injector\n\n## Contents\n- `summarize_memory_entry()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 332, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "52a61899-7700-4010-8d4a-18796f6304d3": {"__data__": {"id_": "52a61899-7700-4010-8d4a-18796f6304d3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/status_code.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "83586bda-1f60-4d3d-9d13-13be055d9559", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/status_code.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "de965c3c71e3ecade6858ca49d75a726d9dd52266bdd8b8a9cb1e7826968cdc1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `status_code.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provides utilities to extract and interpret status codes from FastAPI responses.\n\n## Upstream\n- ENV: \u2014\n- Imports: fastapi, pathlib, os, ast, datetime\n\n## Downstream\n- \u2014\n\n## Contents\n- `extract_functions()`\n- `get_code_status()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 295, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ab01e946-537f-4a25-8257-1cc148af3390": {"__data__": {"id_": "ab01e946-537f-4a25-8257-1cc148af3390", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/MemoryAgent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "47027b86-f8a8-41e4-96a4-039e46066578", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/MemoryAgent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bd37a92c8edfc71255f22f4939252974cb001a994e597324fd07479508468357", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `MemoryAgent.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Manages in-memory data storage and retrieval operations for the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: typing, os\n\n## Downstream\n- \u2014\n\n## Contents\n- `MemoryAgent()`\n- `SimpleMemoryStore()`\n- `__init__()`\n- `add()`\n- `add_memory()`\n- `get_memory()`\n- `query()`\n- `summarize_memory()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 364, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "40723709-99e9-4311-ba95-7a02866227b7": {"__data__": {"id_": "40723709-99e9-4311-ba95-7a02866227b7", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/feasibility_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3691fab0-e6a0-4aa8-a019-8b09d04bcde3", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/feasibility_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "529897b2c2d81fef17aafd89868fc33f9e3a5905557d8ba957f8b64b9599f5ee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `feasibility_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class to assess the feasibility of proposed solutions within the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `FeasibilityCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 288, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c7a655e2-4172-4208-9d9a-1332998199a2": {"__data__": {"id_": "c7a655e2-4172-4208-9d9a-1332998199a2", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_planner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f42014d8-f52f-432c-a23e-c4adf818bb80", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_planner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "db81baaf758402166b231c5213aac23e93d681aa1cf5520239ff2417ca753056", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_planner_agent.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Provides unit tests for the planner agent's behavior when encountering invalid GPT labels.\n\n## Upstream\n- ENV: \u2014\n- Imports: pytest, unittest.mock, agents, llama_index.core.settings\n\n## Downstream\n- \u2014\n\n## Contents\n- `test_critic_fallback_on_invalid_gpt_label()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 334, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ae4615be-fd2f-49da-83c1-1e6a323bdeee": {"__data__": {"id_": "ae4615be-fd2f-49da-83c1-1e6a323bdeee", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/echo_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "706fbb7c-ddd2-48f6-af6c-3a0807367940", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/echo_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ca0465295c773443c158261e24e588bc28105db9b069fdc3356200affe3f45a4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `echo_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Provides functionality to interact with OpenAI's API for streaming responses, mainly used for echoing user inputs back through a conversational interface.\n\n## Upstream\n- ENV: ECHO_MODEL\n- Imports: os, typing, openai, core.logging, utils.openai_client\n\n## Downstream\n- agents.mcp_agent\n- routes.ask\n\n## Contents\n- `run()`\n- `stream()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 400, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f9c59816-a0ef-40cb-b282-377372e52016": {"__data__": {"id_": "f9c59816-a0ef-40cb-b282-377372e52016", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/patch_utils.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a832645a-9453-4736-8025-aecf9a5eba91", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/patch_utils.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "467ad86a1c49f84e75f413bff22e7b304720f0e9c9db5ed5f3eb218f3879fae8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `patch_utils.py`\n\n**Directory**: `utils`\n**Purpose**: # Purpose: Provides utilities for handling and manipulating software patches, including validation, diff generation, and rendering previews.\n\n## Upstream\n- ENV: \u2014\n- Imports: difflib, typing\n\n## Downstream\n- agents.codex_agent\n- routes.codex\n\n## Contents\n- `generate_diff()`\n- `render_patch_preview()`\n- `summarize_patch()`\n- `validate_patch_format()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 406, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d6f61d78-a790-4f7e-b76e-94b7f5e0b72d": {"__data__": {"id_": "d6f61d78-a790-4f7e-b76e-94b7f5e0b72d", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/cron_generate_auto_context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8f8367db-5cac-4e15-93d0-a9d286be123f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/cron_generate_auto_context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e1014bd003af9989c3758844ca92fb7dce07fbd72f274ca7c1977706044127d5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `cron_generate_auto_context.py`\n\n**Directory**: `cron`\n**Purpose**: # Purpose: Automates the generation of context data at scheduled intervals using system cron jobs.\n\n## Upstream\n- ENV: \u2014\n- Imports: time, subprocess, datetime\n\n## Downstream\n- \u2014\n\n## Contents\n- `run()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 270, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cda99eb6-93b2-47db-bd8d-1192bd5652d3": {"__data__": {"id_": "cda99eb6-93b2-47db-bd8d-1192bd5652d3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/memory.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3369d11c-8de4-437f-ba9a-0e316cafabab", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/memory.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6f3f53dc8a7392945ffce90c4ffa93a65a33e90eddf315d01705b164a768da34", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `memory.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manage and log memory-related data entries for debugging and tracking purposes.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, json, datetime\n\n## Downstream\n- agents.janitor_agent\n\n## Contents\n- `debug_log_entry()`\n- `save_memory_entry()`\n- `summarize_memory_entry()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 322, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aefde810-25d5-4631-a13a-70cdc7084817": {"__data__": {"id_": "aefde810-25d5-4631-a13a-70cdc7084817", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/index_codebase.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1d6cd9fb-a361-4f78-992d-b56f76f279f8", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/index_codebase.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c1ec5ad8aa754d32e6f2ce537819da239315f91938014531e7b8e1d47f78a7ee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `index_codebase.py`\n\n**Directory**: `tools`\n**Purpose**: # Purpose: Automate the indexing and validation of files within a directory structure for system-wide management.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, sys, pathlib\n\n## Downstream\n- \u2014\n\n## Contents\n- `is_valid_file()`\n- `walk_directory()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 295, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0d3b7044-3fda-4cb4-a2f3-fb8c763cb880": {"__data__": {"id_": "0d3b7044-3fda-4cb4-a2f3-fb8c763cb880", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/graph.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b0e405ef-9256-458a-81d1-66a8a3acde9a", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/graph.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d99c7d3589994ea4ab4958da075498115bed09d151d912a0862a260da6d84419", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `graph.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides functionalities to interact with graph databases for querying and summarizing route data.\n\n## Upstream\n- ENV: \u2014\n- Imports: services.neo4j_driver, core.logging\n\n## Downstream\n- agents.metaplanner_agent\n- services.context_injector\n\n## Contents\n- `query_similar_routes()`\n- `summarize_recent_context()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 372, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "840156a8-2c98-4f5d-81fa-b238f06477b7": {"__data__": {"id_": "840156a8-2c98-4f5d-81fa-b238f06477b7", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/neo4j_driver.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "866b3fed-1f8f-4c4a-982d-5b6f98dec92d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/neo4j_driver.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d264e78852be2a56e2f38c6d8cce032e4e223f45f903beb849f7028df65c184b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `neo4j_driver.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides an interface for managing Neo4j database sessions and executing read/write operations.\n\n## Upstream\n- ENV: NEO4J_URI, NEO4J_USER, NEO4J_PASSWORD\n- Imports: os, neo4j, contextlib, core.logging\n\n## Downstream\n- agents.trainer_agent\n- services.graph\n- test_graph_neoagent\n\n## Contents\n- `execute_read()`\n- `execute_write()`\n- `get_session()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 418, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7497ab53-31f3-439e-aa18-a99b31a24a48": {"__data__": {"id_": "7497ab53-31f3-439e-aa18-a99b31a24a48", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/base.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc8c11db-2437-4b90-92d2-3f71f09b3fd4", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/base.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f3b01f55c9acb6a246ae9ce5621b981992cf8ca8c682a50e31c3d7fd589dc864", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `base.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provide abstract base classes for creating critic components in the system, enforcing a standard interface for evaluation methods.\n\n## Upstream\n- ENV: \u2014\n- Imports: abc, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `BaseCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 313, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "03f3e38a-8912-430a-a49a-8a976586ecb8": {"__data__": {"id_": "03f3e38a-8912-430a-a49a-8a976586ecb8", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/search.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "db8bb5a5-afd2-4451-9558-92b9c4565f3a", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/search.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ab5f310d0fb08c32355577a80dffd4d3f090876772812bbefd33c29689a58921", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `search.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provide API endpoints for handling search queries and validating API keys.\n\n## Upstream\n- ENV: API_KEY\n- Imports: __future__, os, logging, typing, fastapi, services\n\n## Downstream\n- main\n\n## Contents\n- `require_api_key()`\n- `search()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 297, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "788f7a29-c3c8-4b0c-8351-d2ac2b329ab6": {"__data__": {"id_": "788f7a29-c3c8-4b0c-8351-d2ac2b329ab6", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/inject_header.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4c25d2cf-5b1c-4588-b796-b32b0e82982c", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/inject_header.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1c1b78d87ff82b94248ee8d50c3fbab98cc2197f82b00db232f9bc4a7f018f9d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `inject_header.py`\n\n**Directory**: `tools`\n**Purpose**: # Purpose: Manipulate and inject headers into files based on extracted metadata.\n\n## Upstream\n- ENV: \u2014\n- Imports: ast, sys, pathlib\n\n## Downstream\n- \u2014\n\n## Contents\n- `extract_metadata()`\n- `format_header()`\n- `inject_header()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 284, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a3ab03dd-3e6e-4b0d-995f-05a6e34db1da": {"__data__": {"id_": "a3ab03dd-3e6e-4b0d-995f-05a6e34db1da", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/embeddings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9a5843de-2db2-44e3-940b-9f80b60d7f83", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/embeddings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f84db51653f6ed49f579e3ae4fd3d2bce13e755390847806906d5205386f7676", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `embeddings.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Manage the lifecycle and API endpoints for embedding generation and updates in the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: fastapi, fastapi.responses, services, os, pathlib, time, pickle\n\n## Downstream\n- \u2014\n\n## Contents\n- `embeddings_rebuild()`\n- `embeddings_status()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 335, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f108f1eb-1f3a-427e-a712-24be0b1fabba": {"__data__": {"id_": "f108f1eb-1f3a-427e-a712-24be0b1fabba", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/logs_sessions.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5ff9ffae-496b-4bf3-90ac-f7b447b1c627", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/logs_sessions.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7474d5e9cf0acb1e0425aaee035200623e588838a7cd3e1a1bd8481dcf1aa652", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `logs_sessions.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Manage and retrieve logs of user sessions within the application.\n\n## Upstream\n- ENV: \u2014\n- Imports: fastapi, pathlib, json\n\n## Downstream\n- \u2014\n\n## Contents\n- `list_all_sessions()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 247, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e470bb1c-cef7-426f-a971-74931a6b7fa6": {"__data__": {"id_": "e470bb1c-cef7-426f-a971-74931a6b7fa6", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/impact_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "76964f07-5872-4b8a-84cc-631239c2cd1b", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/impact_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d89eff5a5c2b82a6830a021abe099fa21fef0d2fb7590d00890cf13a091510ae", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `impact_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides functionality to assess and score the impact of different actions within the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `ImpactCritic()`\n- `enrich()`\n- `score()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 298, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a535e976-59d2-4b32-b8e7-b9464a22e437": {"__data__": {"id_": "a535e976-59d2-4b32-b8e7-b9464a22e437", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/redundancy_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "151ba076-2f4d-4bf5-b03e-439d6caf12bd", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/redundancy_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d7e858803dcd0cf1c403ba24a3c12c04bfbe22b692fdd3fcc671aa26a361113c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `redundancy_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class to evaluate and critique redundancy levels in data or processes.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `RedundancyCritic()`\n- `__init__()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 299, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aa2cc713-394f-4ab3-91de-b32b8a765d47": {"__data__": {"id_": "aa2cc713-394f-4ab3-91de-b32b8a765d47", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/safety_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "699da9e9-54a1-443b-8eb2-b6827196f08b", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/safety_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "22b2701163994004f74d772b60f6db2a2a8b8263ef056cba28e7c8e396d3e2f8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `safety_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a safety evaluation layer to assess risks and ensure compliance with safety standards in system operations.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `SafetyCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 311, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "37100292-9746-4187-8333-28d4d0b4dde8": {"__data__": {"id_": "37100292-9746-4187-8333-28d4d0b4dde8", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/settings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b1cc43bf-4589-478e-81ff-0e07cb4e666d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/settings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "65f7b44bb8e1f16bb9ed1d6f1fdb71410824a3b77366a45c6e4c641b1e54ee6b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `settings.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manage application configuration and environment variable loading.\n\n## Upstream\n- ENV: OPENAI_API_KEY, GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, GOOGLE_REDIRECT_URI\n- Imports: os, dotenv, pathlib\n\n## Downstream\n- \u2014\n\n## Contents\n- `assert_env()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 309, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e2bbe2dc-7647-4136-b112-e818e83e2f17": {"__data__": {"id_": "e2bbe2dc-7647-4136-b112-e818e83e2f17", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/planner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7fb56dc7-e6fd-47e8-9550-ee9c1ac40e78", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/planner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "87755d7d7cfdb205f5248fc18e2e77f22fa21603a403c99c758150c72115409c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `planner_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Provides a planning agent that integrates with OpenAI services to generate and manage task plans based on user queries.\n\n## Upstream\n- ENV: PLANNER_MODEL\n- Imports: os, json, traceback, uuid, openai, core.logging, agents.critic_agent, utils.openai_client\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `PlannerAgent()`\n- `ask()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 400, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "51addb2d-3b71-4c90-8bc4-77e4653e9148": {"__data__": {"id_": "51addb2d-3b71-4c90-8bc4-77e4653e9148", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/dependency_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f69c4fcb-0c74-4e0c-aae1-60de6e84cfef", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/dependency_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "07a4a4bd0da1c9449798d8c7c9d77a1f6c7b61d27ef7fa9b3d01703df4dcb691", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `dependency_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a utility class for evaluating and critiquing the dependency management within the project.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `DependencyCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 303, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2796e9bc-73c7-4160-9c85-d7a11b2aadd3": {"__data__": {"id_": "2796e9bc-73c7-4160-9c85-d7a11b2aadd3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/mcp.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "88e8d530-a607-46e6-83dc-8869caa28d4d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/mcp.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1ac966cc5b53d2d2868b846d868ca5d1fd66773b4872c7601c9fe6dc2ff75284", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `mcp.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provides the main control program (MCP) for handling API requests and managing agent interactions in a FastAPI application.\n\n## Upstream\n- ENV: \u2014\n- Imports: fastapi, typing, agents.mcp_agent\n\n## Downstream\n- main\n\n## Contents\n- `mcp_run()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 299, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "93525d34-0f25-48df-9d2d-08e796afd8a7": {"__data__": {"id_": "93525d34-0f25-48df-9d2d-08e796afd8a7", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/sync_context_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a892dcf7-2ecb-4529-8234-2e7db7818063", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/sync_context_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "49bded4450b19384094105db3e729e0bfecb7d722c4f5fc5ad114a78488a71bd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `sync_context_docs.py`\n\n**Directory**: `scripts`\n**Purpose**: # Purpose: Synchronize context documentation from a Google Drive source to the local file system.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, pathlib, services.google\n\n## Downstream\n- \u2014\n\n## Contents\n- `sync_context_from_drive()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 285, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "63600eb1-fb86-4593-9a93-1c94b5ef99c2": {"__data__": {"id_": "63600eb1-fb86-4593-9a93-1c94b5ef99c2", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/codex.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bbd7339a-c4cb-4319-8db4-a4c4834c9631", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/codex.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "668f32ea426084831ccd8f64299b94962b6e3e183119b13cf8d366a8cab3e5d8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `codex.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provides API endpoints for applying patches to system configurations using FastAPI.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, fastapi, fastapi.responses, pydantic, utils.patch_utils, core.logging\n\n## Downstream\n- main\n\n## Contents\n- `PatchRequest()`\n- `apply_patch()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 324, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "290dced9-29eb-4d88-9dca-4479052f5f64": {"__data__": {"id_": "290dced9-29eb-4d88-9dca-4479052f5f64", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/google_docs_sync.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "57885cc7-b129-463a-ad0c-bab1e0299b69", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/google_docs_sync.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7aef33016a3151b76f3342a00bedf87dd2968b5e3955cb491f8665e059b56541", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `google_docs_sync.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Synchronize documents from Google Docs to local storage, handling authentication, retrieval, and conversion to markdown.\n\n## Upstream\n- ENV: GOOGLE_CREDS_JSON, GOOGLE_TOKEN_JSON, GOOGLE_TOKEN_JSON, ENV\n- Imports: os, base64, pathlib, google.oauth2.credentials, google_auth_oauthlib.flow, google.auth.transport.requests, googleapiclient.discovery, markdownify\n\n## Downstream\n- routes.context\n- routes.docs\n\n## Contents\n- `fetch_and_save_doc()`\n- `find_folder_id()`\n- `get_docs_in_folder()`\n- `get_google_service()`\n- `sync_google_docs()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 611, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f34b79c8-0626-4ace-b47c-e4bc01867f1a": {"__data__": {"id_": "f34b79c8-0626-4ace-b47c-e4bc01867f1a", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/kb.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1fa4b4dd-7527-44a9-ac74-37d0de1245e4", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/kb.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "df85f8f2145df6bfda4e906e0e9771f75313f56dcccf48f3add55c796cc73658", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `kb.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manages the knowledge base indexing, search functionality, and embedding operations within the system.\n\n## Upstream\n- ENV: KB_EMBED_MODEL, OPENAI_EMBED_MODEL\n- Imports: os, json, shutil, logging, pathlib, typing, services.config, llama_index.core, llama_index.core.extractors, llama_index.core.ingestion, llama_index.core.node_parser, llama_index.embeddings.openai, hashlib, sys, time, llama_index.core, llama_index.core\n\n## Downstream\n- services.agent\n- services.context_injector\n\n## Contents\n- `_kb_cli()`\n- `_vector_dim_current()`\n- `_vector_dim_stored()`\n- `api_reindex()`\n- `api_search()`\n- `embed_all()`\n- `ensure_vector_dim_initialized()`\n- `get_index()`\n- `get_recent_summaries()`\n- `index_is_valid()`\n- `query_index()`\n- `search()`\n- `should_index_file()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 825, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bc840d87-1fee-4c5d-ae06-5988d234c350": {"__data__": {"id_": "bc840d87-1fee-4c5d-ae06-5988d234c350", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/robustness_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8aa7876a-b637-4ad9-b75c-3073683f1a5f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/robustness_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4dfc74d735aa7a5a77aa35fe3996dcae0660b19665a946014ed574d3df6d3bed", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `robustness_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides functionality to assess and critique the robustness of models within the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `RobustnessCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 292, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0493059e-e22c-4679-8a3f-42b7a5e4c359": {"__data__": {"id_": "0493059e-e22c-4679-8a3f-42b7a5e4c359", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/logging.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2cb798a6-7b13-4919-9eee-db4d36ee6a2d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/logging.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "140e6d97e34b04aa1fa81e459c6b9f77672daaa99c002f1c5efb9e024023844b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `logging.py`\n\n**Directory**: `core`\n**Purpose**: # Purpose: Provide centralized logging functionality for system events and errors.\n\n## Upstream\n- ENV: \u2014\n- Imports: datetime, json\n\n## Downstream\n- agents.codex_agent\n- agents.control_agent\n- agents.critic_agent.run\n- agents.docs_agent\n- agents.echo_agent\n- agents.mcp_agent\n- agents.memory_agent\n- agents.metaplanner_agent\n- agents.planner_agent\n- agents.simulation_agent\n- agents.trainer_agent\n- routes.codex\n- services.graph\n- services.neo4j_driver\n- utils.logger\n\n## Contents\n- `log_event()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 546, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "17dfb2c1-e905-47bb-a9a2-2100d4155d78": {"__data__": {"id_": "17dfb2c1-e905-47bb-a9a2-2100d4155d78", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/relay_mcp.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b9cdee30-3ede-46b1-a11f-33e47fab4409", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/relay_mcp.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3168fe8aa2123674e0af64f41abfe5fe4786d4d6cdcefc8da1831e052f4e633c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `relay_mcp.py`\n\n**Directory**: `core`\n**Purpose**: # Purpose: Provides the interface and tools for managing and testing the MCP (Master Control Program) integration within a FastAPI framework.\n\n## Upstream\n- ENV: \u2014\n- Imports: fastapi, fastapi_mcp, typing, agents, agents.mcp_agent\n\n## Downstream\n- \u2014\n\n## Contents\n- `codex_generate_patch()`\n- `register_mcp()`\n- `test_full_mcp_run()`\n- `test_tool()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 400, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "94b5c87a-4fa7-45c6-b3fe-a6adab2cf745": {"__data__": {"id_": "94b5c87a-4fa7-45c6-b3fe-a6adab2cf745", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/ethical_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "218c7a63-04e1-40cc-9d10-0de6d414d4c5", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/ethical_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2276e693050c9e27e56ec9b8294ada12a6e28c2c67ff1eb91408e654cd5e626e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `ethical_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class to evaluate actions or decisions based on ethical guidelines and principles.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `EthicalCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 290, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3e3509a7-e37c-408a-bbb4-5dce5f64613a": {"__data__": {"id_": "3e3509a7-e37c-408a-bbb4-5dce5f64613a", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/logger.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "da30af58-8099-4b15-8bcc-1de96ed7e084", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/logger.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "865e4cdd413eea9301c1afe0a7afeefa1ae99490a277c083e49dea85963d95af", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `logger.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provide centralized logging utilities for different levels of application events and errors.\n\n## Upstream\n- ENV: \u2014\n- Imports: logging, datetime\n\n## Downstream\n- \u2014\n\n## Contents\n- `log_error()`\n- `log_event()`\n- `log_info()`\n- `log_warning()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 305, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6f57ce86-3154-4bb6-aa4f-60e075b7d7d2": {"__data__": {"id_": "6f57ce86-3154-4bb6-aa4f-60e075b7d7d2", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_admin_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a19f0d88-6b00-4d92-88d5-7c6bbe6f393e", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_admin_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4e4e268b9f28ddd2abf3bd72676e58033c0a5239cc9e3a64b2e2218278389acf", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_admin_routes.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Provides test cases for verifying the functionality and security of administrative routes within the application.\n\n## Upstream\n- ENV: \u2014\n- Imports: json, subprocess, routes\n\n## Downstream\n- \u2014\n\n## Contents\n- `Dummy()`\n- `fake_run()`\n- `test_generate_auto_context_runs_correct_script()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 356, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d6042ce2-38b7-47a1-affe-d7768e79482b": {"__data__": {"id_": "d6042ce2-38b7-47a1-affe-d7768e79482b", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_context_engine.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e64c2eaa-2ad0-431a-a479-4ed02839f757", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_context_engine.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a2c1cdefba5ce34243aca14cf62a1a6d7d1dc9624aa17e29b518c977cd8950db", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_context_engine.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Provides unit tests for the context engine functionality, ensuring it integrates correctly with search components and handles environmental changes.\n\n## Upstream\n- ENV: \u2014\n- Imports: types, sys, pathlib, pytest, services\n\n## Downstream\n- \u2014\n\n## Contents\n- `ctx()`\n- `fake_search()`\n- `stub_search()`\n- `test_build_context_passes_threshold()`\n- `test_context_build_includes_search_snippet()`\n- `test_env_root_change_clears_cache()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 503, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f8b56a8c-0c88-4743-81ae-b7b4de4906a7": {"__data__": {"id_": "f8b56a8c-0c88-4743-81ae-b7b4de4906a7", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/simulation_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ed4011cd-c225-4fe0-b628-eea9c7c94519", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/simulation_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "cd344b1b67794ba0c5122e6af507c6bde6c5ed87698058fedd618c0723e83f0f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `simulation_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Defines a class to manage and execute simulations based on predefined plans.\n\n## Upstream\n- ENV: \u2014\n- Imports: typing, core.logging, json\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `SimulationAgent()`\n- `__init__()`\n- `run()`\n- `simulate_plan()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 323, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d77f08bd-f843-44c6-a5fe-040d1977f638": {"__data__": {"id_": "d77f08bd-f843-44c6-a5fe-040d1977f638", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/trainer_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ada3dd06-c709-4a5b-b32e-f5109ea9c4f9", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/trainer_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "03b599c088985781a20cac031cd71fd41d0223ed17d7a015d9b8c39ee14ff429", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `trainer_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Manages the training process of agents, including initialization, execution, and result ingestion.\n\n## Upstream\n- ENV: \u2014\n- Imports: typing, datetime, core.logging, services.neo4j_driver\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `TrainerAgent()`\n- `__init__()`\n- `ingest_results()`\n- `run()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 367, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0ce6869c-84df-4bbc-b6fc-083764d3ec41": {"__data__": {"id_": "0ce6869c-84df-4bbc-b6fc-083764d3ec41", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/control_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "caf9723a-55d3-4cfc-b543-c0ea2195247d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/control_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b01480ced42056575c75f008d8f0ce313f99a6db7ad6f0d99520db92d4533b21", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `control_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Provides an interface for managing and controlling system services, including starting, restarting, and cache management.\n\n## Upstream\n- ENV: \u2014\n- Imports: typing, core.logging, subprocess, shlex\n\n## Downstream\n- agents.mcp_agent\n- routes.control\n\n## Contents\n- `ControlAgent()`\n- `__init__()`\n- `_run_command()`\n- `clear_cache()`\n- `echo_command()`\n- `restart_service()`\n- `run()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 450, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8cef1c91-7d1e-426e-9316-239c2b4d16b6": {"__data__": {"id_": "8cef1c91-7d1e-426e-9316-239c2b4d16b6", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/delete_embeddings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a8d18b7c-d006-46d9-b90a-b28d53b1c1a0", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/delete_embeddings.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b5d597b94c32ad8122d152246140046678b87afed1e36f0cebc844f6ba340b56", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `delete_embeddings.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manages the deletion of text embeddings from a search index, including file handling and index updates.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, openai, numpy, pickle, sys\n\n## Downstream\n- \u2014\n\n## Contents\n- `build_index()`\n- `embed_text()`\n- `iter_files()`\n- `search_index()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 346, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "13bcb590-4b05-4adf-822d-a4cd14e0bb57": {"__data__": {"id_": "13bcb590-4b05-4adf-822d-a4cd14e0bb57", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/intent_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c5ba274a-8e60-4949-937f-05ad9855bb8f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/intent_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1452e5467b6310124b0549b850c4b0e7213178783da462f0429421045611156c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `intent_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class to evaluate the alignment and quality of user intents within the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `IntentCritic()`\n- `__init__()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 299, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "de3773de-562c-4e08-9b5e-af3e1a50f434": {"__data__": {"id_": "de3773de-562c-4e08-9b5e-af3e1a50f434", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "e3d52a18-e42a-412c-930c-487f4c4b53e0", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2ec4a017d8d653a7d638088c0cd81873487c7812053c09826c8784fb145edc98", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `docs.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Manages documentation-related operations including viewing, syncing, and organizing documents within the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: __future__, os, shutil, pathlib, typing, fastapi, fastapi.responses, services.google_docs_sync, services, services.context_engine, services.docs_utils\n\n## Downstream\n- main\n\n## Contents\n- `_safe_resolve()`\n- `full_sync()`\n- `list_docs()`\n- `mark_priority()`\n- `promote_doc()`\n- `prune_duplicates()`\n- `refresh_kb()`\n- `require_api_key()`\n- `sync_docs()`\n- `view_doc()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 575, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "777f3bc7-07c3-4ec7-bb7f-61570df6f9c6": {"__data__": {"id_": "777f3bc7-07c3-4ec7-bb7f-61570df6f9c6", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/batch_generate_headers.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cf756839-05c1-45c6-94a3-d951cac05534", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/batch_generate_headers.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "9e8effeec7e8880ddcef715bb333ebcae8c027717466d09121fc333ea0ec5fd3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `batch_generate_headers.py`\n\n**Directory**: `tools`\n**Purpose**: # Purpose: Automate the generation and injection of header blocks into files across the codebase based on metadata.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, json, pathlib, parse_file_metadata, index_codebase\n\n## Downstream\n- \u2014\n\n## Contents\n- `inject_header_block()`\n- `main()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 339, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "56421468-52d0-4a9d-8adf-380025fcd13b": {"__data__": {"id_": "56421468-52d0-4a9d-8adf-380025fcd13b", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/readme.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cd74ef63-f1f2-461a-b333-dc4c29d31454", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/readme.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "789c9305587cda52020ac0ef184d418bc61c9013b7015c4635e7f7ba52b318f6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 0, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5108fc89-72a5-4e3f-81bc-c882a1f45fa3": {"__data__": {"id_": "5108fc89-72a5-4e3f-81bc-c882a1f45fa3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/performance_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "6318a13f-30ce-4a53-abb8-bd66a8fefd0b", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/performance_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "28bf31e4b55a270d10e759ad9bf81c816630b2c66279923d518b42b5a85a86cb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `performance_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides functionality to assess and critique the performance of various system components.\n\n## Upstream\n- ENV: \u2014\n- Imports: base\n\n## Downstream\n- \u2014\n\n## Contents\n- `PerformanceCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 288, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "81ee9871-7ace-4162-b451-5956b74d6606": {"__data__": {"id_": "81ee9871-7ace-4162-b451-5956b74d6606", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/clarity_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "194092e5-0abb-4a5c-bffb-ee7e092c512d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/clarity_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "090e1c00f9f8c8af099993921941fd70444fbb52004771d06d1219e3c4c1057b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `clarity_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides functionality to assess and score the clarity of text using predefined linguistic metrics.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `ClarityCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 296, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2851ddbe-50b9-48bf-8311-f1d0f926c598": {"__data__": {"id_": "2851ddbe-50b9-48bf-8311-f1d0f926c598", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/memory_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1cc10e7d-e036-4644-8f49-1672e73ab575", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/memory_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7c8f34bfd2e565842ceb183ed78157f37017b6826589acfd384bdc5211f5b296", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `memory_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Manages the storage, retrieval, and summarization of memory entries within the application.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, json, pathlib, typing, datetime, core.logging\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `MemoryAgent()`\n- `__init__()`\n- `_load_entries()`\n- `_summarize_entries()`\n- `run()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 378, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "511c972e-7fbb-49b3-afcb-540299d408f8": {"__data__": {"id_": "511c972e-7fbb-49b3-afcb-540299d408f8", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/main.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5d57c41e-b51e-498c-9a63-f7d1803f1e5b", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/main.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "07533004cbd2bac63f8475f2878d9158da124a4cbecf0bf66b32bad137a2fdca", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `main.py`\n\n**Directory**: `.`\n**Purpose**: # Purpose: Serve as the entry point for the web application, initializing the server and routing requests to appropriate handlers.\n\n## Upstream\n- ENV: ENV, FRONTEND_ORIGIN_REGEX, FRONTEND_ORIGIN, ENV, JAEGER_HOST, JAEGER_PORT, PORT, ENABLE_ADMIN_TOOLS\n- Imports: __future__, os, logging, sys, pathlib, fastapi, fastapi.middleware.cors, fastapi.responses, routes.ask, routes.status, routes.control, routes.docs, routes.oauth, routes.debug, routes.kb, routes.search, routes.admin, routes.codex, routes.mcp, routes.logs, services, opentelemetry, opentelemetry.sdk.resources, opentelemetry.sdk.trace, opentelemetry.sdk.trace.export, opentelemetry.exporter.jaeger.thrift, opentelemetry.instrumentation.fastapi, uvicorn, dotenv, subprocess\n\n## Downstream\n- \u2014\n\n## Contents\n- `ensure_kb_index()`\n- `health_check()`\n- `root()`\n- `test_cors()`\n- `version()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 892, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ba80b972-49b9-42d0-b94e-4d35046d99a9": {"__data__": {"id_": "ba80b972-49b9-42d0-b94e-4d35046d99a9", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7005b7a1-ef4b-4945-b4c5-56d8a93b2526", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7312a8041e77b971f084fe636b8c83b473e58231252e13111ed2ebcba12336b3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `agent.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides functionalities for automated documentation generation, code review, and interaction with knowledge base services.\n\n## Upstream\n- ENV: API_KEY, RAILWAY_URL, ENABLE_REFLECT_AND_PLAN\n- Imports: os, re, json, pathlib, typing, openai, services.kb, httpx, services.context_engine, utils.openai_client\n\n## Downstream\n- \u2014\n\n## Contents\n- `answer()`\n- `gen()`\n- `generate_doc_for_path()`\n- `reflect_and_plan()`\n- `run_code_review()`\n- `search_docs()`\n- `wants_docgen()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 533, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "00bb5452-6964-41bb-800f-93ab00fbef9d": {"__data__": {"id_": "00bb5452-6964-41bb-800f-93ab00fbef9d", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b39d371e-7a93-4175-9f8b-53a63cb50dab", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/context.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e878d7be1811389cf47a32f98baf9a76e95d050a2f68b2e5324895a232bb9f6f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `context.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Manage and synchronize documentation context between local and cloud storage, ensuring consistency and updating legacy systems.\n\n## Upstream\n- ENV: OPENAI_API_KEY\n- Imports: fastapi, services.logs, services.google_docs_sync, openai, pathlib, os, traceback\n\n## Downstream\n- \u2014\n\n## Contents\n- `ensure_stub_file()`\n- `legacy_sync_google()`\n- `safe_write_markdown()`\n- `sync_docs_and_update()`\n- `update_context_summary()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 481, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7a35a378-0f57-4ae0-af3b-10234d5514c3": {"__data__": {"id_": "7a35a378-0f57-4ae0-af3b-10234d5514c3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/google.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c759b981-cc25-4b8a-a95c-ac88c5923b62", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/google.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5d4fd7b59bb724cfac7098054c159a7cf0c6ba6beaed3f03ff975178b71ed348", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `google.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides functionality for fetching and converting Google Drive documents into markdown format.\n\n## Upstream\n- ENV: \u2014\n- Imports: typing, markdownify, google_docs_sync\n\n## Downstream\n- scripts.sync_context_docs\n\n## Contents\n- `fetch_drive_docs()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 310, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ca259773-107a-41b0-86e6-b4ee8fa56810": {"__data__": {"id_": "ca259773-107a-41b0-86e6-b4ee8fa56810", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/status.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "4f61e4d8-ba03-4a38-b1b6-62e551cd88e4", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/status.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f7e0848aa547198b5b0914b61f657519b8804f1b5e3b5e5bb7a081923fba8f38", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `status.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provide utilities to fetch and format system status, versioning, and operational context details for monitoring and diagnostics.\n\n## Upstream\n- ENV: RELAY_PROJECT_ROOT, RELAY_PROJECT_ROOT\n- Imports: fastapi, pathlib, os, subprocess, datetime, subprocess\n\n## Downstream\n- main\n\n## Contents\n- `fmt_time()`\n- `get_context_status()`\n- `get_env_status()`\n- `get_status_paths()`\n- `get_summary()`\n- `get_version()`\n- `list_context_inventory()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 500, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b751cb63-12d6-4bc1-8b45-89161560795a": {"__data__": {"id_": "b751cb63-12d6-4bc1-8b45-89161560795a", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/debug.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "631386d9-3f6f-4fba-ac09-41cfcd4dc881", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/debug.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "20362a6bc5d8ec13fe29dc281aec5c4deb9c59dc2d2c7d3180096a0d55449d40", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `debug.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provides an API endpoint to display current environment settings for debugging purposes.\n\n## Upstream\n- ENV: GOOGLE_CREDS_JSON\n- Imports: fastapi, os\n\n## Downstream\n- main\n\n## Contents\n- `debug_env()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 262, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2ffc3ac1-a207-428c-967c-469dea281fc4": {"__data__": {"id_": "2ffc3ac1-a207-428c-967c-469dea281fc4", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/consensus_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "1a0c998e-412a-4b25-8183-c295693faa19", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/consensus_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "90142f9a98ef152b1ecf9d2c6ad87bbd2acf427159c12165ed35640520e4a04a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `consensus_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class to evaluate and critique the consensus mechanism in a distributed system.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `ConsensusCritic()`\n- `__init__()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 306, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1314631e-dc91-4350-b05c-50dc3f9144e8": {"__data__": {"id_": "1314631e-dc91-4350-b05c-50dc3f9144e8", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/admin.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8b1a66d5-95b0-4881-9aa7-a1aa06bc2021", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/admin.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "602f2ac27cd4a4e13d658c1de6d2de3790f5ad6d48d8e9f36d7996723447aa78", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `admin.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provides administrative functionalities like logging, indexing, and system health checks for the web service.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, shutil, psutil, platform, zipfile, fastapi, fastapi.responses, pathlib, datetime, services.config, services.indexer\n\n## Downstream\n- main\n\n## Contents\n- `backup_index()`\n- `clean_index()`\n- `download_log()`\n- `health_check()`\n- `log_admin_event()`\n- `require_api_key()`\n- `trigger_reindex()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 500, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7aed4226-78d2-4cc7-ba9a-1a412cf4b104": {"__data__": {"id_": "7aed4226-78d2-4cc7-ba9a-1a412cf4b104", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_graph_neoagent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "079002c0-f34b-434a-9f3b-3325cba87150", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_graph_neoagent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "33f7b38dcb80e5469cfe45d0b804860124c598656f24a9c1cf2c391eb71c0459", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_graph_neoagent.py`\n\n**Directory**: `.`\n**Purpose**: # Purpose: Provides unit tests for the Neo4j graph database interactions within the NeoAgent service.\n\n## Upstream\n- ENV: \u2014\n- Imports: services.neo4j_driver, asyncio\n\n## Downstream\n- \u2014\n\n## Contents\n- `test()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 268, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "31b5c45e-f8d7-4dd4-846b-58929693f3ba": {"__data__": {"id_": "31b5c45e-f8d7-4dd4-846b-58929693f3ba", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/oauth.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "a6d03698-43b5-4d29-a3c4-a3d40e8d63b1", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/oauth.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ab056e5853ce2d18eafd3a18a5e1deed58db3013e8b0f385c89a3f190ad56134", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `oauth.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Handle OAuth authentication flow for the application, including initiating authentication and processing callbacks.\n\n## Upstream\n- ENV: OAUTH_REDIRECT_URI, POST_AUTH_REDIRECT_URI, GOOGLE_CREDS_JSON\n- Imports: os, base64, pathlib, fastapi, fastapi.responses, google_auth_oauthlib.flow\n\n## Downstream\n- main\n\n## Contents\n- `oauth_callback()`\n- `start_oauth()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 419, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1906bdff-e669-4cfd-9d57-b5fa79e96439": {"__data__": {"id_": "1906bdff-e669-4cfd-9d57-b5fa79e96439", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/ask.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "2a307c34-6be5-4315-908d-3520f5cfc103", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/ask.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5165100d5884a7617a901ea00fd417d9be340ef171c3b0c962f1f1493d693015", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `ask.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provides API endpoints for handling various types of requests and interactions with OpenAI models and agents.\n\n## Upstream\n- ENV: \u2014\n- Imports: traceback, fastapi, fastapi.responses, typing, agents.mcp_agent, agents.codex_agent, agents.echo_agent, utils.openai_client, openai\n\n## Downstream\n- main\n\n## Contents\n- `ask_codex_stream()`\n- `ask_echo_stream()`\n- `ask_get()`\n- `ask_post()`\n- `ask_stream()`\n- `test_openai()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 478, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5ca8da93-38b5-4af6-95ce-711ec9a85dba": {"__data__": {"id_": "5ca8da93-38b5-4af6-95ce-711ec9a85dba", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_ask_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f8e36951-a586-495c-8430-b1581ab5171f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_ask_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "eea8ea78907b1330563109fb1fcc5659e3003fefa6d45f4dfbc3792a79420a62", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_ask_routes.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Contains unit tests for the HTTP request handling routes of the 'ask' service.\n\n## Upstream\n- ENV: \u2014\n- Imports: pytest, httpx, main, agents\n\n## Downstream\n- \u2014\n\n## Contents\n- `dummy_stream()`\n- `test_ask_get()`\n- `test_ask_post()`\n- `test_ask_stream_rejects_bad_input()`\n- `test_codex_stream_endpoint()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 373, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "34c2e11c-f37c-4e52-8b5f-bd79a67aaad4": {"__data__": {"id_": "34c2e11c-f37c-4e52-8b5f-bd79a67aaad4", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/queue.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "60517c13-e858-46e2-a691-91a58f497b75", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/queue.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "616e0ee97d596b70f05009c2d329f10e91b41ffc877a310a9a312ff4e4958a4d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `queue.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides functionality to manage and manipulate queue operations.\n\n## Upstream\n- ENV: \u2014\n- Imports: \u2014\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `queue_action()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 230, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3bcdda6c-6045-4c33-bef7-0881cd2e8778": {"__data__": {"id_": "3bcdda6c-6045-4c33-bef7-0881cd2e8778", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/control.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "00d024be-4d97-4f77-8633-1fe1c4127654", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/control.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6e3a4ece1654c7c4be43b782e3da5efbe12ae16149956624a946156e3693522e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `control.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Manages action control flows including authentication, logging, queuing, and approval processes within the application.\n\n## Upstream\n- ENV: API_KEY\n- Imports: os, json, uuid, pathlib, datetime, fastapi, services, agents, agents.control_agent\n\n## Downstream\n- main\n\n## Contents\n- `append_log()`\n- `approve_action()`\n- `auth()`\n- `control_test()`\n- `deny_action()`\n- `list_log()`\n- `list_queue()`\n- `load_actions()`\n- `queue_action()`\n- `save_actions()`\n- `update_action_history()`\n- `write_file()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 560, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b329a323-4653-49a4-9665-d970b8a3a77b": {"__data__": {"id_": "b329a323-4653-49a4-9665-d970b8a3a77b", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_mcp_route.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "27c94ff6-0210-4edd-a5a9-2275d89a570f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_mcp_route.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "56ac6b419d8d680418ebf4d97ef71427462f770cb0e1af0409432dc63a8c41a5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_mcp_route.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Provides unit tests for the MCP routing functionality within the application.\n\n## Upstream\n- ENV: \u2014\n- Imports: pytest, httpx, main\n\n## Downstream\n- \u2014\n\n## Contents\n- `fake_run_mcp()`\n- `test_mcp_run_invokes_agent()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 284, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d664cb3e-6bb5-4792-ba25-49860df6c13a": {"__data__": {"id_": "d664cb3e-6bb5-4792-ba25-49860df6c13a", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/context_injector.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "62046d2b-288e-407d-8cc5-e2d2a362cb37", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/context_injector.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "98ce9b83f5c98134359e9d4ff60be2a2aec0d20127a651409289ada52a6ff5ee", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `context_injector.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manages the aggregation and injection of contextual data from various services into the application's processing flow.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, pathlib, typing, services.semantic_retriever, services.kb, services.graph, services.summarize_memory\n\n## Downstream\n- agents.mcp_agent\n- services.context_engine\n\n## Contents\n- `build_context()`\n- `build_recent_memory_summaries()`\n- `load_context()`\n- `load_global_context()`\n- `load_summary()`\n- `safe_truncate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 544, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9c0bb9f3-68ad-4131-859c-b1bdbeee2ce0": {"__data__": {"id_": "9c0bb9f3-68ad-4131-859c-b1bdbeee2ce0", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/run.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "22ba7221-ecd2-4f2c-854d-8e92248c568b", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/run.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "704fb1ee7d152d678bb28873180d74054250c22e6ec423f8238719c7ed9a5849", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `run.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Acts as the entry point to execute various system critiques for code quality and performance assessment.\n\n## Upstream\n- ENV: \u2014\n- Imports: typing, structure_critic, logic_critic, safety_critic, clarity_critic, feasibility_critic, impact_critic, intent_critic, dependency_critic, redundancy_critic, ethical_critic, performance_critic, reflection_critic, consensus_critic, temporal_critic, robustness_critic, json, core.logging\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `run()`\n- `run_critics()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 572, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26825a22-74fd-42bb-a7ef-52941c344e53": {"__data__": {"id_": "26825a22-74fd-42bb-a7ef-52941c344e53", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/graph_store.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8ce3153f-9047-4f88-ad4a-cccfb0a15063", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/graph_store.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4a98fc164ca32874aa09c78d3542be205f1179197a06a289a07d924e195d5a4b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `graph_store.py`\n\n**Directory**: `memory`\n**Purpose**: # Purpose: Provides an interface and implementations for storing and managing graph data structures, supporting operations like node and edge manipulation, and querying.\n\n## Upstream\n- ENV: \u2014\n- Imports: neo4j, typing\n\n## Downstream\n- test_graph_direct\n\n## Contents\n- `GraphMemoryStore()`\n- `Neo4jGraphMemoryStore()`\n- `__init__()`\n- `add_edge()`\n- `add_node()`\n- `close()`\n- `get_all()`\n- `get_connected()`\n- `query()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 475, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1e9b83dd-965a-4433-995b-e8ad9e5df2e5": {"__data__": {"id_": "1e9b83dd-965a-4433-995b-e8ad9e5df2e5", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/semantic_retriever.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "be04420b-d3a0-473d-90c2-f138dfb87bf8", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/semantic_retriever.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "12288a59f9bedfb9d2d8bc0ce657d0524a40551c1b8a889275ae3a15b9ac664c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `semantic_retriever.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provide functionality to retrieve and handle semantic contexts using embeddings for natural language processing tasks.\n\n## Upstream\n- ENV: \u2014\n- Imports: llama_index.core, llama_index.embeddings.openai, sys, traceback\n\n## Downstream\n- services.context_injector\n\n## Contents\n- `get_semantic_context()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 375, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2b34de60-1fed-494c-a6af-29ed061d26f3": {"__data__": {"id_": "2b34de60-1fed-494c-a6af-29ed061d26f3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/metaplanner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0f994d4d-46ee-4818-a0b3-d7fefeb1e786", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/metaplanner_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3acc793c0086f1846a7cf5dd157e19e4df4a8fab8bb5a3c38368eab65830fd6c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `metaplanner_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Provides functionality for planning and suggesting optimal routes using graph-based algorithms.\n\n## Upstream\n- ENV: \u2014\n- Imports: core.logging, services.graph\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `run()`\n- `suggest_route()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 308, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c2014479-5256-459c-9d1d-4785cc68b621": {"__data__": {"id_": "c2014479-5256-459c-9d1d-4785cc68b621", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "34c7103e-02cb-4843-ad7f-de78e0baffeb", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8b37c486bb2c4d80d8670ac1e89aef1f3b4b37b47322441b454813be1c6c1c0a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_docs.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Provides unit tests for document synchronization and management functionalities in the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: sys, types, asyncio, pytest, routes\n\n## Downstream\n- \u2014\n\n## Contents\n- `test_docs_list()`\n- `test_docs_list_limit_enforced()`\n- `test_docs_sync()`\n- `test_full_sync()`\n- `test_refresh_kb()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 381, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "458b5cd4-689b-440e-bb4c-9e19c3a2d4c5": {"__data__": {"id_": "458b5cd4-689b-440e-bb4c-9e19c3a2d4c5", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/admin_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "700e52d7-7330-4174-bd96-7928b51e86a2", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/admin_routes.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2b24b0101e39bb3d1d2ded0ade6c2660517e404aa076391e46217f83c22f646b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `admin_routes.py`\n\n**Directory**: `routes`\n**Purpose**: # Purpose: Provide route handlers for administrative functionalities within the FastAPI application.\n\n## Upstream\n- ENV: \u2014\n- Imports: fastapi, fastapi.responses, subprocess, os\n\n## Downstream\n- \u2014\n\n## Contents\n- `generate_auto_context()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 294, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "69b726b7-e20b-438f-bea9-5bff7f558095": {"__data__": {"id_": "69b726b7-e20b-438f-bea9-5bff7f558095", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_cors.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "01eed8f2-3ae7-4874-8c3c-35be85bd47b9", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/test_cors.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "29564346215c5ff2f95aa5a88db727713510e08bb22b50050769582c3625bd2f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `test_cors.py`\n\n**Directory**: `tests`\n**Purpose**: # Purpose: Provides tests to verify the correctness of CORS (Cross-Origin Resource Sharing) configurations using regex patterns.\n\n## Upstream\n- ENV: \u2014\n- Imports: importlib, pytest, httpx, os, main\n\n## Downstream\n- \u2014\n\n## Contents\n- `test_cors_regex()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 304, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b088f73e-3db0-446d-983f-f6d6125eb1ca": {"__data__": {"id_": "b088f73e-3db0-446d-983f-f6d6125eb1ca", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs_utils.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "cc182959-b317-415c-9c1c-ceeaa1430253", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs_utils.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0643b126b93b5a6dcac72a8586e6661f577f03d1a9d54c0ed97c6c3295e8c333", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `docs_utils.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides utility functions for managing and processing documentation metadata and paths.\n\n## Upstream\n- ENV: \u2014\n- Imports: re, collections, pathlib, typing\n\n## Downstream\n- routes.docs\n\n## Contents\n- `build_doc_registry()`\n- `choose_canonical_path()`\n- `extract_doc_id()`\n- `write_doc_metadata()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 364, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "618c2382-03af-4979-ac99-d3c0e558aac8": {"__data__": {"id_": "618c2382-03af-4979-ac99-d3c0e558aac8", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/logs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "7f6768d4-2ab4-413a-a8f6-67fa96788f14", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/logs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ab50528848905909dd5b7c5ed49a32e71b1088d687e60d1385a7262b60ef62a3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `logs.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manage logging of application activities and exceptions, and provide access to recent log data.\n\n## Upstream\n- ENV: \u2014\n- Imports: datetime, json, pathlib, requests, traceback\n\n## Downstream\n- routes.context\n- routes.logs\n\n## Contents\n- `get_recent_logs()`\n- `log_and_refresh()`\n- `log_entry()`\n- `log_exception()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 375, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "af8e7e43-37ac-426e-8f44-aa155bc84649": {"__data__": {"id_": "af8e7e43-37ac-426e-8f44-aa155bc84649", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/structure_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "3ea4235d-f7e0-402a-bd81-91275b7b54e0", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/structure_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ad47d283774f7d82fed3f350faaf72e6c72385bbac64554c06e120785d9c656e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `structure_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides functionality to evaluate and critique the structural aspects of data or models within the application.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `StructureCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 313, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e7163aa2-5c93-4cb4-93fa-c340048e13cb": {"__data__": {"id_": "e7163aa2-5c93-4cb4-93fa-c340048e13cb", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/discover_features.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "c390b163-1003-4526-b36a-bf9e0a9b58e6", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/discover_features.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f9c7b28d79d0b9682604c7b730975c07058f595867bcb635c7f6ad193ef959fc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `discover_features.py`\n\n**Directory**: `scripts`\n**Purpose**: # Purpose: Extract and identify routes and documentation strings from project files for API documentation generation.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, re\n\n## Downstream\n- \u2014\n\n## Contents\n- `find_routes_and_docs()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 280, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "03945c5a-3954-4b7b-a376-900f639817f0": {"__data__": {"id_": "03945c5a-3954-4b7b-a376-900f639817f0", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/janitor_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b1187c71-9afd-48fe-98bd-2f4bb72492a5", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/janitor_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bb3d312536405280899e3ca9fe542d21a63176e4dbcf674c15a42895143d6520", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `janitor_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Manages the cleanup and maintenance of system resources and temporary files.\n\n## Upstream\n- ENV: \u2014\n- Imports: services.memory, os, json, pathlib\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `run()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 271, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4fb83fee-2883-42b4-8c47-bbddee036470": {"__data__": {"id_": "4fb83fee-2883-42b4-8c47-bbddee036470", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/logic_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "717377a8-6523-47e8-8be8-462768ff93d2", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/logic_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2c2b7695d1b02f1eaf62aeb62ac4578db432134ae7052505b56aabe821d9d17c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `logic_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides evaluation of logical structures by implementing the LogicCritic class.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `LogicCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 273, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c30390ca-58d5-4636-9ebd-b8d50380dadd": {"__data__": {"id_": "c30390ca-58d5-4636-9ebd-b8d50380dadd", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/mcp_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "dfc27b3f-6c16-41ab-ab7e-72002b633d34", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/mcp_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "23fbf4166cba9894faead88b22628866a108a1272579640c39fe106b338aa9ff", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `mcp_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Coordinates the execution and interaction of various agent modules to manage complex planning and control tasks within the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: traceback, typing, agents.planner_agent, agents.control_agent, agents.docs_agent, agents.codex_agent, agents.echo_agent, agents.simulation_agent, agents.trainer_agent, agents.metaplanner_agent, agents.critic_agent.run, agents.memory_agent, agents.janitor_agent, services.context_injector, services.queue, core.logging\n\n## Downstream\n- core.relay_mcp\n- routes.ask\n- routes.mcp\n\n## Contents\n- `extract_plan_for_critics()`\n- `run_mcp()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 663, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0b6304ab-af6c-4266-8d6b-43e3975e5bcf": {"__data__": {"id_": "0b6304ab-af6c-4266-8d6b-43e3975e5bcf", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/context_engine.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "8e3f21f9-be9b-4acd-bafc-66ff95e3a053", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/context_engine.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4ebfa4a7d3d6f217b526d177e4169e731fba4c2fbe9303eb203a9ae16dee5cef", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `context_engine.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Manages the creation and lifecycle of context objects, including caching mechanisms, for the application.\n\n## Upstream\n- ENV: \u2014\n- Imports: services.context_injector\n\n## Downstream\n- routes.docs\n- services.agent\n\n## Contents\n- `ContextEngine()`\n- `build()`\n- `clear_cache()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 346, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "62d1e9cd-0da1-4767-8ed8-9f09508718f4": {"__data__": {"id_": "62d1e9cd-0da1-4767-8ed8-9f09508718f4", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/parse_file_metadata.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "9721de75-c6c1-4040-a130-7efbd4e3b7c4", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/parse_file_metadata.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "03a103c0452966c5615c444a777d1b46da978cd75bb287dd0df2a5e6c064d873", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `parse_file_metadata.py`\n\n**Directory**: `tools`\n**Purpose**: # Purpose: Extract and format metadata from files for further processing.\n\n## Upstream\n- ENV: \u2014\n- Imports: ast, os, sys, pathlib\n\n## Downstream\n- \u2014\n\n## Contents\n- `extract_metadata()`\n- `format_header()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 267, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cead9c57-7750-4f97-a4e9-4a9e0bc0c270": {"__data__": {"id_": "cead9c57-7750-4f97-a4e9-4a9e0bc0c270", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/temporal_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "0bb9738c-e6a8-43bf-af91-aa1c3b5760d7", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/temporal_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c0f34446926e466b3026881c721a0b8096fdd0c8eed648f483a4d923f4778ecb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `temporal_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class and methods for evaluating sequences over time, used for temporal analysis in the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `TemporalCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 305, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "15ea1835-d244-4289-a869-76b1ad5e4ca5": {"__data__": {"id_": "15ea1835-d244-4289-a869-76b1ad5e4ca5", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/index.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "bbf34297-c7a9-43ee-b147-a7c42af0f8c9", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/index.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6530fc6c2ede4defb227d3c28def34afd4b018609564d1bcb5d63546848e7869", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Codebase Index\n\n- [MemoryAgent](./MemoryAgent.md)\n- [admin](./admin.md)\n- [admin_routes](./admin_routes.md)\n- [agent](./agent.md)\n- [ask](./ask.md)\n- [base](./base.md)\n- [batch_generate_headers](./batch_generate_headers.md)\n- [clarity_critic](./clarity_critic.md)\n- [codex](./codex.md)\n- [codex_agent](./codex_agent.md)\n- [consensus_critic](./consensus_critic.md)\n- [context](./context.md)\n- [context_engine](./context_engine.md)\n- [context_injector](./context_injector.md)\n- [control](./control.md)\n- [control_agent](./control_agent.md)\n- [cron_generate_auto_context](./cron_generate_auto_context.md)\n- [debug](./debug.md)\n- [delete_embeddings](./delete_embeddings.md)\n- [dependency_critic](./dependency_critic.md)\n- [discover_features](./discover_features.md)\n- [docs](./docs.md)\n- [docs_agent](./docs_agent.md)\n- [docs_utils](./docs_utils.md)\n- [echo_agent](./echo_agent.md)\n- [embeddings](./embeddings.md)\n- [env_checker](./env_checker.md)\n- [ethical_critic](./ethical_critic.md)\n- [feasibility_critic](./feasibility_critic.md)\n- [gmail](./gmail.md)\n- [google](./google.md)\n- [google_docs_sync](./google_docs_sync.md)\n- [graph](./graph.md)\n- [graph_store](./graph_store.md)\n- [impact_critic](./impact_critic.md)\n- [index](./index.md)\n- [index_codebase](./index_codebase.md)\n- [indexer](./indexer.md)\n- [inject_header](./inject_header.md)\n- [intent_critic](./intent_critic.md)\n- [janitor_agent](./janitor_agent.md)\n- [kb](./kb.md)\n- [kb](./kb.md)\n- [logger](./logger.md)\n- [logging](./logging.md)\n- [logic_critic](./logic_critic.md)\n- [logs](./logs.md)\n- [logs](./logs.md)\n- [logs_sessions](./logs_sessions.md)\n- [main](./main.md)\n- [mcp](./mcp.md)\n- [mcp_agent](./mcp_agent.md)\n- [memory](./memory.md)\n- [memory_agent](./memory_agent.md)\n- [metaplanner_agent](./metaplanner_agent.md)\n- [neo4j_driver](./neo4j_driver.md)\n- [oauth](./oauth.md)\n- [openai_client](./openai_client.md)\n- [parse_file_metadata](./parse_file_metadata.md)\n- [patch_utils](./patch_utils.md)\n- [performance_critic](./performance_critic.md)\n- [planner_agent](./planner_agent.md)\n- [queue](./queue.md)\n- [redundancy_critic](./redundancy_critic.md)\n- [reflection_critic](./reflection_critic.md)\n- [relay_mcp](./relay_mcp.md)\n- [robustness_critic](./robustness_critic.md)\n- [run](./run.md)\n- [safety_critic](./safety_critic.md)\n- [search](./search.md)\n- [semantic_retriever](./semantic_retriever.md)\n- [settings](./settings.md)\n- [simulation_agent](./simulation_agent.md)\n- [status](./status.md)\n- [status_code](./status_code.md)\n- [structure_critic](./structure_critic.md)\n- [summarize_memory](./summarize_memory.md)\n- [sync_context_docs](./sync_context_docs.md)\n- [sync_google_docs](./sync_google_docs.md)\n- [temporal_critic](./temporal_critic.md)\n- [test_admin_routes](./test_admin_routes.md)\n- [test_ask_routes](./test_ask_routes.md)\n- [test_context_engine](./test_context_engine.md)\n- [test_cors](./test_cors.md)\n- [test_docs](./test_docs.md)\n- [test_graph_neoagent](./test_graph_neoagent.md)\n- [test_mcp_route](./test_mcp_route.md)\n- [test_planner_agent](./test_planner_agent.md)\n- [trainer_agent](./trainer_agent.md)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3097, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bad9f179-f5e0-434b-b9dd-4ef54271e26b": {"__data__": {"id_": "bad9f179-f5e0-434b-b9dd-4ef54271e26b", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "866bc93b-b49b-4bec-b97d-156405070c7f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/docs_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e99f2449f807694fce291b78963d9afd0454a7a511c642d368e0de4ea5c6a581", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `docs_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Manages the documentation analysis process using AI models to assess and improve content quality.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, traceback, openai, agents.critic_agent, core.logging, utils.openai_client, json\n\n## Downstream\n- agents.mcp_agent\n\n## Contents\n- `DocsAgent()`\n- `analyze()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 358, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "021fde1e-6e0b-4617-adff-7ad4b9ce441d": {"__data__": {"id_": "021fde1e-6e0b-4617-adff-7ad4b9ce441d", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/env_checker.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "b3727c53-fc98-45f5-a9fb-972cd26b51af", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/env_checker.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4cb87366fb2e4a70cc6e53dd7f72b066aab2412e3c95ad1e370b3b31680e97d1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `env_checker.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Verify that all required environment variables are defined and correctly set up in the system.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, re, pathlib, dotenv, pprint\n\n## Downstream\n- \u2014\n\n## Contents\n- `check_env_keys()`\n- `find_env_keys_in_code()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 310, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f7ba813b-16c1-4420-a78f-7e32cce1b83e": {"__data__": {"id_": "f7ba813b-16c1-4420-a78f-7e32cce1b83e", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/reflection_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "60d19c98-1262-4e6c-80db-0c19120d464d", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/reflection_critic.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "113881baa45a3454a5271ad437aff90c2630b66975a8c0ce26a17a13c14fb9fe", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `reflection_critic.py`\n\n**Directory**: `agents/critic_agent`\n**Purpose**: # Purpose: Provides a class for evaluating model predictions using reflection-based critique methods.\n\n## Upstream\n- ENV: \u2014\n- Imports: base, typing\n\n## Downstream\n- \u2014\n\n## Contents\n- `ReflectionCritic()`\n- `evaluate()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 293, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2a8ae901-08bb-4cb6-b91b-b65b92dfd19c": {"__data__": {"id_": "2a8ae901-08bb-4cb6-b91b-b65b92dfd19c", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/sync_google_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "f35ddf0a-4e8d-4a55-9bd5-ecf82f1b9aeb", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/sync_google_docs.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a8aa6a23b5ea58e19c3c78ab90fc6c049534bb3ba898d5659a20170b467fc93e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `sync_google_docs.py`\n\n**Directory**: `frontend/sync`\n**Purpose**: # Purpose: Synchronize documents from Google Docs to local storage, handling authentication and document retrieval.\n\n## Upstream\n- ENV: GOOGLE_TOKEN_JSON, ENV, GOOGLE_CREDS_JSON\n- Imports: os, json, base64, pathlib, google.oauth2.credentials, google_auth_oauthlib.flow, googleapiclient.discovery, googleapiclient.errors, markdownify, google.auth.transport.requests\n\n## Downstream\n- \u2014\n\n## Contents\n- `fetch_and_save_doc()`\n- `find_folder_id()`\n- `get_docs_in_folder()`\n- `get_google_service()`\n- `sync_google_docs()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 584, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "307fc2d5-aac1-4f16-b5f8-8cef256da6cd": {"__data__": {"id_": "307fc2d5-aac1-4f16-b5f8-8cef256da6cd", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/openai_client.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "46f4c5d2-36a0-4bf1-b5a2-2f84441b2d7f", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/openai_client.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "67625db1349b9fa4d61e2c040756c9504cee5665cad72a9e140a71e0fc16686b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `openai_client.py`\n\n**Directory**: `utils`\n**Purpose**: # Purpose: Provides functionality to create and configure a client for interacting with OpenAI's API.\n\n## Upstream\n- ENV: OPENAI_TIMEOUT, OPENAI_MAX_RETRIES, OPENAI_API_KEY\n- Imports: os, httpx, openai\n\n## Downstream\n- agents.codex_agent\n- agents.docs_agent\n- agents.echo_agent\n- agents.planner_agent\n- routes.ask\n- services.agent\n- services.summarize_memory\n\n## Contents\n- `create_openai_client()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 456, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b190f598-66cf-4a98-96a2-430b5d9b91f3": {"__data__": {"id_": "b190f598-66cf-4a98-96a2-430b5d9b91f3", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/indexer.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "5931455f-0d08-4c91-bb83-7d0d7b14ceb4", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/indexer.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c1dc778a3088bf37457ebe011caff74b31ac2ff699a44e229f908e771ba8741a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `indexer.py`\n\n**Directory**: `services`\n**Purpose**: # Purpose: Provides functionality for indexing directories and files, extracting language data, and managing indexing conditions within the system.\n\n## Upstream\n- ENV: KB_EMBED_MODEL, OPENAI_EMBED_MODEL, WIPE_INDEX\n- Imports: os, glob, sys, pathlib, llama_index.core, llama_index.embeddings.openai, llama_index.core.node_parser, services.config, shutil\n\n## Downstream\n- routes.admin\n- routes.index\n\n## Contents\n- `collect_code_context()`\n- `get_language_from_path()`\n- `index_directories()`\n- `should_index_file()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 569, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "839daeb2-fa9c-4dae-af95-9e7519331239": {"__data__": {"id_": "839daeb2-fa9c-4dae-af95-9e7519331239", "embedding": null, "metadata": {"tier": "project_docs", "file_path": "/app/docs/codex_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": [], "excluded_llm_metadata_keys": [], "relationships": {"1": {"node_id": "ebe8adf1-9d7d-4871-af0d-a9f53ba9ae61", "node_type": "4", "metadata": {"tier": "project_docs", "file_path": "/app/docs/codex_agent.md", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "9503c34226aff80ae997e689ea0a1b5c96a618b5e5de1e4a157eba33fc5faab9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# `codex_agent.py`\n\n**Directory**: `agents`\n**Purpose**: # Purpose: Manages interactions with the OpenAI Codex model, handling prompt creation, response parsing, and streaming data for code generation tasks.\n\n## Upstream\n- ENV: \u2014\n- Imports: os, typing, openai, utils.openai_client, utils.patch_utils, core.logging, dotenv, agents.critic_agent, json, re\n\n## Downstream\n- agents.mcp_agent\n- routes.ask\n\n## Contents\n- `CodexAgent()`\n- `_build_prompt()`\n- `_parse_codex_response()`\n- `handle()`\n- `stream()`", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 503, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "800c35cf-55b7-4bc5-a072-a19f001936b5": {"__data__": {"id_": "800c35cf-55b7-4bc5-a072-a19f001936b5", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/cookies.json", "file_name": "cookies.json", "file_type": "application/json", "file_size": 2, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c9d7aaae-bc9a-4c73-9d50-346268aa4db8", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/cookies.json", "file_name": "cookies.json", "file_type": "application/json", "file_size": 2, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0c39f42ff734f471c014d97990351ab7812e802ff598fd46af773f05644782c1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "[]", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a977954b-996d-4444-9aa8-d57015cca2d8": {"__data__": {"id_": "a977954b-996d-4444-9aa8-d57015cca2d8", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/fetch_plant_flow.js", "file_name": "fetch_plant_flow.js", "file_type": "application/javascript", "file_size": 2363, "creation_date": "2025-07-11", "last_modified_date": "2025-07-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9077e178-8f15-44e9-ad9d-975861e37d0c", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/fetch_plant_flow.js", "file_name": "fetch_plant_flow.js", "file_type": "application/javascript", "file_size": 2363, "creation_date": "2025-07-11", "last_modified_date": "2025-07-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f5be0796cb0fe51064b80d649a41df6ef9106b54c13d35cad77ee60c2800eb5c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: backend/solark_browser/fetch_plant_flow.js\n// Purpose: Fetch and save today's plant snapshot (flat metrics) from SolArkCloud API\n\nconst fs = require('fs');\nconst axios = require('axios');\n\n// === 1. Load auth token ===\nlet token;\ntry {\n  token = fs.readFileSync('auth_token.txt', 'utf8').trim();\n  if (!token) throw new Error('auth_token.txt is empty');\n} catch (err) {\n  console.error('\u274c Could not read auth_token.txt:', err.message);\n  process.exit(1);\n}\n\n// === 2. Set plant ID and date ===\nconst plantId = '146453'; // <-- Change to your actual plant ID if needed\nconst today = new Date().toISOString().slice(0, 10);\n\n// === 3. Prepare headers and URL ===\nconst headers = {\n  Authorization: `Bearer ${token}`,\n  Origin: 'https://www.solarkcloud.com',\n  Referer: `https://www.solarkcloud.com/plants/overview/${plantId}/2`,\n};\nconst url = `https://api.solarkcloud.com/api/v1/plant/energy/${plantId}/flow?date=${today}`;\n\n// === 4. Fetch and save plant snapshot ===\n(async () => {\n  try {\n    console.log(`\ud83d\udcc8 Fetching plant snapshot for Plant ID ${plantId} on ${today}...`);\n    const res = await axios.get(url, { headers });\n\n    // === Debug: Print full API response ===\n    console.log('\ud83c\udf10 RAW API RESPONSE:', JSON.stringify(res.data, null, 2));\n\n    // === 5. Validate and process the data ===\n    const snap = res.data?.data;\n    if (!snap || typeof snap !== 'object') {\n      throw new Error('No snapshot data returned. Check token, plantId, and date.');\n    }\n\n    // === 6. Save to file ===\n    fs.writeFileSync('plant_flow.json', JSON.stringify(snap, null, 2));\n    console.log('\u2705 Saved snapshot data to plant_flow.json');\n\n    // === 7. Quick summary of key metrics ===\n    console.log(`\ud83d\udd06 PV Power:     ${snap.pvPower} W`);\n    console.log(`\ud83d\udd0b Battery Pwr:  ${snap.battPower} W`);\n    console.log(`\u26a1 Load Power:   ${snap.loadOrEpsPower} W`);\n    console.log(`\ud83d\udd0b SOC:         ${snap.soc} %`);\n    console.log(`\ud83d\udd0c Grid Power:  ${snap.gridOrMeterPower} W`);\n\n  } catch (err) {\n    // === 8. Error handling and logging ===\n    console.error('\u274c Failed to fetch snapshot data:', err.message);\n    if (err.response?.data) {\n      fs.writeFileSync('plant_flow_error.json', JSON.stringify(err.response.data, null, 2));\n      console.error('\ud83d\udcbe Saved error response to plant_flow_error.json');\n    }\n    process.exit(1);\n  }\n})();", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2333, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9cbd0e0a-e1ae-4938-97a6-c135dce6f29d": {"__data__": {"id_": "9cbd0e0a-e1ae-4938-97a6-c135dce6f29d", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/fetch_token.js", "file_name": "fetch_token.js", "file_type": "application/javascript", "file_size": 1593, "creation_date": "2025-07-11", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "22e58bfe-1fb2-41d2-b690-c1b8ee564428", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/fetch_token.js", "file_name": "fetch_token.js", "file_type": "application/javascript", "file_size": 1593, "creation_date": "2025-07-11", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "dec12b11d7698011552e4473a23515ca5f2b44ce43d8af377a52806e018e590f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: backend/solark_browser/fetch_token.js\n// Purpose: Authenticate with SolArkCloud via OAuth and store a valid access token\n\nconst fs = require('fs');\nconst axios = require('axios');\nrequire('dotenv').config();\n\n// === 1. Ensure credentials exist ===\nconst email = process.env.SOLARK_EMAIL;\nconst password = process.env.SOLARK_PASSWORD;\n\nif (!email || !password) {\n  console.error('\u274c Missing SOLARK_EMAIL or SOLARK_PASSWORD in .env');\n  process.exit(1);\n}\n\n// === 2. Build payload and headers ===\nconst url = 'https://api.solarkcloud.com/oauth/token';\n\nconst data = {\n  grant_type: 'password',\n  username: email,\n  password: password,\n  scope: 'all',\n};\n\nconst headers = {\n  'Content-Type': 'application/json',\n  Origin: 'https://www.solarkcloud.com',\n  Referer: 'https://www.solarkcloud.com/',\n};\n\n// === 3. Perform login and store token ===\n(async () => {\n  try {\n    console.log('\ud83d\udd10 Authenticating with SolArkCloud...');\n    const res = await axios.post(url, data, { headers });\n    console.log('\ud83e\uddfe Full response:', JSON.stringify(res.data, null, 2));\n\n    const token = res.data?.data?.access_token;\n    if (!token) throw new Error('No access_token in response');\n\n    fs.writeFileSync('auth_token.txt', token);\n    console.log('\u2705 Token saved to auth_token.txt');\n  } catch (err) {\n    console.error('\u274c Failed to fetch token:', err.message);\n    if (err.response?.data) {\n      fs.writeFileSync('fetch_token_error.json', JSON.stringify(err.response.data, null, 2));\n      console.error('\ud83d\udcbe Saved response to fetch_token_error.json');\n    }\n    process.exit(1);\n  }\n})();", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1577, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "477d3ad6-2ad7-4315-b2d0-05099e47647e": {"__data__": {"id_": "477d3ad6-2ad7-4315-b2d0-05099e47647e", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/package.json", "file_name": "package.json", "file_type": "application/json", "file_size": 320, "creation_date": "2025-07-12", "last_modified_date": "2025-07-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e12c7cca-8dc3-4d64-8623-e21436403c00", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/package.json", "file_name": "package.json", "file_type": "application/json", "file_size": 320, "creation_date": "2025-07-12", "last_modified_date": "2025-07-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5a0db29b40ee0816e6b094f6688b4fecd2387c0e9a891ba174d1b9229a736979", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n  \"name\": \"solark_browser\",\n  \"version\": \"1.0.0\",\n  \"description\": \"SolArk Cloud polling & DB loader\",\n  \"main\": \"fetch_token.js\",\n  \"scripts\": {\n    \"start\": \"node fetch_token.js && node fetch_plant_flow.js && python3 poll_and_insert.py\"\n  },\n  \"dependencies\": {\n    \"axios\": \"^1.10.0\",\n    \"dotenv\": \"^17.2.0\"\n  }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 319, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e898b90d-10b8-479c-8e71-7077efc8a39e": {"__data__": {"id_": "e898b90d-10b8-479c-8e71-7077efc8a39e", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/plant_flow.json", "file_name": "plant_flow.json", "file_type": "application/json", "file_size": 496, "creation_date": "2025-07-11", "last_modified_date": "2025-07-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1ad10336-bdd3-4a8f-ab34-03a8692683cc", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/plant_flow.json", "file_name": "plant_flow.json", "file_type": "application/json", "file_size": 496, "creation_date": "2025-07-11", "last_modified_date": "2025-07-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "efb0b5f1a8786ea7cf04ba256351227e4354aedd1ffdfe6e9ab21b152d5b28ca", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n  \"custCode\": 29,\n  \"meterCode\": 0,\n  \"pvPower\": 9878,\n  \"battPower\": 4906,\n  \"gridOrMeterPower\": 0,\n  \"loadOrEpsPower\": 4566,\n  \"genPower\": 0,\n  \"minPower\": 0,\n  \"soc\": 37,\n  \"pvTo\": true,\n  \"toLoad\": true,\n  \"toGrid\": false,\n  \"toBat\": true,\n  \"batTo\": false,\n  \"gridTo\": false,\n  \"genTo\": false,\n  \"minTo\": false,\n  \"existsGen\": false,\n  \"existsMin\": false,\n  \"genOn\": false,\n  \"microOn\": false,\n  \"existsMeter\": false,\n  \"bmsCommFaultFlag\": false,\n  \"pv\": null,\n  \"existThinkPower\": false\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 496, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ba805bac-32b7-4106-9baf-afd099676599": {"__data__": {"id_": "ba805bac-32b7-4106-9baf-afd099676599", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/poll_and_insert.py", "file_name": "poll_and_insert.py", "file_type": "text/x-python", "file_size": 5491, "creation_date": "2025-07-15", "last_modified_date": "2025-07-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "8400a2ac-0dd5-402f-b7a0-0507aaaa2fed", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/poll_and_insert.py", "file_name": "poll_and_insert.py", "file_type": "text/x-python", "file_size": 5491, "creation_date": "2025-07-15", "last_modified_date": "2025-07-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "07f7024650e00f3384eacdbe37970df5db657754dcbb1f2e8e370e68b3733b3b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "27db908a-e5b7-457c-a455-38cf5eaa2ca4", "node_type": "1", "metadata": {}, "hash": "406b1f4d47ab568b6e336f717c73e6650b33bf8f2074085e6ced129242be99b5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\"\"\nFile  : backend/solark_browser/poll_and_insert.py\nPurpose: Read SolArk plant_flow.json and INSERT into solark.plant_flow.\n\nWorks in three modes\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n1. Railway cron / shell  \u2192 uses injected PG* variables  OR  DATABASE_URL.\n2. Local dev            \u2192 loads .env automatically via python-dotenv.\n3. Any CI/CD            \u2192 provide DATABASE_URL + PLANT_ID secrets.\n\nEnv required\n\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\u2022 DATABASE_URL           (preferred) -or- PGHOST PGPORT PGUSER PGPASSWORD PGDATABASE\n\u2022 PLANT_ID               e.g. 146453\n\"\"\"\n\nfrom __future__ import annotations\nimport json, os, sys, urllib.parse\nfrom datetime import datetime, timezone\nfrom pathlib import Path\n\nimport psycopg2\nfrom psycopg2.extras import Json\n\n# \u2500\u2500 0. Optional .env loader (ignored in prod image) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ntry:\n    from dotenv import load_dotenv\n\n    dotenv_file = Path(__file__).resolve().parent / \".env\"\n    if dotenv_file.exists():\n        load_dotenv(dotenv_file)\nexcept ModuleNotFoundError:\n    pass\n\n# \u2500\u2500 1. Validate environment \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nif \"PLANT_ID\" not in os.environ:\n    sys.exit(\"\u274c Missing PLANT_ID env var\")\n\n# Option A: full DSN\nDSN = os.environ.get(\"DATABASE_URL\")\n\n# Option B: parts\nPG_VARS = [\"PGHOST\", \"PGPORT\", \"PGUSER\", \"PGPASSWORD\", \"PGDATABASE\"]\nhave_parts = all(v in os.environ for v in PG_VARS)\n\nif not DSN and not have_parts:\n    vars_needed = \"DATABASE_URL  or  \" + \" \".join(PG_VARS)\n    sys.exit(f\"\u274c Missing Postgres connection vars: {vars_needed}\")\n\nPLANT_ID = int(os.environ[\"PLANT_ID\"])\n\n# \u2500\u2500 2. Build connect parameters (DSN wins) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nif DSN:\n    connect_kwargs: dict[str, object] = {\"dsn\": DSN}\nelse:\n    connect_kwargs = dict(\n        host=os.environ[\"PGHOST\"],\n        port=int(os.environ[\"PGPORT\"]),\n        user=os.environ[\"PGUSER\"],\n        password=os.environ[\"PGPASSWORD\"],\n        dbname=os.environ[\"PGDATABASE\"],\n    )\n\n# \u2500\u2500 3. Load snapshot JSON \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nSNAP_PATH = \"plant_flow.json\"\ntry:\n    with open(SNAP_PATH, \"r\") as f:\n        snap = json.load(f)\nexcept FileNotFoundError:\n    sys.exit(f\"\u274c {SNAP_PATH} not found \u2013 run fetch_plant_flow.js first.\")\nexcept Exception as e:\n    sys.exit(f\"\u274c Could not parse {SNAP_PATH}: {e}\")\n\n# \u2500\u2500 4. Assemble row dict \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nnow_utc = datetime.now(timezone.utc)\nrow = {\n    \"plant_id\":            PLANT_ID,\n    \"ts\":                  now_utc,\n    \"pv_power\":            snap.get(\"pvPower\"),\n    \"batt_power\":          snap.get(\"battPower\"),\n    \"grid_power\":          snap.get(\"gridOrMeterPower\"),\n    \"load_power\":          snap.get(\"loadOrEpsPower\"),\n    \"gen_power\":           snap.get(\"genPower\"),\n    \"min_power\":           snap.get(\"minPower\"),\n    \"soc\":                 snap.get(\"soc\"),\n    \"pv_to\":               snap.get(\"pvTo\"),\n    \"to_load\":             snap.get(\"toLoad\"),\n    \"to_grid\":             snap.get(\"toGrid\"),\n    \"to_bat\":              snap.get(\"toBat\"),\n    \"bat_to\":              snap.get(\"batTo\"),\n    \"grid_to\":             snap.get(\"gridTo\"),\n    \"gen_to\":              snap.get(\"genTo\"),\n    \"min_to\":              snap.get(\"minTo\"),\n    \"exists_gen\":          snap.get(\"existsGen\"),\n    \"exists_min\":          snap.get(\"existsMin\"),\n    \"gen_on\":              snap.get(\"genOn\"),\n    \"micro_on\":            snap.get(\"microOn\"),\n    \"exists_meter\":        snap.get(\"existsMeter\"),\n    \"bms_comm_fault_flag\": snap.get(\"bmsCommFaultFlag\"),\n    \"pv\":                  snap.get(\"pv\"),\n    \"exist_think_power\":   snap.get(\"existThinkPower\"),\n    \"raw_json\":            Json(snap),   # JSONB column\n}\n\n# \u2500\u2500 5.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3646, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "27db908a-e5b7-457c-a455-38cf5eaa2ca4": {"__data__": {"id_": "27db908a-e5b7-457c-a455-38cf5eaa2ca4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_browser/poll_and_insert.py", "file_name": "poll_and_insert.py", "file_type": "text/x-python", "file_size": 5491, "creation_date": "2025-07-15", "last_modified_date": "2025-07-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "8400a2ac-0dd5-402f-b7a0-0507aaaa2fed", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_browser/poll_and_insert.py", "file_name": "poll_and_insert.py", "file_type": "text/x-python", "file_size": 5491, "creation_date": "2025-07-15", "last_modified_date": "2025-07-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "07f7024650e00f3384eacdbe37970df5db657754dcbb1f2e8e370e68b3733b3b", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ba805bac-32b7-4106-9baf-afd099676599", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_browser/poll_and_insert.py", "file_name": "poll_and_insert.py", "file_type": "text/x-python", "file_size": 5491, "creation_date": "2025-07-15", "last_modified_date": "2025-07-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c697f1ee10cd1f99ee02078b07689fe8b27e2b1b45e3b4345b2edb6e5f96712a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "SQL (schema solark) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nSQL = \"\"\"\nINSERT INTO solark.plant_flow (\n    plant_id, ts,\n    pv_power, batt_power, grid_power, load_power,\n    gen_power, min_power, soc,\n    pv_to, to_load, to_grid, to_bat, bat_to, grid_to, gen_to, min_to,\n    exists_gen, exists_min, gen_on, micro_on, exists_meter, bms_comm_fault_flag,\n    pv, exist_think_power, raw_json\n) VALUES (\n    %(plant_id)s, %(ts)s,\n    %(pv_power)s, %(batt_power)s, %(grid_power)s, %(load_power)s,\n    %(gen_power)s, %(min_power)s, %(soc)s,\n    %(pv_to)s, %(to_load)s, %(to_grid)s, %(to_bat)s, %(bat_to)s,\n    %(grid_to)s, %(gen_to)s, %(min_to)s,\n    %(exists_gen)s, %(exists_min)s, %(gen_on)s, %(micro_on)s,\n    %(exists_meter)s, %(bms_comm_fault_flag)s,\n    %(pv)s, %(exist_think_power)s, %(raw_json)s\n);\n\"\"\"\n\n# \u2500\u2500 6. Execute insert \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ntry:\n    with psycopg2.connect(**connect_kwargs) as conn, conn.cursor() as cur:\n        cur.execute(SQL, row)\n        conn.commit()\n        print(f\"\u2705 Inserted snapshot @ {now_utc.isoformat()}\")\nexcept psycopg2.Error as err:\n    sys.exit(f\"\u274c Postgres error: {err}\")", "mimetype": "text/plain", "start_char_idx": 3647, "end_char_idx": 4798, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "035138a9-fbb0-42d3-8f07-17d61b3e275b": {"__data__": {"id_": "035138a9-fbb0-42d3-8f07-17d61b3e275b", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 87, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "92efd620-bf7e-4537-9b81-1f8dfc95e8f1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 87, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "cc16f954959a7626f091c6f0bb7925b2e9c7accd42989138c48db838591b9127", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n  \"require\": {\n    \"guzzlehttp/guzzle\": \"^7.0\",\n    \"vlucas/phpdotenv\": \"^5.6\"\n  }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 86, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fdb2f2ea-94d7-47cd-8830-b87cc1eefde3": {"__data__": {"id_": "fdb2f2ea-94d7-47cd-8830-b87cc1eefde3", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c37acf98-252e-44ec-968d-864e9e5a95d6", "node_type": "1", "metadata": {}, "hash": "61ec7205db6a0991d233ff4565807ee8fa17ced100ad3f955fcee361730616b0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"packages\": [\n        {\n            \"name\": \"graham-campbell/result-type\",\n            \"version\": \"v1.1.3\",\n            \"version_normalized\": \"1.1.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/GrahamCampbell/Result-Type.git\",\n                \"reference\": \"3ba905c11371512af9d9bdd27d99b782216b6945\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/GrahamCampbell/Result-Type/zipball/3ba905c11371512af9d9bdd27d99b782216b6945\",\n                \"reference\": \"3ba905c11371512af9d9bdd27d99b782216b6945\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"phpoption/phpoption\": \"^1.9.3\"\n            },\n            \"require-dev\": {\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20 || ^10.5.28\"\n            },\n            \"time\": \"2024-07-20T21:45:45+00:00\",\n            \"type\": \"library\",\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"GrahamCampbell\\\\ResultType\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                }\n            ],\n            \"description\": \"An Implementation Of The Result Type\",\n            \"keywords\": [\n                \"Graham Campbell\",\n                \"GrahamCampbell\",\n                \"Result Type\",\n                \"Result-Type\",\n                \"result\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/GrahamCampbell/Result-Type/issues\",\n                \"source\": \"https://github.com/GrahamCampbell/Result-Type/tree/v1.1.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/graham-campbell/result-type\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../graham-campbell/result-type\"\n        },\n        {\n            \"name\": \"guzzlehttp/guzzle\",\n            \"version\": \"7.9.3\",\n            \"version_normalized\": \"7.9.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/guzzle/guzzle.git\",\n                \"reference\": \"7b2f29fe81dc4da0ca0ea7d42107a0845946ea77\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/guzzle/guzzle/zipball/7b2f29fe81dc4da0ca0ea7d42107a0845946ea77\",\n                \"reference\": \"7b2f29fe81dc4da0ca0ea7d42107a0845946ea77\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-json\": \"*\",\n                \"guzzlehttp/promises\": \"^1.5.3 || ^2.0.3\",\n                \"guzzlehttp/psr7\": \"^2.7.0\",\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"psr/http-client\": \"^1.0\",\n                \"symfony/deprecation-contracts\": \"^2.2 || ^3.0\"\n            },\n            \"provide\": {\n                \"psr/http-client-implementation\": \"1.0\"\n            },", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3505, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c37acf98-252e-44ec-968d-864e9e5a95d6": {"__data__": {"id_": "c37acf98-252e-44ec-968d-864e9e5a95d6", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "fdb2f2ea-94d7-47cd-8830-b87cc1eefde3", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3d95c8df9b6255855f7306e9de606aec3db1e8dfb593a3c84d6ffd5bcc1fc5b0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aca8ae74-c095-4102-8838-d5d22dfdb9fe", "node_type": "1", "metadata": {}, "hash": "f96ba5705afef6621c4bf917988e4609fabac06ab05161368dccc1c2d0b71cfe", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"reference\": \"7b2f29fe81dc4da0ca0ea7d42107a0845946ea77\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-json\": \"*\",\n                \"guzzlehttp/promises\": \"^1.5.3 || ^2.0.3\",\n                \"guzzlehttp/psr7\": \"^2.7.0\",\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"psr/http-client\": \"^1.0\",\n                \"symfony/deprecation-contracts\": \"^2.2 || ^3.0\"\n            },\n            \"provide\": {\n                \"psr/http-client-implementation\": \"1.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"ext-curl\": \"*\",\n                \"guzzle/client-integration-tests\": \"3.0.2\",\n                \"php-http/message-factory\": \"^1.1\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\",\n                \"psr/log\": \"^1.1 || ^2.0 || ^3.0\"\n            },\n            \"suggest\": {\n                \"ext-curl\": \"Required for CURL handler support\",\n                \"ext-intl\": \"Required for Internationalized Domain Name (IDN) support\",\n                \"psr/log\": \"Required for using the Log middleware\"\n            },\n            \"time\": \"2025-03-27T13:37:11+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"src/functions_include.php\"\n                ],\n                \"psr-4\": {\n                    \"GuzzleHttp\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"Jeremy Lindblom\",\n                    \"email\": \"jeremeamia@gmail.com\",\n                    \"homepage\": \"https://github.com/jeremeamia\"\n                },\n                {\n                    \"name\": \"George Mponos\",\n                    \"email\": \"gmponos@gmail.com\",\n                    \"homepage\": \"https://github.com/gmponos\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n                    \"email\": \"mark.sagikazar@gmail.com\",\n                    \"homepage\": \"https://github.com/sagikazarmark\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                }\n            ],\n            \"description\": \"Guzzle is a PHP HTTP client library\",\n            \"keywords\": [\n                \"client\",\n                \"curl\",\n                \"framework\",\n                \"http\",\n                \"http client\",\n                \"psr-18\",\n                \"psr-7\",\n                \"rest\",\n                \"web service\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/guzzle/issues\",\n                \"source\": \"https://github.com/guzzle/guzzle/tree/7.9.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",", "mimetype": "text/plain", "start_char_idx": 2984, "end_char_idx": 6976, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aca8ae74-c095-4102-8838-d5d22dfdb9fe": {"__data__": {"id_": "aca8ae74-c095-4102-8838-d5d22dfdb9fe", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c37acf98-252e-44ec-968d-864e9e5a95d6", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "be5a672a854a4596079070963fd61d1357313bbd423ad3c509888eaace242b0a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1a2ddcda-b2fd-4281-adca-c3b783c793f4", "node_type": "1", "metadata": {}, "hash": "8fd239d6b90018ec5334288181bb642e8c705d24ca25f2f09b6a30e62fe0b453", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                }\n            ],\n            \"description\": \"Guzzle is a PHP HTTP client library\",\n            \"keywords\": [\n                \"client\",\n                \"curl\",\n                \"framework\",\n                \"http\",\n                \"http client\",\n                \"psr-18\",\n                \"psr-7\",\n                \"rest\",\n                \"web service\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/guzzle/issues\",\n                \"source\": \"https://github.com/guzzle/guzzle/tree/7.9.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/guzzle\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../guzzlehttp/guzzle\"\n        },\n        {\n            \"name\": \"guzzlehttp/promises\",\n            \"version\": \"2.2.0\",\n            \"version_normalized\": \"2.2.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/guzzle/promises.git\",\n                \"reference\": \"7c69f28996b0a6920945dd20b3857e499d9ca96c\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/guzzle/promises/zipball/7c69f28996b0a6920945dd20b3857e499d9ca96c\",\n                \"reference\": \"7c69f28996b0a6920945dd20b3857e499d9ca96c\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\"\n            },\n            \"time\": \"2025-03-27T13:27:01+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"GuzzleHttp\\\\Promise\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                }\n            ],\n            \"description\": \"Guzzle promises library\",\n            \"keywords\": [\n                \"promise\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/promises/issues\",\n                \"source\": \"https://github.com/guzzle/promises/tree/2.2.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",", "mimetype": "text/plain", "start_char_idx": 6115, "end_char_idx": 10092, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1a2ddcda-b2fd-4281-adca-c3b783c793f4": {"__data__": {"id_": "1a2ddcda-b2fd-4281-adca-c3b783c793f4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aca8ae74-c095-4102-8838-d5d22dfdb9fe", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a9348d9ead47536175e206bc37f16dc4a23e194643410c7c7604888406bcacd9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e40b1c73-e52a-45c6-9a13-60a6b09e739c", "node_type": "1", "metadata": {}, "hash": "7cb0cf1ec545a63690144cf8ce75aa272a5d4cb996f969e5c2ee822e874abe95", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                }\n            ],\n            \"description\": \"Guzzle promises library\",\n            \"keywords\": [\n                \"promise\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/promises/issues\",\n                \"source\": \"https://github.com/guzzle/promises/tree/2.2.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/promises\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../guzzlehttp/promises\"\n        },\n        {\n            \"name\": \"guzzlehttp/psr7\",\n            \"version\": \"2.7.1\",\n            \"version_normalized\": \"2.7.1.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/guzzle/psr7.git\",\n                \"reference\": \"c2270caaabe631b3b44c85f99e5a04bbb8060d16\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/guzzle/psr7/zipball/c2270caaabe631b3b44c85f99e5a04bbb8060d16\",\n                \"reference\": \"c2270caaabe631b3b44c85f99e5a04bbb8060d16\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"psr/http-factory\": \"^1.0\",\n                \"psr/http-message\": \"^1.1 || ^2.0\",\n                \"ralouphie/getallheaders\": \"^3.0\"\n            },\n            \"provide\": {\n                \"psr/http-factory-implementation\": \"1.0\",\n                \"psr/http-message-implementation\": \"1.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"http-interop/http-factory-tests\": \"0.9.0\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\"\n            },\n            \"suggest\": {\n                \"laminas/laminas-httphandlerrunner\": \"Emit PSR-7 responses\"\n            },\n            \"time\": \"2025-03-27T12:30:47+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"GuzzleHttp\\\\Psr7\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"George Mponos\",\n                    \"email\": \"gmponos@gmail.com\",\n                    \"homepage\": \"https://github.com/gmponos\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.", "mimetype": "text/plain", "start_char_idx": 9238, "end_char_idx": 13081, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e40b1c73-e52a-45c6-9a13-60a6b09e739c": {"__data__": {"id_": "e40b1c73-e52a-45c6-9a13-60a6b09e739c", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a2ddcda-b2fd-4281-adca-c3b783c793f4", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2358dcc2b06b8ae4e9b063f716b46cc6466df1fc0f6174bb1cd39fabedd39fda", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1a12b08e-97f9-4dd9-a13c-4f5ca695801f", "node_type": "1", "metadata": {}, "hash": "5ff2db7e49ecf1ede2c29e4a3c59a3d32bb1d8f43f872c07deff85811631ea65", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Michael Dowling\",\n                    \"email\": \"mtdowling@gmail.com\",\n                    \"homepage\": \"https://github.com/mtdowling\"\n                },\n                {\n                    \"name\": \"George Mponos\",\n                    \"email\": \"gmponos@gmail.com\",\n                    \"homepage\": \"https://github.com/gmponos\"\n                },\n                {\n                    \"name\": \"Tobias Nyholm\",\n                    \"email\": \"tobias.nyholm@gmail.com\",\n                    \"homepage\": \"https://github.com/Nyholm\"\n                },\n                {\n                    \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n                    \"email\": \"mark.sagikazar@gmail.com\",\n                    \"homepage\": \"https://github.com/sagikazarmark\"\n                },\n                {\n                    \"name\": \"Tobias Schultze\",\n                    \"email\": \"webmaster@tubo-world.de\",\n                    \"homepage\": \"https://github.com/Tobion\"\n                },\n                {\n                    \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n                    \"email\": \"mark.sagikazar@gmail.com\",\n                    \"homepage\": \"https://sagikazarmark.hu\"\n                }\n            ],\n            \"description\": \"PSR-7 message implementation that also provides common utility methods\",\n            \"keywords\": [\n                \"http\",\n                \"message\",\n                \"psr-7\",\n                \"request\",\n                \"response\",\n                \"stream\",\n                \"uri\",\n                \"url\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/guzzle/psr7/issues\",\n                \"source\": \"https://github.com/guzzle/psr7/tree/2.7.1\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://github.com/Nyholm\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/guzzlehttp/psr7\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../guzzlehttp/psr7\"\n        },\n        {\n            \"name\": \"phpoption/phpoption\",\n            \"version\": \"1.9.3\",\n            \"version_normalized\": \"1.9.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/schmittjoh/php-option.git\",\n                \"reference\": \"e3fac8b24f56113f7cb96af14958c0dd16330f54\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/schmittjoh/php-option/zipball/e3fac8b24f56113f7cb96af14958c0dd16330f54\",\n                \"reference\": \"e3fac8b24f56113f7cb96af14958c0dd16330f54\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20 || ^10.5.28\"\n            },\n            \"time\": \"2024-07-20T21:41:07+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                },\n                \"branch-alias\": {\n                    \"dev-master\": \"1.9-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",", "mimetype": "text/plain", "start_char_idx": 12211, "end_char_idx": 16070, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1a12b08e-97f9-4dd9-a13c-4f5ca695801f": {"__data__": {"id_": "1a12b08e-97f9-4dd9-a13c-4f5ca695801f", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e40b1c73-e52a-45c6-9a13-60a6b09e739c", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "63a25b6d69ba694e551ca47b99fbd83039e27f1e51421e6dc9d170da849d8390", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5edab4fc-99c1-4a16-b7a8-d4b3beff515e", "node_type": "1", "metadata": {}, "hash": "855c6115c25dd9e5d8cbd6d0a6c0a6392daf7e2c241da621bcf7f8c8ef7fa377", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2.5 || ^8.0\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20 || ^10.5.28\"\n            },\n            \"time\": \"2024-07-20T21:41:07+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                },\n                \"branch-alias\": {\n                    \"dev-master\": \"1.9-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"PhpOption\\\\\": \"src/PhpOption/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"Apache-2.0\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Johannes M. Schmitt\",\n                    \"email\": \"schmittjoh@gmail.com\",\n                    \"homepage\": \"https://github.com/schmittjoh\"\n                },\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                }\n            ],\n            \"description\": \"Option Type for PHP\",\n            \"keywords\": [\n                \"language\",\n                \"option\",\n                \"php\",\n                \"type\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/schmittjoh/php-option/issues\",\n                \"source\": \"https://github.com/schmittjoh/php-option/tree/1.9.3\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/phpoption/phpoption\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../phpoption/phpoption\"\n        },\n        {\n            \"name\": \"psr/http-client\",\n            \"version\": \"1.0.3\",\n            \"version_normalized\": \"1.0.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-client.git\",\n                \"reference\": \"bb5906edc1c324c9a05aa0873d40117941e5fa90\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-client/zipball/bb5906edc1c324c9a05aa0873d40117941e5fa90\",\n                \"reference\": \"bb5906edc1c324c9a05aa0873d40117941e5fa90\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.0 || ^8.0\",\n                \"psr/http-message\": \"^1.0 || ^2.0\"\n            },\n            \"time\": \"2023-09-23T14:17:50+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0.x-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Client\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"Common interface for HTTP clients\",\n            \"homepage\": \"https://github.com/php-fig/http-client\",\n            \"keywords\": [\n                \"http\",\n                \"http-client\",\n                \"psr\",", "mimetype": "text/plain", "start_char_idx": 15401, "end_char_idx": 19291, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5edab4fc-99c1-4a16-b7a8-d4b3beff515e": {"__data__": {"id_": "5edab4fc-99c1-4a16-b7a8-d4b3beff515e", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1a12b08e-97f9-4dd9-a13c-4f5ca695801f", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5b12474256c933cd95a5754054bb6a88d0110d27c1a331c6e9af1342cb961069", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e793cbfc-e405-4fd3-9e16-310b019fee2e", "node_type": "1", "metadata": {}, "hash": "1801d39a70a04e70bfa2dc51c9c204cb1f03fb8821d44a7265c43a8d9ee682de", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0.x-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Client\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"Common interface for HTTP clients\",\n            \"homepage\": \"https://github.com/php-fig/http-client\",\n            \"keywords\": [\n                \"http\",\n                \"http-client\",\n                \"psr\",\n                \"psr-18\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/php-fig/http-client\"\n            },\n            \"install-path\": \"../psr/http-client\"\n        },\n        {\n            \"name\": \"psr/http-factory\",\n            \"version\": \"1.1.0\",\n            \"version_normalized\": \"1.1.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-factory.git\",\n                \"reference\": \"2b4765fddfe3b508ac62f829e852b1501d3f6e8a\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-factory/zipball/2b4765fddfe3b508ac62f829e852b1501d3f6e8a\",\n                \"reference\": \"2b4765fddfe3b508ac62f829e852b1501d3f6e8a\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.1\",\n                \"psr/http-message\": \"^1.0 || ^2.0\"\n            },\n            \"time\": \"2024-04-15T12:06:14+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"1.0.x-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"PSR-17: Common interfaces for PSR-7 HTTP message factories\",\n            \"keywords\": [\n                \"factory\",\n                \"http\",\n                \"message\",\n                \"psr\",\n                \"psr-17\",\n                \"psr-7\",\n                \"request\",\n                \"response\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/php-fig/http-factory\"\n            },\n            \"install-path\": \"../psr/http-factory\"\n        },\n        {\n            \"name\": \"psr/http-message\",\n            \"version\": \"2.0\",\n            \"version_normalized\": \"2.0.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-message.git\",\n                \"reference\": \"402d35bcb92c70c026d1a6a9883f06b2ead23d71\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-message/zipball/402d35bcb92c70c026d1a6a9883f06b2ead23d71\",\n                \"reference\": \"402d35bcb92c70c026d1a6a9883f06b2ead23d71\",\n                \"shasum\": \"\"\n            },", "mimetype": "text/plain", "start_char_idx": 18420, "end_char_idx": 22092, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e793cbfc-e405-4fd3-9e16-310b019fee2e": {"__data__": {"id_": "e793cbfc-e405-4fd3-9e16-310b019fee2e", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5edab4fc-99c1-4a16-b7a8-d4b3beff515e", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6de4aaf8bcebd60621a0113d29d9cb6d01b7ffbd8484face49472d49fae18d21", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "79e9c3df-b8fd-475a-a9ad-df427e14657f", "node_type": "1", "metadata": {}, "hash": "c982a0aaf8dfa7f1fb185d39bd8c61b0d0110ac55e49130fcd24d12dcf05d62d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"version\": \"2.0\",\n            \"version_normalized\": \"2.0.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/php-fig/http-message.git\",\n                \"reference\": \"402d35bcb92c70c026d1a6a9883f06b2ead23d71\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/php-fig/http-message/zipball/402d35bcb92c70c026d1a6a9883f06b2ead23d71\",\n                \"reference\": \"402d35bcb92c70c026d1a6a9883f06b2ead23d71\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \"^7.2 || ^8.0\"\n            },\n            \"time\": \"2023-04-04T09:54:51+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"branch-alias\": {\n                    \"dev-master\": \"2.0.x-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"PHP-FIG\",\n                    \"homepage\": \"https://www.php-fig.org/\"\n                }\n            ],\n            \"description\": \"Common interface for HTTP messages\",\n            \"homepage\": \"https://github.com/php-fig/http-message\",\n            \"keywords\": [\n                \"http\",\n                \"http-message\",\n                \"psr\",\n                \"psr-7\",\n                \"request\",\n                \"response\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/php-fig/http-message/tree/2.0\"\n            },\n            \"install-path\": \"../psr/http-message\"\n        },\n        {\n            \"name\": \"ralouphie/getallheaders\",\n            \"version\": \"3.0.3\",\n            \"version_normalized\": \"3.0.3.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/ralouphie/getallheaders.git\",\n                \"reference\": \"120b605dfeb996808c31b6477290a714d356e822\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/ralouphie/getallheaders/zipball/120b605dfeb996808c31b6477290a714d356e822\",\n                \"reference\": \"120b605dfeb996808c31b6477290a714d356e822\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=5.6\"\n            },\n            \"require-dev\": {\n                \"php-coveralls/php-coveralls\": \"^2.1\",\n                \"phpunit/phpunit\": \"^5 || ^6.5\"\n            },\n            \"time\": \"2019-03-08T08:55:37+00:00\",\n            \"type\": \"library\",\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"src/getallheaders.php\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Ralph Khattar\",\n                    \"email\": \"ralph.khattar@gmail.com\"\n                }\n            ],\n            \"description\": \"A polyfill for getallheaders.\",\n            \"support\": {\n                \"issues\": \"https://github.com/ralouphie/getallheaders/issues\",\n                \"source\": \"https://github.com/ralouphie/getallheaders/tree/develop\"\n            },\n            \"install-path\": \"../ralouphie/getallheaders\"\n        },\n        {\n            \"name\": \"symfony/deprecation-contracts\",", "mimetype": "text/plain", "start_char_idx": 21523, "end_char_idx": 25197, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "79e9c3df-b8fd-475a-a9ad-df427e14657f": {"__data__": {"id_": "79e9c3df-b8fd-475a-a9ad-df427e14657f", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e793cbfc-e405-4fd3-9e16-310b019fee2e", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "dca7551ffd963981554e2798986849775e0944f575848492bbeb0b3dbde672b7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4636ec65-14cc-4314-9eab-eda66d3a9113", "node_type": "1", "metadata": {}, "hash": "6deca6ef9dc99aba10d1c212327f60dbd473f8c1a38adbadc4b0b0ebb06fc2c6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"src/getallheaders.php\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Ralph Khattar\",\n                    \"email\": \"ralph.khattar@gmail.com\"\n                }\n            ],\n            \"description\": \"A polyfill for getallheaders.\",\n            \"support\": {\n                \"issues\": \"https://github.com/ralouphie/getallheaders/issues\",\n                \"source\": \"https://github.com/ralouphie/getallheaders/tree/develop\"\n            },\n            \"install-path\": \"../ralouphie/getallheaders\"\n        },\n        {\n            \"name\": \"symfony/deprecation-contracts\",\n            \"version\": \"v3.6.0\",\n            \"version_normalized\": \"3.6.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/symfony/deprecation-contracts.git\",\n                \"reference\": \"63afe740e99a13ba87ec199bb07bbdee937a5b62\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/deprecation-contracts/zipball/63afe740e99a13ba87ec199bb07bbdee937a5b62\",\n                \"reference\": \"63afe740e99a13ba87ec199bb07bbdee937a5b62\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=8.1\"\n            },\n            \"time\": \"2024-09-25T14:21:43+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"thanks\": {\n                    \"url\": \"https://github.com/symfony/contracts\",\n                    \"name\": \"symfony/contracts\"\n                },\n                \"branch-alias\": {\n                    \"dev-main\": \"3.6-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"function.php\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Nicolas Grekas\",\n                    \"email\": \"p@tchwork.com\"\n                },\n                {\n                    \"name\": \"Symfony Community\",\n                    \"homepage\": \"https://symfony.com/contributors\"\n                }\n            ],\n            \"description\": \"A generic function and convention to trigger deprecation notices\",\n            \"homepage\": \"https://symfony.com\",\n            \"support\": {\n                \"source\": \"https://github.com/symfony/deprecation-contracts/tree/v3.6.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://symfony.com/sponsor\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://github.com/fabpot\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../symfony/deprecation-contracts\"\n        },\n        {\n            \"name\": \"symfony/polyfill-ctype\",\n            \"version\": \"v1.32.0\",\n            \"version_normalized\": \"1.32.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/symfony/polyfill-ctype.git\",\n                \"reference\": \"a3cc8b044a6ea513310cbd48ef7333b384945638\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/polyfill-ctype/zipball/a3cc8b044a6ea513310cbd48ef7333b384945638\",", "mimetype": "text/plain", "start_char_idx": 24337, "end_char_idx": 28203, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4636ec65-14cc-4314-9eab-eda66d3a9113": {"__data__": {"id_": "4636ec65-14cc-4314-9eab-eda66d3a9113", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "79e9c3df-b8fd-475a-a9ad-df427e14657f", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "83add0889f5478ae1f9b1e4eb0ca156542aadadd8b0a4133afc24a1fc1619fed", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d2be4e48-0769-460c-85cf-39068f32a10b", "node_type": "1", "metadata": {}, "hash": "7b8efef9a7602ab7568e2a9320f0840d14203aec39e1492ee7c3768318e75d5f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../symfony/deprecation-contracts\"\n        },\n        {\n            \"name\": \"symfony/polyfill-ctype\",\n            \"version\": \"v1.32.0\",\n            \"version_normalized\": \"1.32.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/symfony/polyfill-ctype.git\",\n                \"reference\": \"a3cc8b044a6ea513310cbd48ef7333b384945638\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/polyfill-ctype/zipball/a3cc8b044a6ea513310cbd48ef7333b384945638\",\n                \"reference\": \"a3cc8b044a6ea513310cbd48ef7333b384945638\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.2\"\n            },\n            \"provide\": {\n                \"ext-ctype\": \"*\"\n            },\n            \"suggest\": {\n                \"ext-ctype\": \"For best performance\"\n            },\n            \"time\": \"2024-09-09T11:45:10+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"thanks\": {\n                    \"url\": \"https://github.com/symfony/polyfill\",\n                    \"name\": \"symfony/polyfill\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"bootstrap.php\"\n                ],\n                \"psr-4\": {\n                    \"Symfony\\\\Polyfill\\\\Ctype\\\\\": \"\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Gert de Pagter\",\n                    \"email\": \"BackEndTea@gmail.com\"\n                },\n                {\n                    \"name\": \"Symfony Community\",\n                    \"homepage\": \"https://symfony.com/contributors\"\n                }\n            ],\n            \"description\": \"Symfony polyfill for ctype functions\",\n            \"homepage\": \"https://symfony.com\",\n            \"keywords\": [\n                \"compatibility\",\n                \"ctype\",\n                \"polyfill\",\n                \"portable\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/symfony/polyfill-ctype/tree/v1.32.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://symfony.com/sponsor\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://github.com/fabpot\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../symfony/polyfill-ctype\"\n        },\n        {\n            \"name\": \"symfony/polyfill-mbstring\",\n            \"version\": \"v1.32.0\",\n            \"version_normalized\": \"1.32.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/symfony/polyfill-mbstring.git\",\n                \"reference\": \"6d857f4d76bd4b343eac26d6b539585d2bc56493\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/polyfill-mbstring/zipball/6d857f4d76bd4b343eac26d6b539585d2bc56493\",\n                \"reference\": \"6d857f4d76bd4b343eac26d6b539585d2bc56493\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-iconv\": \"*\",\n                \"php\": \">=7.2\"\n            },\n            \"provide\": {\n                \"ext-mbstring\": \"*\"\n            },", "mimetype": "text/plain", "start_char_idx": 27548, "end_char_idx": 31318, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d2be4e48-0769-460c-85cf-39068f32a10b": {"__data__": {"id_": "d2be4e48-0769-460c-85cf-39068f32a10b", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4636ec65-14cc-4314-9eab-eda66d3a9113", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "822fe352d7fb8d479d0dda7309f57328aab69772c09740d33c44e62b955aa901", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f7ea703-49d6-4625-ac69-72bdea7ece75", "node_type": "1", "metadata": {}, "hash": "3944320271bc7b58e0145332977b9982f43a51445445eef5de3dda0ec3649909", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "com/symfony/polyfill-mbstring.git\",\n                \"reference\": \"6d857f4d76bd4b343eac26d6b539585d2bc56493\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/polyfill-mbstring/zipball/6d857f4d76bd4b343eac26d6b539585d2bc56493\",\n                \"reference\": \"6d857f4d76bd4b343eac26d6b539585d2bc56493\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-iconv\": \"*\",\n                \"php\": \">=7.2\"\n            },\n            \"provide\": {\n                \"ext-mbstring\": \"*\"\n            },\n            \"suggest\": {\n                \"ext-mbstring\": \"For best performance\"\n            },\n            \"time\": \"2024-12-23T08:48:59+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"thanks\": {\n                    \"url\": \"https://github.com/symfony/polyfill\",\n                    \"name\": \"symfony/polyfill\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"bootstrap.php\"\n                ],\n                \"psr-4\": {\n                    \"Symfony\\\\Polyfill\\\\Mbstring\\\\\": \"\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Nicolas Grekas\",\n                    \"email\": \"p@tchwork.com\"\n                },\n                {\n                    \"name\": \"Symfony Community\",\n                    \"homepage\": \"https://symfony.com/contributors\"\n                }\n            ],\n            \"description\": \"Symfony polyfill for the Mbstring extension\",\n            \"homepage\": \"https://symfony.com\",\n            \"keywords\": [\n                \"compatibility\",\n                \"mbstring\",\n                \"polyfill\",\n                \"portable\",\n                \"shim\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/symfony/polyfill-mbstring/tree/v1.32.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://symfony.com/sponsor\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://github.com/fabpot\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../symfony/polyfill-mbstring\"\n        },\n        {\n            \"name\": \"symfony/polyfill-php80\",\n            \"version\": \"v1.32.0\",\n            \"version_normalized\": \"1.32.0.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/symfony/polyfill-php80.git\",\n                \"reference\": \"0cc9dd0f17f61d8131e7df6b84bd344899fe2608\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/symfony/polyfill-php80/zipball/0cc9dd0f17f61d8131e7df6b84bd344899fe2608\",\n                \"reference\": \"0cc9dd0f17f61d8131e7df6b84bd344899fe2608\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.2\"\n            },\n            \"time\": \"2025-01-02T08:10:11+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"thanks\": {\n                    \"url\": \"https://github.com/symfony/polyfill\",\n                    \"name\": \"symfony/polyfill\"\n                }\n            },\n            \"installation-source\": \"dist\",", "mimetype": "text/plain", "start_char_idx": 30715, "end_char_idx": 34412, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7f7ea703-49d6-4625-ac69-72bdea7ece75": {"__data__": {"id_": "7f7ea703-49d6-4625-ac69-72bdea7ece75", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d2be4e48-0769-460c-85cf-39068f32a10b", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ac9dc89434834c8558cc54825959a858c86bdaaa2cf130b98b0f925937656ffb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8aac0fe7-b02a-496c-a4de-4481efb2288f", "node_type": "1", "metadata": {}, "hash": "8abd6c857e2d1158ab0c5f072810e434ed56526546007467c7f3a2088973d7e5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"url\": \"https://api.github.com/repos/symfony/polyfill-php80/zipball/0cc9dd0f17f61d8131e7df6b84bd344899fe2608\",\n                \"reference\": \"0cc9dd0f17f61d8131e7df6b84bd344899fe2608\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"php\": \">=7.2\"\n            },\n            \"time\": \"2025-01-02T08:10:11+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"thanks\": {\n                    \"url\": \"https://github.com/symfony/polyfill\",\n                    \"name\": \"symfony/polyfill\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"files\": [\n                    \"bootstrap.php\"\n                ],\n                \"psr-4\": {\n                    \"Symfony\\\\Polyfill\\\\Php80\\\\\": \"\"\n                },\n                \"classmap\": [\n                    \"Resources/stubs\"\n                ]\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"MIT\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Ion Bazan\",\n                    \"email\": \"ion.bazan@gmail.com\"\n                },\n                {\n                    \"name\": \"Nicolas Grekas\",\n                    \"email\": \"p@tchwork.com\"\n                },\n                {\n                    \"name\": \"Symfony Community\",\n                    \"homepage\": \"https://symfony.com/contributors\"\n                }\n            ],\n            \"description\": \"Symfony polyfill backporting some PHP 8.0+ features to lower PHP versions\",\n            \"homepage\": \"https://symfony.com\",\n            \"keywords\": [\n                \"compatibility\",\n                \"polyfill\",\n                \"portable\",\n                \"shim\"\n            ],\n            \"support\": {\n                \"source\": \"https://github.com/symfony/polyfill-php80/tree/v1.32.0\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://symfony.com/sponsor\",\n                    \"type\": \"custom\"\n                },\n                {\n                    \"url\": \"https://github.com/fabpot\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/symfony/symfony\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../symfony/polyfill-php80\"\n        },\n        {\n            \"name\": \"vlucas/phpdotenv\",\n            \"version\": \"v5.6.2\",\n            \"version_normalized\": \"5.6.2.0\",\n            \"source\": {\n                \"type\": \"git\",\n                \"url\": \"https://github.com/vlucas/phpdotenv.git\",\n                \"reference\": \"24ac4c74f91ee2c193fa1aaa5c249cb0822809af\"\n            },\n            \"dist\": {\n                \"type\": \"zip\",\n                \"url\": \"https://api.github.com/repos/vlucas/phpdotenv/zipball/24ac4c74f91ee2c193fa1aaa5c249cb0822809af\",\n                \"reference\": \"24ac4c74f91ee2c193fa1aaa5c249cb0822809af\",\n                \"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-pcre\": \"*\",\n                \"graham-campbell/result-type\": \"^1.1.3\",\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"phpoption/phpoption\": \"^1.9.3\",\n                \"symfony/polyfill-ctype\": \"^1.24\",\n                \"symfony/polyfill-mbstring\": \"^1.24\",\n                \"symfony/polyfill-php80\": \"^1.24\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"ext-filter\": \"*\",\n                \"phpunit/phpunit\": \"^8.5.34 || ^9.6.13 || ^10.4.2\"\n            },", "mimetype": "text/plain", "start_char_idx": 33794, "end_char_idx": 37467, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8aac0fe7-b02a-496c-a4de-4481efb2288f": {"__data__": {"id_": "8aac0fe7-b02a-496c-a4de-4481efb2288f", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "52522db7aba2de174e97c7d8ec5af67e9c896f5c7ec2f519c93afaa6a3354d20", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7f7ea703-49d6-4625-ac69-72bdea7ece75", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/composer/installed.json", "file_name": "installed.json", "file_type": "application/json", "file_size": 39575, "creation_date": "2025-07-10", "last_modified_date": "2025-07-10", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "eff44f5719bf78d559895615aada69485946bd9917fba5a2ebee6e2ef561fed9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"shasum\": \"\"\n            },\n            \"require\": {\n                \"ext-pcre\": \"*\",\n                \"graham-campbell/result-type\": \"^1.1.3\",\n                \"php\": \"^7.2.5 || ^8.0\",\n                \"phpoption/phpoption\": \"^1.9.3\",\n                \"symfony/polyfill-ctype\": \"^1.24\",\n                \"symfony/polyfill-mbstring\": \"^1.24\",\n                \"symfony/polyfill-php80\": \"^1.24\"\n            },\n            \"require-dev\": {\n                \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n                \"ext-filter\": \"*\",\n                \"phpunit/phpunit\": \"^8.5.34 || ^9.6.13 || ^10.4.2\"\n            },\n            \"suggest\": {\n                \"ext-filter\": \"Required to use the boolean validator.\"\n            },\n            \"time\": \"2025-04-30T23:37:27+00:00\",\n            \"type\": \"library\",\n            \"extra\": {\n                \"bamarni-bin\": {\n                    \"bin-links\": true,\n                    \"forward-command\": false\n                },\n                \"branch-alias\": {\n                    \"dev-master\": \"5.6-dev\"\n                }\n            },\n            \"installation-source\": \"dist\",\n            \"autoload\": {\n                \"psr-4\": {\n                    \"Dotenv\\\\\": \"src/\"\n                }\n            },\n            \"notification-url\": \"https://packagist.org/downloads/\",\n            \"license\": [\n                \"BSD-3-Clause\"\n            ],\n            \"authors\": [\n                {\n                    \"name\": \"Graham Campbell\",\n                    \"email\": \"hello@gjcampbell.co.uk\",\n                    \"homepage\": \"https://github.com/GrahamCampbell\"\n                },\n                {\n                    \"name\": \"Vance Lucas\",\n                    \"email\": \"vance@vancelucas.com\",\n                    \"homepage\": \"https://github.com/vlucas\"\n                }\n            ],\n            \"description\": \"Loads environment variables from `.env` to `getenv()`, `$_ENV` and `$_SERVER` automagically.\",\n            \"keywords\": [\n                \"dotenv\",\n                \"env\",\n                \"environment\"\n            ],\n            \"support\": {\n                \"issues\": \"https://github.com/vlucas/phpdotenv/issues\",\n                \"source\": \"https://github.com/vlucas/phpdotenv/tree/v5.6.2\"\n            },\n            \"funding\": [\n                {\n                    \"url\": \"https://github.com/GrahamCampbell\",\n                    \"type\": \"github\"\n                },\n                {\n                    \"url\": \"https://tidelift.com/funding/github/packagist/vlucas/phpdotenv\",\n                    \"type\": \"tidelift\"\n                }\n            ],\n            \"install-path\": \"../vlucas/phpdotenv\"\n        }\n    ],\n    \"dev\": true,\n    \"dev-package-names\": []\n}", "mimetype": "text/plain", "start_char_idx": 36862, "end_char_idx": 39565, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3aa3000b-acbf-45b2-a993-9d2e9622893c": {"__data__": {"id_": "3aa3000b-acbf-45b2-a993-9d2e9622893c", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/graham-campbell/result-type/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 904, "creation_date": "2025-07-10", "last_modified_date": "2024-07-20", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "609a7723-7cbb-4198-b043-bfd4efe26ae7", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/graham-campbell/result-type/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 904, "creation_date": "2025-07-10", "last_modified_date": "2024-07-20", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4cee03e4b3b6f8d984400fc3fe3c3ab87c66fc307a64b00c6dba500f53bd2424", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"graham-campbell/result-type\",\n    \"description\": \"An Implementation Of The Result Type\",\n    \"keywords\": [\"result\", \"result-type\", \"Result\", \"Result Type\", \"Result-Type\", \"Graham Campbell\", \"GrahamCampbell\"],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Graham Campbell\",\n            \"email\": \"hello@gjcampbell.co.uk\",\n            \"homepage\": \"https://github.com/GrahamCampbell\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2.5 || ^8.0\",\n        \"phpoption/phpoption\": \"^1.9.3\"\n    },\n    \"require-dev\": {\n        \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20 || ^10.5.28\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"GrahamCampbell\\\\ResultType\\\\\": \"src/\"\n        }\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"GrahamCampbell\\\\Tests\\\\ResultType\\\\\": \"tests/\"\n        }\n    },\n    \"config\": {\n        \"preferred-install\": \"dist\"\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 903, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "533037ab-3fda-44b6-9af9-d53b5581b289": {"__data__": {"id_": "533037ab-3fda-44b6-9af9-d53b5581b289", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2ee49449-2def-49fd-b42a-c4499b56d0e8", "node_type": "1", "metadata": {}, "hash": "7d0675f22db7570e1c23f0b457e59e837a690e6da9e3f1a6091921cdc46ca6d2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Change Log\n\nPlease refer to [UPGRADING](UPGRADING.md) guide for upgrading to a major version.\n\n\n## 7.9.3 - 2025-03-27\n\n### Changed\n\n- Remove explicit content-length header for GET requests\n- Improve compatibility with bad servers for boolean cookie values\n\n\n## 7.9.2 - 2024-07-24\n\n### Fixed\n\n- Adjusted handler selection to use cURL if its version is 7.21.2 or higher, rather than 7.34.0\n\n\n## 7.9.1 - 2024-07-19\n\n### Fixed\n\n- Fix TLS 1.3 check for HTTP/2 requests\n\n\n## 7.9.0 - 2024-07-18\n\n### Changed\n\n- Improve protocol version checks to provide feedback around unsupported protocols\n- Only select the cURL handler by default if 7.34.0 or higher is linked\n- Improved `CurlMultiHandler` to avoid busy wait if possible\n- Dropped support for EOL `guzzlehttp/psr7` v1\n- Improved URI user info redaction in errors\n\n## 7.8.2 - 2024-07-18\n\n### Added\n\n- Support for PHP 8.4\n\n\n## 7.8.1 - 2023-12-03\n\n### Changed\n\n- Updated links in docs to their canonical versions\n- Replaced `call_user_func*` with native calls\n\n\n## 7.8.0 - 2023-08-27\n\n### Added\n\n- Support for PHP 8.3\n- Added automatic closing of handles on `CurlFactory` object destruction\n\n\n## 7.7.1 - 2023-08-27\n\n### Changed\n\n- Remove the need for `AllowDynamicProperties` in `CurlMultiHandler`\n\n\n## 7.7.0 - 2023-05-21\n\n### Added\n\n- Support `guzzlehttp/promises` v2\n\n\n## 7.6.1 - 2023-05-15\n\n### Fixed\n\n- Fix `SetCookie::fromString` MaxAge deprecation warning and skip invalid MaxAge values\n\n\n## 7.6.0 - 2023-05-14\n\n### Added\n\n- Support for setting the minimum TLS version in a unified way\n- Apply on request the version set in options parameters\n\n\n## 7.5.2 - 2023-05-14\n\n### Fixed\n\n- Fixed set cookie constructor validation\n- Fixed handling of files with `'0'` body\n\n### Changed\n\n- Corrected docs and default connect timeout value to 300 seconds\n\n\n## 7.5.1 - 2023-04-17\n\n### Fixed\n\n- Fixed `NO_PROXY` settings so that setting the `proxy` option to `no` overrides the env variable\n\n### Changed\n\n- Adjusted `guzzlehttp/psr7` version constraint to `^1.9.1 || ^2.4.5`\n\n\n## 7.5.0 - 2022-08-28\n\n### Added\n\n- Support PHP 8.2\n- Add request to delay closure params\n\n\n## 7.4.5 - 2022-06-20\n\n### Fixed\n\n* Fix change in port should be considered a change in origin\n* Fix `CURLOPT_HTTPAUTH` option not cleared on change of origin\n\n\n## 7.4.4 - 2022-06-09\n\n### Fixed\n\n* Fix failure to strip Authorization header on HTTP downgrade\n* Fix failure to strip the Cookie header on change in host or HTTP downgrade\n\n\n## 7.4.3 - 2022-05-25\n\n### Fixed\n\n* Fix cross-domain cookie leakage\n\n\n## 7.4.2 - 2022-03-20\n\n### Fixed\n\n- Remove curl auth on cross-domain redirects to align with the Authorization HTTP header\n- Reject non-HTTP schemes in StreamHandler\n- Set a default ssl.peer_name context in StreamHandler to allow `force_ip_resolve`\n\n\n## 7.4.1 - 2021-12-06\n\n### Changed\n\n- Replaced implicit URI to string coercion [#2946](https://github.com/guzzle/guzzle/pull/2946)\n- Allow `symfony/deprecation-contracts` version 3 [#2961](https://github.com/guzzle/guzzle/pull/2961)\n\n### Fixed\n\n- Only close curl handle if it's done [#2950](https://github.com/guzzle/guzzle/pull/2950)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3098, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2ee49449-2def-49fd-b42a-c4499b56d0e8": {"__data__": {"id_": "2ee49449-2def-49fd-b42a-c4499b56d0e8", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "533037ab-3fda-44b6-9af9-d53b5581b289", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d7fb7c66c3ce1d5bc53a9e3cca39bb683465bc95d2f995faa6ba1d094f664e90", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "70b3becc-2225-445f-ba06-f94d504e8cc5", "node_type": "1", "metadata": {}, "hash": "403a72d71d79d02042d169ce6140a89f23bbe5a820db98a35ce533109c66d044", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 7.4.3 - 2022-05-25\n\n### Fixed\n\n* Fix cross-domain cookie leakage\n\n\n## 7.4.2 - 2022-03-20\n\n### Fixed\n\n- Remove curl auth on cross-domain redirects to align with the Authorization HTTP header\n- Reject non-HTTP schemes in StreamHandler\n- Set a default ssl.peer_name context in StreamHandler to allow `force_ip_resolve`\n\n\n## 7.4.1 - 2021-12-06\n\n### Changed\n\n- Replaced implicit URI to string coercion [#2946](https://github.com/guzzle/guzzle/pull/2946)\n- Allow `symfony/deprecation-contracts` version 3 [#2961](https://github.com/guzzle/guzzle/pull/2961)\n\n### Fixed\n\n- Only close curl handle if it's done [#2950](https://github.com/guzzle/guzzle/pull/2950)\n\n\n## 7.4.0 - 2021-10-18\n\n### Added\n\n- Support PHP 8.1 [#2929](https://github.com/guzzle/guzzle/pull/2929), [#2939](https://github.com/guzzle/guzzle/pull/2939)\n- Support `psr/log` version 2 and 3 [#2943](https://github.com/guzzle/guzzle/pull/2943)\n\n### Fixed\n\n- Make sure we always call `restore_error_handler()` [#2915](https://github.com/guzzle/guzzle/pull/2915)\n- Fix progress parameter type compatibility between the cURL and stream handlers [#2936](https://github.com/guzzle/guzzle/pull/2936)\n- Throw `InvalidArgumentException` when an incorrect `headers` array is provided [#2916](https://github.com/guzzle/guzzle/pull/2916), [#2942](https://github.com/guzzle/guzzle/pull/2942)\n\n### Changed\n\n- Be more strict with types [#2914](https://github.com/guzzle/guzzle/pull/2914), [#2917](https://github.com/guzzle/guzzle/pull/2917), [#2919](https://github.com/guzzle/guzzle/pull/2919), [#2945](https://github.com/guzzle/guzzle/pull/2945)\n\n\n## 7.3.0 - 2021-03-23\n\n### Added\n\n- Support for DER and P12 certificates [#2413](https://github.com/guzzle/guzzle/pull/2413)\n- Support the cURL (http://) scheme for StreamHandler proxies [#2850](https://github.com/guzzle/guzzle/pull/2850)\n- Support for `guzzlehttp/psr7:^2.0` [#2878](https://github.com/guzzle/guzzle/pull/2878)\n\n### Fixed\n\n- Handle exceptions on invalid header consistently between PHP versions and handlers [#2872](https://github.com/guzzle/guzzle/pull/2872)\n\n\n## 7.2.0 - 2020-10-10\n\n### Added\n\n- Support for PHP 8 [#2712](https://github.com/guzzle/guzzle/pull/2712), [#2715](https://github.com/guzzle/guzzle/pull/2715), [#2789](https://github.com/guzzle/guzzle/pull/2789)\n- Support passing a body summarizer to the http errors middleware [#2795](https://github.com/guzzle/guzzle/pull/2795)\n\n### Fixed\n\n- Handle exceptions during response creation [#2591](https://github.com/guzzle/guzzle/pull/2591)\n- Fix CURLOPT_ENCODING not to be overwritten [#2595](https://github.com/guzzle/guzzle/pull/2595)\n- Make sure the Request always has a body object [#2804](https://github.com/guzzle/guzzle/pull/2804)\n\n### Changed\n\n- The `TooManyRedirectsException` has a response [#2660](https://github.com/guzzle/guzzle/pull/2660)\n- Avoid \"functions\" from dependencies [#2712](https://github.com/guzzle/guzzle/pull/2712)\n\n### Deprecated\n\n- Using environment variable GUZZLE_CURL_SELECT_TIMEOUT [#2786](https://github.com/guzzle/guzzle/pull/2786)\n\n\n## 7.1.1 - 2020-09-30\n\n### Fixed\n\n- Incorrect EOF detection for response body streams on Windows.\n\n### Changed\n\n- We dont connect curl `sink` on HEAD requests.\n- Removed some PHP 5 workarounds", "mimetype": "text/plain", "start_char_idx": 2443, "end_char_idx": 5677, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "70b3becc-2225-445f-ba06-f94d504e8cc5": {"__data__": {"id_": "70b3becc-2225-445f-ba06-f94d504e8cc5", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2ee49449-2def-49fd-b42a-c4499b56d0e8", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b490e7886365b7d24aa966b62619fe82448b60ad00885901fcf5c3aa338036f1", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "51c1e8a0-5951-4463-bbaa-4cc991904b31", "node_type": "1", "metadata": {}, "hash": "3ace07896b888bd7130852235abf34bf9dbf7a7fc61ad371741d2a82d0bb450e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 7.1.1 - 2020-09-30\n\n### Fixed\n\n- Incorrect EOF detection for response body streams on Windows.\n\n### Changed\n\n- We dont connect curl `sink` on HEAD requests.\n- Removed some PHP 5 workarounds\n\n\n## 7.1.0 - 2020-09-22\n\n### Added\n\n- `GuzzleHttp\\MessageFormatterInterface`\n\n### Fixed\n\n- Fixed issue that caused cookies with no value not to be stored.\n- On redirects, we allow all safe methods like GET, HEAD and OPTIONS.\n- Fixed logging on empty responses.\n- Make sure MessageFormatter::format returns string\n\n### Deprecated\n\n- All functions in `GuzzleHttp` has been deprecated. Use static methods on `Utils` instead.\n- `ClientInterface::getConfig()`\n- `Client::getConfig()`\n- `Client::__call()`\n- `Utils::defaultCaBundle()`\n- `CurlFactory::LOW_CURL_VERSION_NUMBER`\n\n\n## 7.0.1 - 2020-06-27\n\n* Fix multiply defined functions fatal error [#2699](https://github.com/guzzle/guzzle/pull/2699)\n\n\n## 7.0.0 - 2020-06-27\n\nNo changes since 7.0.0-rc1.\n\n\n## 7.0.0-rc1 - 2020-06-15\n\n### Changed\n\n* Use error level for logging errors in Middleware [#2629](https://github.com/guzzle/guzzle/pull/2629)\n* Disabled IDN support by default and require ext-intl to use it [#2675](https://github.com/guzzle/guzzle/pull/2675)\n\n\n## 7.0.0-beta2 - 2020-05-25\n\n### Added\n\n* Using `Utils` class instead of functions in the `GuzzleHttp` namespace. [#2546](https://github.com/guzzle/guzzle/pull/2546)\n* `ClientInterface::MAJOR_VERSION` [#2583](https://github.com/guzzle/guzzle/pull/2583)\n\n### Changed\n\n* Avoid the `getenv` function when unsafe [#2531](https://github.com/guzzle/guzzle/pull/2531)\n* Added real client methods [#2529](https://github.com/guzzle/guzzle/pull/2529)\n* Avoid functions due to global install conflicts [#2546](https://github.com/guzzle/guzzle/pull/2546)\n* Use Symfony intl-idn polyfill [#2550](https://github.com/guzzle/guzzle/pull/2550)\n* Adding methods for HTTP verbs like `Client::get()`, `Client::head()`, `Client::patch()` etc [#2529](https://github.com/guzzle/guzzle/pull/2529)\n* `ConnectException` extends `TransferException` [#2541](https://github.com/guzzle/guzzle/pull/2541)\n* Updated the default User Agent to \"GuzzleHttp/7\" [#2654](https://github.com/guzzle/guzzle/pull/2654)\n\n### Fixed\n\n* Various intl icu issues [#2626](https://github.com/guzzle/guzzle/pull/2626)\n\n### Removed\n\n* Pool option `pool_size` [#2528](https://github.com/guzzle/guzzle/pull/2528)", "mimetype": "text/plain", "start_char_idx": 5485, "end_char_idx": 7845, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "51c1e8a0-5951-4463-bbaa-4cc991904b31": {"__data__": {"id_": "51c1e8a0-5951-4463-bbaa-4cc991904b31", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "70b3becc-2225-445f-ba06-f94d504e8cc5", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "42f11eeabce0858621da7b2c3eec7e0f24e87ed4d7191f11c05ece9fe9367f35", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d9aced91-ffd6-46b7-9e1a-c4667231edfd", "node_type": "1", "metadata": {}, "hash": "0345bbbdab5899e408aa60b3bc40cc1cdbcb22140173abf8b69f4079fbbb7d1d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 7.0.0-beta1 - 2019-12-30\n\nThe diff might look very big but 95% of Guzzle users will be able to upgrade without modification.\nPlease see [the upgrade document](UPGRADING.md) that describes all BC breaking changes.\n\n### Added\n\n* Implement PSR-18 and dropped PHP 5 support [#2421](https://github.com/guzzle/guzzle/pull/2421) [#2474](https://github.com/guzzle/guzzle/pull/2474)\n* PHP 7 types [#2442](https://github.com/guzzle/guzzle/pull/2442) [#2449](https://github.com/guzzle/guzzle/pull/2449) [#2466](https://github.com/guzzle/guzzle/pull/2466) [#2497](https://github.com/guzzle/guzzle/pull/2497) [#2499](https://github.com/guzzle/guzzle/pull/2499)\n* IDN support for redirects [2424](https://github.com/guzzle/guzzle/pull/2424)\n\n### Changed\n\n* Dont allow passing null as third argument to `BadResponseException::__construct()` [#2427](https://github.com/guzzle/guzzle/pull/2427)\n* Use SAPI constant instead of method call [#2450](https://github.com/guzzle/guzzle/pull/2450)\n* Use native function invocation [#2444](https://github.com/guzzle/guzzle/pull/2444)\n* Better defaults for PHP installations with old ICU lib [2454](https://github.com/guzzle/guzzle/pull/2454)\n* Added visibility to all constants [#2462](https://github.com/guzzle/guzzle/pull/2462)\n* Dont allow passing `null` as URI to `Client::request()` and `Client::requestAsync()` [#2461](https://github.com/guzzle/guzzle/pull/2461)\n* Widen the exception argument to throwable [#2495](https://github.com/guzzle/guzzle/pull/2495)\n\n### Fixed\n\n* Logging when Promise rejected with a string [#2311](https://github.com/guzzle/guzzle/pull/2311)\n\n### Removed\n\n* Class `SeekException` [#2162](https://github.com/guzzle/guzzle/pull/2162)\n* `RequestException::getResponseBodySummary()` [#2425](https://github.com/guzzle/guzzle/pull/2425)\n* `CookieJar::getCookieValue()` [#2433](https://github.com/guzzle/guzzle/pull/2433)\n* `uri_template()` and `UriTemplate` [#2440](https://github.com/guzzle/guzzle/pull/2440)\n* Request options `save_to` and `exceptions` [#2464](https://github.com/guzzle/guzzle/pull/2464)\n\n\n## 6.5.2 - 2019-12-23\n\n* idn_to_ascii() fix for old PHP versions [#2489](https://github.com/guzzle/guzzle/pull/2489)\n\n\n## 6.5.1 - 2019-12-21\n\n* Better defaults for PHP installations with old ICU lib [#2454](https://github.com/guzzle/guzzle/pull/2454)\n* IDN support for redirects [#2424](https://github.com/guzzle/guzzle/pull/2424)\n\n\n## 6.5.0 - 2019-12-07\n\n* Improvement: Added support for reset internal queue in MockHandler. [#2143](https://github.com/guzzle/guzzle/pull/2143)\n* Improvement: Added support to pass arbitrary options to `curl_multi_init`. [#2287](https://github.com/guzzle/guzzle/pull/2287)\n* Fix: Gracefully handle passing `null` to the `header` option. [#2132](https://github.com/guzzle/guzzle/pull/2132)\n* Fix: `RetryMiddleware` did not do exponential delay between retires due unit mismatch. [#2132](https://github.com/guzzle/guzzle/pull/2132)\n* Fix: Prevent undefined offset when using array for ssl_key options. [#2348](https://github.com/guzzle/guzzle/pull/2348)\n* Deprecated `ClientInterface::VERSION`\n\n\n## 6.4.1 - 2019-10-23\n\n* No `guzzle.phar` was created in 6.4.0 due expired API token. This release will fix that\n* Added `parent::__construct()` to `FileCookieJar` and `SessionCookieJar`", "mimetype": "text/plain", "start_char_idx": 7848, "end_char_idx": 11125, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d9aced91-ffd6-46b7-9e1a-c4667231edfd": {"__data__": {"id_": "d9aced91-ffd6-46b7-9e1a-c4667231edfd", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "51c1e8a0-5951-4463-bbaa-4cc991904b31", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "40d574b770910dfc8cece85c90ebd2420e3abbdcb048313b6020fab7c43db766", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "08ff3283-e0f4-4ede-b452-6a823125af3a", "node_type": "1", "metadata": {}, "hash": "2bd659ea4c10744a6ade9ad07e9ec62d06e25aa93c89b6f3f0de798ea1848121", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 6.4.1 - 2019-10-23\n\n* No `guzzle.phar` was created in 6.4.0 due expired API token. This release will fix that\n* Added `parent::__construct()` to `FileCookieJar` and `SessionCookieJar`\n\n\n## 6.4.0 - 2019-10-23\n\n* Improvement: Improved error messages when using curl < 7.21.2 [#2108](https://github.com/guzzle/guzzle/pull/2108)\n* Fix: Test if response is readable before returning a summary in `RequestException::getResponseBodySummary()` [#2081](https://github.com/guzzle/guzzle/pull/2081)\n* Fix: Add support for GUZZLE_CURL_SELECT_TIMEOUT environment variable [#2161](https://github.com/guzzle/guzzle/pull/2161)\n* Improvement: Added `GuzzleHttp\\Exception\\InvalidArgumentException` [#2163](https://github.com/guzzle/guzzle/pull/2163)\n* Improvement: Added `GuzzleHttp\\_current_time()` to use `hrtime()` if that function exists. [#2242](https://github.com/guzzle/guzzle/pull/2242)\n* Improvement: Added curl's `appconnect_time` in `TransferStats` [#2284](https://github.com/guzzle/guzzle/pull/2284)\n* Improvement: Make GuzzleException extend Throwable wherever it's available [#2273](https://github.com/guzzle/guzzle/pull/2273)\n* Fix: Prevent concurrent writes to file when saving `CookieJar` [#2335](https://github.com/guzzle/guzzle/pull/2335)\n* Improvement: Update `MockHandler` so we can test transfer time [#2362](https://github.com/guzzle/guzzle/pull/2362)\n\n\n## 6.3.3 - 2018-04-22\n\n* Fix: Default headers when decode_content is specified\n\n\n## 6.3.2 - 2018-03-26\n\n* Fix: Release process\n\n\n## 6.3.1 - 2018-03-26\n\n* Bug fix: Parsing 0 epoch expiry times in cookies [#2014](https://github.com/guzzle/guzzle/pull/2014)\n* Improvement: Better ConnectException detection [#2012](https://github.com/guzzle/guzzle/pull/2012)\n* Bug fix: Malformed domain that contains a \"/\" [#1999](https://github.com/guzzle/guzzle/pull/1999)\n* Bug fix: Undefined offset when a cookie has no first key-value pair [#1998](https://github.com/guzzle/guzzle/pull/1998)\n* Improvement: Support PHPUnit 6 [#1953](https://github.com/guzzle/guzzle/pull/1953)\n* Bug fix: Support empty headers [#1915](https://github.com/guzzle/guzzle/pull/1915)\n* Bug fix: Ignore case during header modifications [#1916](https://github.com/guzzle/guzzle/pull/1916)\n\n+ Minor code cleanups, documentation fixes and clarifications.", "mimetype": "text/plain", "start_char_idx": 10939, "end_char_idx": 13215, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "08ff3283-e0f4-4ede-b452-6a823125af3a": {"__data__": {"id_": "08ff3283-e0f4-4ede-b452-6a823125af3a", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d9aced91-ffd6-46b7-9e1a-c4667231edfd", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "82e78d68f9df384b75848d30ec9a388cb719d319d8ae7a544e0225ee8bb23d03", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "368b613d-c4f5-4b96-9264-cb0cdf9b5902", "node_type": "1", "metadata": {}, "hash": "e663ab3fb9253291e473df21609e366285c179845b5026124f53729f638a533f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 6.3.0 - 2017-06-22\n\n* Feature: force IP resolution (ipv4 or ipv6) [#1608](https://github.com/guzzle/guzzle/pull/1608), [#1659](https://github.com/guzzle/guzzle/pull/1659)\n* Improvement: Don't include summary in exception message when body is empty [#1621](https://github.com/guzzle/guzzle/pull/1621)\n* Improvement: Handle `on_headers` option in MockHandler [#1580](https://github.com/guzzle/guzzle/pull/1580)\n* Improvement: Added SUSE Linux CA path [#1609](https://github.com/guzzle/guzzle/issues/1609)\n* Improvement: Use class reference for getting the name of the class instead of using hardcoded strings [#1641](https://github.com/guzzle/guzzle/pull/1641)\n* Feature: Added `read_timeout` option [#1611](https://github.com/guzzle/guzzle/pull/1611)\n* Bug fix: PHP 7.x fixes [#1685](https://github.com/guzzle/guzzle/pull/1685), [#1686](https://github.com/guzzle/guzzle/pull/1686), [#1811](https://github.com/guzzle/guzzle/pull/1811)\n* Deprecation: BadResponseException instantiation without a response [#1642](https://github.com/guzzle/guzzle/pull/1642)\n* Feature: Added NTLM auth [#1569](https://github.com/guzzle/guzzle/pull/1569)\n* Feature: Track redirect HTTP status codes [#1711](https://github.com/guzzle/guzzle/pull/1711)\n* Improvement: Check handler type during construction [#1745](https://github.com/guzzle/guzzle/pull/1745)\n* Improvement: Always include the Content-Length if there's a body [#1721](https://github.com/guzzle/guzzle/pull/1721)\n* Feature: Added convenience method to access a cookie by name [#1318](https://github.com/guzzle/guzzle/pull/1318)\n* Bug fix: Fill `CURLOPT_CAPATH` and `CURLOPT_CAINFO` properly [#1684](https://github.com/guzzle/guzzle/pull/1684)\n* Improvement:  \tUse `\\GuzzleHttp\\Promise\\rejection_for` function instead of object init [#1827](https://github.com/guzzle/guzzle/pull/1827)\n\n+ Minor code cleanups, documentation fixes and clarifications.\n\n\n## 6.2.3 - 2017-02-28\n\n* Fix deprecations with guzzle/psr7 version 1.4\n\n\n## 6.2.2 - 2016-10-08\n\n* Allow to pass nullable Response to delay callable\n* Only add scheme when host is present\n* Fix drain case where content-length is the literal string zero\n* Obfuscate in-URL credentials in exceptions\n\n\n## 6.2.1 - 2016-07-18\n\n* Address HTTP_PROXY security vulnerability, CVE-2016-5385:\n  https://httpoxy.org/\n* Fixing timeout bug with StreamHandler:\n  https://github.com/guzzle/guzzle/pull/1488\n* Only read up to `Content-Length` in PHP StreamHandler to avoid timeouts when\n  a server does not honor `Connection: close`.\n* Ignore URI fragment when sending requests.\n\n\n## 6.2.0 - 2016-03-21\n\n* Feature: added `GuzzleHttp\\json_encode` and `GuzzleHttp\\json_decode`.\n  https://github.com/guzzle/guzzle/pull/1389\n* Bug fix: Fix sleep calculation when waiting for delayed requests.\n  https://github.com/guzzle/guzzle/pull/1324\n* Feature: More flexible history containers.\n  https://github.com/guzzle/guzzle/pull/1373\n* Bug fix: defer sink stream opening in StreamHandler.\n  https://github.com/guzzle/guzzle/pull/1377\n* Bug fix: do not attempt to escape cookie values.\n  https://github.com/guzzle/guzzle/pull/1406\n* Feature: report original content encoding and length on decoded responses.\n  https://github.com/guzzle/guzzle/pull/1409\n* Bug fix: rewind seekable request bodies before dispatching to cURL.\n  https://github.com/guzzle/guzzle/pull/1422\n* Bug fix: provide an empty string to `http_build_query` for HHVM workaround.\n  https://github.com/guzzle/guzzle/pull/1367", "mimetype": "text/plain", "start_char_idx": 13218, "end_char_idx": 16674, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "368b613d-c4f5-4b96-9264-cb0cdf9b5902": {"__data__": {"id_": "368b613d-c4f5-4b96-9264-cb0cdf9b5902", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "08ff3283-e0f4-4ede-b452-6a823125af3a", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0c03ca297d4557593567086c903caedbc5c6afa65e8998c2b891d8525a55cf57", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4b079d8e-1391-4121-8838-9ef4718b83a7", "node_type": "1", "metadata": {}, "hash": "2a0de7603369a85063ebcd78058b3971b187cefceee0159b5236bbb963695b8f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 6.1.1 - 2015-11-22\n\n* Bug fix: Proxy::wrapSync() now correctly proxies to the appropriate handler\n  https://github.com/guzzle/guzzle/commit/911bcbc8b434adce64e223a6d1d14e9a8f63e4e4\n* Feature: HandlerStack is now more generic.\n  https://github.com/guzzle/guzzle/commit/f2102941331cda544745eedd97fc8fd46e1ee33e\n* Bug fix: setting verify to false in the StreamHandler now disables peer\n  verification. https://github.com/guzzle/guzzle/issues/1256\n* Feature: Middleware now uses an exception factory, including more error\n  context. https://github.com/guzzle/guzzle/pull/1282\n* Feature: better support for disabled functions.\n  https://github.com/guzzle/guzzle/pull/1287\n* Bug fix: fixed regression where MockHandler was not using `sink`.\n  https://github.com/guzzle/guzzle/pull/1292\n\n\n## 6.1.0 - 2015-09-08\n\n* Feature: Added the `on_stats` request option to provide access to transfer\n  statistics for requests. https://github.com/guzzle/guzzle/pull/1202\n* Feature: Added the ability to persist session cookies in CookieJars.\n  https://github.com/guzzle/guzzle/pull/1195\n* Feature: Some compatibility updates for Google APP Engine\n  https://github.com/guzzle/guzzle/pull/1216\n* Feature: Added support for NO_PROXY to prevent the use of a proxy based on\n  a simple set of rules. https://github.com/guzzle/guzzle/pull/1197\n* Feature: Cookies can now contain square brackets.\n  https://github.com/guzzle/guzzle/pull/1237\n* Bug fix: Now correctly parsing `=` inside of quotes in Cookies.\n  https://github.com/guzzle/guzzle/pull/1232\n* Bug fix: Cusotm cURL options now correctly override curl options of the\n  same name. https://github.com/guzzle/guzzle/pull/1221\n* Bug fix: Content-Type header is now added when using an explicitly provided\n  multipart body. https://github.com/guzzle/guzzle/pull/1218\n* Bug fix: Now ignoring Set-Cookie headers that have no name.\n* Bug fix: Reason phrase is no longer cast to an int in some cases in the\n  cURL handler. https://github.com/guzzle/guzzle/pull/1187\n* Bug fix: Remove the Authorization header when redirecting if the Host\n  header changes. https://github.com/guzzle/guzzle/pull/1207\n* Bug fix: Cookie path matching fixes\n  https://github.com/guzzle/guzzle/issues/1129\n* Bug fix: Fixing the cURL `body_as_string` setting\n  https://github.com/guzzle/guzzle/pull/1201\n* Bug fix: quotes are no longer stripped when parsing cookies.\n  https://github.com/guzzle/guzzle/issues/1172\n* Bug fix: `form_params` and `query` now always uses the `&` separator.\n  https://github.com/guzzle/guzzle/pull/1163\n* Bug fix: Adding a Content-Length to PHP stream wrapper requests if not set.\n  https://github.com/guzzle/guzzle/pull/1189\n\n\n## 6.0.2 - 2015-07-04\n\n* Fixed a memory leak in the curl handlers in which references to callbacks\n  were not being removed by `curl_reset`.\n* Cookies are now extracted properly before redirects.\n* Cookies now allow more character ranges.\n* Decoded Content-Encoding responses are now modified to correctly reflect\n  their state if the encoding was automatically removed by a handler. This\n  means that the `Content-Encoding` header may be removed an the\n  `Content-Length` modified to reflect the message size after removing the\n  encoding.\n* Added a more explicit error message when trying to use `form_params` and\n  `multipart` in the same request.\n* Several fixes for HHVM support.\n* Functions are now conditionally required using an additional level of\n  indirection to help with global Composer installations.", "mimetype": "text/plain", "start_char_idx": 16677, "end_char_idx": 20151, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4b079d8e-1391-4121-8838-9ef4718b83a7": {"__data__": {"id_": "4b079d8e-1391-4121-8838-9ef4718b83a7", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "368b613d-c4f5-4b96-9264-cb0cdf9b5902", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1e82c5fcba18fd75a888b3078ba3a9d7362c54cfc1a09656dd52045ab6f24e62", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "26dcb355-18fc-46d5-95d4-0fc2d697ff25", "node_type": "1", "metadata": {}, "hash": "5805376d0702fcc9f6bd4c38e203836092cf5c6b7ea0f8a35a51883dd1bf6ef0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 6.0.2 - 2015-07-04\n\n* Fixed a memory leak in the curl handlers in which references to callbacks\n  were not being removed by `curl_reset`.\n* Cookies are now extracted properly before redirects.\n* Cookies now allow more character ranges.\n* Decoded Content-Encoding responses are now modified to correctly reflect\n  their state if the encoding was automatically removed by a handler. This\n  means that the `Content-Encoding` header may be removed an the\n  `Content-Length` modified to reflect the message size after removing the\n  encoding.\n* Added a more explicit error message when trying to use `form_params` and\n  `multipart` in the same request.\n* Several fixes for HHVM support.\n* Functions are now conditionally required using an additional level of\n  indirection to help with global Composer installations.\n\n\n## 6.0.1 - 2015-05-27\n\n* Fixed a bug with serializing the `query` request option where the `&`\n  separator was missing.\n* Added a better error message for when `body` is provided as an array. Please\n  use `form_params` or `multipart` instead.\n* Various doc fixes.\n\n\n## 6.0.0 - 2015-05-26\n\n* See the UPGRADING.md document for more information.\n* Added `multipart` and `form_params` request options.\n* Added `synchronous` request option.\n* Added the `on_headers` request option.\n* Fixed `expect` handling.\n* No longer adding default middlewares in the client ctor. These need to be\n  present on the provided handler in order to work.\n* Requests are no longer initiated when sending async requests with the\n  CurlMultiHandler. This prevents unexpected recursion from requests completing\n  while ticking the cURL loop.\n* Removed the semantics of setting `default` to `true`. This is no longer\n  required now that the cURL loop is not ticked for async requests.\n* Added request and response logging middleware.\n* No longer allowing self signed certificates when using the StreamHandler.\n* Ensuring that `sink` is valid if saving to a file.\n* Request exceptions now include a \"handler context\" which provides handler\n  specific contextual information.\n* Added `GuzzleHttp\\RequestOptions` to allow request options to be applied\n  using constants.\n* `$maxHandles` has been removed from CurlMultiHandler.\n* `MultipartPostBody` is now part of the `guzzlehttp/psr7` package.\n\n\n## 5.3.0 - 2015-05-19\n\n* Mock now supports `save_to`\n* Marked `AbstractRequestEvent::getTransaction()` as public.\n* Fixed a bug in which multiple headers using different casing would overwrite\n  previous headers in the associative array.\n* Added `Utils::getDefaultHandler()`\n* Marked `GuzzleHttp\\Client::getDefaultUserAgent` as deprecated.\n* URL scheme is now always lowercased.", "mimetype": "text/plain", "start_char_idx": 19337, "end_char_idx": 21998, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26dcb355-18fc-46d5-95d4-0fc2d697ff25": {"__data__": {"id_": "26dcb355-18fc-46d5-95d4-0fc2d697ff25", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4b079d8e-1391-4121-8838-9ef4718b83a7", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "38a7751032d6d234aff01d5f2ba4339bf7a8a4f1db8150029dc20f03deb4231e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "e1179d0f-3370-4b47-a449-ce4f7419e136", "node_type": "1", "metadata": {}, "hash": "a0fcf98286ce38c2751222145b4c3c2087b39667032f366e1ee017776273aa06", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 5.3.0 - 2015-05-19\n\n* Mock now supports `save_to`\n* Marked `AbstractRequestEvent::getTransaction()` as public.\n* Fixed a bug in which multiple headers using different casing would overwrite\n  previous headers in the associative array.\n* Added `Utils::getDefaultHandler()`\n* Marked `GuzzleHttp\\Client::getDefaultUserAgent` as deprecated.\n* URL scheme is now always lowercased.\n\n\n## 6.0.0-beta.1\n\n* Requires PHP >= 5.5\n* Updated to use PSR-7\n  * Requires immutable messages, which basically means an event based system\n    owned by a request instance is no longer possible.\n  * Utilizing the [Guzzle PSR-7 package](https://github.com/guzzle/psr7).\n  * Removed the dependency on `guzzlehttp/streams`. These stream abstractions\n    are available in the `guzzlehttp/psr7` package under the `GuzzleHttp\\Psr7`\n    namespace.\n* Added middleware and handler system\n  * Replaced the Guzzle event and subscriber system with a middleware system.\n  * No longer depends on RingPHP, but rather places the HTTP handlers directly\n    in Guzzle, operating on PSR-7 messages.\n  * Retry logic is now encapsulated in `GuzzleHttp\\Middleware::retry`, which\n    means the `guzzlehttp/retry-subscriber` is now obsolete.\n  * Mocking responses is now handled using `GuzzleHttp\\Handler\\MockHandler`.\n* Asynchronous responses\n  * No longer supports the `future` request option to send an async request.\n    Instead, use one of the `*Async` methods of a client (e.g., `requestAsync`,\n    `getAsync`, etc.).\n  * Utilizing `GuzzleHttp\\Promise` instead of React's promise library to avoid\n    recursion required by chaining and forwarding react promises. See\n    https://github.com/guzzle/promises\n  * Added `requestAsync` and `sendAsync` to send request asynchronously.\n  * Added magic methods for `getAsync()`, `postAsync()`, etc. to send requests\n    asynchronously.\n* Request options\n  * POST and form updates\n    * Added the `form_fields` and `form_files` request options.\n    * Removed the `GuzzleHttp\\Post` namespace.\n    * The `body` request option no longer accepts an array for POST requests.\n  * The `exceptions` request option has been deprecated in favor of the\n    `http_errors` request options.\n  * The `save_to` request option has been deprecated in favor of `sink` request\n    option.\n* Clients no longer accept an array of URI template string and variables for\n  URI variables. You will need to expand URI templates before passing them\n  into a client constructor or request method.\n* Client methods `get()`, `post()`, `put()`, `patch()`, `options()`, etc. are\n  now magic methods that will send synchronous requests.\n* Replaced `Utils.php` with plain functions in `functions.php`.\n* Removed `GuzzleHttp\\Collection`.\n* Removed `GuzzleHttp\\BatchResults`. Batched pool results are now returned as\n  an array.\n* Removed `GuzzleHttp\\Query`. Query string handling is now handled using an\n  associative array passed into the `query` request option. The query string\n  is serialized using PHP's `http_build_query`. If you need more control, you\n  can pass the query string in as a string.\n* `GuzzleHttp\\QueryParser` has been replaced with the\n  `GuzzleHttp\\Psr7\\parse_query`.\n\n\n## 5.2.0 - 2015-01-27\n\n* Added `AppliesHeadersInterface` to make applying headers to a request based\n  on the body more generic and not specific to `PostBodyInterface`.\n* Reduced the number of stack frames needed to send requests.\n* Nested futures are now resolved in the client rather than the RequestFsm\n* Finishing state transitions is now handled in the RequestFsm rather than the\n  RingBridge.\n* Added a guard in the Pool class to not use recursion for request retries.", "mimetype": "text/plain", "start_char_idx": 21620, "end_char_idx": 25253, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e1179d0f-3370-4b47-a449-ce4f7419e136": {"__data__": {"id_": "e1179d0f-3370-4b47-a449-ce4f7419e136", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "26dcb355-18fc-46d5-95d4-0fc2d697ff25", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d55bbfbc9063e32a9a1220d60feaae89cd29baa56d6f2f3734ae05f8379d61b6", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2b3c289b-5ca8-47c5-badb-a1348667e7ec", "node_type": "1", "metadata": {}, "hash": "59262388e7c788383b1f12f5b1313aa1483321273f9c1803e684b6aa67b63a65", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 5.2.0 - 2015-01-27\n\n* Added `AppliesHeadersInterface` to make applying headers to a request based\n  on the body more generic and not specific to `PostBodyInterface`.\n* Reduced the number of stack frames needed to send requests.\n* Nested futures are now resolved in the client rather than the RequestFsm\n* Finishing state transitions is now handled in the RequestFsm rather than the\n  RingBridge.\n* Added a guard in the Pool class to not use recursion for request retries.\n\n\n## 5.1.0 - 2014-12-19\n\n* Pool class no longer uses recursion when a request is intercepted.\n* The size of a Pool can now be dynamically adjusted using a callback.\n  See https://github.com/guzzle/guzzle/pull/943.\n* Setting a request option to `null` when creating a request with a client will\n  ensure that the option is not set. This allows you to overwrite default\n  request options on a per-request basis.\n  See https://github.com/guzzle/guzzle/pull/937.\n* Added the ability to limit which protocols are allowed for redirects by\n  specifying a `protocols` array in the `allow_redirects` request option.\n* Nested futures due to retries are now resolved when waiting for synchronous\n  responses. See https://github.com/guzzle/guzzle/pull/947.\n* `\"0\"` is now an allowed URI path. See\n  https://github.com/guzzle/guzzle/pull/935.\n* `Query` no longer typehints on the `$query` argument in the constructor,\n  allowing for strings and arrays.\n* Exceptions thrown in the `end` event are now correctly wrapped with Guzzle\n  specific exceptions if necessary.\n\n\n## 5.0.3 - 2014-11-03\n\nThis change updates query strings so that they are treated as un-encoded values\nby default where the value represents an un-encoded value to send over the\nwire. A Query object then encodes the value before sending over the wire. This\nmeans that even value query string values (e.g., \":\") are url encoded. This\nmakes the Query class match PHP's http_build_query function. However, if you\nwant to send requests over the wire using valid query string characters that do\nnot need to be encoded, then you can provide a string to Url::setQuery() and\npass true as the second argument to specify that the query string is a raw\nstring that should not be parsed or encoded (unless a call to getQuery() is\nsubsequently made, forcing the query-string to be converted into a Query\nobject).\n\n\n## 5.0.2 - 2014-10-30\n\n* Added a trailing `\\r\\n` to multipart/form-data payloads. See\n  https://github.com/guzzle/guzzle/pull/871\n* Added a `GuzzleHttp\\Pool::send()` convenience method to match the docs.\n* Status codes are now returned as integers. See\n  https://github.com/guzzle/guzzle/issues/881\n* No longer overwriting an existing `application/x-www-form-urlencoded` header\n  when sending POST requests, allowing for customized headers. See\n  https://github.com/guzzle/guzzle/issues/877\n* Improved path URL serialization.\n\n  * No longer double percent-encoding characters in the path or query string if\n    they are already encoded.\n  * Now properly encoding the supplied path to a URL object, instead of only\n    encoding ' ' and '?'.\n  * Note: This has been changed in 5.0.3 to now encode query string values by\n    default unless the `rawString` argument is provided when setting the query\n    string on a URL: Now allowing many more characters to be present in the\n    query string without being percent encoded. See\n    https://datatracker.ietf.org/doc/html/rfc3986#appendix-A\n\n\n## 5.0.1 - 2014-10-16\n\nBugfix release.\n\n* Fixed an issue where connection errors still returned response object in\n  error and end events event though the response is unusable. This has been\n  corrected so that a response is not returned in the `getResponse` method of\n  these events if the response did not complete. https://github.com/guzzle/guzzle/issues/867\n* Fixed an issue where transfer statistics were not being populated in the\n  RingBridge. https://github.com/guzzle/guzzle/issues/866\n\n\n## 5.0.0 - 2014-10-12\n\nAdding support for non-blocking responses and some minor API cleanup.", "mimetype": "text/plain", "start_char_idx": 24779, "end_char_idx": 28788, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2b3c289b-5ca8-47c5-badb-a1348667e7ec": {"__data__": {"id_": "2b3c289b-5ca8-47c5-badb-a1348667e7ec", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e1179d0f-3370-4b47-a449-ce4f7419e136", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "87747087c7ecf1e0235adf829d5d25f75fd84fc8301b9825dc1dc20f7cbaad4e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d6aaec6c-2ca6-4af0-9150-bb2853f31bb6", "node_type": "1", "metadata": {}, "hash": "55fbbfc0230c3f5a9db9064ab23115f825ebb3e25e06c77eb7c7c46a86bd7329", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## 5.0.1 - 2014-10-16\n\nBugfix release.\n\n* Fixed an issue where connection errors still returned response object in\n  error and end events event though the response is unusable. This has been\n  corrected so that a response is not returned in the `getResponse` method of\n  these events if the response did not complete. https://github.com/guzzle/guzzle/issues/867\n* Fixed an issue where transfer statistics were not being populated in the\n  RingBridge. https://github.com/guzzle/guzzle/issues/866\n\n\n## 5.0.0 - 2014-10-12\n\nAdding support for non-blocking responses and some minor API cleanup.\n\n### New Features\n\n* Added support for non-blocking responses based on `guzzlehttp/guzzle-ring`.\n* Added a public API for creating a default HTTP adapter.\n* Updated the redirect plugin to be non-blocking so that redirects are sent\n  concurrently. Other plugins like this can now be updated to be non-blocking.\n* Added a \"progress\" event so that you can get upload and download progress\n  events.\n* Added `GuzzleHttp\\Pool` which implements FutureInterface and transfers\n  requests concurrently using a capped pool size as efficiently as possible.\n* Added `hasListeners()` to EmitterInterface.\n* Removed `GuzzleHttp\\ClientInterface::sendAll` and marked\n  `GuzzleHttp\\Client::sendAll` as deprecated (it's still there, just not the\n  recommended way).\n\n### Breaking changes\n\nThe breaking changes in this release are relatively minor. The biggest thing to\nlook out for is that request and response objects no longer implement fluent\ninterfaces.\n\n* Removed the fluent interfaces (i.e., `return $this`) from requests,\n  responses, `GuzzleHttp\\Collection`, `GuzzleHttp\\Url`,\n  `GuzzleHttp\\Query`, `GuzzleHttp\\Post\\PostBody`, and\n  `GuzzleHttp\\Cookie\\SetCookie`. This blog post provides a good outline of\n  why I did this: https://ocramius.github.io/blog/fluent-interfaces-are-evil/.\n  This also makes the Guzzle message interfaces compatible with the current\n  PSR-7 message proposal.\n* Removed \"functions.php\", so that Guzzle is truly PSR-4 compliant. Except\n  for the HTTP request functions from function.php, these functions are now\n  implemented in `GuzzleHttp\\Utils` using camelCase. `GuzzleHttp\\json_decode`\n  moved to `GuzzleHttp\\Utils::jsonDecode`. `GuzzleHttp\\get_path` moved to\n  `GuzzleHttp\\Utils::getPath`. `GuzzleHttp\\set_path` moved to\n  `GuzzleHttp\\Utils::setPath`. `GuzzleHttp\\batch` should now be\n  `GuzzleHttp\\Pool::batch`, which returns an `objectStorage`. Using functions.php\n  caused problems for many users: they aren't PSR-4 compliant, require an\n  explicit include, and needed an if-guard to ensure that the functions are not\n  declared multiple times.\n* Rewrote adapter layer.\n    * Removing all classes from `GuzzleHttp\\Adapter`, these are now\n      implemented as callables that are stored in `GuzzleHttp\\Ring\\Client`.\n    * Removed the concept of \"parallel adapters\". Sending requests serially or\n      concurrently is now handled using a single adapter.\n    * Moved `GuzzleHttp\\Adapter\\Transaction` to `GuzzleHttp\\Transaction`. The\n      Transaction object now exposes the request, response, and client as public\n      properties. The getters and setters have been removed.\n* Removed the \"headers\" event. This event was only useful for changing the\n  body a response once the headers of the response were known. You can implement\n  a similar behavior in a number of ways. One example might be to use a\n  FnStream that has access to the transaction being sent. For example, when the\n  first byte is written, you could check if the response headers match your\n  expectations, and if so, change the actual stream body that is being\n  written to.\n* Removed the `asArray` parameter from\n  `GuzzleHttp\\Message\\MessageInterface::getHeader`. If you want to get a header\n  value as an array, then use the newly added `getHeaderAsArray()` method of\n  `MessageInterface`. This change makes the Guzzle interfaces compatible with\n  the PSR-7 interfaces.", "mimetype": "text/plain", "start_char_idx": 28199, "end_char_idx": 32150, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d6aaec6c-2ca6-4af0-9150-bb2853f31bb6": {"__data__": {"id_": "d6aaec6c-2ca6-4af0-9150-bb2853f31bb6", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2b3c289b-5ca8-47c5-badb-a1348667e7ec", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "df3fd45913264d3fc41e71927c034ac646ee16d087a200805b0c75a41607ab1b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "311eacbf-0110-4005-bd0a-c7111291d73f", "node_type": "1", "metadata": {}, "hash": "231bd97fa143eaa1e4ba8392f863c7e7732853b693c19789fc4d396fcbb8ba0b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The getters and setters have been removed.\n* Removed the \"headers\" event. This event was only useful for changing the\n  body a response once the headers of the response were known. You can implement\n  a similar behavior in a number of ways. One example might be to use a\n  FnStream that has access to the transaction being sent. For example, when the\n  first byte is written, you could check if the response headers match your\n  expectations, and if so, change the actual stream body that is being\n  written to.\n* Removed the `asArray` parameter from\n  `GuzzleHttp\\Message\\MessageInterface::getHeader`. If you want to get a header\n  value as an array, then use the newly added `getHeaderAsArray()` method of\n  `MessageInterface`. This change makes the Guzzle interfaces compatible with\n  the PSR-7 interfaces.\n* `GuzzleHttp\\Message\\MessageFactory` no longer allows subclasses to add\n  custom request options using double-dispatch (this was an implementation\n  detail). Instead, you should now provide an associative array to the\n  constructor which is a mapping of the request option name mapping to a\n  function that applies the option value to a request.\n* Removed the concept of \"throwImmediately\" from exceptions and error events.\n  This control mechanism was used to stop a transfer of concurrent requests\n  from completing. This can now be handled by throwing the exception or by\n  cancelling a pool of requests or each outstanding future request individually.\n* Updated to \"GuzzleHttp\\Streams\" 3.0.\n    * `GuzzleHttp\\Stream\\StreamInterface::getContents()` no longer accepts a\n      `maxLen` parameter. This update makes the Guzzle streams project\n      compatible with the current PSR-7 proposal.\n    * `GuzzleHttp\\Stream\\Stream::__construct`,\n      `GuzzleHttp\\Stream\\Stream::factory`, and\n      `GuzzleHttp\\Stream\\Utils::create` no longer accept a size in the second\n      argument. They now accept an associative array of options, including the\n      \"size\" key and \"metadata\" key which can be used to provide custom metadata.\n\n\n## 4.2.2 - 2014-09-08\n\n* Fixed a memory leak in the CurlAdapter when reusing cURL handles.\n* No longer using `request_fulluri` in stream adapter proxies.\n* Relative redirects are now based on the last response, not the first response.\n\n## 4.2.1 - 2014-08-19\n\n* Ensuring that the StreamAdapter does not always add a Content-Type header\n* Adding automated github releases with a phar and zip\n\n## 4.2.0 - 2014-08-17\n\n* Now merging in default options using a case-insensitive comparison.\n  Closes https://github.com/guzzle/guzzle/issues/767\n* Added the ability to automatically decode `Content-Encoding` response bodies\n  using the `decode_content` request option. This is set to `true` by default\n  to decode the response body if it comes over the wire with a\n  `Content-Encoding`. Set this value to `false` to disable decoding the\n  response content, and pass a string to provide a request `Accept-Encoding`\n  header and turn on automatic response decoding. This feature now allows you\n  to pass an `Accept-Encoding` header in the headers of a request but still\n  disable automatic response decoding.\n  Closes https://github.com/guzzle/guzzle/issues/764\n* Added the ability to throw an exception immediately when transferring\n  requests in parallel. Closes https://github.com/guzzle/guzzle/issues/760\n* Updating guzzlehttp/streams dependency to ~2.1\n* No longer utilizing the now deprecated namespaced methods from the stream\n  package.\n\n## 4.1.8 - 2014-08-14\n\n* Fixed an issue in the CurlFactory that caused setting the `stream=false`\n  request option to throw an exception.\n  See: https://github.com/guzzle/guzzle/issues/769\n* TransactionIterator now calls rewind on the inner iterator.\n  See: https://github.com/guzzle/guzzle/pull/765\n* You can now set the `Content-Type` header to `multipart/form-data`\n  when creating POST requests to force multipart bodies.", "mimetype": "text/plain", "start_char_idx": 31341, "end_char_idx": 35241, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "311eacbf-0110-4005-bd0a-c7111291d73f": {"__data__": {"id_": "311eacbf-0110-4005-bd0a-c7111291d73f", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d6aaec6c-2ca6-4af0-9150-bb2853f31bb6", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a165d827220da97e19125afebbd08748e46b10dcde9b9caa463d76ce009d7502", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "833a52c3-70cf-4b5c-b188-1853d9071f9c", "node_type": "1", "metadata": {}, "hash": "99d427c5729198a6720d9c63e30cb3582a72912728d09175da9fd4cc60036f47", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Closes https://github.com/guzzle/guzzle/issues/764\n* Added the ability to throw an exception immediately when transferring\n  requests in parallel. Closes https://github.com/guzzle/guzzle/issues/760\n* Updating guzzlehttp/streams dependency to ~2.1\n* No longer utilizing the now deprecated namespaced methods from the stream\n  package.\n\n## 4.1.8 - 2014-08-14\n\n* Fixed an issue in the CurlFactory that caused setting the `stream=false`\n  request option to throw an exception.\n  See: https://github.com/guzzle/guzzle/issues/769\n* TransactionIterator now calls rewind on the inner iterator.\n  See: https://github.com/guzzle/guzzle/pull/765\n* You can now set the `Content-Type` header to `multipart/form-data`\n  when creating POST requests to force multipart bodies.\n  See https://github.com/guzzle/guzzle/issues/768\n\n## 4.1.7 - 2014-08-07\n\n* Fixed an error in the HistoryPlugin that caused the same request and response\n  to be logged multiple times when an HTTP protocol error occurs.\n* Ensuring that cURL does not add a default Content-Type when no Content-Type\n  has been supplied by the user. This prevents the adapter layer from modifying\n  the request that is sent over the wire after any listeners may have already\n  put the request in a desired state (e.g., signed the request).\n* Throwing an exception when you attempt to send requests that have the\n  \"stream\" set to true in parallel using the MultiAdapter.\n* Only calling curl_multi_select when there are active cURL handles. This was\n  previously changed and caused performance problems on some systems due to PHP\n  always selecting until the maximum select timeout.\n* Fixed a bug where multipart/form-data POST fields were not correctly\n  aggregated (e.g., values with \"&\").\n\n## 4.1.6 - 2014-08-03\n\n* Added helper methods to make it easier to represent messages as strings,\n  including getting the start line and getting headers as a string.\n\n## 4.1.5 - 2014-08-02\n\n* Automatically retrying cURL \"Connection died, retrying a fresh connect\"\n  errors when possible.\n* cURL implementation cleanup\n* Allowing multiple event subscriber listeners to be registered per event by\n  passing an array of arrays of listener configuration.\n\n## 4.1.4 - 2014-07-22\n\n* Fixed a bug that caused multi-part POST requests with more than one field to\n  serialize incorrectly.\n* Paths can now be set to \"0\"\n* `ResponseInterface::xml` now accepts a `libxml_options` option and added a\n  missing default argument that was required when parsing XML response bodies.\n* A `save_to` stream is now created lazily, which means that files are not\n  created on disk unless a request succeeds.\n\n## 4.1.3 - 2014-07-15\n\n* Various fixes to multipart/form-data POST uploads\n* Wrapping function.php in an if-statement to ensure Guzzle can be used\n  globally and in a Composer install\n* Fixed an issue with generating and merging in events to an event array\n* POST headers are only applied before sending a request to allow you to change\n  the query aggregator used before uploading\n* Added much more robust query string parsing\n* Fixed various parsing and normalization issues with URLs\n* Fixing an issue where multi-valued headers were not being utilized correctly\n  in the StreamAdapter\n\n## 4.1.2 - 2014-06-18\n\n* Added support for sending payloads with GET requests\n\n## 4.1.1 - 2014-06-08\n\n* Fixed an issue related to using custom message factory options in subclasses\n* Fixed an issue with nested form fields in a multi-part POST\n* Fixed an issue with using the `json` request option for POST requests\n* Added `ToArrayInterface` to `GuzzleHttp\\Cookie\\CookieJar`\n\n## 4.1.0 - 2014-05-27\n\n* Added a `json` request option to easily serialize JSON payloads.\n* Added a `GuzzleHttp\\json_decode()` wrapper to safely parse JSON.\n* Added `setPort()` and `getPort()` to `GuzzleHttp\\Message\\RequestInterface`.\n* Added the ability to provide an emitter to a client in the client constructor.\n* Added the ability to persist a cookie session using $_SESSION.\n* Added a trait that can be used to add event listeners to an iterator.\n* Removed request method constants from RequestInterface.", "mimetype": "text/plain", "start_char_idx": 34481, "end_char_idx": 38577, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "833a52c3-70cf-4b5c-b188-1853d9071f9c": {"__data__": {"id_": "833a52c3-70cf-4b5c-b188-1853d9071f9c", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "311eacbf-0110-4005-bd0a-c7111291d73f", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6bce908ebdd0003438d412052a30c43073adaf2ab746100e0c52b9d566eeca1a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bc32060a-3181-46f9-aa87-1ebcdd37d94f", "node_type": "1", "metadata": {}, "hash": "f8471b5f084eda025c2d9409cc25f16cb9a82467ee8f29e2bf1db05b4ab15c2e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "* Added a `GuzzleHttp\\json_decode()` wrapper to safely parse JSON.\n* Added `setPort()` and `getPort()` to `GuzzleHttp\\Message\\RequestInterface`.\n* Added the ability to provide an emitter to a client in the client constructor.\n* Added the ability to persist a cookie session using $_SESSION.\n* Added a trait that can be used to add event listeners to an iterator.\n* Removed request method constants from RequestInterface.\n* Fixed warning when invalid request start-lines are received.\n* Updated MessageFactory to work with custom request option methods.\n* Updated cacert bundle to latest build.\n\n4.0.2 (2014-04-16)\n------------------\n\n* Proxy requests using the StreamAdapter now properly use request_fulluri (#632)\n* Added the ability to set scalars as POST fields (#628)\n\n## 4.0.1 - 2014-04-04\n\n* The HTTP status code of a response is now set as the exception code of\n  RequestException objects.\n* 303 redirects will now correctly switch from POST to GET requests.\n* The default parallel adapter of a client now correctly uses the MultiAdapter.\n* HasDataTrait now initializes the internal data array as an empty array so\n  that the toArray() method always returns an array.\n\n## 4.0.0 - 2014-03-29\n\n* For information on changes and upgrading, see:\n  https://github.com/guzzle/guzzle/blob/master/UPGRADING.md#3x-to-40\n* Added `GuzzleHttp\\batch()` as a convenience function for sending requests in\n  parallel without needing to write asynchronous code.\n* Restructured how events are added to `GuzzleHttp\\ClientInterface::sendAll()`.\n  You can now pass a callable or an array of associative arrays where each\n  associative array contains the \"fn\", \"priority\", and \"once\" keys.\n\n## 4.0.0.rc-2 - 2014-03-25\n\n* Removed `getConfig()` and `setConfig()` from clients to avoid confusion\n  around whether things like base_url, message_factory, etc. should be able to\n  be retrieved or modified.\n* Added `getDefaultOption()` and `setDefaultOption()` to ClientInterface\n* functions.php functions were renamed using snake_case to match PHP idioms\n* Added support for `HTTP_PROXY`, `HTTPS_PROXY`, and\n  `GUZZLE_CURL_SELECT_TIMEOUT` environment variables\n* Added the ability to specify custom `sendAll()` event priorities\n* Added the ability to specify custom stream context options to the stream\n  adapter.\n* Added a functions.php function for `get_path()` and `set_path()`\n* CurlAdapter and MultiAdapter now use a callable to generate curl resources\n* MockAdapter now properly reads a body and emits a `headers` event\n* Updated Url class to check if a scheme and host are set before adding \":\"\n  and \"//\". This allows empty Url (e.g., \"\") to be serialized as \"\".\n* Parsing invalid XML no longer emits warnings\n* Curl classes now properly throw AdapterExceptions\n* Various performance optimizations\n* Streams are created with the faster `Stream\\create()` function\n* Marked deprecation_proxy() as internal\n* Test server is now a collection of static methods on a class\n\n## 4.0.0-rc.1 - 2014-03-15\n\n* See https://github.com/guzzle/guzzle/blob/master/UPGRADING.md#3x-to-40\n\n## 3.8.1 - 2014-01-28\n\n* Bug: Always using GET requests when redirecting from a 303 response\n* Bug: CURLOPT_SSL_VERIFYHOST is now correctly set to false when setting `$certificateAuthority` to false in\n  `Guzzle\\Http\\ClientInterface::setSslVerification()`\n* Bug: RedirectPlugin now uses strict RFC 3986 compliance when combining a base URL with a relative URL\n* Bug: The body of a request can now be set to `\"0\"`\n* Sending PHP stream requests no longer forces `HTTP/1.0`\n* Adding more information to ExceptionCollection exceptions so that users have more context, including a stack trace of\n  each sub-exception\n* Updated the `$ref` attribute in service descriptions to merge over any existing parameters of a schema (rather than\n  clobbering everything).\n* Merging URLs will now use the query string object from the relative URL (thus allowing custom query aggregators)\n* Query strings are now parsed in a way that they do no convert empty keys with no value to have a dangling `=`.", "mimetype": "text/plain", "start_char_idx": 38157, "end_char_idx": 42196, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bc32060a-3181-46f9-aa87-1ebcdd37d94f": {"__data__": {"id_": "bc32060a-3181-46f9-aa87-1ebcdd37d94f", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "833a52c3-70cf-4b5c-b188-1853d9071f9c", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "32767001a372902eede15da2aeb15570962377bbbff244f443d558f5acde6af5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4dd43627-0a1e-4496-b07b-776848ca1c83", "node_type": "1", "metadata": {}, "hash": "34cf5d2830c447d32283df142da9d604973ae55a361027ebd393d1229f9e2e3f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "* Merging URLs will now use the query string object from the relative URL (thus allowing custom query aggregators)\n* Query strings are now parsed in a way that they do no convert empty keys with no value to have a dangling `=`.\n  For example `foo&bar=baz` is now correctly parsed and recognized as `foo&bar=baz` rather than `foo=&bar=baz`.\n* Now properly escaping the regular expression delimiter when matching Cookie domains.\n* Network access is now disabled when loading XML documents\n\n## 3.8.0 - 2013-12-05\n\n* Added the ability to define a POST name for a file\n* JSON response parsing now properly walks additionalProperties\n* cURL error code 18 is now retried automatically in the BackoffPlugin\n* Fixed a cURL error when URLs contain fragments\n* Fixed an issue in the BackoffPlugin retry event where it was trying to access all exceptions as if they were\n  CurlExceptions\n* CURLOPT_PROGRESS function fix for PHP 5.5 (69fcc1e)\n* Added the ability for Guzzle to work with older versions of cURL that do not support `CURLOPT_TIMEOUT_MS`\n* Fixed a bug that was encountered when parsing empty header parameters\n* UriTemplate now has a `setRegex()` method to match the docs\n* The `debug` request parameter now checks if it is truthy rather than if it exists\n* Setting the `debug` request parameter to true shows verbose cURL output instead of using the LogPlugin\n* Added the ability to combine URLs using strict RFC 3986 compliance\n* Command objects can now return the validation errors encountered by the command\n* Various fixes to cache revalidation (#437 and 29797e5)\n* Various fixes to the AsyncPlugin\n* Cleaned up build scripts\n\n## 3.7.4 - 2013-10-02\n\n* Bug fix: 0 is now an allowed value in a description parameter that has a default value (#430)\n* Bug fix: SchemaFormatter now returns an integer when formatting to a Unix timestamp\n  (see https://github.com/aws/aws-sdk-php/issues/147)\n* Bug fix: Cleaned up and fixed URL dot segment removal to properly resolve internal dots\n* Minimum PHP version is now properly specified as 5.3.3 (up from 5.3.2) (#420)\n* Updated the bundled cacert.pem (#419)\n* OauthPlugin now supports adding authentication to headers or query string (#425)\n\n## 3.7.3 - 2013-09-08\n\n* Added the ability to get the exception associated with a request/command when using `MultiTransferException` and\n  `CommandTransferException`.\n* Setting `additionalParameters` of a response to false is now honored when parsing responses with a service description\n* Schemas are only injected into response models when explicitly configured.\n* No longer guessing Content-Type based on the path of a request. Content-Type is now only guessed based on the path of\n  an EntityBody.\n* Bug fix: ChunkedIterator can now properly chunk a \\Traversable as well as an \\Iterator.\n* Bug fix: FilterIterator now relies on `\\Iterator` instead of `\\Traversable`.\n* Bug fix: Gracefully handling malformed responses in RequestMediator::writeResponseBody()\n* Bug fix: Replaced call to canCache with canCacheRequest in the CallbackCanCacheStrategy of the CachePlugin\n* Bug fix: Visiting XML attributes first before visiting XML children when serializing requests\n* Bug fix: Properly parsing headers that contain commas contained in quotes\n* Bug fix: mimetype guessing based on a filename is now case-insensitive\n\n## 3.7.2 - 2013-08-02\n\n* Bug fix: Properly URL encoding paths when using the PHP-only version of the UriTemplate expander\n  See https://github.com/guzzle/guzzle/issues/371\n* Bug fix: Cookie domains are now matched correctly according to RFC 6265\n  See https://github.com/guzzle/guzzle/issues/377\n* Bug fix: GET parameters are now used when calculating an OAuth signature\n* Bug fix: Fixed an issue with cache revalidation where the If-None-Match header was being double quoted\n* `Guzzle\\Common\\AbstractHasDispatcher::dispatch()` now returns the event that was dispatched\n* `Guzzle\\Http\\QueryString::factory()` now guesses the most appropriate query aggregator to used based on the input.\n  See https://github.com/guzzle/guzzle/issues/379\n* Added a way to add custom domain objects to service description parsing using the `operation.parse_class` event.", "mimetype": "text/plain", "start_char_idx": 41969, "end_char_idx": 46123, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4dd43627-0a1e-4496-b07b-776848ca1c83": {"__data__": {"id_": "4dd43627-0a1e-4496-b07b-776848ca1c83", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bc32060a-3181-46f9-aa87-1ebcdd37d94f", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4de27134cd87cdc9ff5986a7d9634052f039be497a52b0eaef49a7880cec5f23", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0017552c-0793-436d-96e1-3c5efdee073b", "node_type": "1", "metadata": {}, "hash": "11426305242ca5e511652bb1095e9a08521f06bd4426dfd4680708a8d42c18c6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "See https://github.com/guzzle/guzzle/issues/379\n* Added a way to add custom domain objects to service description parsing using the `operation.parse_class` event. See\n  https://github.com/guzzle/guzzle/pull/380\n* cURL multi cleanup and optimizations\n\n## 3.7.1 - 2013-07-05\n\n* Bug fix: Setting default options on a client now works\n* Bug fix: Setting options on HEAD requests now works. See #352\n* Bug fix: Moving stream factory before send event to before building the stream. See #353\n* Bug fix: Cookies no longer match on IP addresses per RFC 6265\n* Bug fix: Correctly parsing header parameters that are in `<>` and quotes\n* Added `cert` and `ssl_key` as request options\n* `Host` header can now diverge from the host part of a URL if the header is set manually\n* `Guzzle\\Service\\Command\\LocationVisitor\\Request\\XmlVisitor` was rewritten to change from using SimpleXML to XMLWriter\n* OAuth parameters are only added via the plugin if they aren't already set\n* Exceptions are now thrown when a URL cannot be parsed\n* Returning `false` if `Guzzle\\Http\\EntityBody::getContentMd5()` fails\n* Not setting a `Content-MD5` on a command if calculating the Content-MD5 fails via the CommandContentMd5Plugin\n\n## 3.7.0 - 2013-06-10\n\n* See UPGRADING.md for more information on how to upgrade.\n* Requests now support the ability to specify an array of $options when creating a request to more easily modify a\n  request. You can pass a 'request.options' configuration setting to a client to apply default request options to\n  every request created by a client (e.g. default query string variables, headers, curl options, etc.).\n* Added a static facade class that allows you to use Guzzle with static methods and mount the class to `\\Guzzle`.\n  See `Guzzle\\Http\\StaticClient::mount`.\n* Added `command.request_options` to `Guzzle\\Service\\Command\\AbstractCommand` to pass request options to requests\n      created by a command (e.g. custom headers, query string variables, timeout settings, etc.).\n* Stream size in `Guzzle\\Stream\\PhpStreamRequestFactory` will now be set if Content-Length is returned in the\n  headers of a response\n* Added `Guzzle\\Common\\Collection::setPath($path, $value)` to set a value into an array using a nested key\n  (e.g. `$collection->setPath('foo/baz/bar', 'test'); echo $collection['foo']['bar']['bar'];`)\n* ServiceBuilders now support storing and retrieving arbitrary data\n* CachePlugin can now purge all resources for a given URI\n* CachePlugin can automatically purge matching cached items when a non-idempotent request is sent to a resource\n* CachePlugin now uses the Vary header to determine if a resource is a cache hit\n* `Guzzle\\Http\\Message\\Response` now implements `\\Serializable`\n* Added `Guzzle\\Cache\\CacheAdapterFactory::fromCache()` to more easily create cache adapters\n* `Guzzle\\Service\\ClientInterface::execute()` now accepts an array, single command, or Traversable\n* Fixed a bug in `Guzzle\\Http\\Message\\Header\\Link::addLink()`\n* Better handling of calculating the size of a stream in `Guzzle\\Stream\\Stream` using fstat() and caching the size\n* `Guzzle\\Common\\Exception\\ExceptionCollection` now creates a more readable exception message\n* Fixing BC break: Added back the MonologLogAdapter implementation rather than extending from PsrLog so that older\n  Symfony users can still use the old version of Monolog.\n* Fixing BC break: Added the implementation back in for `Guzzle\\Http\\Message\\AbstractMessage::getTokenizedHeader()`.\n  Now triggering an E_USER_DEPRECATED warning when used. Use `$message->getHeader()->parseParams()`.", "mimetype": "text/plain", "start_char_idx": 45961, "end_char_idx": 49514, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0017552c-0793-436d-96e1-3c5efdee073b": {"__data__": {"id_": "0017552c-0793-436d-96e1-3c5efdee073b", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4dd43627-0a1e-4496-b07b-776848ca1c83", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e521b66f8d2c33b06b86ebbcfb6c8b0748d0168375aeeca9961cba7a2bc20e00", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a4fc5142-9cbb-43df-a51a-4b128aaee962", "node_type": "1", "metadata": {}, "hash": "f7fa9e656716496a853451e09559e306fdd854942b02b50c6272a26e156f4702", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "* Fixing BC break: Added the implementation back in for `Guzzle\\Http\\Message\\AbstractMessage::getTokenizedHeader()`.\n  Now triggering an E_USER_DEPRECATED warning when used. Use `$message->getHeader()->parseParams()`.\n* Several performance improvements to `Guzzle\\Common\\Collection`\n* Added an `$options` argument to the end of the following methods of `Guzzle\\Http\\ClientInterface`:\n  createRequest, head, delete, put, patch, post, options, prepareRequest\n* Added an `$options` argument to the end of `Guzzle\\Http\\Message\\Request\\RequestFactoryInterface::createRequest()`\n* Added an `applyOptions()` method to `Guzzle\\Http\\Message\\Request\\RequestFactoryInterface`\n* Changed `Guzzle\\Http\\ClientInterface::get($uri = null, $headers = null, $body = null)` to\n  `Guzzle\\Http\\ClientInterface::get($uri = null, $headers = null, $options = array())`. You can still pass in a\n  resource, string, or EntityBody into the $options parameter to specify the download location of the response.\n* Changed `Guzzle\\Common\\Collection::__construct($data)` to no longer accepts a null value for `$data` but a\n  default `array()`\n* Added `Guzzle\\Stream\\StreamInterface::isRepeatable`\n* Removed `Guzzle\\Http\\ClientInterface::setDefaultHeaders(). Use\n  $client->getConfig()->setPath('request.options/headers/{header_name}', 'value')`. or\n  $client->getConfig()->setPath('request.options/headers', array('header_name' => 'value'))`.\n* Removed `Guzzle\\Http\\ClientInterface::getDefaultHeaders(). Use $client->getConfig()->getPath('request.options/headers')`.\n* Removed `Guzzle\\Http\\ClientInterface::expandTemplate()`\n* Removed `Guzzle\\Http\\ClientInterface::setRequestFactory()`\n* Removed `Guzzle\\Http\\ClientInterface::getCurlMulti()`\n* Removed `Guzzle\\Http\\Message\\RequestInterface::canCache`\n* Removed `Guzzle\\Http\\Message\\RequestInterface::setIsRedirect`\n* Removed `Guzzle\\Http\\Message\\RequestInterface::isRedirect`\n* Made `Guzzle\\Http\\Client::expandTemplate` and `getUriTemplate` protected methods.\n* You can now enable E_USER_DEPRECATED warnings to see if you are using a deprecated method by setting\n  `Guzzle\\Common\\Version::$emitWarnings` to true.\n* Marked `Guzzle\\Http\\Message\\Request::isResponseBodyRepeatable()` as deprecated. Use\n      `$request->getResponseBody()->isRepeatable()` instead.\n* Marked `Guzzle\\Http\\Message\\Request::canCache()` as deprecated. Use\n  `Guzzle\\Plugin\\Cache\\DefaultCanCacheStrategy->canCacheRequest()` instead.\n* Marked `Guzzle\\Http\\Message\\Request::canCache()` as deprecated. Use\n  `Guzzle\\Plugin\\Cache\\DefaultCanCacheStrategy->canCacheRequest()` instead.\n* Marked `Guzzle\\Http\\Message\\Request::setIsRedirect()` as deprecated. Use the HistoryPlugin instead.\n* Marked `Guzzle\\Http\\Message\\Request::isRedirect()` as deprecated. Use the HistoryPlugin instead.\n* Marked `Guzzle\\Cache\\CacheAdapterFactory::factory()` as deprecated\n* Marked 'command.headers', 'command.response_body' and 'command.on_complete' as deprecated for AbstractCommand.\n  These will work through Guzzle 4.0\n* Marked 'request.params' for `Guzzle\\Http\\Client` as deprecated. Use [request.options][params].\n* Marked `Guzzle\\Service\\Client::enableMagicMethods()` as deprecated. Magic methods can no longer be disabled on a Guzzle\\Service\\Client.\n* Marked `Guzzle\\Service\\Client::getDefaultHeaders()` as deprecated. Use $client->getConfig()->getPath('request.options/headers')`.\n* Marked `Guzzle\\Service\\Client::setDefaultHeaders()` as deprecated. Use $client->getConfig()->setPath('request.options/headers/{header_name}', 'value')`.\n* Marked `Guzzle\\Parser\\Url\\UrlParser` as deprecated. Just use PHP's `parse_url()` and percent encode your UTF-8.\n* Marked `Guzzle\\Common\\Collection::inject()` as deprecated.\n* Marked `Guzzle\\Plugin\\CurlAuth\\CurlAuthPlugin` as deprecated. Use `$client->getConfig()->setPath('request.options/auth', array('user', 'pass', 'Basic|Digest');`\n* CacheKeyProviderInterface and DefaultCacheKeyProvider are no longer used. All of this logic is handled in a\n  CacheStorageInterface. These two objects and interface will be removed in a future version.", "mimetype": "text/plain", "start_char_idx": 49297, "end_char_idx": 53349, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a4fc5142-9cbb-43df-a51a-4b128aaee962": {"__data__": {"id_": "a4fc5142-9cbb-43df-a51a-4b128aaee962", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0017552c-0793-436d-96e1-3c5efdee073b", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0d233020099406a60e6818ecc9aeb80394741fa8a6aebaf6f2cbbb32deed0166", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d10e31c6-3db1-40a5-83a1-75900ecb8596", "node_type": "1", "metadata": {}, "hash": "b059b8d0e3523fd31050d159697d294478c7354c827aa34805ec7495bba2ec38", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Use $client->getConfig()->getPath('request.options/headers')`.\n* Marked `Guzzle\\Service\\Client::setDefaultHeaders()` as deprecated. Use $client->getConfig()->setPath('request.options/headers/{header_name}', 'value')`.\n* Marked `Guzzle\\Parser\\Url\\UrlParser` as deprecated. Just use PHP's `parse_url()` and percent encode your UTF-8.\n* Marked `Guzzle\\Common\\Collection::inject()` as deprecated.\n* Marked `Guzzle\\Plugin\\CurlAuth\\CurlAuthPlugin` as deprecated. Use `$client->getConfig()->setPath('request.options/auth', array('user', 'pass', 'Basic|Digest');`\n* CacheKeyProviderInterface and DefaultCacheKeyProvider are no longer used. All of this logic is handled in a\n  CacheStorageInterface. These two objects and interface will be removed in a future version.\n* Always setting X-cache headers on cached responses\n* Default cache TTLs are now handled by the CacheStorageInterface of a CachePlugin\n* `CacheStorageInterface::cache($key, Response $response, $ttl = null)` has changed to `cache(RequestInterface\n  $request, Response $response);`\n* `CacheStorageInterface::fetch($key)` has changed to `fetch(RequestInterface $request);`\n* `CacheStorageInterface::delete($key)` has changed to `delete(RequestInterface $request);`\n* Added `CacheStorageInterface::purge($url)`\n* `DefaultRevalidation::__construct(CacheKeyProviderInterface $cacheKey, CacheStorageInterface $cache, CachePlugin\n  $plugin)` has changed to `DefaultRevalidation::__construct(CacheStorageInterface $cache,\n  CanCacheStrategyInterface $canCache = null)`\n* Added `RevalidationInterface::shouldRevalidate(RequestInterface $request, Response $response)`\n\n## 3.6.0 - 2013-05-29\n\n* ServiceDescription now implements ToArrayInterface\n* Added command.hidden_params to blacklist certain headers from being treated as additionalParameters\n* Guzzle can now correctly parse incomplete URLs\n* Mixed casing of headers are now forced to be a single consistent casing across all values for that header.\n* Messages internally use a HeaderCollection object to delegate handling case-insensitive header resolution\n* Removed the whole changedHeader() function system of messages because all header changes now go through addHeader().\n* Specific header implementations can be created for complex headers. When a message creates a header, it uses a\n  HeaderFactory which can map specific headers to specific header classes. There is now a Link header and\n  CacheControl header implementation.\n* Removed from interface: Guzzle\\Http\\ClientInterface::setUriTemplate\n* Removed from interface: Guzzle\\Http\\ClientInterface::setCurlMulti()\n* Removed Guzzle\\Http\\Message\\Request::receivedRequestHeader() and implemented this functionality in\n  Guzzle\\Http\\Curl\\RequestMediator\n* Removed the optional $asString parameter from MessageInterface::getHeader(). Just cast the header to a string.\n* Removed the optional $tryChunkedTransfer option from Guzzle\\Http\\Message\\EntityEnclosingRequestInterface\n* Removed the $asObjects argument from Guzzle\\Http\\Message\\MessageInterface::getHeaders()\n* Removed Guzzle\\Parser\\ParserRegister::get(). Use getParser()\n* Removed Guzzle\\Parser\\ParserRegister::set(). Use registerParser().\n* All response header helper functions return a string rather than mixing Header objects and strings inconsistently\n* Removed cURL blacklist support. This is no longer necessary now that Expect, Accept, etc. are managed by Guzzle\n  directly via interfaces\n* Removed the injecting of a request object onto a response object. The methods to get and set a request still exist\n  but are a no-op until removed.\n* Most classes that used to require a `Guzzle\\Service\\Command\\CommandInterface` typehint now request a\n  `Guzzle\\Service\\Command\\ArrayCommandInterface`.\n* Added `Guzzle\\Http\\Message\\RequestInterface::startResponse()` to the RequestInterface to handle injecting a response\n  on a request while the request is still being transferred\n* The ability to case-insensitively search for header values\n* Guzzle\\Http\\Message\\Header::hasExactHeader\n* Guzzle\\Http\\Message\\Header::raw. Use getAll()\n* Deprecated cache control specific methods on Guzzle\\Http\\Message\\AbstractMessage. Use the CacheControl header object\n  instead.\n* `Guzzle\\Service\\Command\\CommandInterface` now extends from ToArrayInterface and ArrayAccess\n* Added the ability to cast Model objects to a string to view debug information.", "mimetype": "text/plain", "start_char_idx": 52590, "end_char_idx": 56943, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d10e31c6-3db1-40a5-83a1-75900ecb8596": {"__data__": {"id_": "d10e31c6-3db1-40a5-83a1-75900ecb8596", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a4fc5142-9cbb-43df-a51a-4b128aaee962", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5e06bbf443675baed11d1993e96897f301b7a1b051cd1f2b5c73ca70167c1a40", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0b479a11-278c-47a7-a7fb-77e01ee529f8", "node_type": "1", "metadata": {}, "hash": "35c3b66ce6451acc8650187db5f5710c32f0759131051b89f9c40f2926f5664e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "The methods to get and set a request still exist\n  but are a no-op until removed.\n* Most classes that used to require a `Guzzle\\Service\\Command\\CommandInterface` typehint now request a\n  `Guzzle\\Service\\Command\\ArrayCommandInterface`.\n* Added `Guzzle\\Http\\Message\\RequestInterface::startResponse()` to the RequestInterface to handle injecting a response\n  on a request while the request is still being transferred\n* The ability to case-insensitively search for header values\n* Guzzle\\Http\\Message\\Header::hasExactHeader\n* Guzzle\\Http\\Message\\Header::raw. Use getAll()\n* Deprecated cache control specific methods on Guzzle\\Http\\Message\\AbstractMessage. Use the CacheControl header object\n  instead.\n* `Guzzle\\Service\\Command\\CommandInterface` now extends from ToArrayInterface and ArrayAccess\n* Added the ability to cast Model objects to a string to view debug information.\n\n## 3.5.0 - 2013-05-13\n\n* Bug: Fixed a regression so that request responses are parsed only once per oncomplete event rather than multiple times\n* Bug: Better cleanup of one-time events across the board (when an event is meant to fire once, it will now remove\n  itself from the EventDispatcher)\n* Bug: `Guzzle\\Log\\MessageFormatter` now properly writes \"total_time\" and \"connect_time\" values\n* Bug: Cloning an EntityEnclosingRequest now clones the EntityBody too\n* Bug: Fixed an undefined index error when parsing nested JSON responses with a sentAs parameter that reference a\n  non-existent key\n* Bug: All __call() method arguments are now required (helps with mocking frameworks)\n* Deprecating Response::getRequest() and now using a shallow clone of a request object to remove a circular reference\n  to help with refcount based garbage collection of resources created by sending a request\n* Deprecating ZF1 cache and log adapters. These will be removed in the next major version.\n* Deprecating `Response::getPreviousResponse()` (method signature still exists, but it's deprecated). Use the\n  HistoryPlugin for a history.\n* Added a `responseBody` alias for the `response_body` location\n* Refactored internals to no longer rely on Response::getRequest()\n* HistoryPlugin can now be cast to a string\n* HistoryPlugin now logs transactions rather than requests and responses to more accurately keep track of the requests\n  and responses that are sent over the wire\n* Added `getEffectiveUrl()` and `getRedirectCount()` to Response objects\n\n## 3.4.3 - 2013-04-30\n\n* Bug fix: Fixing bug introduced in 3.4.2 where redirect responses are duplicated on the final redirected response\n* Added a check to re-extract the temp cacert bundle from the phar before sending each request\n\n## 3.4.2 - 2013-04-29\n\n* Bug fix: Stream objects now work correctly with \"a\" and \"a+\" modes\n* Bug fix: Removing `Transfer-Encoding: chunked` header when a Content-Length is present\n* Bug fix: AsyncPlugin no longer forces HEAD requests\n* Bug fix: DateTime timezones are now properly handled when using the service description schema formatter\n* Bug fix: CachePlugin now properly handles stale-if-error directives when a request to the origin server fails\n* Setting a response on a request will write to the custom request body from the response body if one is specified\n* LogPlugin now writes to php://output when STDERR is undefined\n* Added the ability to set multiple POST files for the same key in a single call\n* application/x-www-form-urlencoded POSTs now use the utf-8 charset by default\n* Added the ability to queue CurlExceptions to the MockPlugin\n* Cleaned up how manual responses are queued on requests (removed \"queued_response\" and now using request.before_send)\n* Configuration loading now allows remote files\n\n## 3.4.1 - 2013-04-16\n\n* Large refactoring to how CurlMulti handles work. There is now a proxy that sits in front of a pool of CurlMulti\n  handles. This greatly simplifies the implementation, fixes a couple bugs, and provides a small performance boost.", "mimetype": "text/plain", "start_char_idx": 56071, "end_char_idx": 59987, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0b479a11-278c-47a7-a7fb-77e01ee529f8": {"__data__": {"id_": "0b479a11-278c-47a7-a7fb-77e01ee529f8", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d10e31c6-3db1-40a5-83a1-75900ecb8596", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2c64ab8b7cb854c040871a8275b84d18fd20f29d8c0272c8da76300b94741f72", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6909c186-e9a6-4da0-98f0-8bc8b5f4bfd4", "node_type": "1", "metadata": {}, "hash": "08a1e04baad25983796dc9a6c89825acbf69130fe5963a71e669f0cbfdb6d8ed", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "There is now a proxy that sits in front of a pool of CurlMulti\n  handles. This greatly simplifies the implementation, fixes a couple bugs, and provides a small performance boost.\n* Exceptions are now properly grouped when sending requests in parallel\n* Redirects are now properly aggregated when a multi transaction fails\n* Redirects now set the response on the original object even in the event of a failure\n* Bug fix: Model names are now properly set even when using $refs\n* Added support for PHP 5.5's CurlFile to prevent warnings with the deprecated @ syntax\n* Added support for oauth_callback in OAuth signatures\n* Added support for oauth_verifier in OAuth signatures\n* Added support to attempt to retrieve a command first literally, then ucfirst, the with inflection\n\n## 3.4.0 - 2013-04-11\n\n* Bug fix: URLs are now resolved correctly based on https://datatracker.ietf.org/doc/html/rfc3986#section-5.2. #289\n* Bug fix: Absolute URLs with a path in a service description will now properly override the base URL. #289\n* Bug fix: Parsing a query string with a single PHP array value will now result in an array. #263\n* Bug fix: Better normalization of the User-Agent header to prevent duplicate headers. #264.\n* Bug fix: Added `number` type to service descriptions.\n* Bug fix: empty parameters are removed from an OAuth signature\n* Bug fix: Revalidating a cache entry prefers the Last-Modified over the Date header\n* Bug fix: Fixed \"array to string\" error when validating a union of types in a service description\n* Bug fix: Removed code that attempted to determine the size of a stream when data is written to the stream\n* Bug fix: Not including an `oauth_token` if the value is null in the OauthPlugin.\n* Bug fix: Now correctly aggregating successful requests and failed requests in CurlMulti when a redirect occurs.\n* The new default CURLOPT_TIMEOUT setting has been increased to 150 seconds so that Guzzle works on poor connections.\n* Added a feature to EntityEnclosingRequest::setBody() that will automatically set the Content-Type of the request if\n  the Content-Type can be determined based on the entity body or the path of the request.\n* Added the ability to overwrite configuration settings in a client when grabbing a throwaway client from a builder.\n* Added support for a PSR-3 LogAdapter.\n* Added a `command.after_prepare` event\n* Added `oauth_callback` parameter to the OauthPlugin\n* Added the ability to create a custom stream class when using a stream factory\n* Added a CachingEntityBody decorator\n* Added support for `additionalParameters` in service descriptions to define how custom parameters are serialized.\n* The bundled SSL certificate is now provided in the phar file and extracted when running Guzzle from a phar.\n* You can now send any EntityEnclosingRequest with POST fields or POST files and cURL will handle creating bodies\n* POST requests using a custom entity body are now treated exactly like PUT requests but with a custom cURL method. This\n  means that the redirect behavior of POST requests with custom bodies will not be the same as POST requests that use\n  POST fields or files (the latter is only used when emulating a form POST in the browser).\n* Lots of cleanup to CurlHandle::factory and RequestFactory::createRequest\n\n## 3.3.1 - 2013-03-10\n\n* Added the ability to create PHP streaming responses from HTTP requests\n* Bug fix: Running any filters when parsing response headers with service descriptions\n* Bug fix: OauthPlugin fixes to allow for multi-dimensional array signing, and sorting parameters before signing\n* Bug fix: Removed the adding of default empty arrays and false Booleans to responses in order to be consistent across\n  response location visitors.\n* Bug fix: Removed the possibility of creating configuration files with circular dependencies\n* RequestFactory::create() now uses the key of a POST file when setting the POST file name\n* Added xmlAllowEmpty to serialize an XML body even if no XML specific parameters are set\n\n## 3.3.0 - 2013-03-03\n\n* A large number of performance optimizations have been made\n* Bug fix: Added 'wb' as a valid write mode for streams\n* Bug fix: `Guzzle\\Http\\Message\\Response::json()` now allows scalar values to be returned\n* Bug fix: Fixed bug in `Guzzle\\Http\\Message\\Response` where wrapping quotes were stripped from `getEtag()`\n* BC: Removed `Guzzle\\Http\\Utils` class\n* BC: Setting a service description on a client will no longer modify the client's command factories.", "mimetype": "text/plain", "start_char_idx": 59809, "end_char_idx": 64271, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6909c186-e9a6-4da0-98f0-8bc8b5f4bfd4": {"__data__": {"id_": "6909c186-e9a6-4da0-98f0-8bc8b5f4bfd4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0b479a11-278c-47a7-a7fb-77e01ee529f8", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4863eecc880bee2f2ae68245998a0a74d06384bca7132a335a3ddeda2f5e903e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2a4dd005-aee4-470e-a168-303b84ea67fb", "node_type": "1", "metadata": {}, "hash": "76fbb46feac10a469f7533087eef86d5b46b3df48d5a8f00f445d5ae83764e57", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "* Bug fix: Removed the possibility of creating configuration files with circular dependencies\n* RequestFactory::create() now uses the key of a POST file when setting the POST file name\n* Added xmlAllowEmpty to serialize an XML body even if no XML specific parameters are set\n\n## 3.3.0 - 2013-03-03\n\n* A large number of performance optimizations have been made\n* Bug fix: Added 'wb' as a valid write mode for streams\n* Bug fix: `Guzzle\\Http\\Message\\Response::json()` now allows scalar values to be returned\n* Bug fix: Fixed bug in `Guzzle\\Http\\Message\\Response` where wrapping quotes were stripped from `getEtag()`\n* BC: Removed `Guzzle\\Http\\Utils` class\n* BC: Setting a service description on a client will no longer modify the client's command factories.\n* BC: Emitting IO events from a RequestMediator is now a parameter that must be set in a request's curl options using\n  the 'emit_io' key. This was previously set under a request's parameters using 'curl.emit_io'\n* BC: `Guzzle\\Stream\\Stream::getWrapper()` and `Guzzle\\Stream\\Stream::getSteamType()` are no longer converted to\n  lowercase\n* Operation parameter objects are now lazy loaded internally\n* Added ErrorResponsePlugin that can throw errors for responses defined in service description operations' errorResponses\n* Added support for instantiating responseType=class responseClass classes. Classes must implement\n  `Guzzle\\Service\\Command\\ResponseClassInterface`\n* Added support for additionalProperties for top-level parameters in responseType=model responseClasses. These\n  additional properties also support locations and can be used to parse JSON responses where the outermost part of the\n  JSON is an array\n* Added support for nested renaming of JSON models (rename sentAs to name)\n* CachePlugin\n    * Added support for stale-if-error so that the CachePlugin can now serve stale content from the cache on error\n    * Debug headers can now added to cached response in the CachePlugin\n\n## 3.2.0 - 2013-02-14\n\n* CurlMulti is no longer reused globally. A new multi object is created per-client. This helps to isolate clients.\n* URLs with no path no longer contain a \"/\" by default\n* Guzzle\\Http\\QueryString does no longer manages the leading \"?\". This is now handled in Guzzle\\Http\\Url.\n* BadResponseException no longer includes the full request and response message\n* Adding setData() to Guzzle\\Service\\Description\\ServiceDescriptionInterface\n* Adding getResponseBody() to Guzzle\\Http\\Message\\RequestInterface\n* Various updates to classes to use ServiceDescriptionInterface type hints rather than ServiceDescription\n* Header values can now be normalized into distinct values when multiple headers are combined with a comma separated list\n* xmlEncoding can now be customized for the XML declaration of a XML service description operation\n* Guzzle\\Http\\QueryString now uses Guzzle\\Http\\QueryAggregator\\QueryAggregatorInterface objects to add custom value\n  aggregation and no longer uses callbacks\n* The URL encoding implementation of Guzzle\\Http\\QueryString can now be customized\n* Bug fix: Filters were not always invoked for array service description parameters\n* Bug fix: Redirects now use a target response body rather than a temporary response body\n* Bug fix: The default exponential backoff BackoffPlugin was not giving when the request threshold was exceeded\n* Bug fix: Guzzle now takes the first found value when grabbing Cache-Control directives\n\n## 3.1.2 - 2013-01-27\n\n* Refactored how operation responses are parsed. Visitors now include a before() method responsible for parsing the\n  response body. For example, the XmlVisitor now parses the XML response into an array in the before() method.", "mimetype": "text/plain", "start_char_idx": 63516, "end_char_idx": 67185, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2a4dd005-aee4-470e-a168-303b84ea67fb": {"__data__": {"id_": "2a4dd005-aee4-470e-a168-303b84ea67fb", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6909c186-e9a6-4da0-98f0-8bc8b5f4bfd4", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8d606cd55e7c6d28bb47aec87cfa3ae55193b4f0bf4bf47071f69e1db918be5f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "cf3aac61-b26d-4041-994d-3c26d8646505", "node_type": "1", "metadata": {}, "hash": "be7b75ab1e8851f934cefd691f4be30379878d9210d9df908d71ccc0ae901570", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Visitors now include a before() method responsible for parsing the\n  response body. For example, the XmlVisitor now parses the XML response into an array in the before() method.\n* Fixed an issue where cURL would not automatically decompress responses when the Accept-Encoding header was sent\n* CURLOPT_SSL_VERIFYHOST is never set to 1 because it is deprecated (see 5e0ff2ef20f839e19d1eeb298f90ba3598784444)\n* Fixed a bug where redirect responses were not chained correctly using getPreviousResponse()\n* Setting default headers on a client after setting the user-agent will not erase the user-agent setting\n\n## 3.1.1 - 2013-01-20\n\n* Adding wildcard support to Guzzle\\Common\\Collection::getPath()\n* Adding alias support to ServiceBuilder configs\n* Adding Guzzle\\Service\\Resource\\CompositeResourceIteratorFactory and cleaning up factory interface\n\n## 3.1.0 - 2013-01-12\n\n* BC: CurlException now extends from RequestException rather than BadResponseException\n* BC: Renamed Guzzle\\Plugin\\Cache\\CanCacheStrategyInterface::canCache() to canCacheRequest() and added CanCacheResponse()\n* Added getData to ServiceDescriptionInterface\n* Added context array to RequestInterface::setState()\n* Bug: Removing hard dependency on the BackoffPlugin from Guzzle\\Http\n* Bug: Adding required content-type when JSON request visitor adds JSON to a command\n* Bug: Fixing the serialization of a service description with custom data\n* Made it easier to deal with exceptions thrown when transferring commands or requests in parallel by providing\n  an array of successful and failed responses\n* Moved getPath from Guzzle\\Service\\Resource\\Model to Guzzle\\Common\\Collection\n* Added Guzzle\\Http\\IoEmittingEntityBody\n* Moved command filtration from validators to location visitors\n* Added `extends` attributes to service description parameters\n* Added getModels to ServiceDescriptionInterface\n\n## 3.0.7 - 2012-12-19\n\n* Fixing phar detection when forcing a cacert to system if null or true\n* Allowing filename to be passed to `Guzzle\\Http\\Message\\Request::setResponseBody()`\n* Cleaning up `Guzzle\\Common\\Collection::inject` method\n* Adding a response_body location to service descriptions\n\n## 3.0.6 - 2012-12-09\n\n* CurlMulti performance improvements\n* Adding setErrorResponses() to Operation\n* composer.json tweaks\n\n## 3.0.5 - 2012-11-18\n\n* Bug: Fixing an infinite recursion bug caused from revalidating with the CachePlugin\n* Bug: Response body can now be a string containing \"0\"\n* Bug: Using Guzzle inside of a phar uses system by default but now allows for a custom cacert\n* Bug: QueryString::fromString now properly parses query string parameters that contain equal signs\n* Added support for XML attributes in service description responses\n* DefaultRequestSerializer now supports array URI parameter values for URI template expansion\n* Added better mimetype guessing to requests and post files\n\n## 3.0.4 - 2012-11-11\n\n* Bug: Fixed a bug when adding multiple cookies to a request to use the correct glue value\n* Bug: Cookies can now be added that have a name, domain, or value set to \"0\"\n* Bug: Using the system cacert bundle when using the Phar\n* Added json and xml methods to Response to make it easier to parse JSON and XML response data into data structures\n* Enhanced cookie jar de-duplication\n* Added the ability to enable strict cookie jars that throw exceptions when invalid cookies are added\n* Added setStream to StreamInterface to actually make it possible to implement custom rewind behavior for entity bodies\n* Added the ability to create any sort of hash for a stream rather than just an MD5 hash\n\n## 3.0.3 - 2012-11-04\n\n* Implementing redirects in PHP rather than cURL\n* Added PECL URI template extension and using as default parser if available\n* Bug: Fixed Content-Length parsing of Response factory\n* Adding rewind() method to entity bodies and streams. Allows for custom rewinding of non-repeatable streams.", "mimetype": "text/plain", "start_char_idx": 67008, "end_char_idx": 70903, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cf3aac61-b26d-4041-994d-3c26d8646505": {"__data__": {"id_": "cf3aac61-b26d-4041-994d-3c26d8646505", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2a4dd005-aee4-470e-a168-303b84ea67fb", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "927ed3bc84b742189419ee1424d1e18f9fec55bba61d1174fcbd32d261975d29", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "0e7f2f10-72b9-406a-b41d-2ff641397791", "node_type": "1", "metadata": {}, "hash": "d68236d22abbfd6a240cb2bff9ffba59df698bdb3e348dfd25245f74ab94418b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Allows for custom rewinding of non-repeatable streams.\n* Adding ToArrayInterface throughout library\n* Fixing OauthPlugin to create unique nonce values per request\n\n## 3.0.2 - 2012-10-25\n\n* Magic methods are enabled by default on clients\n* Magic methods return the result of a command\n* Service clients no longer require a base_url option in the factory\n* Bug: Fixed an issue with URI templates where null template variables were being expanded\n\n## 3.0.1 - 2012-10-22\n\n* Models can now be used like regular collection objects by calling filter, map, etc.\n* Models no longer require a Parameter structure or initial data in the constructor\n* Added a custom AppendIterator to get around a PHP bug with the `\\AppendIterator`\n\n## 3.0.0 - 2012-10-15\n\n* Rewrote service description format to be based on Swagger\n    * Now based on JSON schema\n    * Added nested input structures and nested response models\n    * Support for JSON and XML input and output models\n    * Renamed `commands` to `operations`\n    * Removed dot class notation\n    * Removed custom types\n* Broke the project into smaller top-level namespaces to be more component friendly\n* Removed support for XML configs and descriptions. Use arrays or JSON files.\n* Removed the Validation component and Inspector\n* Moved all cookie code to Guzzle\\Plugin\\Cookie\n* Magic methods on a Guzzle\\Service\\Client now return the command un-executed.\n* Calling getResult() or getResponse() on a command will lazily execute the command if needed.\n* Now shipping with cURL's CA certs and using it by default\n* Added previousResponse() method to response objects\n* No longer sending Accept and Accept-Encoding headers on every request\n* Only sending an Expect header by default when a payload is greater than 1MB\n* Added/moved client options:\n    * curl.blacklist to curl.option.blacklist\n    * Added ssl.certificate_authority\n* Added a Guzzle\\Iterator component\n* Moved plugins from Guzzle\\Http\\Plugin to Guzzle\\Plugin\n* Added a more robust backoff retry strategy (replaced the ExponentialBackoffPlugin)\n* Added a more robust caching plugin\n* Added setBody to response objects\n* Updating LogPlugin to use a more flexible MessageFormatter\n* Added a completely revamped build process\n* Cleaning up Collection class and removing default values from the get method\n* Fixed ZF2 cache adapters\n\n## 2.8.8 - 2012-10-15\n\n* Bug: Fixed a cookie issue that caused dot prefixed domains to not match where popular browsers did\n\n## 2.8.7 - 2012-09-30\n\n* Bug: Fixed config file aliases for JSON includes\n* Bug: Fixed cookie bug on a request object by using CookieParser to parse cookies on requests\n* Bug: Removing the path to a file when sending a Content-Disposition header on a POST upload\n* Bug: Hardening request and response parsing to account for missing parts\n* Bug: Fixed PEAR packaging\n* Bug: Fixed Request::getInfo\n* Bug: Fixed cases where CURLM_CALL_MULTI_PERFORM return codes were causing curl transactions to fail\n* Adding the ability for the namespace Iterator factory to look in multiple directories\n* Added more getters/setters/removers from service descriptions\n* Added the ability to remove POST fields from OAuth signatures\n* OAuth plugin now supports 2-legged OAuth\n\n## 2.8.6 - 2012-09-05\n\n* Added the ability to modify and build service descriptions\n* Added the use of visitors to apply parameters to locations in service descriptions using the dynamic command\n* Added a `json` parameter location\n* Now allowing dot notation for classes in the CacheAdapterFactory\n* Using the union of two arrays rather than an array_merge when extending service builder services and service params\n* Ensuring that a service is a string before doing strpos() checks on it when substituting services for references\n  in service builder config files.\n* Services defined in two different config files that include one another will by default replace the previously\n  defined service, but you can now create services that extend themselves and merge their settings over the previous\n* The JsonLoader now supports aliasing filenames with different filenames. This allows you to alias something like\n  '_default' with a default JSON configuration file.", "mimetype": "text/plain", "start_char_idx": 70849, "end_char_idx": 75024, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0e7f2f10-72b9-406a-b41d-2ff641397791": {"__data__": {"id_": "0e7f2f10-72b9-406a-b41d-2ff641397791", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cf3aac61-b26d-4041-994d-3c26d8646505", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c2515dd47a6403c626edae0b8d4697ef72e261b9e2c68a295f0888825843cd9d", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2bc74048-2e67-4757-bdcf-fbeea2d2a3c1", "node_type": "1", "metadata": {}, "hash": "d86d08f82308ff2ab1763bf3383665954e12bd4e2e153873fc06a58d579a164b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "* Services defined in two different config files that include one another will by default replace the previously\n  defined service, but you can now create services that extend themselves and merge their settings over the previous\n* The JsonLoader now supports aliasing filenames with different filenames. This allows you to alias something like\n  '_default' with a default JSON configuration file.\n\n## 2.8.5 - 2012-08-29\n\n* Bug: Suppressed empty arrays from URI templates\n* Bug: Added the missing $options argument from ServiceDescription::factory to enable caching\n* Added support for HTTP responses that do not contain a reason phrase in the start-line\n* AbstractCommand commands are now invokable\n* Added a way to get the data used when signing an Oauth request before a request is sent\n\n## 2.8.4 - 2012-08-15\n\n* Bug: Custom delay time calculations are no longer ignored in the ExponentialBackoffPlugin\n* Added the ability to transfer entity bodies as a string rather than streamed. This gets around curl error 65. Set `body_as_string` in a request's curl options to enable.\n* Added a StreamInterface, EntityBodyInterface, and added ftell() to Guzzle\\Common\\Stream\n* Added an AbstractEntityBodyDecorator and a ReadLimitEntityBody decorator to transfer only a subset of a decorated stream\n* Stream and EntityBody objects will now return the file position to the previous position after a read required operation (e.g. getContentMd5())\n* Added additional response status codes\n* Removed SSL information from the default User-Agent header\n* DELETE requests can now send an entity body\n* Added an EventDispatcher to the ExponentialBackoffPlugin and added an ExponentialBackoffLogger to log backoff retries\n* Added the ability of the MockPlugin to consume mocked request bodies\n* LogPlugin now exposes request and response objects in the extras array\n\n## 2.8.3 - 2012-07-30\n\n* Bug: Fixed a case where empty POST requests were sent as GET requests\n* Bug: Fixed a bug in ExponentialBackoffPlugin that caused fatal errors when retrying an EntityEnclosingRequest that does not have a body\n* Bug: Setting the response body of a request to null after completing a request, not when setting the state of a request to new\n* Added multiple inheritance to service description commands\n* Added an ApiCommandInterface and added `getParamNames()` and `hasParam()`\n* Removed the default 2mb size cutoff from the Md5ValidatorPlugin so that it now defaults to validating everything\n* Changed CurlMulti::perform to pass a smaller timeout to CurlMulti::executeHandles\n\n## 2.8.2 - 2012-07-24\n\n* Bug: Query string values set to 0 are no longer dropped from the query string\n* Bug: A Collection object is no longer created each time a call is made to `Guzzle\\Service\\Command\\AbstractCommand::getRequestHeaders()`\n* Bug: `+` is now treated as an encoded space when parsing query strings\n* QueryString and Collection performance improvements\n* Allowing dot notation for class paths in filters attribute of a service descriptions\n\n## 2.8.1 - 2012-07-16\n\n* Loosening Event Dispatcher dependency\n* POST redirects can now be customized using CURLOPT_POSTREDIR\n\n## 2.8.0 - 2012-07-15\n\n* BC: Guzzle\\Http\\Query\n    * Query strings with empty variables will always show an equal sign unless the variable is set to QueryString::BLANK (e.g. ?acl= vs ?acl)\n    * Changed isEncodingValues() and isEncodingFields() to isUrlEncoding()\n    * Changed setEncodeValues(bool) and setEncodeFields(bool) to useUrlEncoding(bool)\n    * Changed the aggregation functions of QueryString to be static methods\n    * Can now use fromString() with querystrings that have a leading ?\n* cURL configuration values can be specified in service descriptions using `curl.` prefixed parameters\n* Content-Length is set to 0 before emitting the request.before_send event when sending an empty request body\n* Cookies are no longer URL decoded by default\n* Bug: URI template variables set to null are no longer expanded\n\n## 2.7.2 - 2012-07-02\n\n* BC: Moving things to get ready for subtree splits. Moving Inflection into Common. Moving Guzzle\\Http\\Parser to Guzzle\\Parser.", "mimetype": "text/plain", "start_char_idx": 74627, "end_char_idx": 78732, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2bc74048-2e67-4757-bdcf-fbeea2d2a3c1": {"__data__": {"id_": "2bc74048-2e67-4757-bdcf-fbeea2d2a3c1", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "0e7f2f10-72b9-406a-b41d-2ff641397791", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f66500590beabdc926ececbd54ae4b4903cd8bb9cf155e6c7418b7881c2d4634", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8181e022-4203-40cc-8eab-256541a4393b", "node_type": "1", "metadata": {}, "hash": "dedcaf7e0d072a3e3f0cbea63885f95d1ba9c45a3aa279c95f390dca0eba9211", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "?acl= vs ?acl)\n    * Changed isEncodingValues() and isEncodingFields() to isUrlEncoding()\n    * Changed setEncodeValues(bool) and setEncodeFields(bool) to useUrlEncoding(bool)\n    * Changed the aggregation functions of QueryString to be static methods\n    * Can now use fromString() with querystrings that have a leading ?\n* cURL configuration values can be specified in service descriptions using `curl.` prefixed parameters\n* Content-Length is set to 0 before emitting the request.before_send event when sending an empty request body\n* Cookies are no longer URL decoded by default\n* Bug: URI template variables set to null are no longer expanded\n\n## 2.7.2 - 2012-07-02\n\n* BC: Moving things to get ready for subtree splits. Moving Inflection into Common. Moving Guzzle\\Http\\Parser to Guzzle\\Parser.\n* BC: Removing Guzzle\\Common\\Batch\\Batch::count() and replacing it with isEmpty()\n* CachePlugin now allows for a custom request parameter function to check if a request can be cached\n* Bug fix: CachePlugin now only caches GET and HEAD requests by default\n* Bug fix: Using header glue when transferring headers over the wire\n* Allowing deeply nested arrays for composite variables in URI templates\n* Batch divisors can now return iterators or arrays\n\n## 2.7.1 - 2012-06-26\n\n* Minor patch to update version number in UA string\n* Updating build process\n\n## 2.7.0 - 2012-06-25\n\n* BC: Inflection classes moved to Guzzle\\Inflection. No longer static methods. Can now inject custom inflectors into classes.\n* BC: Removed magic setX methods from commands\n* BC: Magic methods mapped to service description commands are now inflected in the command factory rather than the client __call() method\n* Verbose cURL options are no longer enabled by default. Set curl.debug to true on a client to enable.\n* Bug: Now allowing colons in a response start-line (e.g. HTTP/1.1 503 Service Unavailable: Back-end server is at capacity)\n* Guzzle\\Service\\Resource\\ResourceIteratorApplyBatched now internally uses the Guzzle\\Common\\Batch namespace\n* Added Guzzle\\Service\\Plugin namespace and a PluginCollectionPlugin\n* Added the ability to set POST fields and files in a service description\n* Guzzle\\Http\\EntityBody::factory() now accepts objects with a __toString() method\n* Adding a command.before_prepare event to clients\n* Added BatchClosureTransfer and BatchClosureDivisor\n* BatchTransferException now includes references to the batch divisor and transfer strategies\n* Fixed some tests so that they pass more reliably\n* Added Guzzle\\Common\\Log\\ArrayLogAdapter\n\n## 2.6.6 - 2012-06-10\n\n* BC: Removing Guzzle\\Http\\Plugin\\BatchQueuePlugin\n* BC: Removing Guzzle\\Service\\Command\\CommandSet\n* Adding generic batching system (replaces the batch queue plugin and command set)\n* Updating ZF cache and log adapters and now using ZF's composer repository\n* Bug: Setting the name of each ApiParam when creating through an ApiCommand\n* Adding result_type, result_doc, deprecated, and doc_url to service descriptions\n* Bug: Changed the default cookie header casing back to 'Cookie'\n\n## 2.6.5 - 2012-06-03\n\n* BC: Renaming Guzzle\\Http\\Message\\RequestInterface::getResourceUri() to getResource()\n* BC: Removing unused AUTH_BASIC and AUTH_DIGEST constants from\n* BC: Guzzle\\Http\\Cookie is now used to manage Set-Cookie data, not Cookie data\n* BC: Renaming methods in the CookieJarInterface\n* Moving almost all cookie logic out of the CookiePlugin and into the Cookie or CookieJar implementations\n* Making the default glue for HTTP headers ';' instead of ','\n* Adding a removeValue to Guzzle\\Http\\Message\\Header\n* Adding getCookies() to request interface.\n* Making it easier to add event subscribers to HasDispatcherInterface classes. Can now directly call addSubscriber()\n\n## 2.6.4 - 2012-05-30\n\n* BC: Cleaning up how POST files are stored in EntityEnclosingRequest objects. Adding PostFile class.", "mimetype": "text/plain", "start_char_idx": 77933, "end_char_idx": 81790, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8181e022-4203-40cc-8eab-256541a4393b": {"__data__": {"id_": "8181e022-4203-40cc-8eab-256541a4393b", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2bc74048-2e67-4757-bdcf-fbeea2d2a3c1", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3a44e95aeb048005fbf7d33eba795c7b14d5437e968e16ca05a47a211c22957f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6adf27f1-0fbf-426c-977b-65da9180d774", "node_type": "1", "metadata": {}, "hash": "456fca00c5102da7bcdbec27a41ac9e855470cc7650aa29bd8ac77c6cf8f55ce", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "* Making it easier to add event subscribers to HasDispatcherInterface classes. Can now directly call addSubscriber()\n\n## 2.6.4 - 2012-05-30\n\n* BC: Cleaning up how POST files are stored in EntityEnclosingRequest objects. Adding PostFile class.\n* BC: Moving ApiCommand specific functionality from the Inspector and on to the ApiCommand\n* Bug: Fixing magic method command calls on clients\n* Bug: Email constraint only validates strings\n* Bug: Aggregate POST fields when POST files are present in curl handle\n* Bug: Fixing default User-Agent header\n* Bug: Only appending or prepending parameters in commands if they are specified\n* Bug: Not requiring response reason phrases or status codes to match a predefined list of codes\n* Allowing the use of dot notation for class namespaces when using instance_of constraint\n* Added any_match validation constraint\n* Added an AsyncPlugin\n* Passing request object to the calculateWait method of the ExponentialBackoffPlugin\n* Allowing the result of a command object to be changed\n* Parsing location and type sub values when instantiating a service description rather than over and over at runtime\n\n## 2.6.3 - 2012-05-23\n\n* [BC] Guzzle\\Common\\FromConfigInterface no longer requires any config options.\n* [BC] Refactoring how POST files are stored on an EntityEnclosingRequest. They are now separate from POST fields.\n* You can now use an array of data when creating PUT request bodies in the request factory.\n* Removing the requirement that HTTPS requests needed a Cache-Control: public directive to be cacheable.\n* [Http] Adding support for Content-Type in multipart POST uploads per upload\n* [Http] Added support for uploading multiple files using the same name (foo[0], foo[1])\n* Adding more POST data operations for easier manipulation of POST data.\n* You can now set empty POST fields.\n* The body of a request is only shown on EntityEnclosingRequest objects that do not use POST files.\n* Split the Guzzle\\Service\\Inspector::validateConfig method into two methods. One to initialize when a command is created, and one to validate.\n* CS updates\n\n## 2.6.2 - 2012-05-19\n\n* [Http] Better handling of nested scope requests in CurlMulti.  Requests are now always prepares in the send() method rather than the addRequest() method.\n\n## 2.6.1 - 2012-05-19\n\n* [BC] Removing 'path' support in service descriptions.  Use 'uri'.\n* [BC] Guzzle\\Service\\Inspector::parseDocBlock is now protected. Adding getApiParamsForClass() with cache.\n* [BC] Removing Guzzle\\Common\\NullObject.  Use https://github.com/mtdowling/NullObject if you need it.\n* [BC] Removing Guzzle\\Common\\XmlElement.\n* All commands, both dynamic and concrete, have ApiCommand objects.\n* Adding a fix for CurlMulti so that if all of the connections encounter some sort of curl error, then the loop exits.\n* Adding checks to EntityEnclosingRequest so that empty POST files and fields are ignored.\n* Making the method signature of Guzzle\\Service\\Builder\\ServiceBuilder::factory more flexible.\n\n## 2.6.0 - 2012-05-15\n\n* [BC] Moving Guzzle\\Service\\Builder to Guzzle\\Service\\Builder\\ServiceBuilder\n* [BC] Executing a Command returns the result of the command rather than the command\n* [BC] Moving all HTTP parsing logic to Guzzle\\Http\\Parsers. Allows for faster C implementations if needed.\n* [BC] Changing the Guzzle\\Http\\Message\\Response::setProtocol() method to accept a protocol and version in separate args.\n* [BC] Moving ResourceIterator* to Guzzle\\Service\\Resource\n* [BC] Completely refactored ResourceIterators to iterate over a cloned command object\n* [BC] Moved Guzzle\\Http\\UriTemplate to Guzzle\\Http\\Parser\\UriTemplate\\UriTemplate\n* [BC] Guzzle\\Guzzle is now deprecated\n* Moving Guzzle\\Common\\Guzzle::inject to Guzzle\\Common\\Collection::inject\n* Adding Guzzle\\Version class to give version information about Guzzle\n* Adding Guzzle\\Http\\Utils class to provide getDefaultUserAgent() and getHttpDate()\n* Adding Guzzle\\Curl\\CurlVersion to manage caching curl_version() data\n* ServiceDescription and ServiceBuilder are now cacheable using similar configs\n* Changing the format of XML and JSON service builder configs.  Backwards compatible.", "mimetype": "text/plain", "start_char_idx": 81548, "end_char_idx": 85679, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6adf27f1-0fbf-426c-977b-65da9180d774": {"__data__": {"id_": "6adf27f1-0fbf-426c-977b-65da9180d774", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5f22111a-9d20-4635-97ce-2ef748506993", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d6e81563836721d070ecead14b291e8af6909f850c1a97a6eca84ca7c4782340", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8181e022-4203-40cc-8eab-256541a4393b", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 87910, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b2851638d92ea98b1aaee1509b5060406d0df76e68fd87d7a43ff3aee3a8d0e4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Allows for faster C implementations if needed.\n* [BC] Changing the Guzzle\\Http\\Message\\Response::setProtocol() method to accept a protocol and version in separate args.\n* [BC] Moving ResourceIterator* to Guzzle\\Service\\Resource\n* [BC] Completely refactored ResourceIterators to iterate over a cloned command object\n* [BC] Moved Guzzle\\Http\\UriTemplate to Guzzle\\Http\\Parser\\UriTemplate\\UriTemplate\n* [BC] Guzzle\\Guzzle is now deprecated\n* Moving Guzzle\\Common\\Guzzle::inject to Guzzle\\Common\\Collection::inject\n* Adding Guzzle\\Version class to give version information about Guzzle\n* Adding Guzzle\\Http\\Utils class to provide getDefaultUserAgent() and getHttpDate()\n* Adding Guzzle\\Curl\\CurlVersion to manage caching curl_version() data\n* ServiceDescription and ServiceBuilder are now cacheable using similar configs\n* Changing the format of XML and JSON service builder configs.  Backwards compatible.\n* Cleaned up Cookie parsing\n* Trimming the default Guzzle User-Agent header\n* Adding a setOnComplete() method to Commands that is called when a command completes\n* Keeping track of requests that were mocked in the MockPlugin\n* Fixed a caching bug in the CacheAdapterFactory\n* Inspector objects can be injected into a Command object\n* Refactoring a lot of code and tests to be case insensitive when dealing with headers\n* Adding Guzzle\\Http\\Message\\HeaderComparison for easy comparison of HTTP headers using a DSL\n* Adding the ability to set global option overrides to service builder configs\n* Adding the ability to include other service builder config files from within XML and JSON files\n* Moving the parseQuery method out of Url and on to QueryString::fromString() as a static factory method.\n\n## 2.5.0 - 2012-05-08\n\n* Major performance improvements\n* [BC] Simplifying Guzzle\\Common\\Collection.  Please check to see if you are using features that are now deprecated.\n* [BC] Using a custom validation system that allows a flyweight implementation for much faster validation. No longer using Symfony2 Validation component.\n* [BC] No longer supporting \"{{ }}\" for injecting into command or UriTemplates.  Use \"{}\"\n* Added the ability to passed parameters to all requests created by a client\n* Added callback functionality to the ExponentialBackoffPlugin\n* Using microtime in ExponentialBackoffPlugin to allow more granular backoff strategies.\n* Rewinding request stream bodies when retrying requests\n* Exception is thrown when JSON response body cannot be decoded\n* Added configurable magic method calls to clients and commands.  This is off by default.\n* Fixed a defect that added a hash to every parsed URL part\n* Fixed duplicate none generation for OauthPlugin.\n* Emitting an event each time a client is generated by a ServiceBuilder\n* Using an ApiParams object instead of a Collection for parameters of an ApiCommand\n* cache.* request parameters should be renamed to params.cache.*\n* Added the ability to set arbitrary curl options on requests (disable_wire, progress, etc.). See CurlHandle.\n* Added the ability to disable type validation of service descriptions\n* ServiceDescriptions and ServiceBuilders are now Serializable", "mimetype": "text/plain", "start_char_idx": 84777, "end_char_idx": 87909, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "87d56891-1197-46b8-9cf7-b77dc461eb16": {"__data__": {"id_": "87d56891-1197-46b8-9cf7-b77dc461eb16", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a0f1fd04-4e68-495f-ae95-fd1afb5576bd", "node_type": "1", "metadata": {}, "hash": "9d5b5c4dbf8e8b7758bcf7c166750dda76c598d377156c9e3f82f179ae97dd4f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Guzzle Upgrade Guide\n====================\n\n6.0 to 7.0\n----------\n\nIn order to take advantage of the new features of PHP, Guzzle dropped the support\nof PHP 5. The minimum supported PHP version is now PHP 7.2. Type hints and return\ntypes for functions and methods have been added wherever possible. \n\nPlease make sure:\n- You are calling a function or a method with the correct type.\n- If you extend a class of Guzzle; update all signatures on methods you override.\n\n#### Other backwards compatibility breaking changes\n\n- Class `GuzzleHttp\\UriTemplate` is removed.\n- Class `GuzzleHttp\\Exception\\SeekException` is removed.\n- Classes `GuzzleHttp\\Exception\\BadResponseException`, `GuzzleHttp\\Exception\\ClientException`, \n  `GuzzleHttp\\Exception\\ServerException` can no longer be initialized with an empty\n  Response as argument.\n- Class `GuzzleHttp\\Exception\\ConnectException` now extends `GuzzleHttp\\Exception\\TransferException`\n  instead of `GuzzleHttp\\Exception\\RequestException`.\n- Function `GuzzleHttp\\Exception\\ConnectException::getResponse()` is removed.\n- Function `GuzzleHttp\\Exception\\ConnectException::hasResponse()` is removed.\n- Constant `GuzzleHttp\\ClientInterface::VERSION` is removed. Added `GuzzleHttp\\ClientInterface::MAJOR_VERSION` instead.\n- Function `GuzzleHttp\\Exception\\RequestException::getResponseBodySummary` is removed.\n  Use `\\GuzzleHttp\\Psr7\\get_message_body_summary` as an alternative.\n- Function `GuzzleHttp\\Cookie\\CookieJar::getCookieValue` is removed.\n- Request option `exceptions` is removed. Please use `http_errors`.\n- Request option `save_to` is removed. Please use `sink`.\n- Pool option `pool_size` is removed. Please use `concurrency`.\n- We now look for environment variables in the `$_SERVER` super global, due to thread safety issues with `getenv`. We continue to fallback to `getenv` in CLI environments, for maximum compatibility.\n- The `get`, `head`, `put`, `post`, `patch`, `delete`, `getAsync`, `headAsync`, `putAsync`, `postAsync`, `patchAsync`, and `deleteAsync` methods are now implemented as genuine methods on `GuzzleHttp\\Client`, with strong typing. The original `__call` implementation remains unchanged for now, for maximum backwards compatibility, but won't be invoked under normal operation.\n- The `log` middleware will log the errors with level `error` instead of `notice` \n- Support for international domain names (IDN) is now disabled by default, and enabling it requires installing ext-intl, linked against a modern version of the C library (ICU 4.6 or higher).\n\n#### Native functions calls\n\nAll internal native functions calls of Guzzle are now prefixed with a slash. This\nchange makes it impossible for method overloading by other libraries or applications.\nExample:\n\n```php\n// Before:\ncurl_version();\n\n// After:\n\\curl_version();\n```\n\nFor the full diff you can check [here](https://github.com/guzzle/guzzle/compare/6.5.4..master).\n\n5.0 to 6.0\n----------\n\nGuzzle now uses [PSR-7](https://www.php-fig.org/psr/psr-7/) for HTTP messages.\nDue to the fact that these messages are immutable, this prompted a refactoring\nof Guzzle to use a middleware based system rather than an event system. Any\nHTTP message interaction (e.g., `GuzzleHttp\\Message\\Request`) need to be\nupdated to work with the new immutable PSR-7 request and response objects. Any\nevent listeners or subscribers need to be updated to become middleware\nfunctions that wrap handlers (or are injected into a\n`GuzzleHttp\\HandlerStack`).\n\n- Removed `GuzzleHttp\\BatchResults`\n- Removed `GuzzleHttp\\Collection`\n- Removed `GuzzleHttp\\HasDataTrait`\n- Removed `GuzzleHttp\\ToArrayInterface`\n- The `guzzlehttp/streams` dependency has been removed. Stream functionality\n  is now present in the `GuzzleHttp\\Psr7` namespace provided by the\n  `guzzlehttp/psr7` package.\n- Guzzle no longer uses ReactPHP promises and now uses the\n  `guzzlehttp/promises` library. We use a custom promise library for three\n  significant reasons:\n  1. React promises (at the time of writing this) are recursive. Promise\n     chaining and promise resolution will eventually blow the stack.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4068, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a0f1fd04-4e68-495f-ae95-fd1afb5576bd": {"__data__": {"id_": "a0f1fd04-4e68-495f-ae95-fd1afb5576bd", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "87d56891-1197-46b8-9cf7-b77dc461eb16", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ed02da5ad55b3862d48724fc6a237986f23ed4fa0858e28526ca37bc4215f073", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "82daa5c7-81c7-4a8b-8993-feadeffe036c", "node_type": "1", "metadata": {}, "hash": "fbfca464ac1dcd8ff7d98783fb8d059c5f51fe2de2aa41819a30d8aff9a65af6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Any\nevent listeners or subscribers need to be updated to become middleware\nfunctions that wrap handlers (or are injected into a\n`GuzzleHttp\\HandlerStack`).\n\n- Removed `GuzzleHttp\\BatchResults`\n- Removed `GuzzleHttp\\Collection`\n- Removed `GuzzleHttp\\HasDataTrait`\n- Removed `GuzzleHttp\\ToArrayInterface`\n- The `guzzlehttp/streams` dependency has been removed. Stream functionality\n  is now present in the `GuzzleHttp\\Psr7` namespace provided by the\n  `guzzlehttp/psr7` package.\n- Guzzle no longer uses ReactPHP promises and now uses the\n  `guzzlehttp/promises` library. We use a custom promise library for three\n  significant reasons:\n  1. React promises (at the time of writing this) are recursive. Promise\n     chaining and promise resolution will eventually blow the stack. Guzzle\n     promises are not recursive as they use a sort of trampolining technique.\n     Note: there has been movement in the React project to modify promises to\n     no longer utilize recursion.\n  2. Guzzle needs to have the ability to synchronously block on a promise to\n     wait for a result. Guzzle promises allows this functionality (and does\n     not require the use of recursion).\n  3. Because we need to be able to wait on a result, doing so using React\n     promises requires wrapping react promises with RingPHP futures. This\n     overhead is no longer needed, reducing stack sizes, reducing complexity,\n     and improving performance.\n- `GuzzleHttp\\Mimetypes` has been moved to a function in\n  `GuzzleHttp\\Psr7\\mimetype_from_extension` and\n  `GuzzleHttp\\Psr7\\mimetype_from_filename`.\n- `GuzzleHttp\\Query` and `GuzzleHttp\\QueryParser` have been removed. Query\n  strings must now be passed into request objects as strings, or provided to\n  the `query` request option when creating requests with clients. The `query`\n  option uses PHP's `http_build_query` to convert an array to a string. If you\n  need a different serialization technique, you will need to pass the query\n  string in as a string. There are a couple helper functions that will make\n  working with query strings easier: `GuzzleHttp\\Psr7\\parse_query` and\n  `GuzzleHttp\\Psr7\\build_query`.\n- Guzzle no longer has a dependency on RingPHP. Due to the use of a middleware\n  system based on PSR-7, using RingPHP and it's middleware system as well adds\n  more complexity than the benefits it provides. All HTTP handlers that were\n  present in RingPHP have been modified to work directly with PSR-7 messages\n  and placed in the `GuzzleHttp\\Handler` namespace. This significantly reduces\n  complexity in Guzzle, removes a dependency, and improves performance. RingPHP\n  will be maintained for Guzzle 5 support, but will no longer be a part of\n  Guzzle 6.\n- As Guzzle now uses a middleware based systems the event system and RingPHP\n  integration has been removed. Note: while the event system has been removed,\n  it is possible to add your own type of event system that is powered by the\n  middleware system.\n  - Removed the `Event` namespace.\n  - Removed the `Subscriber` namespace.\n  - Removed `Transaction` class\n  - Removed `RequestFsm`\n  - Removed `RingBridge`\n  - `GuzzleHttp\\Subscriber\\Cookie` is now provided by\n    `GuzzleHttp\\Middleware::cookies`\n  - `GuzzleHttp\\Subscriber\\HttpError` is now provided by\n    `GuzzleHttp\\Middleware::httpError`\n  - `GuzzleHttp\\Subscriber\\History` is now provided by\n    `GuzzleHttp\\Middleware::history`\n  - `GuzzleHttp\\Subscriber\\Mock` is now provided by\n    `GuzzleHttp\\Handler\\MockHandler`\n  - `GuzzleHttp\\Subscriber\\Prepare` is now provided by\n    `GuzzleHttp\\PrepareBodyMiddleware`\n  - `GuzzleHttp\\Subscriber\\Redirect` is now provided by\n    `GuzzleHttp\\RedirectMiddleware`\n- Guzzle now uses `Psr\\Http\\Message\\UriInterface` (implements in\n  `GuzzleHttp\\Psr7\\Uri`) for URI support. `GuzzleHttp\\Url` is now gone.\n- Static functions in `GuzzleHttp\\Utils` have been moved to namespaced\n  functions under the `GuzzleHttp` namespace.", "mimetype": "text/plain", "start_char_idx": 3293, "end_char_idx": 7207, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "82daa5c7-81c7-4a8b-8993-feadeffe036c": {"__data__": {"id_": "82daa5c7-81c7-4a8b-8993-feadeffe036c", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a0f1fd04-4e68-495f-ae95-fd1afb5576bd", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2a0ab3af4ea8df36affc40a172428970cefde40810f047a67a235a92c538f20b", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7f29552f-2fa6-425c-b2db-37a3e570bf30", "node_type": "1", "metadata": {}, "hash": "c7ca7893b848fc4a8f0df71a3ff4024f936a0a6cb14a0f53d2c685bb1c7071b9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "`GuzzleHttp\\Url` is now gone.\n- Static functions in `GuzzleHttp\\Utils` have been moved to namespaced\n  functions under the `GuzzleHttp` namespace. This requires either a Composer\n  based autoloader or you to include functions.php.\n- `GuzzleHttp\\ClientInterface::getDefaultOption` has been renamed to\n  `GuzzleHttp\\ClientInterface::getConfig`.\n- `GuzzleHttp\\ClientInterface::setDefaultOption` has been removed.\n- The `json` and `xml` methods of response objects has been removed. With the\n  migration to strictly adhering to PSR-7 as the interface for Guzzle messages,\n  adding methods to message interfaces would actually require Guzzle messages\n  to extend from PSR-7 messages rather then work with them directly.\n\n## Migrating to middleware\n\nThe change to PSR-7 unfortunately required significant refactoring to Guzzle\ndue to the fact that PSR-7 messages are immutable. Guzzle 5 relied on an event\nsystem from plugins. The event system relied on mutability of HTTP messages and\nside effects in order to work. With immutable messages, you have to change your\nworkflow to become more about either returning a value (e.g., functional\nmiddlewares) or setting a value on an object. Guzzle v6 has chosen the\nfunctional middleware approach.\n\nInstead of using the event system to listen for things like the `before` event,\nyou now create a stack based middleware function that intercepts a request on\nthe way in and the promise of the response on the way out. This is a much\nsimpler and more predictable approach than the event system and works nicely\nwith PSR-7 middleware. Due to the use of promises, the middleware system is\nalso asynchronous.\n\nv5:\n\n```php\nuse GuzzleHttp\\Event\\BeforeEvent;\n$client = new GuzzleHttp\\Client();\n// Get the emitter and listen to the before event.\n$client->getEmitter()->on('before', function (BeforeEvent $e) {\n    // Guzzle v5 events relied on mutation\n    $e->getRequest()->setHeader('X-Foo', 'Bar');\n});\n```\n\nv6:\n\nIn v6, you can modify the request before it is sent using the `mapRequest`\nmiddleware. The idiomatic way in v6 to modify the request/response lifecycle is\nto setup a handler middleware stack up front and inject the handler into a\nclient.\n\n```php\nuse GuzzleHttp\\Middleware;\n// Create a handler stack that has all of the default middlewares attached\n$handler = GuzzleHttp\\HandlerStack::create();\n// Push the handler onto the handler stack\n$handler->push(Middleware::mapRequest(function (RequestInterface $request) {\n    // Notice that we have to return a request object\n    return $request->withHeader('X-Foo', 'Bar');\n}));\n// Inject the handler into the client\n$client = new GuzzleHttp\\Client(['handler' => $handler]);\n```\n\n## POST Requests\n\nThis version added the [`form_params`](https://docs.guzzlephp.org/en/latest/request-options.html#form_params)\nand `multipart` request options. `form_params` is an associative array of\nstrings or array of strings and is used to serialize an\n`application/x-www-form-urlencoded` POST request. The\n[`multipart`](https://docs.guzzlephp.org/en/latest/request-options.html#multipart)\noption is now used to send a multipart/form-data POST request.\n\n`GuzzleHttp\\Post\\PostFile` has been removed. Use the `multipart` option to add\nPOST files to a multipart/form-data request.\n\nThe `body` option no longer accepts an array to send POST requests. Please use\n`multipart` or `form_params` instead.\n\nThe `base_url` option has been renamed to `base_uri`.\n\n4.x to 5.0\n----------\n\n## Rewritten Adapter Layer\n\nGuzzle now uses [RingPHP](https://ringphp.readthedocs.org/en/latest) to send\nHTTP requests. The `adapter` option in a `GuzzleHttp\\Client` constructor\nis still supported, but it has now been renamed to `handler`. Instead of\npassing a `GuzzleHttp\\Adapter\\AdapterInterface`, you must now pass a PHP\n`callable` that follows the RingPHP specification.", "mimetype": "text/plain", "start_char_idx": 7061, "end_char_idx": 10882, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7f29552f-2fa6-425c-b2db-37a3e570bf30": {"__data__": {"id_": "7f29552f-2fa6-425c-b2db-37a3e570bf30", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "82daa5c7-81c7-4a8b-8993-feadeffe036c", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7a2e00d79f73afc42344e41c41c3d955125e65bec9ceb001a3ac08dbb91fd7ae", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "46df35c0-582f-43f0-b7fb-0dece7f1ea54", "node_type": "1", "metadata": {}, "hash": "b6ce81827748e5d7fc1d82de0295be0ceb00d707705dd85681d7ebf6b4e7f392", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "`GuzzleHttp\\Post\\PostFile` has been removed. Use the `multipart` option to add\nPOST files to a multipart/form-data request.\n\nThe `body` option no longer accepts an array to send POST requests. Please use\n`multipart` or `form_params` instead.\n\nThe `base_url` option has been renamed to `base_uri`.\n\n4.x to 5.0\n----------\n\n## Rewritten Adapter Layer\n\nGuzzle now uses [RingPHP](https://ringphp.readthedocs.org/en/latest) to send\nHTTP requests. The `adapter` option in a `GuzzleHttp\\Client` constructor\nis still supported, but it has now been renamed to `handler`. Instead of\npassing a `GuzzleHttp\\Adapter\\AdapterInterface`, you must now pass a PHP\n`callable` that follows the RingPHP specification.\n\n## Removed Fluent Interfaces\n\n[Fluent interfaces were removed](https://ocramius.github.io/blog/fluent-interfaces-are-evil/)\nfrom the following classes:\n\n- `GuzzleHttp\\Collection`\n- `GuzzleHttp\\Url`\n- `GuzzleHttp\\Query`\n- `GuzzleHttp\\Post\\PostBody`\n- `GuzzleHttp\\Cookie\\SetCookie`\n\n## Removed functions.php\n\nRemoved \"functions.php\", so that Guzzle is truly PSR-4 compliant. The following\nfunctions can be used as replacements.\n\n- `GuzzleHttp\\json_decode` -> `GuzzleHttp\\Utils::jsonDecode`\n- `GuzzleHttp\\get_path` -> `GuzzleHttp\\Utils::getPath`\n- `GuzzleHttp\\Utils::setPath` -> `GuzzleHttp\\set_path`\n- `GuzzleHttp\\Pool::batch` -> `GuzzleHttp\\batch`. This function is, however,\n  deprecated in favor of using `GuzzleHttp\\Pool::batch()`.\n\nThe \"procedural\" global client has been removed with no replacement (e.g.,\n`GuzzleHttp\\get()`, `GuzzleHttp\\post()`, etc.). Use a `GuzzleHttp\\Client`\nobject as a replacement.\n\n## `throwImmediately` has been removed\n\nThe concept of \"throwImmediately\" has been removed from exceptions and error\nevents. This control mechanism was used to stop a transfer of concurrent\nrequests from completing. This can now be handled by throwing the exception or\nby cancelling a pool of requests or each outstanding future request\nindividually.\n\n## headers event has been removed\n\nRemoved the \"headers\" event. This event was only useful for changing the\nbody a response once the headers of the response were known. You can implement\na similar behavior in a number of ways. One example might be to use a\nFnStream that has access to the transaction being sent. For example, when the\nfirst byte is written, you could check if the response headers match your\nexpectations, and if so, change the actual stream body that is being\nwritten to.\n\n## Updates to HTTP Messages\n\nRemoved the `asArray` parameter from\n`GuzzleHttp\\Message\\MessageInterface::getHeader`. If you want to get a header\nvalue as an array, then use the newly added `getHeaderAsArray()` method of\n`MessageInterface`. This change makes the Guzzle interfaces compatible with\nthe PSR-7 interfaces.\n\n3.x to 4.0\n----------\n\n## Overarching changes:\n\n- Now requires PHP 5.4 or greater.\n- No longer requires cURL to send requests.\n- Guzzle no longer wraps every exception it throws. Only exceptions that are\n  recoverable are now wrapped by Guzzle.\n- Various namespaces have been removed or renamed.\n- No longer requiring the Symfony EventDispatcher. A custom event dispatcher\n  based on the Symfony EventDispatcher is\n  now utilized in `GuzzleHttp\\Event\\EmitterInterface` (resulting in significant\n  speed and functionality improvements).\n\nChanges per Guzzle 3.x namespace are described below.\n\n## Batch\n\nThe `Guzzle\\Batch` namespace has been removed. This is best left to\nthird-parties to implement on top of Guzzle's core HTTP library.\n\n## Cache\n\nThe `Guzzle\\Cache` namespace has been removed. (Todo: No suitable replacement\nhas been implemented yet, but hoping to utilize a PSR cache interface).\n\n## Common\n\n- Removed all of the wrapped exceptions. It's better to use the standard PHP\n  library for unrecoverable exceptions.\n- `FromConfigInterface` has been removed.\n- `Guzzle\\Common\\Version` has been removed. The VERSION constant can be found\n  at `GuzzleHttp\\ClientInterface::VERSION`.\n\n### Collection\n\n- `getAll` has been removed.", "mimetype": "text/plain", "start_char_idx": 10187, "end_char_idx": 14189, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "46df35c0-582f-43f0-b7fb-0dece7f1ea54": {"__data__": {"id_": "46df35c0-582f-43f0-b7fb-0dece7f1ea54", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7f29552f-2fa6-425c-b2db-37a3e570bf30", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "61b2b6afc9b2ecdddb623cd78ef90905a439417e9f26d25b68695f2c1d6b2b44", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bdabbe82-6aa6-4faf-b6f5-edaefd9a38a7", "node_type": "1", "metadata": {}, "hash": "77b1170d8359a478c16a4690c59b3112d42dc2b374bb14fd26e7712b50935386", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Changes per Guzzle 3.x namespace are described below.\n\n## Batch\n\nThe `Guzzle\\Batch` namespace has been removed. This is best left to\nthird-parties to implement on top of Guzzle's core HTTP library.\n\n## Cache\n\nThe `Guzzle\\Cache` namespace has been removed. (Todo: No suitable replacement\nhas been implemented yet, but hoping to utilize a PSR cache interface).\n\n## Common\n\n- Removed all of the wrapped exceptions. It's better to use the standard PHP\n  library for unrecoverable exceptions.\n- `FromConfigInterface` has been removed.\n- `Guzzle\\Common\\Version` has been removed. The VERSION constant can be found\n  at `GuzzleHttp\\ClientInterface::VERSION`.\n\n### Collection\n\n- `getAll` has been removed. Use `toArray` to convert a collection to an array.\n- `inject` has been removed.\n- `keySearch` has been removed.\n- `getPath` no longer supports wildcard expressions. Use something better like\n  JMESPath for this.\n- `setPath` now supports appending to an existing array via the `[]` notation.\n\n### Events\n\nGuzzle no longer requires Symfony's EventDispatcher component. Guzzle now uses\n`GuzzleHttp\\Event\\Emitter`.\n\n- `Symfony\\Component\\EventDispatcher\\EventDispatcherInterface` is replaced by\n  `GuzzleHttp\\Event\\EmitterInterface`.\n- `Symfony\\Component\\EventDispatcher\\EventDispatcher` is replaced by\n  `GuzzleHttp\\Event\\Emitter`.\n- `Symfony\\Component\\EventDispatcher\\Event` is replaced by\n  `GuzzleHttp\\Event\\Event`, and Guzzle now has an EventInterface in\n  `GuzzleHttp\\Event\\EventInterface`.\n- `AbstractHasDispatcher` has moved to a trait, `HasEmitterTrait`, and\n  `HasDispatcherInterface` has moved to `HasEmitterInterface`. Retrieving the\n  event emitter of a request, client, etc. now uses the `getEmitter` method\n  rather than the `getDispatcher` method.\n\n#### Emitter\n\n- Use the `once()` method to add a listener that automatically removes itself\n  the first time it is invoked.\n- Use the `listeners()` method to retrieve a list of event listeners rather than\n  the `getListeners()` method.\n- Use `emit()` instead of `dispatch()` to emit an event from an emitter.\n- Use `attach()` instead of `addSubscriber()` and `detach()` instead of\n  `removeSubscriber()`.\n\n```php\n$mock = new Mock();\n// 3.x\n$request->getEventDispatcher()->addSubscriber($mock);\n$request->getEventDispatcher()->removeSubscriber($mock);\n// 4.x\n$request->getEmitter()->attach($mock);\n$request->getEmitter()->detach($mock);\n```\n\nUse the `on()` method to add a listener rather than the `addListener()` method.\n\n```php\n// 3.x\n$request->getEventDispatcher()->addListener('foo', function (Event $event) { /* ... */ } );\n// 4.x\n$request->getEmitter()->on('foo', function (Event $event, $name) { /* ... */ } );\n```\n\n## Http\n\n### General changes\n\n- The cacert.pem certificate has been moved to `src/cacert.pem`.\n- Added the concept of adapters that are used to transfer requests over the\n  wire.\n- Simplified the event system.\n- Sending requests in parallel is still possible, but batching is no longer a\n  concept of the HTTP layer. Instead, you must use the `complete` and `error`\n  events to asynchronously manage parallel request transfers.\n- `Guzzle\\Http\\Url` has moved to `GuzzleHttp\\Url`.\n- `Guzzle\\Http\\QueryString` has moved to `GuzzleHttp\\Query`.\n- QueryAggregators have been rewritten so that they are simply callable\n  functions.\n- `GuzzleHttp\\StaticClient` has been removed. Use the functions provided in\n  `functions.php` for an easy to use static client instance.\n- Exceptions in `GuzzleHttp\\Exception` have been updated to all extend from\n  `GuzzleHttp\\Exception\\TransferException`.\n\n### Client\n\nCalling methods like `get()`, `post()`, `head()`, etc. no longer create and\nreturn a request, but rather creates a request, sends the request, and returns\nthe response.\n\n```php\n// 3.0\n$request = $client->get('/');\n$response = $request->send();\n\n// 4.0\n$response = $client->get('/');\n\n// or, to mirror the previous behavior\n$request = $client->createRequest('GET', '/');\n$response = $client->send($request);\n```\n\n`GuzzleHttp\\ClientInterface` has changed.", "mimetype": "text/plain", "start_char_idx": 13492, "end_char_idx": 17520, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bdabbe82-6aa6-4faf-b6f5-edaefd9a38a7": {"__data__": {"id_": "bdabbe82-6aa6-4faf-b6f5-edaefd9a38a7", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "46df35c0-582f-43f0-b7fb-0dece7f1ea54", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "140a9515bde69a08f72f2e2afb1ef2e14eb9cc1665e6925b72ebe3dfe553566c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7c539327-0adf-4e25-ae04-cf1ca4df0551", "node_type": "1", "metadata": {}, "hash": "8940aa828592ff7222d6f5d929edd9ed6684eb84493ddf537bff3ad994b4f8e6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "- `GuzzleHttp\\StaticClient` has been removed. Use the functions provided in\n  `functions.php` for an easy to use static client instance.\n- Exceptions in `GuzzleHttp\\Exception` have been updated to all extend from\n  `GuzzleHttp\\Exception\\TransferException`.\n\n### Client\n\nCalling methods like `get()`, `post()`, `head()`, etc. no longer create and\nreturn a request, but rather creates a request, sends the request, and returns\nthe response.\n\n```php\n// 3.0\n$request = $client->get('/');\n$response = $request->send();\n\n// 4.0\n$response = $client->get('/');\n\n// or, to mirror the previous behavior\n$request = $client->createRequest('GET', '/');\n$response = $client->send($request);\n```\n\n`GuzzleHttp\\ClientInterface` has changed.\n\n- The `send` method no longer accepts more than one request. Use `sendAll` to\n  send multiple requests in parallel.\n- `setUserAgent()` has been removed. Use a default request option instead. You\n  could, for example, do something like:\n  `$client->setConfig('defaults/headers/User-Agent', 'Foo/Bar ' . $client::getDefaultUserAgent())`.\n- `setSslVerification()` has been removed. Use default request options instead,\n  like `$client->setConfig('defaults/verify', true)`.\n\n`GuzzleHttp\\Client` has changed.\n\n- The constructor now accepts only an associative array. You can include a\n  `base_url` string or array to use a URI template as the base URL of a client.\n  You can also specify a `defaults` key that is an associative array of default\n  request options. You can pass an `adapter` to use a custom adapter,\n  `batch_adapter` to use a custom adapter for sending requests in parallel, or\n  a `message_factory` to change the factory used to create HTTP requests and\n  responses.\n- The client no longer emits a `client.create_request` event.\n- Creating requests with a client no longer automatically utilize a URI\n  template. You must pass an array into a creational method (e.g.,\n  `createRequest`, `get`, `put`, etc.) in order to expand a URI template.\n\n### Messages\n\nMessages no longer have references to their counterparts (i.e., a request no\nlonger has a reference to it's response, and a response no loger has a\nreference to its request). This association is now managed through a\n`GuzzleHttp\\Adapter\\TransactionInterface` object. You can get references to\nthese transaction objects using request events that are emitted over the\nlifecycle of a request.\n\n#### Requests with a body\n\n- `GuzzleHttp\\Message\\EntityEnclosingRequest` and\n  `GuzzleHttp\\Message\\EntityEnclosingRequestInterface` have been removed. The\n  separation between requests that contain a body and requests that do not\n  contain a body has been removed, and now `GuzzleHttp\\Message\\RequestInterface`\n  handles both use cases.\n- Any method that previously accepts a `GuzzleHttp\\Response` object now accept a\n  `GuzzleHttp\\Message\\ResponseInterface`.\n- `GuzzleHttp\\Message\\RequestFactoryInterface` has been renamed to\n  `GuzzleHttp\\Message\\MessageFactoryInterface`. This interface is used to create\n  both requests and responses and is implemented in\n  `GuzzleHttp\\Message\\MessageFactory`.\n- POST field and file methods have been removed from the request object. You\n  must now use the methods made available to `GuzzleHttp\\Post\\PostBodyInterface`\n  to control the format of a POST body. Requests that are created using a\n  standard `GuzzleHttp\\Message\\MessageFactoryInterface` will automatically use\n  a `GuzzleHttp\\Post\\PostBody` body if the body was passed as an array or if\n  the method is POST and no body is provided.\n\n```php\n$request = $client->createRequest('POST', '/');\n$request->getBody()->setField('foo', 'bar');\n$request->getBody()->addFile(new PostFile('file_key', fopen('/path/to/content', 'r')));\n```\n\n#### Headers\n\n- `GuzzleHttp\\Message\\Header` has been removed. Header values are now simply\n  represented by an array of values or as a string. Header values are returned\n  as a string by default when retrieving a header value from a message. You can\n  pass an optional argument of `true` to retrieve a header value as an array\n  of strings instead of a single concatenated string.", "mimetype": "text/plain", "start_char_idx": 16797, "end_char_idx": 20889, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7c539327-0adf-4e25-ae04-cf1ca4df0551": {"__data__": {"id_": "7c539327-0adf-4e25-ae04-cf1ca4df0551", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bdabbe82-6aa6-4faf-b6f5-edaefd9a38a7", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a51bc426d3d6d03f814f7706eb2bcc9686db17434ef269ebd93d91a8bde8c6d4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b2c5f6e0-c579-4ac3-aa46-32e26c979319", "node_type": "1", "metadata": {}, "hash": "034f86e0dbb22b9b2e91c707dd10a2bd821e40c4ae7ce38db75424b75980454f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Requests that are created using a\n  standard `GuzzleHttp\\Message\\MessageFactoryInterface` will automatically use\n  a `GuzzleHttp\\Post\\PostBody` body if the body was passed as an array or if\n  the method is POST and no body is provided.\n\n```php\n$request = $client->createRequest('POST', '/');\n$request->getBody()->setField('foo', 'bar');\n$request->getBody()->addFile(new PostFile('file_key', fopen('/path/to/content', 'r')));\n```\n\n#### Headers\n\n- `GuzzleHttp\\Message\\Header` has been removed. Header values are now simply\n  represented by an array of values or as a string. Header values are returned\n  as a string by default when retrieving a header value from a message. You can\n  pass an optional argument of `true` to retrieve a header value as an array\n  of strings instead of a single concatenated string.\n- `GuzzleHttp\\PostFile` and `GuzzleHttp\\PostFileInterface` have been moved to\n  `GuzzleHttp\\Post`. This interface has been simplified and now allows the\n  addition of arbitrary headers.\n- Custom headers like `GuzzleHttp\\Message\\Header\\Link` have been removed. Most\n  of the custom headers are now handled separately in specific\n  subscribers/plugins, and `GuzzleHttp\\Message\\HeaderValues::parseParams()` has\n  been updated to properly handle headers that contain parameters (like the\n  `Link` header).\n\n#### Responses\n\n- `GuzzleHttp\\Message\\Response::getInfo()` and\n  `GuzzleHttp\\Message\\Response::setInfo()` have been removed. Use the event\n  system to retrieve this type of information.\n- `GuzzleHttp\\Message\\Response::getRawHeaders()` has been removed.\n- `GuzzleHttp\\Message\\Response::getMessage()` has been removed.\n- `GuzzleHttp\\Message\\Response::calculateAge()` and other cache specific\n  methods have moved to the CacheSubscriber.\n- Header specific helper functions like `getContentMd5()` have been removed.\n  Just use `getHeader('Content-MD5')` instead.\n- `GuzzleHttp\\Message\\Response::setRequest()` and\n  `GuzzleHttp\\Message\\Response::getRequest()` have been removed. Use the event\n  system to work with request and response objects as a transaction.\n- `GuzzleHttp\\Message\\Response::getRedirectCount()` has been removed. Use the\n  Redirect subscriber instead.\n- `GuzzleHttp\\Message\\Response::isSuccessful()` and other related methods have\n  been removed. Use `getStatusCode()` instead.\n\n#### Streaming responses\n\nStreaming requests can now be created by a client directly, returning a\n`GuzzleHttp\\Message\\ResponseInterface` object that contains a body stream\nreferencing an open PHP HTTP stream.\n\n```php\n// 3.0\nuse Guzzle\\Stream\\PhpStreamRequestFactory;\n$request = $client->get('/');\n$factory = new PhpStreamRequestFactory();\n$stream = $factory->fromRequest($request);\n$data = $stream->read(1024);\n\n// 4.0\n$response = $client->get('/', ['stream' => true]);\n// Read some data off of the stream in the response body\n$data = $response->getBody()->read(1024);\n```\n\n#### Redirects\n\nThe `configureRedirects()` method has been removed in favor of a\n`allow_redirects` request option.\n\n```php\n// Standard redirects with a default of a max of 5 redirects\n$request = $client->createRequest('GET', '/', ['allow_redirects' => true]);\n\n// Strict redirects with a custom number of redirects\n$request = $client->createRequest('GET', '/', [\n    'allow_redirects' => ['max' => 5, 'strict' => true]\n]);\n```\n\n#### EntityBody\n\nEntityBody interfaces and classes have been removed or moved to\n`GuzzleHttp\\Stream`. All classes and interfaces that once required\n`GuzzleHttp\\EntityBodyInterface` now require\n`GuzzleHttp\\Stream\\StreamInterface`. Creating a new body for a request no\nlonger uses `GuzzleHttp\\EntityBody::factory` but now uses\n`GuzzleHttp\\Stream\\Stream::factory` or even better:\n`GuzzleHttp\\Stream\\create()`.", "mimetype": "text/plain", "start_char_idx": 20079, "end_char_idx": 23794, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b2c5f6e0-c579-4ac3-aa46-32e26c979319": {"__data__": {"id_": "b2c5f6e0-c579-4ac3-aa46-32e26c979319", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "7c539327-0adf-4e25-ae04-cf1ca4df0551", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2ee1022be2be5ecc8fda35475015c87e1ecb148c154d866a81da78b90bc7b7f5", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "eff232ee-145d-4c04-a46f-3458567d8767", "node_type": "1", "metadata": {}, "hash": "19b930d806cb2e5c7da40b42e98897dfdba3ccbdc39520a518590afe7fe65155", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "```php\n// Standard redirects with a default of a max of 5 redirects\n$request = $client->createRequest('GET', '/', ['allow_redirects' => true]);\n\n// Strict redirects with a custom number of redirects\n$request = $client->createRequest('GET', '/', [\n    'allow_redirects' => ['max' => 5, 'strict' => true]\n]);\n```\n\n#### EntityBody\n\nEntityBody interfaces and classes have been removed or moved to\n`GuzzleHttp\\Stream`. All classes and interfaces that once required\n`GuzzleHttp\\EntityBodyInterface` now require\n`GuzzleHttp\\Stream\\StreamInterface`. Creating a new body for a request no\nlonger uses `GuzzleHttp\\EntityBody::factory` but now uses\n`GuzzleHttp\\Stream\\Stream::factory` or even better:\n`GuzzleHttp\\Stream\\create()`.\n\n- `Guzzle\\Http\\EntityBodyInterface` is now `GuzzleHttp\\Stream\\StreamInterface`\n- `Guzzle\\Http\\EntityBody` is now `GuzzleHttp\\Stream\\Stream`\n- `Guzzle\\Http\\CachingEntityBody` is now `GuzzleHttp\\Stream\\CachingStream`\n- `Guzzle\\Http\\ReadLimitEntityBody` is now `GuzzleHttp\\Stream\\LimitStream`\n- `Guzzle\\Http\\IoEmittyinEntityBody` has been removed.\n\n#### Request lifecycle events\n\nRequests previously submitted a large number of requests. The number of events\nemitted over the lifecycle of a request has been significantly reduced to make\nit easier to understand how to extend the behavior of a request. All events\nemitted during the lifecycle of a request now emit a custom\n`GuzzleHttp\\Event\\EventInterface` object that contains context providing\nmethods and a way in which to modify the transaction at that specific point in\ntime (e.g., intercept the request and set a response on the transaction).\n\n- `request.before_send` has been renamed to `before` and now emits a\n  `GuzzleHttp\\Event\\BeforeEvent`\n- `request.complete` has been renamed to `complete` and now emits a\n  `GuzzleHttp\\Event\\CompleteEvent`.\n- `request.sent` has been removed. Use `complete`.\n- `request.success` has been removed. Use `complete`.\n- `error` is now an event that emits a `GuzzleHttp\\Event\\ErrorEvent`.\n- `request.exception` has been removed. Use `error`.\n- `request.receive.status_line` has been removed.\n- `curl.callback.progress` has been removed. Use a custom `StreamInterface` to\n  maintain a status update.\n- `curl.callback.write` has been removed. Use a custom `StreamInterface` to\n  intercept writes.\n- `curl.callback.read` has been removed. Use a custom `StreamInterface` to\n  intercept reads.\n\n`headers` is a new event that is emitted after the response headers of a\nrequest have been received before the body of the response is downloaded. This\nevent emits a `GuzzleHttp\\Event\\HeadersEvent`.\n\nYou can intercept a request and inject a response using the `intercept()` event\nof a `GuzzleHttp\\Event\\BeforeEvent`, `GuzzleHttp\\Event\\CompleteEvent`, and\n`GuzzleHttp\\Event\\ErrorEvent` event.\n\nSee: https://docs.guzzlephp.org/en/latest/events.html\n\n## Inflection\n\nThe `Guzzle\\Inflection` namespace has been removed. This is not a core concern\nof Guzzle.\n\n## Iterator\n\nThe `Guzzle\\Iterator` namespace has been removed.\n\n- `Guzzle\\Iterator\\AppendIterator`, `Guzzle\\Iterator\\ChunkedIterator`, and\n  `Guzzle\\Iterator\\MethodProxyIterator` are nice, but not a core requirement of\n  Guzzle itself.\n- `Guzzle\\Iterator\\FilterIterator` is no longer needed because an equivalent\n  class is shipped with PHP 5.4.\n- `Guzzle\\Iterator\\MapIterator` is not really needed when using PHP 5.5 because\n  it's easier to just wrap an iterator in a generator that maps values.\n\nFor a replacement of these iterators, see https://github.com/nikic/iter\n\n## Log\n\nThe LogPlugin has moved to https://github.com/guzzle/log-subscriber. The\n`Guzzle\\Log` namespace has been removed. Guzzle now relies on\n`Psr\\Log\\LoggerInterface` for all logging. The MessageFormatter class has been\nmoved to `GuzzleHttp\\Subscriber\\Log\\Formatter`.\n\n## Parser\n\nThe `Guzzle\\Parser` namespace has been removed.", "mimetype": "text/plain", "start_char_idx": 23076, "end_char_idx": 26931, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eff232ee-145d-4c04-a46f-3458567d8767": {"__data__": {"id_": "eff232ee-145d-4c04-a46f-3458567d8767", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b2c5f6e0-c579-4ac3-aa46-32e26c979319", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0f905ae7a995601aa25447a4a9c4e348e68c82478da761290d835340ce622f9c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1d2e3a0d-6317-4791-adbe-8f06694002c3", "node_type": "1", "metadata": {}, "hash": "2f3853cea9f997adce9c19ca8a7029e0fc7ec08bf2f64565d1cced52df9be25e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "- `Guzzle\\Iterator\\FilterIterator` is no longer needed because an equivalent\n  class is shipped with PHP 5.4.\n- `Guzzle\\Iterator\\MapIterator` is not really needed when using PHP 5.5 because\n  it's easier to just wrap an iterator in a generator that maps values.\n\nFor a replacement of these iterators, see https://github.com/nikic/iter\n\n## Log\n\nThe LogPlugin has moved to https://github.com/guzzle/log-subscriber. The\n`Guzzle\\Log` namespace has been removed. Guzzle now relies on\n`Psr\\Log\\LoggerInterface` for all logging. The MessageFormatter class has been\nmoved to `GuzzleHttp\\Subscriber\\Log\\Formatter`.\n\n## Parser\n\nThe `Guzzle\\Parser` namespace has been removed. This was previously used to\nmake it possible to plug in custom parsers for cookies, messages, URI\ntemplates, and URLs; however, this level of complexity is not needed in Guzzle\nso it has been removed.\n\n- Cookie: Cookie parsing logic has been moved to\n  `GuzzleHttp\\Cookie\\SetCookie::fromString`.\n- Message: Message parsing logic for both requests and responses has been moved\n  to `GuzzleHttp\\Message\\MessageFactory::fromMessage`. Message parsing is only\n  used in debugging or deserializing messages, so it doesn't make sense for\n  Guzzle as a library to add this level of complexity to parsing messages.\n- UriTemplate: URI template parsing has been moved to\n  `GuzzleHttp\\UriTemplate`. The Guzzle library will automatically use the PECL\n  URI template library if it is installed.\n- Url: URL parsing is now performed in `GuzzleHttp\\Url::fromString` (previously\n  it was `Guzzle\\Http\\Url::factory()`). If custom URL parsing is necessary,\n  then developers are free to subclass `GuzzleHttp\\Url`.\n\n## Plugin\n\nThe `Guzzle\\Plugin` namespace has been renamed to `GuzzleHttp\\Subscriber`.\nSeveral plugins are shipping with the core Guzzle library under this namespace.\n\n- `GuzzleHttp\\Subscriber\\Cookie`: Replaces the old CookiePlugin. Cookie jar\n  code has moved to `GuzzleHttp\\Cookie`.\n- `GuzzleHttp\\Subscriber\\History`: Replaces the old HistoryPlugin.\n- `GuzzleHttp\\Subscriber\\HttpError`: Throws errors when a bad HTTP response is\n  received.\n- `GuzzleHttp\\Subscriber\\Mock`: Replaces the old MockPlugin.\n- `GuzzleHttp\\Subscriber\\Prepare`: Prepares the body of a request just before\n  sending. This subscriber is attached to all requests by default.\n- `GuzzleHttp\\Subscriber\\Redirect`: Replaces the RedirectPlugin.\n\nThe following plugins have been removed (third-parties are free to re-implement\nthese if needed):\n\n- `GuzzleHttp\\Plugin\\Async` has been removed.\n- `GuzzleHttp\\Plugin\\CurlAuth` has been removed.\n- `GuzzleHttp\\Plugin\\ErrorResponse\\ErrorResponsePlugin` has been removed. This\n  functionality should instead be implemented with event listeners that occur\n  after normal response parsing occurs in the guzzle/command package.\n\nThe following plugins are not part of the core Guzzle package, but are provided\nin separate repositories:\n\n- `Guzzle\\Http\\Plugin\\BackoffPlugin` has been rewritten to be much simpler\n  to build custom retry policies using simple functions rather than various\n  chained classes. See: https://github.com/guzzle/retry-subscriber\n- `Guzzle\\Http\\Plugin\\Cache\\CachePlugin` has moved to\n  https://github.com/guzzle/cache-subscriber\n- `Guzzle\\Http\\Plugin\\Log\\LogPlugin` has moved to\n  https://github.com/guzzle/log-subscriber\n- `Guzzle\\Http\\Plugin\\Md5\\Md5Plugin` has moved to\n  https://github.com/guzzle/message-integrity-subscriber\n- `Guzzle\\Http\\Plugin\\Mock\\MockPlugin` has moved to\n  `GuzzleHttp\\Subscriber\\MockSubscriber`.\n- `Guzzle\\Http\\Plugin\\Oauth\\OauthPlugin` has moved to\n  https://github.com/guzzle/oauth-subscriber\n\n## Service\n\nThe service description layer of Guzzle has moved into two separate packages:\n\n- https://github.com/guzzle/command Provides a high level abstraction over web\n  services by representing web service operations using commands.\n- https://github.com/guzzle/guzzle-services Provides an implementation of\n  guzzle/command that provides request serialization and response parsing using\n  Guzzle service descriptions.\n\n## Stream\n\nStream have moved to a separate package available at\nhttps://github.com/guzzle/streams.", "mimetype": "text/plain", "start_char_idx": 26266, "end_char_idx": 30402, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1d2e3a0d-6317-4791-adbe-8f06694002c3": {"__data__": {"id_": "1d2e3a0d-6317-4791-adbe-8f06694002c3", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eff232ee-145d-4c04-a46f-3458567d8767", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4988b7397b7a006f8ca371fe4d522e2737f1c4402397763488728676587cd392", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a155c5fc-d860-4df1-97bf-b222f835bf33", "node_type": "1", "metadata": {}, "hash": "47b7c72be6646c6a2283d497fe20c961aba3dcda0de048232ab5f5023f990e69", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "- `Guzzle\\Http\\Plugin\\Oauth\\OauthPlugin` has moved to\n  https://github.com/guzzle/oauth-subscriber\n\n## Service\n\nThe service description layer of Guzzle has moved into two separate packages:\n\n- https://github.com/guzzle/command Provides a high level abstraction over web\n  services by representing web service operations using commands.\n- https://github.com/guzzle/guzzle-services Provides an implementation of\n  guzzle/command that provides request serialization and response parsing using\n  Guzzle service descriptions.\n\n## Stream\n\nStream have moved to a separate package available at\nhttps://github.com/guzzle/streams.\n\n`Guzzle\\Stream\\StreamInterface` has been given a large update to cleanly take\non the responsibilities of `Guzzle\\Http\\EntityBody` and\n`Guzzle\\Http\\EntityBodyInterface` now that they have been removed. The number\nof methods implemented by the `StreamInterface` has been drastically reduced to\nallow developers to more easily extend and decorate stream behavior.\n\n## Removed methods from StreamInterface\n\n- `getStream` and `setStream` have been removed to better encapsulate streams.\n- `getMetadata` and `setMetadata` have been removed in favor of\n  `GuzzleHttp\\Stream\\MetadataStreamInterface`.\n- `getWrapper`, `getWrapperData`, `getStreamType`, and `getUri` have all been\n  removed. This data is accessible when\n  using streams that implement `GuzzleHttp\\Stream\\MetadataStreamInterface`.\n- `rewind` has been removed. Use `seek(0)` for a similar behavior.\n\n## Renamed methods\n\n- `detachStream` has been renamed to `detach`.\n- `feof` has been renamed to `eof`.\n- `ftell` has been renamed to `tell`.\n- `readLine` has moved from an instance method to a static class method of\n  `GuzzleHttp\\Stream\\Stream`.\n\n## Metadata streams\n\n`GuzzleHttp\\Stream\\MetadataStreamInterface` has been added to denote streams\nthat contain additional metadata accessible via `getMetadata()`.\n`GuzzleHttp\\Stream\\StreamInterface::getMetadata` and\n`GuzzleHttp\\Stream\\StreamInterface::setMetadata` have been removed.\n\n## StreamRequestFactory\n\nThe entire concept of the StreamRequestFactory has been removed. The way this\nwas used in Guzzle 3 broke the actual interface of sending streaming requests\n(instead of getting back a Response, you got a StreamInterface). Streaming\nPHP requests are now implemented through the `GuzzleHttp\\Adapter\\StreamAdapter`.\n\n3.6 to 3.7\n----------\n\n### Deprecations\n\n- You can now enable E_USER_DEPRECATED warnings to see if you are using any deprecated methods.:\n\n```php\n\\Guzzle\\Common\\Version::$emitWarnings = true;\n```\n\nThe following APIs and options have been marked as deprecated:\n\n- Marked `Guzzle\\Http\\Message\\Request::isResponseBodyRepeatable()` as deprecated. Use `$request->getResponseBody()->isRepeatable()` instead.\n- Marked `Guzzle\\Http\\Message\\Request::canCache()` as deprecated. Use `Guzzle\\Plugin\\Cache\\DefaultCanCacheStrategy->canCacheRequest()` instead.\n- Marked `Guzzle\\Http\\Message\\Request::canCache()` as deprecated. Use `Guzzle\\Plugin\\Cache\\DefaultCanCacheStrategy->canCacheRequest()` instead.\n- Marked `Guzzle\\Http\\Message\\Request::setIsRedirect()` as deprecated. Use the HistoryPlugin instead.\n- Marked `Guzzle\\Http\\Message\\Request::isRedirect()` as deprecated. Use the HistoryPlugin instead.\n- Marked `Guzzle\\Cache\\CacheAdapterFactory::factory()` as deprecated\n- Marked `Guzzle\\Service\\Client::enableMagicMethods()` as deprecated. Magic methods can no longer be disabled on a Guzzle\\Service\\Client.\n- Marked `Guzzle\\Parser\\Url\\UrlParser` as deprecated. Just use PHP's `parse_url()` and percent encode your UTF-8.\n- Marked `Guzzle\\Common\\Collection::inject()` as deprecated.\n- Marked `Guzzle\\Plugin\\CurlAuth\\CurlAuthPlugin` as deprecated. Use\n  `$client->getConfig()->setPath('request.options/auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));` or\n  `$client->setDefaultOption('auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));`\n\n3.7 introduces `request.options` as a parameter for a client configuration and as an optional argument to all creational\nrequest methods. When paired with a client's configuration settings, these options allow you to specify default settings\nfor various aspects of a request.", "mimetype": "text/plain", "start_char_idx": 29782, "end_char_idx": 33943, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a155c5fc-d860-4df1-97bf-b222f835bf33": {"__data__": {"id_": "a155c5fc-d860-4df1-97bf-b222f835bf33", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1d2e3a0d-6317-4791-adbe-8f06694002c3", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "72fdb6ee2566708341ac43322300a6b0c56891f6616f151448a7393234f94053", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "2d6e8521-dccd-4ae4-b171-83510eaa4e39", "node_type": "1", "metadata": {}, "hash": "d981dd1266c7520a4f9d8c55bff949503ac87abba062d0c5cf61115874556a93", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Magic methods can no longer be disabled on a Guzzle\\Service\\Client.\n- Marked `Guzzle\\Parser\\Url\\UrlParser` as deprecated. Just use PHP's `parse_url()` and percent encode your UTF-8.\n- Marked `Guzzle\\Common\\Collection::inject()` as deprecated.\n- Marked `Guzzle\\Plugin\\CurlAuth\\CurlAuthPlugin` as deprecated. Use\n  `$client->getConfig()->setPath('request.options/auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));` or\n  `$client->setDefaultOption('auth', array('user', 'pass', 'Basic|Digest|NTLM|Any'));`\n\n3.7 introduces `request.options` as a parameter for a client configuration and as an optional argument to all creational\nrequest methods. When paired with a client's configuration settings, these options allow you to specify default settings\nfor various aspects of a request. Because these options make other previous configuration options redundant, several\nconfiguration options and methods of a client and AbstractCommand have been deprecated.\n\n- Marked `Guzzle\\Service\\Client::getDefaultHeaders()` as deprecated. Use `$client->getDefaultOption('headers')`.\n- Marked `Guzzle\\Service\\Client::setDefaultHeaders()` as deprecated. Use `$client->setDefaultOption('headers/{header_name}', 'value')`.\n- Marked 'request.params' for `Guzzle\\Http\\Client` as deprecated. Use `$client->setDefaultOption('params/{param_name}', 'value')`\n- Marked 'command.headers', 'command.response_body' and 'command.on_complete' as deprecated for AbstractCommand. These will work through Guzzle 4.0\n\n        $command = $client->getCommand('foo', array(\n            'command.headers' => array('Test' => '123'),\n            'command.response_body' => '/path/to/file'\n        ));\n\n        // Should be changed to:\n\n        $command = $client->getCommand('foo', array(\n            'command.request_options' => array(\n                'headers' => array('Test' => '123'),\n                'save_as' => '/path/to/file'\n            )\n        ));\n\n### Interface changes\n\nAdditions and changes (you will need to update any implementations or subclasses you may have created):\n\n- Added an `$options` argument to the end of the following methods of `Guzzle\\Http\\ClientInterface`:\n  createRequest, head, delete, put, patch, post, options, prepareRequest\n- Added an `$options` argument to the end of `Guzzle\\Http\\Message\\Request\\RequestFactoryInterface::createRequest()`\n- Added an `applyOptions()` method to `Guzzle\\Http\\Message\\Request\\RequestFactoryInterface`\n- Changed `Guzzle\\Http\\ClientInterface::get($uri = null, $headers = null, $body = null)` to\n  `Guzzle\\Http\\ClientInterface::get($uri = null, $headers = null, $options = array())`. You can still pass in a\n  resource, string, or EntityBody into the $options parameter to specify the download location of the response.\n- Changed `Guzzle\\Common\\Collection::__construct($data)` to no longer accepts a null value for `$data` but a\n  default `array()`\n- Added `Guzzle\\Stream\\StreamInterface::isRepeatable`\n- Made `Guzzle\\Http\\Client::expandTemplate` and `getUriTemplate` protected methods.\n\nThe following methods were removed from interfaces. All of these methods are still available in the concrete classes\nthat implement them, but you should update your code to use alternative methods:\n\n- Removed `Guzzle\\Http\\ClientInterface::setDefaultHeaders(). Use\n  `$client->getConfig()->setPath('request.options/headers/{header_name}', 'value')`. or\n  `$client->getConfig()->setPath('request.options/headers', array('header_name' => 'value'))` or\n  `$client->setDefaultOption('headers/{header_name}', 'value')`. or\n  `$client->setDefaultOption('headers', array('header_name' => 'value'))`.\n- Removed `Guzzle\\Http\\ClientInterface::getDefaultHeaders(). Use `$client->getConfig()->getPath('request.options/headers')`.\n- Removed `Guzzle\\Http\\ClientInterface::expandTemplate()`. This is an implementation detail.\n- Removed `Guzzle\\Http\\ClientInterface::setRequestFactory()`. This is an implementation detail.\n- Removed `Guzzle\\Http\\ClientInterface::getCurlMulti()`. This is a very specific implementation detail.\n- Removed `Guzzle\\Http\\Message\\RequestInterface::canCache`. Use the CachePlugin.\n- Removed `Guzzle\\Http\\Message\\RequestInterface::setIsRedirect`. Use the HistoryPlugin.", "mimetype": "text/plain", "start_char_idx": 33159, "end_char_idx": 37354, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2d6e8521-dccd-4ae4-b171-83510eaa4e39": {"__data__": {"id_": "2d6e8521-dccd-4ae4-b171-83510eaa4e39", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "a155c5fc-d860-4df1-97bf-b222f835bf33", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "db09364d56b4dcc93e091b25aed6cf773afb851ded8c47ce1ffee4e5d8b39ad4", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "050a3a2c-5acd-41d0-9cec-3cd69a81e1a2", "node_type": "1", "metadata": {}, "hash": "fe6fc6fe49a4205f746c72e910da709a3c6fb306483ba09eef9d8b9092f850cb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "or\n  `$client->getConfig()->setPath('request.options/headers', array('header_name' => 'value'))` or\n  `$client->setDefaultOption('headers/{header_name}', 'value')`. or\n  `$client->setDefaultOption('headers', array('header_name' => 'value'))`.\n- Removed `Guzzle\\Http\\ClientInterface::getDefaultHeaders(). Use `$client->getConfig()->getPath('request.options/headers')`.\n- Removed `Guzzle\\Http\\ClientInterface::expandTemplate()`. This is an implementation detail.\n- Removed `Guzzle\\Http\\ClientInterface::setRequestFactory()`. This is an implementation detail.\n- Removed `Guzzle\\Http\\ClientInterface::getCurlMulti()`. This is a very specific implementation detail.\n- Removed `Guzzle\\Http\\Message\\RequestInterface::canCache`. Use the CachePlugin.\n- Removed `Guzzle\\Http\\Message\\RequestInterface::setIsRedirect`. Use the HistoryPlugin.\n- Removed `Guzzle\\Http\\Message\\RequestInterface::isRedirect`. Use the HistoryPlugin.\n\n### Cache plugin breaking changes\n\n- CacheKeyProviderInterface and DefaultCacheKeyProvider are no longer used. All of this logic is handled in a\n  CacheStorageInterface. These two objects and interface will be removed in a future version.\n- Always setting X-cache headers on cached responses\n- Default cache TTLs are now handled by the CacheStorageInterface of a CachePlugin\n- `CacheStorageInterface::cache($key, Response $response, $ttl = null)` has changed to `cache(RequestInterface\n  $request, Response $response);`\n- `CacheStorageInterface::fetch($key)` has changed to `fetch(RequestInterface $request);`\n- `CacheStorageInterface::delete($key)` has changed to `delete(RequestInterface $request);`\n- Added `CacheStorageInterface::purge($url)`\n- `DefaultRevalidation::__construct(CacheKeyProviderInterface $cacheKey, CacheStorageInterface $cache, CachePlugin\n  $plugin)` has changed to `DefaultRevalidation::__construct(CacheStorageInterface $cache,\n  CanCacheStrategyInterface $canCache = null)`\n- Added `RevalidationInterface::shouldRevalidate(RequestInterface $request, Response $response)`\n\n3.5 to 3.6\n----------\n\n* Mixed casing of headers are now forced to be a single consistent casing across all values for that header.\n* Messages internally use a HeaderCollection object to delegate handling case-insensitive header resolution\n* Removed the whole changedHeader() function system of messages because all header changes now go through addHeader().\n  For example, setHeader() first removes the header using unset on a HeaderCollection and then calls addHeader().\n  Keeping the Host header and URL host in sync is now handled by overriding the addHeader method in Request.\n* Specific header implementations can be created for complex headers. When a message creates a header, it uses a\n  HeaderFactory which can map specific headers to specific header classes. There is now a Link header and\n  CacheControl header implementation.\n* Moved getLinks() from Response to just be used on a Link header object.\n\nIf you previously relied on Guzzle\\Http\\Message\\Header::raw(), then you will need to update your code to use the\nHeaderInterface (e.g. toArray(), getAll(), etc.).\n\n### Interface changes\n\n* Removed from interface: Guzzle\\Http\\ClientInterface::setUriTemplate\n* Removed from interface: Guzzle\\Http\\ClientInterface::setCurlMulti()\n* Removed Guzzle\\Http\\Message\\Request::receivedRequestHeader() and implemented this functionality in\n  Guzzle\\Http\\Curl\\RequestMediator\n* Removed the optional $asString parameter from MessageInterface::getHeader(). Just cast the header to a string.\n* Removed the optional $tryChunkedTransfer option from Guzzle\\Http\\Message\\EntityEnclosingRequestInterface\n* Removed the $asObjects argument from Guzzle\\Http\\Message\\MessageInterface::getHeaders()\n\n### Removed deprecated functions\n\n* Removed Guzzle\\Parser\\ParserRegister::get(). Use getParser()\n* Removed Guzzle\\Parser\\ParserRegister::set(). Use registerParser().\n\n### Deprecations\n\n* The ability to case-insensitively search for header values\n* Guzzle\\Http\\Message\\Header::hasExactHeader\n* Guzzle\\Http\\Message\\Header::raw. Use getAll()\n* Deprecated cache control specific methods on Guzzle\\Http\\Message\\AbstractMessage. Use the CacheControl header object\n  instead.\n\n### Other changes\n\n* All response header helper functions return a string rather than mixing Header objects and strings inconsistently\n* Removed cURL blacklist support. This is no longer necessary now that Expect, Accept, etc. are managed by Guzzle\n  directly via interfaces\n* Removed the injecting of a request object onto a response object.", "mimetype": "text/plain", "start_char_idx": 36525, "end_char_idx": 41039, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "050a3a2c-5acd-41d0-9cec-3cd69a81e1a2": {"__data__": {"id_": "050a3a2c-5acd-41d0-9cec-3cd69a81e1a2", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "2d6e8521-dccd-4ae4-b171-83510eaa4e39", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f8eb283d3419a14f9e35d615865d96a3f08ded29e33622e308e00dbbc0c327f9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4be1b1ed-39f6-4529-a24c-d4bb392953ca", "node_type": "1", "metadata": {}, "hash": "dfc3ba296822b13646a75090e13d8a26d3d046989514e00b026d536eb2bdff39", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Use getParser()\n* Removed Guzzle\\Parser\\ParserRegister::set(). Use registerParser().\n\n### Deprecations\n\n* The ability to case-insensitively search for header values\n* Guzzle\\Http\\Message\\Header::hasExactHeader\n* Guzzle\\Http\\Message\\Header::raw. Use getAll()\n* Deprecated cache control specific methods on Guzzle\\Http\\Message\\AbstractMessage. Use the CacheControl header object\n  instead.\n\n### Other changes\n\n* All response header helper functions return a string rather than mixing Header objects and strings inconsistently\n* Removed cURL blacklist support. This is no longer necessary now that Expect, Accept, etc. are managed by Guzzle\n  directly via interfaces\n* Removed the injecting of a request object onto a response object. The methods to get and set a request still exist\n  but are a no-op until removed.\n* Most classes that used to require a `Guzzle\\Service\\Command\\CommandInterface` typehint now request a\n  `Guzzle\\Service\\Command\\ArrayCommandInterface`.\n* Added `Guzzle\\Http\\Message\\RequestInterface::startResponse()` to the RequestInterface to handle injecting a response\n  on a request while the request is still being transferred\n* `Guzzle\\Service\\Command\\CommandInterface` now extends from ToArrayInterface and ArrayAccess\n\n3.3 to 3.4\n----------\n\nBase URLs of a client now follow the rules of https://datatracker.ietf.org/doc/html/rfc3986#section-5.2.2 when merging URLs.\n\n3.2 to 3.3\n----------\n\n### Response::getEtag() quote stripping removed\n\n`Guzzle\\Http\\Message\\Response::getEtag()` no longer strips quotes around the ETag response header\n\n### Removed `Guzzle\\Http\\Utils`\n\nThe `Guzzle\\Http\\Utils` class was removed. This class was only used for testing.\n\n### Stream wrapper and type\n\n`Guzzle\\Stream\\Stream::getWrapper()` and `Guzzle\\Stream\\Stream::getStreamType()` are no longer converted to lowercase.\n\n### curl.emit_io became emit_io\n\nEmitting IO events from a RequestMediator is now a parameter that must be set in a request's curl options using the\n'emit_io' key. This was previously set under a request's parameters using 'curl.emit_io'\n\n3.1 to 3.2\n----------\n\n### CurlMulti is no longer reused globally\n\nBefore 3.2, the same CurlMulti object was reused globally for each client. This can cause issue where plugins added\nto a single client can pollute requests dispatched from other clients.\n\nIf you still wish to reuse the same CurlMulti object with each client, then you can add a listener to the\nServiceBuilder's `service_builder.create_client` event to inject a custom CurlMulti object into each client as it is\ncreated.\n\n```php\n$multi = new Guzzle\\Http\\Curl\\CurlMulti();\n$builder = Guzzle\\Service\\Builder\\ServiceBuilder::factory('/path/to/config.json');\n$builder->addListener('service_builder.create_client', function ($event) use ($multi) {\n    $event['client']->setCurlMulti($multi);\n}\n});\n```\n\n### No default path\n\nURLs no longer have a default path value of '/' if no path was specified.\n\nBefore:\n\n```php\n$request = $client->get('http://www.foo.com');\necho $request->getUrl();\n// >> http://www.foo.com/\n```\n\nAfter:\n\n```php\n$request = $client->get('http://www.foo.com');\necho $request->getUrl();\n// >> http://www.foo.com\n```\n\n### Less verbose BadResponseException\n\nThe exception message for `Guzzle\\Http\\Exception\\BadResponseException` no longer contains the full HTTP request and\nresponse information. You can, however, get access to the request and response object by calling `getRequest()` or\n`getResponse()` on the exception object.\n\n### Query parameter aggregation\n\nMulti-valued query parameters are no longer aggregated using a callback function. `Guzzle\\Http\\Query` now has a\nsetAggregator() method that accepts a `Guzzle\\Http\\QueryAggregator\\QueryAggregatorInterface` object. This object is\nresponsible for handling the aggregation of multi-valued query string variables into a flattened hash.", "mimetype": "text/plain", "start_char_idx": 40308, "end_char_idx": 44143, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4be1b1ed-39f6-4529-a24c-d4bb392953ca": {"__data__": {"id_": "4be1b1ed-39f6-4529-a24c-d4bb392953ca", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "050a3a2c-5acd-41d0-9cec-3cd69a81e1a2", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "785bd02348d04b97cad4251bff740abb9a09940f2e08d8cccf920685262c1508", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8fb8d2ed-f17e-4393-b005-ff3049397ab2", "node_type": "1", "metadata": {}, "hash": "e1a0524c6a345ef107a575d13a69270ee0a938cec969d960337b41e3fb93bfc0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "You can, however, get access to the request and response object by calling `getRequest()` or\n`getResponse()` on the exception object.\n\n### Query parameter aggregation\n\nMulti-valued query parameters are no longer aggregated using a callback function. `Guzzle\\Http\\Query` now has a\nsetAggregator() method that accepts a `Guzzle\\Http\\QueryAggregator\\QueryAggregatorInterface` object. This object is\nresponsible for handling the aggregation of multi-valued query string variables into a flattened hash.\n\n2.8 to 3.x\n----------\n\n### Guzzle\\Service\\Inspector\n\nChange `\\Guzzle\\Service\\Inspector::fromConfig` to `\\Guzzle\\Common\\Collection::fromConfig`\n\n**Before**\n\n```php\nuse Guzzle\\Service\\Inspector;\n\nclass YourClient extends \\Guzzle\\Service\\Client\n{\n    public static function factory($config = array())\n    {\n        $default = array();\n        $required = array('base_url', 'username', 'api_key');\n        $config = Inspector::fromConfig($config, $default, $required);\n\n        $client = new self(\n            $config->get('base_url'),\n            $config->get('username'),\n            $config->get('api_key')\n        );\n        $client->setConfig($config);\n\n        $client->setDescription(ServiceDescription::factory(__DIR__ . DIRECTORY_SEPARATOR . 'client.json'));\n\n        return $client;\n    }\n```\n\n**After**\n\n```php\nuse Guzzle\\Common\\Collection;\n\nclass YourClient extends \\Guzzle\\Service\\Client\n{\n    public static function factory($config = array())\n    {\n        $default = array();\n        $required = array('base_url', 'username', 'api_key');\n        $config = Collection::fromConfig($config, $default, $required);\n\n        $client = new self(\n            $config->get('base_url'),\n            $config->get('username'),\n            $config->get('api_key')\n        );\n        $client->setConfig($config);\n\n        $client->setDescription(ServiceDescription::factory(__DIR__ . DIRECTORY_SEPARATOR . 'client.json'));\n\n        return $client;\n    }\n```\n\n### Convert XML Service Descriptions to JSON\n\n**Before**\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<client>\n    <commands>\n        <!-- Groups -->\n        <command name=\"list_groups\" method=\"GET\" uri=\"groups.json\">\n            <doc>Get a list of groups</doc>\n        </command>\n        <command name=\"search_groups\" method=\"GET\" uri='search.json?query=\"{{query}} type:group\"'>\n            <doc>Uses a search query to get a list of groups</doc>\n            <param name=\"query\" type=\"string\" required=\"true\" />\n        </command>\n        <command name=\"create_group\" method=\"POST\" uri=\"groups.json\">\n            <doc>Create a group</doc>\n            <param name=\"data\" type=\"array\" location=\"body\" filters=\"json_encode\" doc=\"Group JSON\"/>\n            <param name=\"Content-Type\" location=\"header\" static=\"application/json\"/>\n        </command>\n        <command name=\"delete_group\" method=\"DELETE\" uri=\"groups/{{id}}.json\">\n            <doc>Delete a group by ID</doc>\n            <param name=\"id\" type=\"integer\" required=\"true\"/>\n        </command>\n        <command name=\"get_group\" method=\"GET\" uri=\"groups/{{id}}.json\">\n            <param name=\"id\" type=\"integer\" required=\"true\"/>\n        </command>\n        <command name=\"update_group\" method=\"PUT\" uri=\"groups/{{id}}.json\">\n            <doc>Update a group</doc>\n            <param name=\"id\" type=\"integer\" required=\"true\"/>\n            <param name=\"data\" type=\"array\" location=\"body\" filters=\"json_encode\" doc=\"Group JSON\"/>\n            <param name=\"Content-Type\" location=\"header\" static=\"application/json\"/>\n        </command>\n    </commands>\n</client>\n```\n\n**After**\n\n```json\n{\n    \"name\":       \"Zendesk REST API v2\",\n    \"apiVersion\": \"2012-12-31\",\n    \"description\":\"Provides access to Zendesk views, groups, tickets, ticket fields, and users\",\n    \"operations\": {\n        \"list_groups\":  {\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"groups.json\",\n            \"summary\":   \"Get a list of groups\"\n        },\n        \"search_groups\":{\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"search.json?query=\\\"{query} type:group\\\"\",", "mimetype": "text/plain", "start_char_idx": 43645, "end_char_idx": 47711, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8fb8d2ed-f17e-4393-b005-ff3049397ab2": {"__data__": {"id_": "8fb8d2ed-f17e-4393-b005-ff3049397ab2", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4be1b1ed-39f6-4529-a24c-d4bb392953ca", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "80ac01bb9ddf0c1705a59658721725cf1001b99b615ea7ef37786a0328f9e4d2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d08c5d0d-5e39-4345-98c3-56ed3bdbc005", "node_type": "1", "metadata": {}, "hash": "0506ae3e52a49da3d5cf772491a53122cba065b9d57366e4e576fb6b5a61c07c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"apiVersion\": \"2012-12-31\",\n    \"description\":\"Provides access to Zendesk views, groups, tickets, ticket fields, and users\",\n    \"operations\": {\n        \"list_groups\":  {\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"groups.json\",\n            \"summary\":   \"Get a list of groups\"\n        },\n        \"search_groups\":{\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"search.json?query=\\\"{query} type:group\\\"\",\n            \"summary\":   \"Uses a search query to get a list of groups\",\n            \"parameters\":{\n                \"query\":{\n                    \"location\":   \"uri\",\n                    \"description\":\"Zendesk Search Query\",\n                    \"type\":       \"string\",\n                    \"required\":   true\n                }\n            }\n        },\n        \"create_group\": {\n            \"httpMethod\":\"POST\",\n            \"uri\":       \"groups.json\",\n            \"summary\":   \"Create a group\",\n            \"parameters\":{\n                \"data\":        {\n                    \"type\":       \"array\",\n                    \"location\":   \"body\",\n                    \"description\":\"Group JSON\",\n                    \"filters\":    \"json_encode\",\n                    \"required\":   true\n                },\n                \"Content-Type\":{\n                    \"type\":    \"string\",\n                    \"location\":\"header\",\n                    \"static\":  \"application/json\"\n                }\n            }\n        },\n        \"delete_group\": {\n            \"httpMethod\":\"DELETE\",\n            \"uri\":       \"groups/{id}.json\",\n            \"summary\":   \"Delete a group\",\n            \"parameters\":{\n                \"id\":{\n                    \"location\":   \"uri\",\n                    \"description\":\"Group to delete by ID\",\n                    \"type\":       \"integer\",\n                    \"required\":   true\n                }\n            }\n        },\n        \"get_group\":    {\n            \"httpMethod\":\"GET\",\n            \"uri\":       \"groups/{id}.json\",\n            \"summary\":   \"Get a ticket\",\n            \"parameters\":{\n                \"id\":{\n                    \"location\":   \"uri\",\n                    \"description\":\"Group to get by ID\",\n                    \"type\":       \"integer\",\n                    \"required\":   true\n                }\n            }\n        },\n        \"update_group\": {\n            \"httpMethod\":\"PUT\",\n            \"uri\":       \"groups/{id}.json\",\n            \"summary\":   \"Update a group\",\n            \"parameters\":{\n                \"id\":          {\n                    \"location\":   \"uri\",\n                    \"description\":\"Group to update by ID\",\n                    \"type\":       \"integer\",\n                    \"required\":   true\n                },\n                \"data\":        {\n                    \"type\":       \"array\",\n                    \"location\":   \"body\",\n                    \"description\":\"Group JSON\",\n                    \"filters\":    \"json_encode\",\n                    \"required\":   true\n                },\n                \"Content-Type\":{\n                    \"type\":    \"string\",\n                    \"location\":\"header\",\n                    \"static\":  \"application/json\"\n                }\n            }\n        }\n}\n```\n\n### Guzzle\\Service\\Description\\ServiceDescription\n\nCommands are now called Operations\n\n**Before**\n\n```php\nuse Guzzle\\Service\\Description\\ServiceDescription;\n\n$sd = new ServiceDescription();\n$sd->getCommands();     // @returns ApiCommandInterface[]\n$sd->hasCommand($name);\n$sd->getCommand($name); // @returns ApiCommandInterface|null\n$sd->addCommand($command); // @param ApiCommandInterface $command\n```\n\n**After**\n\n```php\nuse Guzzle\\Service\\Description\\ServiceDescription;\n\n$sd = new ServiceDescription();\n$sd->getOperations();           // @returns OperationInterface[]\n$sd->hasOperation($name);\n$sd->getOperation($name);       // @returns OperationInterface|null\n$sd->addOperation($operation);  // @param OperationInterface $operation\n```\n\n### Guzzle\\Common\\Inflection\\Inflector\n\nNamespace is now `Guzzle\\Inflection\\Inflector`\n\n### Guzzle\\Http\\Plugin\n\nNamespace is now `Guzzle\\Plugin`. Many other changes occur within this namespace and are detailed in their own sections below.\n\n### Guzzle\\Http\\Plugin\\LogPlugin and Guzzle\\Common\\Log\n\nNow `Guzzle\\Plugin\\Log\\LogPlugin` and `Guzzle\\Log` respectively.", "mimetype": "text/plain", "start_char_idx": 47283, "end_char_idx": 51554, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d08c5d0d-5e39-4345-98c3-56ed3bdbc005": {"__data__": {"id_": "d08c5d0d-5e39-4345-98c3-56ed3bdbc005", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6a60889db2c0a7a064b267f28c65ac364d964ae35822b772e7a38061917b9ecc", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8fb8d2ed-f17e-4393-b005-ff3049397ab2", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/UPGRADING.md", "file_name": "UPGRADING.md", "file_size": 53625, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0727df6454972a459e9e392f58ef04c04d1de1b4d39c581873d3da66782f2a71", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "$sd->getCommand($name); // @returns ApiCommandInterface|null\n$sd->addCommand($command); // @param ApiCommandInterface $command\n```\n\n**After**\n\n```php\nuse Guzzle\\Service\\Description\\ServiceDescription;\n\n$sd = new ServiceDescription();\n$sd->getOperations();           // @returns OperationInterface[]\n$sd->hasOperation($name);\n$sd->getOperation($name);       // @returns OperationInterface|null\n$sd->addOperation($operation);  // @param OperationInterface $operation\n```\n\n### Guzzle\\Common\\Inflection\\Inflector\n\nNamespace is now `Guzzle\\Inflection\\Inflector`\n\n### Guzzle\\Http\\Plugin\n\nNamespace is now `Guzzle\\Plugin`. Many other changes occur within this namespace and are detailed in their own sections below.\n\n### Guzzle\\Http\\Plugin\\LogPlugin and Guzzle\\Common\\Log\n\nNow `Guzzle\\Plugin\\Log\\LogPlugin` and `Guzzle\\Log` respectively.\n\n**Before**\n\n```php\nuse Guzzle\\Common\\Log\\ClosureLogAdapter;\nuse Guzzle\\Http\\Plugin\\LogPlugin;\n\n/** @var \\Guzzle\\Http\\Client */\n$client;\n\n// $verbosity is an integer indicating desired message verbosity level\n$client->addSubscriber(new LogPlugin(new ClosureLogAdapter(function($m) { echo $m; }, $verbosity = LogPlugin::LOG_VERBOSE);\n```\n\n**After**\n\n```php\nuse Guzzle\\Log\\ClosureLogAdapter;\nuse Guzzle\\Log\\MessageFormatter;\nuse Guzzle\\Plugin\\Log\\LogPlugin;\n\n/** @var \\Guzzle\\Http\\Client */\n$client;\n\n// $format is a string indicating desired message format -- @see MessageFormatter\n$client->addSubscriber(new LogPlugin(new ClosureLogAdapter(function($m) { echo $m; }, $format = MessageFormatter::DEBUG_FORMAT);\n```\n\n### Guzzle\\Http\\Plugin\\CurlAuthPlugin\n\nNow `Guzzle\\Plugin\\CurlAuth\\CurlAuthPlugin`.\n\n### Guzzle\\Http\\Plugin\\ExponentialBackoffPlugin\n\nNow `Guzzle\\Plugin\\Backoff\\BackoffPlugin`, and other changes.\n\n**Before**\n\n```php\nuse Guzzle\\Http\\Plugin\\ExponentialBackoffPlugin;\n\n$backoffPlugin = new ExponentialBackoffPlugin($maxRetries, array_merge(\n        ExponentialBackoffPlugin::getDefaultFailureCodes(), array(429)\n    ));\n\n$client->addSubscriber($backoffPlugin);\n```\n\n**After**\n\n```php\nuse Guzzle\\Plugin\\Backoff\\BackoffPlugin;\nuse Guzzle\\Plugin\\Backoff\\HttpBackoffStrategy;\n\n// Use convenient factory method instead -- see implementation for ideas of what\n// you can do with chaining backoff strategies\n$backoffPlugin = BackoffPlugin::getExponentialBackoff($maxRetries, array_merge(\n        HttpBackoffStrategy::getDefaultFailureCodes(), array(429)\n    ));\n$client->addSubscriber($backoffPlugin);\n```\n\n### Known Issues\n\n#### [BUG] Accept-Encoding header behavior changed unintentionally.\n\n(See #217) (Fixed in 09daeb8c666fb44499a0646d655a8ae36456575e)\n\nIn version 2.8 setting the `Accept-Encoding` header would set the CURLOPT_ENCODING option, which permitted cURL to\nproperly handle gzip/deflate compressed responses from the server. In versions affected by this bug this does not happen.\nSee issue #217 for a workaround, or use a version containing the fix.", "mimetype": "text/plain", "start_char_idx": 50724, "end_char_idx": 53624, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "600c4618-12db-4492-9f3a-fea59e67fe56": {"__data__": {"id_": "600c4618-12db-4492-9f3a-fea59e67fe56", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 3868, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "11ef7807-b134-4d02-b8c4-66e21dc4facf", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 3868, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "95e5ff3c5782b07f1c7234c52850486a99ae3fc2d41c075279ec959bf4620c76", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ff55eb6b-664b-44a0-8e1e-b3e6d4cf7b22", "node_type": "1", "metadata": {}, "hash": "07594cc986c9b89cb2bcb9bf1b7f552ece1f435f58656471ce0bb6b295929403", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"guzzlehttp/guzzle\",\n    \"description\": \"Guzzle is a PHP HTTP client library\",\n    \"keywords\": [\n        \"framework\",\n        \"http\",\n        \"rest\",\n        \"web service\",\n        \"curl\",\n        \"client\",\n        \"HTTP client\",\n        \"PSR-7\",\n        \"PSR-18\"\n    ],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Graham Campbell\",\n            \"email\": \"hello@gjcampbell.co.uk\",\n            \"homepage\": \"https://github.com/GrahamCampbell\"\n        },\n        {\n            \"name\": \"Michael Dowling\",\n            \"email\": \"mtdowling@gmail.com\",\n            \"homepage\": \"https://github.com/mtdowling\"\n        },\n        {\n            \"name\": \"Jeremy Lindblom\",\n            \"email\": \"jeremeamia@gmail.com\",\n            \"homepage\": \"https://github.com/jeremeamia\"\n        },\n        {\n            \"name\": \"George Mponos\",\n            \"email\": \"gmponos@gmail.com\",\n            \"homepage\": \"https://github.com/gmponos\"\n        },\n        {\n            \"name\": \"Tobias Nyholm\",\n            \"email\": \"tobias.nyholm@gmail.com\",\n            \"homepage\": \"https://github.com/Nyholm\"\n        },\n        {\n            \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n            \"email\": \"mark.sagikazar@gmail.com\",\n            \"homepage\": \"https://github.com/sagikazarmark\"\n        },\n        {\n            \"name\": \"Tobias Schultze\",\n            \"email\": \"webmaster@tubo-world.de\",\n            \"homepage\": \"https://github.com/Tobion\"\n        }\n    ],\n    \"repositories\": [\n        {\n            \"type\": \"package\",\n            \"package\": {\n                \"name\": \"guzzle/client-integration-tests\",\n                \"version\": \"v3.0.2\",\n                \"dist\": {\n                    \"url\": \"https://codeload.github.com/guzzle/client-integration-tests/zip/2c025848417c1135031fdf9c728ee53d0a7ceaee\",\n                    \"type\": \"zip\"\n                },\n                \"require\": {\n                    \"php\": \"^7.2.5 || ^8.0\",\n                    \"phpunit/phpunit\": \"^7.5.20 || ^8.5.8 || ^9.3.11\",\n                    \"php-http/message\": \"^1.0 || ^2.0\",\n                    \"guzzlehttp/psr7\": \"^1.7 || ^2.0\",\n                    \"th3n3rd/cartesian-product\": \"^0.3\"\n                },\n                \"autoload\": {\n                    \"psr-4\": {\n                        \"Http\\\\Client\\\\Tests\\\\\": \"src/\"\n                    }\n                },\n                \"bin\": [\n                    \"bin/http_test_server\"\n                ]\n            }\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2.5 || ^8.0\",\n        \"ext-json\": \"*\",\n        \"guzzlehttp/promises\": \"^1.5.3 || ^2.0.3\",\n        \"guzzlehttp/psr7\": \"^2.7.0\",\n        \"psr/http-client\": \"^1.0\",\n        \"symfony/deprecation-contracts\": \"^2.2 || ^3.0\"\n    },\n    \"provide\": {\n        \"psr/http-client-implementation\": \"1.0\"\n    },\n    \"require-dev\": {\n        \"ext-curl\": \"*\",\n        \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n        \"guzzle/client-integration-tests\": \"3.0.2\",\n        \"php-http/message-factory\": \"^1.1\",\n        \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\",\n        \"psr/log\": \"^1.1 || ^2.0 || ^3.0\"\n    },\n    \"suggest\": {\n        \"ext-curl\": \"Required for CURL handler support\",\n        \"ext-intl\": \"Required for Internationalized Domain Name (IDN) support\",\n        \"psr/log\": \"Required for using the Log middleware\"\n    },", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3301, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ff55eb6b-664b-44a0-8e1e-b3e6d4cf7b22": {"__data__": {"id_": "ff55eb6b-664b-44a0-8e1e-b3e6d4cf7b22", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 3868, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "11ef7807-b134-4d02-b8c4-66e21dc4facf", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 3868, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "95e5ff3c5782b07f1c7234c52850486a99ae3fc2d41c075279ec959bf4620c76", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "600c4618-12db-4492-9f3a-fea59e67fe56", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/guzzle/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 3868, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2d10773c24041d421e3ec4753b3290e23ac3f2d095ff6ff3e258f0cd450a3f07", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "2 || ^3.0\"\n    },\n    \"provide\": {\n        \"psr/http-client-implementation\": \"1.0\"\n    },\n    \"require-dev\": {\n        \"ext-curl\": \"*\",\n        \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n        \"guzzle/client-integration-tests\": \"3.0.2\",\n        \"php-http/message-factory\": \"^1.1\",\n        \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\",\n        \"psr/log\": \"^1.1 || ^2.0 || ^3.0\"\n    },\n    \"suggest\": {\n        \"ext-curl\": \"Required for CURL handler support\",\n        \"ext-intl\": \"Required for Internationalized Domain Name (IDN) support\",\n        \"psr/log\": \"Required for using the Log middleware\"\n    },\n    \"config\": {\n        \"allow-plugins\": {\n            \"bamarni/composer-bin-plugin\": true\n        },\n        \"preferred-install\": \"dist\",\n        \"sort-packages\": true\n    },\n    \"extra\": {\n        \"bamarni-bin\": {\n            \"bin-links\": true,\n            \"forward-command\": false\n        }\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"GuzzleHttp\\\\\": \"src/\"\n        },\n        \"files\": [\n            \"src/functions_include.php\"\n        ]\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"GuzzleHttp\\\\Tests\\\\\": \"tests/\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 2703, "end_char_idx": 3864, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ebf8969f-7afc-48b9-8288-2d621c0d609b": {"__data__": {"id_": "ebf8969f-7afc-48b9-8288-2d621c0d609b", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/promises/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 2797, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fad0ded2-aa29-424b-87b8-9b44781ad117", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/promises/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 2797, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "aa864b141cfd9452a6f976b652c0ca814dca7a98417283335afe44b4ce563262", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# CHANGELOG\n\n\n## 2.2.0 - 2025-03-27\n\n### Fixed\n\n- Revert \"Allow an empty EachPromise to be resolved by running the queue\"\n\n\n## 2.1.0 - 2025-03-27\n\n### Added\n\n- Allow an empty EachPromise to be resolved by running the queue\n\n\n## 2.0.4 - 2024-10-17\n\n### Fixed\n\n- Once settled, don't allow further rejection of additional promises\n\n\n## 2.0.3 - 2024-07-18\n\n### Changed\n\n- PHP 8.4 support\n\n\n## 2.0.2 - 2023-12-03\n\n### Changed\n\n- Replaced `call_user_func*` with native calls\n\n\n## 2.0.1 - 2023-08-03\n\n### Changed\n\n- PHP 8.3 support\n\n\n## 2.0.0 - 2023-05-21\n\n### Added\n\n- Added PHP 7 type hints\n\n### Changed\n\n- All previously non-final non-exception classes have been marked as soft-final\n\n### Removed\n\n- Dropped PHP < 7.2 support\n- All functions in the `GuzzleHttp\\Promise` namespace\n\n\n## 1.5.3 - 2023-05-21\n\n### Changed\n\n- Removed remaining usage of deprecated functions\n\n\n## 1.5.2 - 2022-08-07\n\n### Changed\n\n- Officially support PHP 8.2\n\n\n## 1.5.1 - 2021-10-22\n\n### Fixed\n\n- Revert \"Call handler when waiting on fulfilled/rejected Promise\"\n- Fix pool memory leak when empty array of promises provided\n\n\n## 1.5.0 - 2021-10-07\n\n### Changed\n\n- Call handler when waiting on fulfilled/rejected Promise\n- Officially support PHP 8.1\n\n### Fixed\n\n- Fix manually settle promises generated with `Utils::task`\n\n\n## 1.4.1 - 2021-02-18\n\n### Fixed\n\n- Fixed `each_limit` skipping promises and failing\n\n\n## 1.4.0 - 2020-09-30\n\n### Added\n\n- Support for PHP 8\n- Optional `$recursive` flag to `all`\n- Replaced functions by static methods\n\n### Fixed\n\n- Fix empty `each` processing\n- Fix promise handling for Iterators of non-unique keys\n- Fixed `method_exists` crashes on PHP 8\n- Memory leak on exceptions\n\n\n## 1.3.1 - 2016-12-20\n\n### Fixed\n\n- `wait()` foreign promise compatibility\n\n\n## 1.3.0 - 2016-11-18\n\n### Added\n\n- Adds support for custom task queues.\n\n### Fixed\n\n- Fixed coroutine promise memory leak.\n\n\n## 1.2.0 - 2016-05-18\n\n### Changed\n\n- Update to now catch `\\Throwable` on PHP 7+\n\n\n## 1.1.0 - 2016-03-07\n\n### Changed\n\n- Update EachPromise to prevent recurring on a iterator when advancing, as this\n  could trigger fatal generator errors.\n- Update Promise to allow recursive waiting without unwrapping exceptions.\n\n\n## 1.0.3 - 2015-10-15\n\n### Changed\n\n- Update EachPromise to immediately resolve when the underlying promise iterator\n  is empty. Previously, such a promise would throw an exception when its `wait`\n  function was called.\n\n\n## 1.0.2 - 2015-05-15\n\n### Changed\n\n- Conditionally require functions.php.\n\n\n## 1.0.1 - 2015-06-24\n\n### Changed\n\n- Updating EachPromise to call next on the underlying promise iterator as late\n  as possible to ensure that generators that generate new requests based on\n  callbacks are not iterated until after callbacks are invoked.\n\n\n## 1.0.0 - 2015-05-12\n\n- Initial release", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2796, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "287bd5d2-0491-44fb-98a3-3f844aa8177e": {"__data__": {"id_": "287bd5d2-0491-44fb-98a3-3f844aa8177e", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/promises/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1493, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bc77d36d-3e81-49b9-b152-a30b13439e1f", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/promises/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1493, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "57c3bd1335e91ff466fa1b7934a18fd45266a7864db07370b382af9ebd60bbbe", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"guzzlehttp/promises\",\n    \"description\": \"Guzzle promises library\",\n    \"keywords\": [\"promise\"],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Graham Campbell\",\n            \"email\": \"hello@gjcampbell.co.uk\",\n            \"homepage\": \"https://github.com/GrahamCampbell\"\n        },\n        {\n            \"name\": \"Michael Dowling\",\n            \"email\": \"mtdowling@gmail.com\",\n            \"homepage\": \"https://github.com/mtdowling\"\n        },\n        {\n            \"name\": \"Tobias Nyholm\",\n            \"email\": \"tobias.nyholm@gmail.com\",\n            \"homepage\": \"https://github.com/Nyholm\"\n        },\n        {\n            \"name\": \"Tobias Schultze\",\n            \"email\": \"webmaster@tubo-world.de\",\n            \"homepage\": \"https://github.com/Tobion\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2.5 || ^8.0\"\n    },\n    \"require-dev\": {\n        \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n        \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"GuzzleHttp\\\\Promise\\\\\": \"src/\"\n        }\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"GuzzleHttp\\\\Promise\\\\Tests\\\\\": \"tests/\"\n        }\n    },\n    \"extra\": {\n        \"bamarni-bin\": {\n            \"bin-links\": true,\n            \"forward-command\": false\n        }\n    },\n    \"config\": {\n        \"allow-plugins\": {\n            \"bamarni/composer-bin-plugin\": true\n        },\n        \"preferred-install\": \"dist\",\n        \"sort-packages\": true\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1492, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "82fe0e89-540f-4e62-9e12-b2d1e199fbec": {"__data__": {"id_": "82fe0e89-540f-4e62-9e12-b2d1e199fbec", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "868c4bca3a1cec0e22c6f0a9071a754be4cc9295658e4828286e89e71fb530de", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "193c224d-f3bc-4eaa-bd35-ed70fbb56ede", "node_type": "1", "metadata": {}, "hash": "f038a013ac26262139e73f1094102baa3f1ec28ab7e4901fea0e492f469ce548", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Change Log\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 251, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "193c224d-f3bc-4eaa-bd35-ed70fbb56ede": {"__data__": {"id_": "193c224d-f3bc-4eaa-bd35-ed70fbb56ede", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "868c4bca3a1cec0e22c6f0a9071a754be4cc9295658e4828286e89e71fb530de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "82fe0e89-540f-4e62-9e12-b2d1e199fbec", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e2e6e07b4ef7d4be2379ce8c72501b205f8a85257d8f2c2057d45c536237c33e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "bab72163-74e4-44dc-93d6-aa0117fa0796", "node_type": "1", "metadata": {}, "hash": "1608c3eef08943984d6c0da87ba6a32943d1df1b461ab163357aff03f9d7300f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Change Log\n\nAll notable changes to this project will be documented in this file.\n\nThe format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)\nand this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).\n\n## 2.7.1 - 2025-03-27\n\n### Fixed\n\n- Fixed uppercase IPv6 addresses in URI\n\n### Changed\n\n- Improve uploaded file error message\n\n## 2.7.0 - 2024-07-18\n\n### Added\n\n- Add `Utils::redactUserInfo()` method\n- Add ability to encode bools as ints in `Query::build`\n\n## 2.6.3 - 2024-07-18\n\n### Fixed\n\n- Make `StreamWrapper::stream_stat()` return `false` if inner stream's size is `null` \n\n### Changed\n\n- PHP 8.4 support\n\n## 2.6.2 - 2023-12-03\n\n### Fixed\n\n- Fixed another issue with the fact that PHP transforms numeric strings in array keys to ints\n\n### Changed\n\n- Updated links in docs to their canonical versions\n- Replaced `call_user_func*` with native calls\n\n## 2.6.1 - 2023-08-27\n\n### Fixed\n\n- Properly handle the fact that PHP transforms numeric strings in array keys to ints\n\n## 2.6.0 - 2023-08-03\n\n### Changed\n\n- Updated the mime type map to add some new entries, fix a couple of invalid entries, and remove an invalid entry\n- Fallback to `application/octet-stream` if we are unable to guess the content type for a multipart file upload\n\n## 2.5.1 - 2023-08-03\n\n### Fixed\n\n- Corrected mime type for `.acc` files to `audio/aac`\n\n### Changed\n\n- PHP 8.3 support\n\n## 2.5.0 - 2023-04-17\n\n### Changed\n\n- Adjusted `psr/http-message` version constraint to `^1.1 || ^2.0`\n\n## 2.4.5 - 2023-04-17\n\n### Fixed\n\n- Prevent possible warnings on unset variables in `ServerRequest::normalizeNestedFileSpec`\n- Fixed `Message::bodySummary` when `preg_match` fails\n- Fixed header validation issue\n\n## 2.4.4 - 2023-03-09\n\n### Changed\n\n- Removed the need for `AllowDynamicProperties` in `LazyOpenStream`\n\n## 2.4.3 - 2022-10-26\n\n### Changed\n\n- Replaced `sha1(uniqid())` by `bin2hex(random_bytes(20))`\n\n## 2.4.2 - 2022-10-25\n\n### Fixed\n\n- Fixed erroneous behaviour when combining host and relative path\n\n## 2.4.1 - 2022-08-28\n\n### Fixed\n\n- Rewind body before reading in `Message::bodySummary`\n\n## 2.4.0 - 2022-06-20\n\n### Added\n\n- Added provisional PHP 8.2 support\n- Added `UriComparator::isCrossOrigin` method\n\n## 2.3.0 - 2022-06-09\n\n### Fixed\n\n- Added `Header::splitList` method\n- Added `Utils::tryGetContents` method\n- Improved `Stream::getContents` method\n- Updated mimetype mappings\n\n## 2.2.2 - 2022-06-08\n\n### Fixed\n\n- Fix `Message::parseRequestUri` for numeric headers\n- Re-wrap exceptions thrown in `fread` into runtime exceptions\n- Throw an exception when multipart options is misformatted\n\n## 2.2.1 - 2022-03-20\n\n### Fixed\n\n- Correct header value validation\n\n## 2.2.0 - 2022-03-20\n\n### Added\n\n- A more compressive list of mime types\n- Add JsonSerializable to Uri\n- Missing return types\n\n### Fixed\n\n- Bug MultipartStream no `uri` metadata\n- Bug MultipartStream with filename for `data://` streams\n- Fixed new line handling in MultipartStream\n- Reduced RAM usage when copying streams\n- Updated parsing in `Header::normalize()`\n\n## 2.1.1 - 2022-03-20\n\n### Fixed\n\n- Validate header values properly\n\n## 2.1.0 - 2021-10-06\n\n### Changed\n\n- Attempting to create a `Uri` object from a malformed URI will no longer throw a generic\n  `InvalidArgumentException`, but rather a `MalformedUriException`, which inherits from the former\n  for backwards compatibility.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3384, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bab72163-74e4-44dc-93d6-aa0117fa0796": {"__data__": {"id_": "bab72163-74e4-44dc-93d6-aa0117fa0796", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "868c4bca3a1cec0e22c6f0a9071a754be4cc9295658e4828286e89e71fb530de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "193c224d-f3bc-4eaa-bd35-ed70fbb56ede", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6cc8e8e1f06d015ba8436d2d4fa630f290a541109cf5697fa57be795e4dad841", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "4e8b9384-8c05-49d7-83ca-723f069413c0", "node_type": "1", "metadata": {}, "hash": "58400314a073838aa3429b1fded682f64a25782c87927baad6b9ca1cc199db03", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Callers relying on the exception being thrown to detect invalid\n  URIs should catch the new exception.\n\n### Fixed\n\n- Return `null` in caching stream size if remote size is `null`\n\n## 2.0.0 - 2021-06-30\n\nIdentical to the RC release.\n\n## 2.0.0@RC-1 - 2021-04-29\n\n### Fixed\n\n- Handle possibly unset `url` in `stream_get_meta_data`\n\n## 2.0.0@beta-1 - 2021-03-21\n\n### Added\n\n- PSR-17 factories\n- Made classes final\n- PHP7 type hints\n\n### Changed\n\n- When building a query string, booleans are represented as 1 and 0.\n\n### Removed\n\n- PHP < 7.2 support\n- All functions in the `GuzzleHttp\\Psr7` namespace\n\n## 1.8.1 - 2021-03-21\n\n### Fixed\n\n- Issue parsing IPv6 URLs\n- Issue modifying ServerRequest lost all its attributes\n\n## 1.8.0 - 2021-03-21\n\n### Added\n\n- Locale independent URL parsing\n- Most classes got a `@final` annotation to prepare for 2.0\n\n### Fixed\n\n- Issue when creating stream from `php://input` and curl-ext is not installed\n- Broken `Utils::tryFopen()` on PHP 8\n\n## 1.7.0 - 2020-09-30\n\n### Added\n\n- Replaced functions by static methods\n\n### Fixed\n\n- Converting a non-seekable stream to a string\n- Handle multiple Set-Cookie correctly\n- Ignore array keys in header values when merging\n- Allow multibyte characters to be parsed in `Message:bodySummary()`\n\n### Changed\n\n- Restored partial HHVM 3 support\n\n\n## [1.6.1] - 2019-07-02\n\n### Fixed\n\n- Accept null and bool header values again\n\n\n## [1.6.0] - 2019-06-30\n\n### Added\n\n- Allowed version `^3.0` of `ralouphie/getallheaders` dependency (#244)\n- Added MIME type for WEBP image format (#246)\n- Added more validation of values according to PSR-7 and RFC standards, e.g. status code range (#250, #272)\n\n### Changed\n\n- Tests don't pass with HHVM 4.0, so HHVM support got dropped. Other libraries like composer have done the same. (#262)\n- Accept port number 0 to be valid (#270)\n\n### Fixed\n\n- Fixed subsequent reads from `php://input` in ServerRequest (#247)\n- Fixed readable/writable detection for certain stream modes (#248)\n- Fixed encoding of special characters in the `userInfo` component of an URI (#253)\n\n\n## [1.5.2] - 2018-12-04\n\n### Fixed\n\n- Check body size when getting the message summary\n\n\n## [1.5.1] - 2018-12-04\n\n### Fixed\n\n- Get the summary of a body only if it is readable\n\n\n## [1.5.0] - 2018-12-03\n\n### Added\n\n- Response first-line to response string exception (fixes #145)\n- A test for #129 behavior\n- `get_message_body_summary` function in order to get the message summary\n- `3gp` and `mkv` mime types\n\n### Changed\n\n- Clarify exception message when stream is detached\n\n### Deprecated\n\n- Deprecated parsing folded header lines as per RFC 7230\n\n### Fixed\n\n- Fix `AppendStream::detach` to not close streams\n- `InflateStream` preserves `isSeekable` attribute of the underlying stream\n- `ServerRequest::getUriFromGlobals` to support URLs in query parameters\n\n\nSeveral other fixes and improvements.\n\n\n## [1.4.2] - 2017-03-20\n\n### Fixed\n\n- Reverted BC break to `Uri::resolve` and `Uri::removeDotSegments` by removing\n  calls to `trigger_error` when deprecated methods are invoked.\n\n\n## [1.4.1] - 2017-02-27\n\n### Added\n\n- Rriggering of silenced deprecation warnings.\n\n### Fixed\n\n- Reverted BC break by reintroducing behavior to automagically fix a URI with a\n  relative path and an authority by adding a leading slash to the path. It's only\n  deprecated now.", "mimetype": "text/plain", "start_char_idx": 3385, "end_char_idx": 6705, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4e8b9384-8c05-49d7-83ca-723f069413c0": {"__data__": {"id_": "4e8b9384-8c05-49d7-83ca-723f069413c0", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "868c4bca3a1cec0e22c6f0a9071a754be4cc9295658e4828286e89e71fb530de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "bab72163-74e4-44dc-93d6-aa0117fa0796", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0ad0864333fde6bc1143a7b695a1f1744b9e8ec8de8a9e9174ab3e27d22302bb", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "55e26c71-3d2f-4f58-8cdc-4c66fa53aee4", "node_type": "1", "metadata": {}, "hash": "cad5799542c0b25acfeca0e9fab0ba887561305e434ca64ce9a5eb9fcc6058ba", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Several other fixes and improvements.\n\n\n## [1.4.2] - 2017-03-20\n\n### Fixed\n\n- Reverted BC break to `Uri::resolve` and `Uri::removeDotSegments` by removing\n  calls to `trigger_error` when deprecated methods are invoked.\n\n\n## [1.4.1] - 2017-02-27\n\n### Added\n\n- Rriggering of silenced deprecation warnings.\n\n### Fixed\n\n- Reverted BC break by reintroducing behavior to automagically fix a URI with a\n  relative path and an authority by adding a leading slash to the path. It's only\n  deprecated now.\n\n\n## [1.4.0] - 2017-02-21\n\n### Added\n\n- Added common URI utility methods based on RFC 3986 (see documentation in the readme):\n  - `Uri::isDefaultPort`\n  - `Uri::isAbsolute`\n  - `Uri::isNetworkPathReference`\n  - `Uri::isAbsolutePathReference`\n  - `Uri::isRelativePathReference`\n  - `Uri::isSameDocumentReference`\n  - `Uri::composeComponents`\n  - `UriNormalizer::normalize`\n  - `UriNormalizer::isEquivalent`\n  - `UriResolver::relativize`\n\n### Changed\n\n- Ensure `ServerRequest::getUriFromGlobals` returns a URI in absolute form.\n- Allow `parse_response` to parse a response without delimiting space and reason.\n- Ensure each URI modification results in a valid URI according to PSR-7 discussions.\n  Invalid modifications will throw an exception instead of returning a wrong URI or\n  doing some magic.\n  - `(new Uri)->withPath('foo')->withHost('example.com')` will throw an exception\n    because the path of a URI with an authority must start with a slash \"/\" or be empty\n  - `(new Uri())->withScheme('http')` will return `'http://localhost'`\n\n### Deprecated\n\n- `Uri::resolve` in favor of `UriResolver::resolve`\n- `Uri::removeDotSegments` in favor of `UriResolver::removeDotSegments`\n\n### Fixed\n\n- `Stream::read` when length parameter <= 0.\n- `copy_to_stream` reads bytes in chunks instead of `maxLen` into memory.\n- `ServerRequest::getUriFromGlobals` when `Host` header contains port.\n- Compatibility of URIs with `file` scheme and empty host.\n\n\n## [1.3.1] - 2016-06-25\n\n### Fixed\n\n- `Uri::__toString` for network path references, e.g. `//example.org`.\n- Missing lowercase normalization for host.\n- Handling of URI components in case they are `'0'` in a lot of places,\n  e.g. as a user info password.\n- `Uri::withAddedHeader` to correctly merge headers with different case.\n- Trimming of header values in `Uri::withAddedHeader`. Header values may\n  be surrounded by whitespace which should be ignored according to RFC 7230\n  Section 3.2.4. This does not apply to header names.\n- `Uri::withAddedHeader` with an array of header values.\n- `Uri::resolve` when base path has no slash and handling of fragment.\n- Handling of encoding in `Uri::with(out)QueryValue` so one can pass the\n  key/value both in encoded as well as decoded form to those methods. This is\n  consistent with withPath, withQuery etc.\n- `ServerRequest::withoutAttribute` when attribute value is null.\n\n\n## [1.3.0] - 2016-04-13\n\n### Added\n\n- Remaining interfaces needed for full PSR7 compatibility\n  (ServerRequestInterface, UploadedFileInterface, etc.).\n- Support for stream_for from scalars.\n\n### Changed\n\n- Can now extend Uri.\n\n### Fixed\n- A bug in validating request methods by making it more permissive.\n\n\n## [1.2.3] - 2016-02-18\n\n### Fixed\n\n- Support in `GuzzleHttp\\Psr7\\CachingStream` for seeking forward on remote\n  streams, which can sometimes return fewer bytes than requested with `fread`.\n- Handling of gzipped responses with FNAME headers.\n\n\n## [1.2.2] - 2016-01-22\n\n### Added\n\n- Support for URIs without any authority.\n- Support for HTTP 451 'Unavailable For Legal Reasons.'\n- Support for using '0' as a filename.\n- Support for including non-standard ports in Host headers.", "mimetype": "text/plain", "start_char_idx": 6210, "end_char_idx": 9853, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "55e26c71-3d2f-4f58-8cdc-4c66fa53aee4": {"__data__": {"id_": "55e26c71-3d2f-4f58-8cdc-4c66fa53aee4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "868c4bca3a1cec0e22c6f0a9071a754be4cc9295658e4828286e89e71fb530de", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "4e8b9384-8c05-49d7-83ca-723f069413c0", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 11651, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6ec6cf80a88c6cea421535aa61e291ebb63ab2d3632474c298f219b8c59f5a2e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## [1.2.3] - 2016-02-18\n\n### Fixed\n\n- Support in `GuzzleHttp\\Psr7\\CachingStream` for seeking forward on remote\n  streams, which can sometimes return fewer bytes than requested with `fread`.\n- Handling of gzipped responses with FNAME headers.\n\n\n## [1.2.2] - 2016-01-22\n\n### Added\n\n- Support for URIs without any authority.\n- Support for HTTP 451 'Unavailable For Legal Reasons.'\n- Support for using '0' as a filename.\n- Support for including non-standard ports in Host headers.\n\n\n## [1.2.1] - 2015-11-02\n\n### Changes\n\n- Now supporting negative offsets when seeking to SEEK_END.\n\n\n## [1.2.0] - 2015-08-15\n\n### Changed\n\n- Body as `\"0\"` is now properly added to a response.\n- Now allowing forward seeking in CachingStream.\n- Now properly parsing HTTP requests that contain proxy targets in\n  `parse_request`.\n- functions.php is now conditionally required.\n- user-info is no longer dropped when resolving URIs.\n\n\n## [1.1.0] - 2015-06-24\n\n### Changed\n\n- URIs can now be relative.\n- `multipart/form-data` headers are now overridden case-insensitively.\n- URI paths no longer encode the following characters because they are allowed\n  in URIs: \"(\", \")\", \"*\", \"!\", \"'\"\n- A port is no longer added to a URI when the scheme is missing and no port is\n  present.\n\n\n## 1.0.0 - 2015-05-19\n\nInitial release.\n\nCurrently unsupported:\n\n- `Psr\\Http\\Message\\ServerRequestInterface`\n- `Psr\\Http\\Message\\UploadedFileInterface`\n\n\n\n[1.6.0]: https://github.com/guzzle/psr7/compare/1.5.2...1.6.0\n[1.5.2]: https://github.com/guzzle/psr7/compare/1.5.1...1.5.2\n[1.5.1]: https://github.com/guzzle/psr7/compare/1.5.0...1.5.1\n[1.5.0]: https://github.com/guzzle/psr7/compare/1.4.2...1.5.0\n[1.4.2]: https://github.com/guzzle/psr7/compare/1.4.1...1.4.2\n[1.4.1]: https://github.com/guzzle/psr7/compare/1.4.0...1.4.1\n[1.4.0]: https://github.com/guzzle/psr7/compare/1.3.1...1.4.0\n[1.3.1]: https://github.com/guzzle/psr7/compare/1.3.0...1.3.1\n[1.3.0]: https://github.com/guzzle/psr7/compare/1.2.3...1.3.0\n[1.2.3]: https://github.com/guzzle/psr7/compare/1.2.2...1.2.3\n[1.2.2]: https://github.com/guzzle/psr7/compare/1.2.1...1.2.2\n[1.2.1]: https://github.com/guzzle/psr7/compare/1.2.0...1.2.1\n[1.2.0]: https://github.com/guzzle/psr7/compare/1.1.0...1.2.0\n[1.1.0]: https://github.com/guzzle/psr7/compare/1.0.0...1.1.0", "mimetype": "text/plain", "start_char_idx": 9377, "end_char_idx": 11650, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d81540d0-0a0c-4c53-ba96-cc1012db90bb": {"__data__": {"id_": "d81540d0-0a0c-4c53-ba96-cc1012db90bb", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 2541, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a75ba012-e1af-4fcf-950c-5320f85c4c58", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/guzzlehttp/psr7/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 2541, "creation_date": "2025-07-10", "last_modified_date": "2025-03-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "cf90edf7a98a32e57204a353ee7d68416537e048f8ec54fc3fe957e424d6030a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"guzzlehttp/psr7\",\n    \"description\": \"PSR-7 message implementation that also provides common utility methods\",\n    \"keywords\": [\n        \"request\",\n        \"response\",\n        \"message\",\n        \"stream\",\n        \"http\",\n        \"uri\",\n        \"url\",\n        \"psr-7\"\n    ],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Graham Campbell\",\n            \"email\": \"hello@gjcampbell.co.uk\",\n            \"homepage\": \"https://github.com/GrahamCampbell\"\n        },\n        {\n            \"name\": \"Michael Dowling\",\n            \"email\": \"mtdowling@gmail.com\",\n            \"homepage\": \"https://github.com/mtdowling\"\n        },\n        {\n            \"name\": \"George Mponos\",\n            \"email\": \"gmponos@gmail.com\",\n            \"homepage\": \"https://github.com/gmponos\"\n        },\n        {\n            \"name\": \"Tobias Nyholm\",\n            \"email\": \"tobias.nyholm@gmail.com\",\n            \"homepage\": \"https://github.com/Nyholm\"\n        },\n        {\n            \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n            \"email\": \"mark.sagikazar@gmail.com\",\n            \"homepage\": \"https://github.com/sagikazarmark\"\n        },\n        {\n            \"name\": \"Tobias Schultze\",\n            \"email\": \"webmaster@tubo-world.de\",\n            \"homepage\": \"https://github.com/Tobion\"\n        },\n        {\n            \"name\": \"M\u00e1rk S\u00e1gi-Kaz\u00e1r\",\n            \"email\": \"mark.sagikazar@gmail.com\",\n            \"homepage\": \"https://sagikazarmark.hu\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2.5 || ^8.0\",\n        \"psr/http-factory\": \"^1.0\",\n        \"psr/http-message\": \"^1.1 || ^2.0\",\n        \"ralouphie/getallheaders\": \"^3.0\"\n    },\n    \"provide\": {\n        \"psr/http-factory-implementation\": \"1.0\",\n        \"psr/http-message-implementation\": \"1.0\"\n    },\n    \"require-dev\": {\n        \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n        \"http-interop/http-factory-tests\": \"0.9.0\",\n        \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20\"\n    },\n    \"suggest\": {\n        \"laminas/laminas-httphandlerrunner\": \"Emit PSR-7 responses\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"GuzzleHttp\\\\Psr7\\\\\": \"src/\"\n        }\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"GuzzleHttp\\\\Tests\\\\Psr7\\\\\": \"tests/\"\n        }\n    },\n    \"extra\": {\n        \"bamarni-bin\": {\n            \"bin-links\": true,\n            \"forward-command\": false\n        }\n    },\n    \"config\": {\n        \"allow-plugins\": {\n            \"bamarni/composer-bin-plugin\": true\n        },\n        \"preferred-install\": \"dist\",\n        \"sort-packages\": true\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2534, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ffb7de70-0a0b-40eb-913e-be81e86d43f4": {"__data__": {"id_": "ffb7de70-0a0b-40eb-913e-be81e86d43f4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/phpoption/phpoption/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1270, "creation_date": "2025-07-10", "last_modified_date": "2024-07-20", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "40f075e9-bf92-4ed0-ad07-16199637e94d", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/phpoption/phpoption/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1270, "creation_date": "2025-07-10", "last_modified_date": "2024-07-20", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "9d7d88fb592b8db0c4ec0e5b12c278e0d9f851aea81839b77e8546d6aebe2797", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"phpoption/phpoption\",\n    \"description\": \"Option Type for PHP\",\n    \"keywords\": [\"php\", \"option\", \"language\", \"type\"],\n    \"license\": \"Apache-2.0\",\n    \"authors\": [\n        {\n            \"name\": \"Johannes M. Schmitt\",\n            \"email\": \"schmittjoh@gmail.com\",\n            \"homepage\": \"https://github.com/schmittjoh\"\n        },\n        {\n            \"name\": \"Graham Campbell\",\n            \"email\": \"hello@gjcampbell.co.uk\",\n            \"homepage\": \"https://github.com/GrahamCampbell\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2.5 || ^8.0\"\n    },\n    \"require-dev\": {\n        \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n        \"phpunit/phpunit\": \"^8.5.39 || ^9.6.20 || ^10.5.28\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"PhpOption\\\\\": \"src/PhpOption/\"\n        }\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"PhpOption\\\\Tests\\\\\": \"tests/PhpOption/Tests/\"\n        }\n    },\n    \"config\": {\n        \"allow-plugins\": {\n            \"bamarni/composer-bin-plugin\": true\n        },\n        \"preferred-install\": \"dist\"\n    },\n    \"extra\": {\n        \"bamarni-bin\": {\n            \"bin-links\": true,\n            \"forward-command\": false\n        },\n        \"branch-alias\": {\n            \"dev-master\": \"1.9-dev\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1269, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "adeb366b-0227-436e-993b-55d3a6c7c927": {"__data__": {"id_": "adeb366b-0227-436e-993b-55d3a6c7c927", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-client/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 505, "creation_date": "2025-07-10", "last_modified_date": "2023-09-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d4f089a7-3a19-4a6c-a6a1-e70a66cc3cbe", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-client/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 505, "creation_date": "2025-07-10", "last_modified_date": "2023-09-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "da48d7cadd16886a8903eda4607a6d12840dbb26d5987d0607001e5d2324dfb9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Changelog\n\nAll notable changes to this project will be documented in this file, in reverse chronological order by release.\n\n## 1.0.3\n\nAdd `source` link in composer.json. No code changes.\n\n## 1.0.2\n\nAllow PSR-7 (psr/http-message) 2.0. No code changes.\n\n## 1.0.1\n\nAllow installation with PHP 8. No code changes.\n\n## 1.0.0\n\nFirst stable release. No changes since 0.3.0.\n\n## 0.3.0\n\nAdded Interface suffix on exceptions\n \n## 0.2.0 \n\nAll exceptions are in `Psr\\Http\\Client` namespace\n\n## 0.1.0\n\nFirst release", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 504, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "62481a49-c4b1-4c91-9c00-190413aa5b5a": {"__data__": {"id_": "62481a49-c4b1-4c91-9c00-190413aa5b5a", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-client/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 727, "creation_date": "2025-07-10", "last_modified_date": "2023-09-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9a27e8e8-bca7-4ed2-89d4-0dca44fc207a", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-client/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 727, "creation_date": "2025-07-10", "last_modified_date": "2023-09-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "46ba0225404839d8600de8a216117a9f69772c3c1f7f8bb59080775aaa7c4c2d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"psr/http-client\",\n    \"description\": \"Common interface for HTTP clients\",\n    \"keywords\": [\"psr\", \"psr-18\", \"http\", \"http-client\"],\n    \"homepage\": \"https://github.com/php-fig/http-client\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"PHP-FIG\",\n            \"homepage\": \"https://www.php-fig.org/\"\n        }\n    ],\n    \"support\": {\n        \"source\": \"https://github.com/php-fig/http-client\"\n    },\n    \"require\": {\n        \"php\": \"^7.0 || ^8.0\",\n        \"psr/http-message\": \"^1.0 || ^2.0\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"Psr\\\\Http\\\\Client\\\\\": \"src/\"\n        }\n    },\n    \"extra\": {\n        \"branch-alias\": {\n            \"dev-master\": \"1.0.x-dev\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 726, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6fbbee5e-21e9-4a66-ae10-a3db4be020cf": {"__data__": {"id_": "6fbbee5e-21e9-4a66-ae10-a3db4be020cf", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-factory/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 799, "creation_date": "2025-07-10", "last_modified_date": "2024-04-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "cde23128-cad9-4585-91c5-c180d025d187", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-factory/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 799, "creation_date": "2025-07-10", "last_modified_date": "2024-04-15", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7ee123809fa60307eb97ad403183bc9e02004c522e34ecd06ad1e805d308423e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"psr/http-factory\",\n    \"description\": \"PSR-17: Common interfaces for PSR-7 HTTP message factories\",\n    \"keywords\": [\n        \"psr\",\n        \"psr-7\",\n        \"psr-17\",\n        \"http\",\n        \"factory\",\n        \"message\",\n        \"request\",\n        \"response\"\n    ],\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"PHP-FIG\",\n            \"homepage\": \"https://www.php-fig.org/\"\n        }\n    ],\n    \"support\": {\n        \"source\": \"https://github.com/php-fig/http-factory\"\n    },\n    \"require\": {\n        \"php\": \">=7.1\",\n        \"psr/http-message\": \"^1.0 || ^2.0\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n        }\n    },\n    \"extra\": {\n        \"branch-alias\": {\n            \"dev-master\": \"1.0.x-dev\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 798, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dfde2677-aaf9-43f7-9b0d-a1f62642ab49": {"__data__": {"id_": "dfde2677-aaf9-43f7-9b0d-a1f62642ab49", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 1075, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "30d6008a-7156-423a-8089-d09cf91992b3", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 1075, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "109f6dec723e78e9d77763cb36f17ad530f7f9ca10709bcd4c6112589a6c4605", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Changelog\n\nAll notable changes to this project will be documented in this file, in reverse chronological order by release.\n\n## 1.0.1 - 2016-08-06\n\n### Added\n\n- Nothing.\n\n### Deprecated\n\n- Nothing.\n\n### Removed\n\n- Nothing.\n\n### Fixed\n\n- Updated all `@return self` annotation references in interfaces to use\n  `@return static`, which more closelly follows the semantics of the\n  specification.\n- Updated the `MessageInterface::getHeaders()` return annotation to use the\n  value `string[][]`, indicating the format is a nested array of strings.\n- Updated the `@link` annotation for `RequestInterface::withRequestTarget()`\n  to point to the correct section of RFC 7230.\n- Updated the `ServerRequestInterface::withUploadedFiles()` parameter annotation\n  to add the parameter name (`$uploadedFiles`).\n- Updated a `@throws` annotation for the `UploadedFileInterface::moveTo()`\n  method to correctly reference the method parameter (it was referencing an\n  incorrect parameter name previously).\n\n## 1.0.0 - 2016-05-18\n\nInitial stable release; reflects accepted PSR-7 specification.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1074, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f7b0304f-215d-44cd-bc38-06cbd4882adb": {"__data__": {"id_": "f7b0304f-215d-44cd-bc38-06cbd4882adb", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 627, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2b373b16-a535-48b8-8264-2db1afad22c6", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 627, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "59e8c6f388cbe1a86ffea1231034c34b4dc8ea8b15cb3ad0aa166383c04bc9f3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"psr/http-message\",\n    \"description\": \"Common interface for HTTP messages\",\n    \"keywords\": [\"psr\", \"psr-7\", \"http\", \"http-message\", \"request\", \"response\"],\n    \"homepage\": \"https://github.com/php-fig/http-message\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"PHP-FIG\",\n            \"homepage\": \"https://www.php-fig.org/\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2 || ^8.0\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"Psr\\\\Http\\\\Message\\\\\": \"src/\"\n        }\n    },\n    \"extra\": {\n        \"branch-alias\": {\n            \"dev-master\": \"2.0.x-dev\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 626, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "534f2ef3-ef07-4a63-8d33-523c740c3dba": {"__data__": {"id_": "534f2ef3-ef07-4a63-8d33-523c740c3dba", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a0704ccb-bad2-4643-8ce5-b0010d58b241", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6827c58e646d71bb1aa2bfc04072623541df79555025e3cda6213906ffce9d26", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "935c5349-65e3-41d8-b343-b6d7bb963da4", "node_type": "1", "metadata": {}, "hash": "66f520d46d82e3bb7a88ebb59be41125ebe8d3bd85b0a5423d2a17a165a104a0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# Interfaces\n\nThe purpose of this list is to help in finding the methods when working with PSR-7. This can be considered as a cheatsheet for PSR-7 interfaces.\n\nThe interfaces defined in PSR-7 are the following:\n\n| Class Name | Description |\n|---|---|\n| [Psr\\Http\\Message\\MessageInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessagemessageinterface) | Representation of a HTTP message |\n| [Psr\\Http\\Message\\RequestInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessagerequestinterface) | Representation of an outgoing, client-side request. |\n| [Psr\\Http\\Message\\ServerRequestInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessageserverrequestinterface) | Representation of an incoming, server-side HTTP request. | \n| [Psr\\Http\\Message\\ResponseInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessageresponseinterface) | Representation of an outgoing, server-side response. |\n| [Psr\\Http\\Message\\StreamInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessagestreaminterface) | Describes a data stream |\n| [Psr\\Http\\Message\\UriInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessageuriinterface) | Value object representing a URI. |\n| [Psr\\Http\\Message\\UploadedFileInterface](http://www.php-fig.org/psr/psr-7/#psrhttpmessageuploadedfileinterface) | Value object representing a file uploaded through an HTTP request. |\n\n## `Psr\\Http\\Message\\MessageInterface` Methods\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `getProtocolVersion()`             | Retrieve HTTP protocol version          |  1.0 or 1.1 |\n| `withProtocolVersion($version)`    | Returns new message instance with given HTTP protocol version          |      |\n| `getHeaders()`                     | Retrieve all HTTP Headers               | [Request Header List](https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Request_fields), [Response Header List](https://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Response_fields)      |\n| `hasHeader($name)`                 | Checks if HTTP Header with given name exists  | |\n| `getHeader($name)`                 | Retrieves a array with the values for a single header | |\n| `getHeaderLine($name)`             | Retrieves a comma-separated string of the values for a single header |  |\n| `withHeader($name, $value)`        | Returns new message instance with given HTTP Header | if the header existed in the original instance, replaces the header value from the original message with the value provided when creating the new instance. |\n| `withAddedHeader($name, $value)`   | Returns new message instance with appended value to given header | If header already exists value will be appended, if not a new header will be created |\n| `withoutHeader($name)`             | Removes HTTP Header with given name| |\n| `getBody()`                        | Retrieves the HTTP Message Body | Returns object implementing `StreamInterface`|\n| `withBody(StreamInterface $body)`  | Returns new message instance with given HTTP Message Body | |\n\n\n## `Psr\\Http\\Message\\RequestInterface` Methods\n\nSame methods as `Psr\\Http\\Message\\MessageInterface`  + the following methods:\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `getRequestTarget()`                | Retrieves the message's request target              | origin-form, absolute-form, authority-form, asterisk-form ([RFC7230](https://www.rfc-editor.org/rfc/rfc7230.txt)) |\n| `withRequestTarget($requestTarget)` | Return a new message instance with the specific request-target |      |\n| `getMethod()`                       | Retrieves the HTTP method of the request.  |  GET, HEAD, POST, PUT, DELETE, CONNECT, OPTIONS, TRACE (defined in [RFC7231](https://tools.ietf.org/html/rfc7231)), PATCH (defined in [RFC5789](https://tools.ietf.org/html/rfc5789)) |\n| `withMethod($method)`               | Returns a new message instance with the provided HTTP method  | |\n| `getUri()`                 | Retrieves the URI instance | |\n| `withUri(UriInterface $uri, $preserveHost = false)` | Returns a new message instance with the provided URI |  |", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4172, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "935c5349-65e3-41d8-b343-b6d7bb963da4": {"__data__": {"id_": "935c5349-65e3-41d8-b343-b6d7bb963da4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a0704ccb-bad2-4643-8ce5-b0010d58b241", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6827c58e646d71bb1aa2bfc04072623541df79555025e3cda6213906ffce9d26", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "534f2ef3-ef07-4a63-8d33-523c740c3dba", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "948c139392bf3faa7203ec4e5ee465327ff17423fd1dedd882fa747ec5c1d8a9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f8b09eb5-4323-474c-bdde-788e3fa23604", "node_type": "1", "metadata": {}, "hash": "94ca604d990cae0d0510a445f9068e709dde19c10da0f76da3c7321bb857fe97", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "## `Psr\\Http\\Message\\ServerRequestInterface` Methods\n\nSame methods as `Psr\\Http\\Message\\RequestInterface`  + the following methods:\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `getServerParams() `               | Retrieve server parameters  | Typically derived from `$_SERVER`  |\n| `getCookieParams()`                | Retrieves cookies sent by the client to the server. | Typically derived from `$_COOKIES` |\n| `withCookieParams(array $cookies)` |  Returns a new request instance with the specified cookies      |   | \n| `withQueryParams(array $query)` | Returns a new request instance with the specified query string arguments  |  |\n| `getUploadedFiles()` | Retrieve normalized file upload data  |  |\n| `withUploadedFiles(array $uploadedFiles)` | Returns a new request instance with the specified uploaded files  |  |\n| `getParsedBody()` | Retrieve any parameters provided in the request body  |  |\n| `withParsedBody($data)` | Returns a new request instance with the specified body parameters  |  |\n| `getAttributes()` | Retrieve attributes derived from the request  |  |\n| `getAttribute($name, $default = null)` | Retrieve a single derived request attribute  |  |\n| `withAttribute($name, $value)` | Returns a new request instance with the specified derived request attribute  |  |\n| `withoutAttribute($name)` | Returns a new request instance that without the specified derived request attribute  |  |\n\n## `Psr\\Http\\Message\\ResponseInterface` Methods:\n\nSame methods as `Psr\\Http\\Message\\MessageInterface`  + the following methods:\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `getStatusCode()` | Gets the response status code. | |\n| `withStatus($code, $reasonPhrase = '')` | Returns a new response instance with the specified status code and, optionally, reason phrase. | |\n| `getReasonPhrase()` | Gets the response reason phrase associated with the status code. | |\n\n##  `Psr\\Http\\Message\\StreamInterface` Methods\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `__toString()` | Reads all data from the stream into a string, from the beginning to end. | |\n| `close()` | Closes the stream and any underlying resources. | |\n| `detach()` | Separates any underlying resources from the stream. | |\n| `getSize()` | Get the size of the stream if known. | |\n| `eof()` | Returns true if the stream is at the end of the stream.| |\n| `isSeekable()` |  Returns whether or not the stream is seekable. | |\n| `seek($offset, $whence = SEEK_SET)` | Seek to a position in the stream. | |\n| `rewind()` | Seek to the beginning of the stream. | |\n| `isWritable()` | Returns whether or not the stream is writable. | |\n| `write($string)` | Write data to the stream. | |\n| `isReadable()` | Returns whether or not the stream is readable. | |\n| `read($length)` | Read data from the stream. | |\n| `getContents()` | Returns the remaining contents in a string | |\n| `getMetadata($key = null)()` | Get stream metadata as an associative array or retrieve a specific key. | |\n\n## `Psr\\Http\\Message\\UriInterface` Methods\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `getScheme()` | Retrieve the scheme component of the URI. | |\n| `getAuthority()` | Retrieve the authority component of the URI. | |\n| `getUserInfo()` | Retrieve the user information component of the URI. | |\n| `getHost()` | Retrieve the host component of the URI. | |\n| `getPort()` | Retrieve the port component of the URI. | |\n| `getPath()` | Retrieve the path component of the URI. | |\n| `getQuery()` | Retrieve the query string of the URI. | |\n| `getFragment()` | Retrieve the fragment component of the URI. | |\n| `withScheme($scheme)` | Return an instance with the specified scheme. | |\n| `withUserInfo($user, $password = null)` | Return an instance with the specified user information. | |\n| `withHost($host)` | Return an instance with the specified host. | |\n| `withPort($port)` | Return an instance with the specified port.", "mimetype": "text/plain", "start_char_idx": 4175, "end_char_idx": 8359, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f8b09eb5-4323-474c-bdde-788e3fa23604": {"__data__": {"id_": "f8b09eb5-4323-474c-bdde-788e3fa23604", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a0704ccb-bad2-4643-8ce5-b0010d58b241", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6827c58e646d71bb1aa2bfc04072623541df79555025e3cda6213906ffce9d26", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "935c5349-65e3-41d8-b343-b6d7bb963da4", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Interfaces.md", "file_name": "PSR7-Interfaces.md", "file_size": 9548, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f2d0a69437d13fa8ac4a48d5b5d8a69a8c72c432ca9e75a52a09f683d69ffec5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "| |\n| `getAuthority()` | Retrieve the authority component of the URI. | |\n| `getUserInfo()` | Retrieve the user information component of the URI. | |\n| `getHost()` | Retrieve the host component of the URI. | |\n| `getPort()` | Retrieve the port component of the URI. | |\n| `getPath()` | Retrieve the path component of the URI. | |\n| `getQuery()` | Retrieve the query string of the URI. | |\n| `getFragment()` | Retrieve the fragment component of the URI. | |\n| `withScheme($scheme)` | Return an instance with the specified scheme. | |\n| `withUserInfo($user, $password = null)` | Return an instance with the specified user information. | |\n| `withHost($host)` | Return an instance with the specified host. | |\n| `withPort($port)` | Return an instance with the specified port. | |\n| `withPath($path)` | Return an instance with the specified path. | |\n| `withQuery($query)` | Return an instance with the specified query string. | |\n| `withFragment($fragment)` | Return an instance with the specified URI fragment. | |\n| `__toString()` | Return the string representation as a URI reference. | |\n\n## `Psr\\Http\\Message\\UploadedFileInterface` Methods\n\n| Method Name                        | Description | Notes |\n|------------------------------------| ----------- | ----- |\n| `getStream()` | Retrieve a stream representing the uploaded file. | |\n| `moveTo($targetPath)` | Move the uploaded file to a new location. | |\n| `getSize()` | Retrieve the file size. | |\n| `getError()` | Retrieve the error associated with the uploaded file. | |\n| `getClientFilename()` | Retrieve the filename sent by the client. | |\n| `getClientMediaType()` | Retrieve the media type sent by the client. | |\n\n> `RequestInterface`, `ServerRequestInterface`, `ResponseInterface` extend `MessageInterface`  because the `Request` and the `Response` are `HTTP Messages`.\n> When using `ServerRequestInterface`, both `RequestInterface` and `Psr\\Http\\Message\\MessageInterface` methods are considered.", "mimetype": "text/plain", "start_char_idx": 7587, "end_char_idx": 9546, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8de0a06b-fcf6-47df-a19d-cea907b5c09c": {"__data__": {"id_": "8de0a06b-fcf6-47df-a19d-cea907b5c09c", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Usage.md", "file_name": "PSR7-Usage.md", "file_size": 5492, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b380de43-9ae8-4630-8530-5fba9b332bd4", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Usage.md", "file_name": "PSR7-Usage.md", "file_size": 5492, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ff4d8688832f2ffc6a8f829273208b78ac34d700dea50e47e295ff07a26b9edd", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ddb1b6b4-58a5-4512-8a32-72fdb3ee1b49", "node_type": "1", "metadata": {}, "hash": "83344eb16c9f06e2861f5fa8ed7f8d1a6caebc4b40b96b87ee67bb6a278cf610", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "### PSR-7 Usage\n\nAll PSR-7 applications comply with these interfaces \nThey were created to establish a standard between middleware implementations.\n\n> `RequestInterface`, `ServerRequestInterface`, `ResponseInterface` extend `MessageInterface`  because the `Request` and the `Response` are `HTTP Messages`.\n> When using `ServerRequestInterface`, both `RequestInterface` and `Psr\\Http\\Message\\MessageInterface` methods are considered.\n\n\nThe following examples will illustrate how basic operations are done in PSR-7.\n\n##### Examples\n\n\nFor this examples to work (at least) a PSR-7 implementation package is required. (eg: zendframework/zend-diactoros, guzzlehttp/psr7, slim/slim, etc)\nAll PSR-7 implementations should have the same behaviour.\n\nThe following will be assumed: \n`$request` is an object of `Psr\\Http\\Message\\RequestInterface` and\n\n`$response` is an object implementing `Psr\\Http\\Message\\RequestInterface`\n\n\n### Working with HTTP Headers\n\n#### Adding headers to response:\n\n```php\n$response->withHeader('My-Custom-Header', 'My Custom Message');\n```\n\n#### Appending values to headers\n\n```php\n$response->withAddedHeader('My-Custom-Header', 'The second message');\n```\n\n#### Checking if header exists:\n\n```php\n$request->hasHeader('My-Custom-Header'); // will return false\n$response->hasHeader('My-Custom-Header'); // will return true\n```\n\n> Note: My-Custom-Header was only added in the Response\n\n#### Getting comma-separated values from a header (also applies to request)\n\n```php\n// getting value from request headers\n$request->getHeaderLine('Content-Type'); // will return: \"text/html; charset=UTF-8\"\n// getting value from response headers\n$response->getHeaderLine('My-Custom-Header'); // will return:  \"My Custom Message; The second message\"\n```\n\n#### Getting array of value from a header (also applies to request)\n```php\n// getting value from request headers\n$request->getHeader('Content-Type'); // will return: [\"text/html\", \"charset=UTF-8\"]\n// getting value from response headers\n$response->getHeader('My-Custom-Header'); // will return:  [\"My Custom Message\",  \"The second message\"]\n```\n\n#### Removing headers from HTTP Messages\n```php\n// removing a header from Request, removing deprecated \"Content-MD5\" header\n$request->withoutHeader('Content-MD5'); \n\n// removing a header from Response\n// effect: the browser won't know the size of the stream\n// the browser will download the stream till it ends\n$response->withoutHeader('Content-Length');\n```\n\n### Working with HTTP Message Body\n\nWhen working with the PSR-7 there are two methods of implementation:\n#### 1. Getting the body separately\n\n> This method makes the body handling easier to understand and is useful when repeatedly calling body methods. (You only call `getBody()` once). Using this method mistakes like `$response->write()` are also prevented.\n\n```php\n$body = $response->getBody();\n// operations on body, eg. read, write, seek\n// ...\n// replacing the old body\n$response->withBody($body); \n// this last statement is optional as we working with objects\n// in this case the \"new\" body is same with the \"old\" one\n// the $body variable has the same value as the one in $request, only the reference is passed\n```\n\n#### 2. Working directly on response\n\n> This method is useful when only performing few operations as the `$request->getBody()` statement fragment is required\n\n```php\n$response->getBody()->write('hello');\n```\n\n### Getting the body contents\n\nThe following snippet gets the contents of a stream contents.\n> Note: Streams must be rewinded, if content was written into streams, it will be ignored when calling `getContents()` because the stream pointer is set to the last character, which is `\\0` - meaning end of stream.\n```php \n$body = $response->getBody();\n$body->rewind(); // or $body->seek(0);\n$bodyText = $body->getContents();\n```\n> Note: If `$body->seek(1)` is called before `$body->getContents()`, the first character will be ommited as the starting pointer is set to `1`, not `0`. This is why using `$body->rewind()` is recommended.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4017, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ddb1b6b4-58a5-4512-8a32-72fdb3ee1b49": {"__data__": {"id_": "ddb1b6b4-58a5-4512-8a32-72fdb3ee1b49", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Usage.md", "file_name": "PSR7-Usage.md", "file_size": 5492, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b380de43-9ae8-4630-8530-5fba9b332bd4", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Usage.md", "file_name": "PSR7-Usage.md", "file_size": 5492, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ff4d8688832f2ffc6a8f829273208b78ac34d700dea50e47e295ff07a26b9edd", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8de0a06b-fcf6-47df-a19d-cea907b5c09c", "node_type": "1", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/psr/http-message/docs/PSR7-Usage.md", "file_name": "PSR7-Usage.md", "file_size": 5492, "creation_date": "2025-07-10", "last_modified_date": "2023-04-04", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f459c8c39ec0afd36f6a8b0c4e44e2986d7e3449f0fd6fba881983f7eda612db", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Working directly on response\n\n> This method is useful when only performing few operations as the `$request->getBody()` statement fragment is required\n\n```php\n$response->getBody()->write('hello');\n```\n\n### Getting the body contents\n\nThe following snippet gets the contents of a stream contents.\n> Note: Streams must be rewinded, if content was written into streams, it will be ignored when calling `getContents()` because the stream pointer is set to the last character, which is `\\0` - meaning end of stream.\n```php \n$body = $response->getBody();\n$body->rewind(); // or $body->seek(0);\n$bodyText = $body->getContents();\n```\n> Note: If `$body->seek(1)` is called before `$body->getContents()`, the first character will be ommited as the starting pointer is set to `1`, not `0`. This is why using `$body->rewind()` is recommended.\n\n### Append to body\n\n```php\n$response->getBody()->write('Hello'); // writing directly\n$body = $request->getBody(); // which is a `StreamInterface`\n$body->write('xxxxx');\n```\n\n### Prepend to body\nPrepending is different when it comes to streams. The content must be copied before writing the content to be prepended.\nThe following example will explain the behaviour of streams.\n\n```php\n// assuming our response is initially empty\n$body = $repsonse->getBody();\n// writing the string \"abcd\"\n$body->write('abcd');\n\n// seeking to start of stream\n$body->seek(0);\n// writing 'ef'\n$body->write('ef'); // at this point the stream contains \"efcd\"\n```\n\n#### Prepending by rewriting separately\n\n```php\n// assuming our response body stream only contains: \"abcd\"\n$body = $response->getBody();\n$body->rewind();\n$contents = $body->getContents(); // abcd\n// seeking the stream to beginning\n$body->rewind();\n$body->write('ef'); // stream contains \"efcd\"\n$body->write($contents); // stream contains \"efabcd\"\n```\n\n> Note: `getContents()` seeks the stream while reading it, therefore if the second `rewind()` method call was not present the stream would have resulted in `abcdefabcd` because the `write()` method appends to stream if not preceeded by `rewind()` or `seek(0)`.\n\n#### Prepending by using contents as a string\n```php\n$body = $response->getBody();\n$body->rewind();\n$contents = $body->getContents(); // efabcd\n$contents = 'ef'.$contents;\n$body->rewind();\n$body->write($contents);\n```", "mimetype": "text/plain", "start_char_idx": 3189, "end_char_idx": 5491, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f01ae7c7-31c2-497b-b803-e1667724ec1a": {"__data__": {"id_": "f01ae7c7-31c2-497b-b803-e1667724ec1a", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/ralouphie/getallheaders/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 465, "creation_date": "2025-07-10", "last_modified_date": "2019-03-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "24315215-37ad-4481-a949-ada47ebefb4f", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/ralouphie/getallheaders/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 465, "creation_date": "2025-07-10", "last_modified_date": "2019-03-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b845f70cee6d860ebd2086c8b89221ad5e589ef028029def825a4ce346bdbcf7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n\t\"name\": \"ralouphie/getallheaders\",\n\t\"description\": \"A polyfill for getallheaders.\",\n\t\"license\": \"MIT\",\n\t\"authors\": [\n\t\t{\n\t\t\t\"name\": \"Ralph Khattar\",\n\t\t\t\"email\": \"ralph.khattar@gmail.com\"\n\t\t}\n\t],\n\t\"require\": {\n\t\t\"php\": \">=5.6\"\n\t},\n\t\"require-dev\": {\n\t\t\"phpunit/phpunit\": \"^5 || ^6.5\",\n\t\t\"php-coveralls/php-coveralls\": \"^2.1\"\n\t},\n\t\"autoload\": {\n\t\t\"files\": [\"src/getallheaders.php\"]\n\t},\n\t\"autoload-dev\": {\n\t\t\"psr-4\": {\n\t\t\t\"getallheaders\\\\Tests\\\\\": \"tests/\"\n\t\t}\n\t}\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 464, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8e2425c4-545b-48d4-97fb-0f329683a554": {"__data__": {"id_": "8e2425c4-545b-48d4-97fb-0f329683a554", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/deprecation-contracts/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 157, "creation_date": "2025-07-10", "last_modified_date": "2024-09-25", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4da0f121-ba17-4815-a304-da46468d3fa8", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/deprecation-contracts/CHANGELOG.md", "file_name": "CHANGELOG.md", "file_size": 157, "creation_date": "2025-07-10", "last_modified_date": "2024-09-25", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7dda5fde35805a1cbc1156cfb58441cff1eebdec512c7cc5d1eecd0ab046b7ac", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "CHANGELOG\n=========\n\nThe changelog is maintained for all Symfony contracts at the following URL:\nhttps://github.com/symfony/contracts/blob/main/CHANGELOG.md", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 156, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ebb55676-d16c-4bde-b52c-ae310754fbd4": {"__data__": {"id_": "ebb55676-d16c-4bde-b52c-ae310754fbd4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/deprecation-contracts/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 841, "creation_date": "2025-07-10", "last_modified_date": "2024-09-25", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "41e6c757-76f7-49e2-ac82-0c9af7a47c8a", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/deprecation-contracts/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 841, "creation_date": "2025-07-10", "last_modified_date": "2024-09-25", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "977144fc940649260b3b37d45cef1c7927954da0422191a1133c98ecba864df5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"symfony/deprecation-contracts\",\n    \"type\": \"library\",\n    \"description\": \"A generic function and convention to trigger deprecation notices\",\n    \"homepage\": \"https://symfony.com\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Nicolas Grekas\",\n            \"email\": \"p@tchwork.com\"\n        },\n        {\n            \"name\": \"Symfony Community\",\n            \"homepage\": \"https://symfony.com/contributors\"\n        }\n    ],\n    \"require\": {\n        \"php\": \">=8.1\"\n    },\n    \"autoload\": {\n        \"files\": [\n            \"function.php\"\n        ]\n    },\n    \"minimum-stability\": \"dev\",\n    \"extra\": {\n        \"branch-alias\": {\n            \"dev-main\": \"3.6-dev\"\n        },\n        \"thanks\": {\n            \"name\": \"symfony/contracts\",\n            \"url\": \"https://github.com/symfony/contracts\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 840, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "91a71609-be8a-4d92-8921-76a68b4c19b8": {"__data__": {"id_": "91a71609-be8a-4d92-8921-76a68b4c19b8", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-ctype/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 961, "creation_date": "2025-07-10", "last_modified_date": "2024-09-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "7e582451-665e-4d45-bc38-c3c07ad7c817", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-ctype/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 961, "creation_date": "2025-07-10", "last_modified_date": "2024-09-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f77ecbce861ac69644f59cddf6a060bafa05756fde634b9042fe98f1361bd6bd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"symfony/polyfill-ctype\",\n    \"type\": \"library\",\n    \"description\": \"Symfony polyfill for ctype functions\",\n    \"keywords\": [\"polyfill\", \"compatibility\", \"portable\", \"ctype\"],\n    \"homepage\": \"https://symfony.com\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Gert de Pagter\",\n            \"email\": \"BackEndTea@gmail.com\"\n        },\n        {\n            \"name\": \"Symfony Community\",\n            \"homepage\": \"https://symfony.com/contributors\"\n        }\n    ],\n    \"require\": {\n        \"php\": \">=7.2\"\n    },\n    \"provide\": {\n        \"ext-ctype\": \"*\"\n    },\n    \"autoload\": {\n        \"psr-4\": { \"Symfony\\\\Polyfill\\\\Ctype\\\\\": \"\" },\n        \"files\": [ \"bootstrap.php\" ]\n    },\n    \"suggest\": {\n        \"ext-ctype\": \"For best performance\"\n    },\n    \"minimum-stability\": \"dev\",\n    \"extra\": {\n        \"thanks\": {\n            \"name\": \"symfony/polyfill\",\n            \"url\": \"https://github.com/symfony/polyfill\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 960, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e2c08bf5-54c0-490b-b597-d8437016241a": {"__data__": {"id_": "e2c08bf5-54c0-490b-b597-d8437016241a", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-mbstring/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1010, "creation_date": "2025-07-10", "last_modified_date": "2024-12-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a39f6f2a-ab49-405c-979d-54346bbc899b", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-mbstring/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1010, "creation_date": "2025-07-10", "last_modified_date": "2024-12-23", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5222dca42d33ddb004976b07d0ffa8dbfa7a8410647f7b27b0089723b7ba2577", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"symfony/polyfill-mbstring\",\n    \"type\": \"library\",\n    \"description\": \"Symfony polyfill for the Mbstring extension\",\n    \"keywords\": [\"polyfill\", \"shim\", \"compatibility\", \"portable\", \"mbstring\"],\n    \"homepage\": \"https://symfony.com\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Nicolas Grekas\",\n            \"email\": \"p@tchwork.com\"\n        },\n        {\n            \"name\": \"Symfony Community\",\n            \"homepage\": \"https://symfony.com/contributors\"\n        }\n    ],\n    \"require\": {\n        \"php\": \">=7.2\",\n        \"ext-iconv\": \"*\"\n    },\n    \"provide\": {\n        \"ext-mbstring\": \"*\"\n    },\n    \"autoload\": {\n        \"psr-4\": { \"Symfony\\\\Polyfill\\\\Mbstring\\\\\": \"\" },\n        \"files\": [ \"bootstrap.php\" ]\n    },\n    \"suggest\": {\n        \"ext-mbstring\": \"For best performance\"\n    },\n    \"minimum-stability\": \"dev\",\n    \"extra\": {\n        \"thanks\": {\n            \"name\": \"symfony/polyfill\",\n            \"url\": \"https://github.com/symfony/polyfill\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1009, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ebd638d8-39bd-4b98-a5ce-161e1ec352e4": {"__data__": {"id_": "ebd638d8-39bd-4b98-a5ce-161e1ec352e4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-php80/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1013, "creation_date": "2025-07-10", "last_modified_date": "2025-01-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "829932e1-5c51-4abc-99f1-3b5d627126e3", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/symfony/polyfill-php80/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1013, "creation_date": "2025-07-10", "last_modified_date": "2025-01-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7a1eddd7b239fa9d1edd59cb1afa5544448232332d993bea623022b997ab7245", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"symfony/polyfill-php80\",\n    \"type\": \"library\",\n    \"description\": \"Symfony polyfill backporting some PHP 8.0+ features to lower PHP versions\",\n    \"keywords\": [\"polyfill\", \"shim\", \"compatibility\", \"portable\"],\n    \"homepage\": \"https://symfony.com\",\n    \"license\": \"MIT\",\n    \"authors\": [\n        {\n            \"name\": \"Ion Bazan\",\n            \"email\": \"ion.bazan@gmail.com\"\n        },\n        {\n            \"name\": \"Nicolas Grekas\",\n            \"email\": \"p@tchwork.com\"\n        },\n        {\n            \"name\": \"Symfony Community\",\n            \"homepage\": \"https://symfony.com/contributors\"\n        }\n    ],\n    \"require\": {\n        \"php\": \">=7.2\"\n    },\n    \"autoload\": {\n        \"psr-4\": { \"Symfony\\\\Polyfill\\\\Php80\\\\\": \"\" },\n        \"files\": [ \"bootstrap.php\" ],\n        \"classmap\": [ \"Resources/stubs\" ]\n    },\n    \"minimum-stability\": \"dev\",\n    \"extra\": {\n        \"thanks\": {\n            \"name\": \"symfony/polyfill\",\n            \"url\": \"https://github.com/symfony/polyfill\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1012, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b1a77881-22f7-41f6-b757-d3451bf621e4": {"__data__": {"id_": "b1a77881-22f7-41f6-b757-d3451bf621e4", "embedding": null, "metadata": {"file_path": "/app/backend/solark_monitor/vendor/vlucas/phpdotenv/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1659, "creation_date": "2025-07-10", "last_modified_date": "2025-04-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "dd4bd519-6f83-44cb-8756-3b2181bacd03", "node_type": "4", "metadata": {"file_path": "/app/backend/solark_monitor/vendor/vlucas/phpdotenv/composer.json", "file_name": "composer.json", "file_type": "application/json", "file_size": 1659, "creation_date": "2025-07-10", "last_modified_date": "2025-04-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2504db686b8a23cbacc23a70f88822101474b9b859fabd0528f0d5a701cc5458", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n    \"name\": \"vlucas/phpdotenv\",\n    \"description\": \"Loads environment variables from `.env` to `getenv()`, `$_ENV` and `$_SERVER` automagically.\",\n    \"keywords\": [\"env\", \"dotenv\", \"environment\"],\n    \"license\": \"BSD-3-Clause\",\n    \"authors\": [\n        {\n            \"name\": \"Graham Campbell\",\n            \"email\": \"hello@gjcampbell.co.uk\",\n            \"homepage\": \"https://github.com/GrahamCampbell\"\n        },\n        {\n            \"name\": \"Vance Lucas\",\n            \"email\": \"vance@vancelucas.com\",\n            \"homepage\": \"https://github.com/vlucas\"\n        }\n    ],\n    \"require\": {\n        \"php\": \"^7.2.5 || ^8.0\",\n        \"ext-pcre\": \"*\",\n        \"graham-campbell/result-type\": \"^1.1.3\",\n        \"phpoption/phpoption\": \"^1.9.3\",\n        \"symfony/polyfill-ctype\": \"^1.24\",\n        \"symfony/polyfill-mbstring\": \"^1.24\",\n        \"symfony/polyfill-php80\": \"^1.24\"\n    },\n    \"require-dev\": {\n        \"ext-filter\": \"*\",\n        \"bamarni/composer-bin-plugin\": \"^1.8.2\",\n        \"phpunit/phpunit\":\"^8.5.34 || ^9.6.13 || ^10.4.2\"\n    },\n    \"autoload\": {\n        \"psr-4\": {\n            \"Dotenv\\\\\": \"src/\"\n        }\n    },\n    \"autoload-dev\": {\n        \"psr-4\": {\n            \"Dotenv\\\\Tests\\\\\": \"tests/Dotenv/\"\n        }\n    },\n    \"suggest\": {\n        \"ext-filter\": \"Required to use the boolean validator.\"\n    },\n    \"config\": {\n        \"allow-plugins\": {\n            \"bamarni/composer-bin-plugin\": true\n        },\n        \"preferred-install\": \"dist\"\n    },\n    \"extra\": {\n        \"bamarni-bin\": {\n            \"bin-links\": true,\n            \"forward-command\": false\n        },\n        \"branch-alias\": {\n            \"dev-master\": \"5.6-dev\"\n        }\n    }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1658, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7fe13b48-4c77-4dff-9dc4-9f53f8f5c907": {"__data__": {"id_": "7fe13b48-4c77-4dff-9dc4-9f53f8f5c907", "embedding": null, "metadata": {"file_path": "/app/frontend/components.json", "file_name": "components.json", "file_type": "application/json", "file_size": 428, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d45e242f-f10f-4b41-836e-4e686b6932d7", "node_type": "4", "metadata": {"file_path": "/app/frontend/components.json", "file_name": "components.json", "file_type": "application/json", "file_size": 428, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3c863f6ebd43ef3b519d4b0583ea26bdab0ccd9b3b34debb3e41e4d06d0e3221", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n  \"$schema\": \"https://ui.shadcn.com/schema.json\",\n  \"style\": \"new-york\",\n  \"rsc\": true,\n  \"tsx\": true,\n  \"tailwind\": {\n    \"config\": \"\",\n    \"css\": \"src/app/globals.css\",\n    \"baseColor\": \"slate\",\n    \"cssVariables\": true,\n    \"prefix\": \"\"\n  },\n  \"aliases\": {\n    \"components\": \"@/components\",\n    \"utils\": \"@/lib/utils\",\n    \"ui\": \"@/components/ui\",\n    \"lib\": \"@/lib\",\n    \"hooks\": \"@/hooks\"\n  },\n  \"iconLibrary\": \"lucide\"\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 428, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e1b58b9b-a1ed-4347-9948-d44c87705068": {"__data__": {"id_": "e1b58b9b-a1ed-4347-9948-d44c87705068", "embedding": null, "metadata": {"file_path": "/app/frontend/next-env.d.ts", "file_name": "next-env.d.ts", "file_size": 211, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "53df26b3-b951-4e0e-a474-a0037f26f89d", "node_type": "4", "metadata": {"file_path": "/app/frontend/next-env.d.ts", "file_name": "next-env.d.ts", "file_size": 211, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f5fc12bd63604c65b9697b7d91007020bbf11b1aa152b2a2f3f6580b92d64028", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "/// <reference types=\"next\" />\n/// <reference types=\"next/image-types/global\" />\n\n// NOTE: This file should not be edited\n// see https://nextjs.org/docs/app/api-reference/config/typescript for more information.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 210, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "26fe8ad1-98b9-45f3-a037-c7889ce99d22": {"__data__": {"id_": "26fe8ad1-98b9-45f3-a037-c7889ce99d22", "embedding": null, "metadata": {"file_path": "/app/frontend/next.config.ts", "file_name": "next.config.ts", "file_size": 133, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "754fbf18-fa85-49ef-b444-016910f9425b", "node_type": "4", "metadata": {"file_path": "/app/frontend/next.config.ts", "file_name": "next.config.ts", "file_size": 133, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3d62f18cdca40e1ae3da18c85c75afa2b57a8618ae95ab56f8c927335ab9a864", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import type { NextConfig } from \"next\";\n\nconst nextConfig: NextConfig = {\n  /* config options here */\n};\n\nexport default nextConfig;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 132, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "857ecffb-85c2-4312-83e3-614077a63b06": {"__data__": {"id_": "857ecffb-85c2-4312-83e3-614077a63b06", "embedding": null, "metadata": {"file_path": "/app/frontend/package.json", "file_name": "package.json", "file_type": "application/json", "file_size": 1299, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bf84fca2-df74-4029-b51c-89d2d44816f1", "node_type": "4", "metadata": {"file_path": "/app/frontend/package.json", "file_name": "package.json", "file_type": "application/json", "file_size": 1299, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "60d91b9fbff7bb03b223fc6786c5af647352da368d3c6ed4cc49952cb59ef7ff", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{\n  \"name\": \"frontend\",\n  \"version\": \"0.1.0\",\n  \"private\": true,\n  \"scripts\": {\n    \"dev\": \"next dev --turbopack\",\n    \"build\": \"next build\",\n    \"start\": \"next start\",\n    \"lint\": \"next lint\",\n    \"typecheck\": \"tsc --noEmit\"\n  },\n  \"dependencies\": {\n    \"@radix-ui/react-label\": \"^2.1.7\",\n    \"@radix-ui/react-slot\": \"^1.2.3\",\n    \"class-variance-authority\": \"^0.7.1\",\n    \"clsx\": \"^2.1.1\",\n    \"framer-motion\": \"^12.16.0\",\n    \"lucide-react\": \"^0.511.0\",\n    \"mermaid\": \"^11.8.1\",\n    \"next\": \"15.3.3\",\n    \"next-auth\": \"^4.24.11\",\n    \"next-themes\": \"^0.4.6\",\n    \"postcss\": \"^8.5.6\",\n    \"react\": \"^19.0.0\",\n    \"react-dom\": \"^19.0.0\",\n    \"react-markdown\": \"^10.1.0\",\n    \"react-syntax-highlighter\": \"^15.6.1\",\n    \"recharts\": \"^2.15.3\",\n    \"tailwind-merge\": \"^3.3.0\"\n  },\n  \"devDependencies\": {\n    \"@eslint/eslintrc\": \"^3\",\n    \"@tailwindcss/postcss\": \"^4.1.11\",\n    \"@tailwindcss/typography\": \"^0.5.11\",\n    \"@types/node\": \"^20\",\n    \"@types/react\": \"^19\",\n    \"@types/react-dom\": \"^19\",\n    \"@vitest/browser\": \"^3.2.3\",\n    \"@vitest/coverage-v8\": \"^3.2.3\",\n    \"autoprefixer\": \"^10.4.21\",\n    \"eslint\": \"^9\",\n    \"eslint-config-next\": \"15.3.3\",\n    \"playwright\": \"^1.52.0\",\n    \"tailwindcss\": \"^4.1.11\",\n    \"tw-animate-css\": \"^1.3.3\",\n    \"typescript\": \"^5\",\n    \"vitest\": \"^3.2.3\"\n  }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1298, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "68d0c78c-aee2-4843-aea2-d429776ba807": {"__data__": {"id_": "68d0c78c-aee2-4843-aea2-d429776ba807", "embedding": null, "metadata": {"file_path": "/app/frontend/postcss.config.js", "file_name": "postcss.config.js", "file_type": "application/javascript", "file_size": 121, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4296355d-479c-44bb-b60d-483d45c1d4b1", "node_type": "4", "metadata": {"file_path": "/app/frontend/postcss.config.js", "file_name": "postcss.config.js", "file_type": "application/javascript", "file_size": 121, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "86fa5eeb6c8fcaa678584466e2cc4524cb44179b85257a161ffdaa42f796b134", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: postcss.config.js\nmodule.exports = {\n  plugins: {\n    '@tailwindcss/postcss': {},\n    autoprefixer: {},\n  },\n};", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 120, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "da82d75f-7075-46b2-b121-6b0422f7971f": {"__data__": {"id_": "da82d75f-7075-46b2-b121-6b0422f7971f", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/MermaidGraph/page.tsx", "file_name": "page.tsx", "file_size": 398, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "37cb8db6-4e94-4b2d-8f21-9bc60f5ef623", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/MermaidGraph/page.tsx", "file_name": "page.tsx", "file_size": 398, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "9820468a3771aef574220b76b2d5799c1358e1a4ab141abfd645df4b2409ef92", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// app/MermaidGraph/page.tsx\nimport MermaidGraph from '@/components/MermaidGraph';\n\nexport default function MermaidPage() {\n  const code = `graph TD\n    main --> agents\n    agents --> critics\n    critics --> tests\n    services --> agents\n  `;\n\n  return (\n    <div className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">Relay Graph</h1>\n      <MermaidGraph code={code} />\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 396, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f7cb2ce6-a029-4338-9725-4151b1d66f52": {"__data__": {"id_": "f7cb2ce6-a029-4338-9725-4151b1d66f52", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/action-queue/page.tsx", "file_name": "page.tsx", "file_size": 320, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c8f5951a-3b9e-42c0-97c4-b9ed09806a77", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/action-queue/page.tsx", "file_name": "page.tsx", "file_size": 320, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "726ea558821f9d249a944cedd046d64ba09f22a57c53eb100e38959e212b8d6a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/app/action-queue/page.tsx\nimport ActionQueuePanel from \"@/components/ActionQueue/ActionQueuePanel\";\n\nexport default function ActionQueuePage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\ud83d\udccb Action Queue</h1>\n      <ActionQueuePanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 316, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4c576ad4-e1b6-47e7-a618-e6e8f343a992": {"__data__": {"id_": "4c576ad4-e1b6-47e7-a618-e6e8f343a992", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/api/docs/list/route.ts", "file_name": "route.ts", "file_size": 215, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f70506b9-168d-4e5f-b798-a189da9c9126", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/api/docs/list/route.ts", "file_name": "route.ts", "file_size": 215, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0a694850f59ac4b40ee384364d98776d386d7dcd86f5016c8619581b7a3e1347", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import { NextResponse } from \"next/server\"\n\nexport async function GET() {\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/docs/list`)\n  const data = await res.json()\n  return NextResponse.json(data)\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 214, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9a012e7a-4f90-45bc-a7e8-412a22f72ce1": {"__data__": {"id_": "9a012e7a-4f90-45bc-a7e8-412a22f72ce1", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/api/docs/view/route.ts", "file_name": "route.ts", "file_size": 358, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "41d8555e-3847-4b7e-aedd-122714b9c269", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/api/docs/view/route.ts", "file_name": "route.ts", "file_size": 358, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f186bc92cf3c820eb3f4fcd48664dc32b3ac4bf741290bb2ab80056259bf33aa", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import { NextRequest, NextResponse } from \"next/server\"\n\nexport async function GET(req: NextRequest) {\n  const url = new URL(req.url)\n  const path = url.searchParams.get(\"path\")\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/docs/view?path=${encodeURIComponent(path || \"\")}`)\n  const data = await res.json()\n  return NextResponse.json(data)\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 357, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cb7ea229-7540-43a3-81c2-1fda97512a9b": {"__data__": {"id_": "cb7ea229-7540-43a3-81c2-1fda97512a9b", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/api/kb/search/route.ts", "file_name": "route.ts", "file_size": 389, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "7c83fa77-fd44-4139-990b-9c2f280426b6", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/api/kb/search/route.ts", "file_name": "route.ts", "file_size": 389, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f40293f734ef270ce4f99ca6bbb9a2799f918d8dfdd053eff34bbc9ad696196c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import { NextRequest, NextResponse } from \"next/server\"\n\nexport async function POST(req: NextRequest) {\n  const body = await req.json()\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/kb/search`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(body),\n  })\n  const data = await res.json()\n  return NextResponse.json(data)\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 388, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1b0915ec-f18b-45b6-ad7e-6d22a6100201": {"__data__": {"id_": "1b0915ec-f18b-45b6-ad7e-6d22a6100201", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/api/status/summary/route.ts", "file_name": "route.ts", "file_size": 220, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "8a3c3712-f8bf-4de3-878b-3f60b204b7cb", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/api/status/summary/route.ts", "file_name": "route.ts", "file_size": 220, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2058d85a9f02693de0c7f1e858c2ad719d9daa2970bd30c722f683400676a5b9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import { NextResponse } from \"next/server\"\n\nexport async function GET() {\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/status/summary`)\n  const data = await res.json()\n  return NextResponse.json(data)\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 219, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6c58dc28-c6c9-467f-8dcf-edbf2b358d85": {"__data__": {"id_": "6c58dc28-c6c9-467f-8dcf-edbf2b358d85", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/ask/page.tsx", "file_name": "page.tsx", "file_size": 5898, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a75282ec-5426-4705-b4a3-cf8eb8ffca9c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/ask/page.tsx", "file_name": "page.tsx", "file_size": 5898, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bc204088c4e8a42e2200e84cad9ad12d99afdffd3a33e774b8c9a4d61c5e6997", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9647adc1-b8e7-4220-8332-3305114c2bf6", "node_type": "1", "metadata": {}, "hash": "e2f97991b7cb06ad5baae8a871329c590df3e965f71cc63853a50021a7a76e4a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/app/ask/page.tsx\n// Purpose: Ask Echo \u2014 bulletproof LLM chat interface with markdown rendering, local history, and safe input handling\n\n\"use client\";\n\nimport React, { useState, useRef, useEffect, useCallback } from \"react\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\nimport { API_ROOT } from \"@/lib/api\";\n\n// Message type\ntype Message = {\n  role: \"user\" | \"assistant\";\n  content: string;\n  context?: string;\n};\n\nconst USER_ID = \"bret-demo\";\nconst STORAGE_KEY = `echo-chat-history-${USER_ID}`;\nconst INPUT_KEY = `echo-chat-input-${USER_ID}`;\n\n// Type guard for stored messages\nfunction isMessage(val: unknown): val is Message {\n  return (\n    typeof val === \"object\" &&\n    val !== null &&\n    (val as Message).role &&\n    typeof (val as Message).content === \"string\" &&\n    ((val as Message).role === \"user\" || (val as Message).role === \"assistant\")\n  );\n}\n\n// Normalize unknown array into safe Message[]\nfunction normalizeMessages(arr: unknown[]): Message[] {\n  return Array.isArray(arr)\n    ? arr\n        .filter(isMessage)\n        .map((msg) => ({\n          role: msg.role,\n          content: String(msg.content),\n          ...(typeof msg.context === \"string\" && { context: msg.context }),\n        }))\n    : [];\n}\n\n// Markdown stringifier (bulletproof)\nfunction toMDString(val: unknown): string {\n  if (val == null) return \"_(no content)_\";\n  if (typeof val === \"string\") return val;\n  if (Array.isArray(val)) return val.map(toMDString).join(\"\\n\\n\");\n  try {\n    return \"```json\\n\" + JSON.stringify(val, null, 2) + \"\\n```\";\n  } catch {\n    return String(val);\n  }\n}\n\nexport default function AskPage() {\n  const [messages, setMessages] = useState<Message[]>(() => {\n    if (typeof window !== \"undefined\") {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      if (raw) {\n        try {\n          return normalizeMessages(JSON.parse(raw));\n        } catch {\n          return [];\n        }\n      }\n    }\n    return [];\n  });\n\n  const [input, setInput] = useState<string>(\"\");\n  const [loading, setLoading] = useState(false);\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  // Load cached input on mount\n  useEffect(() => {\n    const cached = localStorage.getItem(INPUT_KEY);\n    if (cached) setInput(cached);\n  }, []);\n\n  // Persist messages + scroll to bottom\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  // Persist input while typing\n  useEffect(() => {\n    localStorage.setItem(INPUT_KEY, input);\n  }, [input]);\n\n  const sendMessage = useCallback(async (e?: React.FormEvent): Promise<void> => {\n    if (e) e.preventDefault();\n    if (!input.trim() || loading) return;\n\n    const userMessage = input;\n    setMessages((msgs) => [\n      ...msgs,\n      { role: \"user\", content: toMDString(userMessage) },\n    ]);\n    setLoading(true);\n    setInput(\"\");\n\n    try {\n      const res = await fetch(`${API_ROOT}/mcp/run`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-Id\": USER_ID,\n        },\n        body: JSON.stringify({\n          query: userMessage,\n          role: \"planner\",\n          debug: true,\n        }),\n      });\n\n      const data = await res.json();\n      const result = data?.result || data;\n\n      const content =\n        result?.plan?.objective ||\n        result?.plan?.recommendation ||\n        result?.recommendation ||\n        result?.response ||\n        data?.response ||\n        \"[no answer]\";\n\n      setMessages((msgs) => [\n        ...msgs,\n        { role: \"assistant\", content: toMDString(content) },\n      ]);\n    } catch (err) {\n      console.error(\"\u26a0\ufe0f Fetch error:\", err);\n      setMessages((msgs) => [\n        ...msgs,\n        {\n          role: \"assistant\",\n          content: toMDString(\"[error] Unable to get response.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3863, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9647adc1-b8e7-4220-8332-3305114c2bf6": {"__data__": {"id_": "9647adc1-b8e7-4220-8332-3305114c2bf6", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/ask/page.tsx", "file_name": "page.tsx", "file_size": 5898, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a75282ec-5426-4705-b4a3-cf8eb8ffca9c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/ask/page.tsx", "file_name": "page.tsx", "file_size": 5898, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bc204088c4e8a42e2200e84cad9ad12d99afdffd3a33e774b8c9a4d61c5e6997", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "6c58dc28-c6c9-467f-8dcf-edbf2b358d85", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/app/ask/page.tsx", "file_name": "page.tsx", "file_size": 5898, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0946e65805172da18ee09d6228f8df613d52c643539a17a8092361ce96d807ff", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"),\n        },\n      ]);\n    }\n\n    setLoading(false);\n  }, [input, loading]);\n\n  const renderedMessages = messages.map((msg, i) => {\n    if (typeof msg.content !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof msg.content, msg.content);\n    }\n    return (\n      <div\n        key={i}\n        className={\n          msg.role === \"user\"\n            ? \"text-right text-blue-700\"\n            : \"text-left text-green-700\"\n        }\n      >\n        <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n          <SafeMarkdown>{msg.content}</SafeMarkdown>\n        </div>\n      </div>\n    );\n  });\n\n  return (\n    <div className=\"w-full max-w-2xl mx-auto min-h-screen flex flex-col\">\n      <h1 className=\"text-3xl font-bold my-4\">Ask Echo</h1>\n      <div className=\"flex-1 space-y-2 overflow-y-auto border rounded-xl p-4 bg-muted\">\n        {renderedMessages}\n\n        {loading && (\n          <div className=\"text-left text-green-600 italic\">Thinking\u2026</div>\n        )}\n        <div ref={bottomRef} />\n      </div>\n      <form\n        onSubmit={sendMessage}\n        className=\"flex items-center gap-2 mt-4\"\n        autoComplete=\"off\"\n      >\n        <input\n          type=\"text\"\n          className=\"flex-1 rounded border px-3 py-2\"\n          placeholder=\"Type your question\u2026\"\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          disabled={loading}\n          name=\"echo-message\"\n          id=\"echo-message\"\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              e.preventDefault();\n              sendMessage();\n            }\n          }}\n        />\n        <button\n          type=\"submit\"\n          className=\"bg-blue-600 text-white rounded px-4 py-2\"\n          disabled={loading || !input.trim()}\n        >\n          {loading ? \"Sending\u2026\" : \"Send\"}\n        </button>\n      </form>\n      <div className=\"text-xs text-gray-400 text-center mt-2\">\n        API root: <span className=\"font-mono\">{API_ROOT}</span>\n      </div>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 3863, "end_char_idx": 5885, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e9e97799-4ae8-48fc-b84c-772509651d81": {"__data__": {"id_": "e9e97799-4ae8-48fc-b84c-772509651d81", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/audit/page.tsx", "file_name": "page.tsx", "file_size": 261, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a952629f-3554-4cfb-a3a9-7f3fc6cd4617", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/audit/page.tsx", "file_name": "page.tsx", "file_size": 261, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6fe2331216fc14e614743fa2eea252f60589abc36eda87644c9ecd03ac977267", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\";\nimport AuditPanel from \"@/components/AuditPanel/AuditPanel\";\n\nexport default function AuditPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\ud83d\udee1\ufe0f Audit Log</h1>\n      <AuditPanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 255, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e45ffb0a-48d6-4dbb-8bc7-80fdf33a63b5": {"__data__": {"id_": "e45ffb0a-48d6-4dbb-8bc7-80fdf33a63b5", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/codex/page.tsx", "file_name": "page.tsx", "file_size": 3861, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a2287776-760c-4750-9d54-8e34fcb7790f", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/codex/page.tsx", "file_name": "page.tsx", "file_size": 3861, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "311b26bdb66d61d8d54949b5e6f44515ac4701527036bd376b9d7a30bdbeccd0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/app/codex/page.tsx\n// Purpose: Codex agent page with robust markdown/code output; status and patch display is bulletproofed.\n\n\"use client\";\n\nimport React, { useState } from \"react\";\nimport { CodexEditor, CodexPromptBar, CodexPatchView } from \"@/components/Codex\";\nimport { Button } from \"@/components/ui/button\";\nimport { API_ROOT } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\nimport { toMDString } from \"@/lib/toMDString\";\n\n// Helper replaced by shared utility\n\nconst CodexPage: React.FC = () => {\n  const [code, setCode] = useState<string>(\"\");\n  const [prompt, setPrompt] = useState<string>(\"\");\n  const [streamingPatch, setStreamingPatch] = useState<string>(\"\");\n  const [parsedPatch, setParsedPatch] = useState<{\n    file: string;\n    patch: string;\n    reason: string;\n  } | null>(null);\n  const [status, setStatus] = useState<string>(\"\");\n\n  const handleSubmit = async (): Promise<void> => {\n    setStreamingPatch(\"\u23f3 Working...\");\n    setParsedPatch(null);\n\n    try {\n      const res = await fetch(`${API_ROOT}/ask/codex_stream`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ question: prompt, context: code }),\n      });\n\n      const reader = res.body?.getReader();\n      const decoder = new TextDecoder();\n      let patch = \"\";\n\n      while (true) {\n        const { value, done } = await reader!.read();\n        if (done) break;\n        patch += decoder.decode(value, { stream: true });\n        setStreamingPatch(patch);\n      }\n\n      const fileMatch = patch.match(/File:\\s*(.*)/);\n      const reasonMatch = patch.match(/Reason:\\s*([\\s\\S]*)/);\n      const patchStart = patch.indexOf(\"Patch:\");\n      const reasonStart = patch.indexOf(\"Reason:\");\n\n      const extracted = {\n        file: fileMatch?.[1]?.trim() || \"\",\n        patch: patchStart !== -1 && reasonStart !== -1 ? patch.slice(patchStart + 6, reasonStart).trim() : \"\",\n        reason: reasonMatch?.[1]?.trim() || \"\"\n      };\n\n      if (extracted.file && extracted.patch) setParsedPatch(extracted);\n    } catch (err) {\n      setStreamingPatch(\"\u274c Error while generating patch: \" + String(err));\n    }\n  };\n\n  const applyPatch = async (): Promise<void> => {\n    if (!parsedPatch) return;\n    setStatus(toMDString(\"\u23f3 Applying patch...\"));\n\n    try {\n      const res = await fetch(`${API_ROOT}/codex/apply_patch`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          target_file: parsedPatch.file,\n          patch: parsedPatch.patch,\n          reason: parsedPatch.reason\n        })\n      });\n\n      if (res.ok) {\n        setStatus(toMDString(\"\u2705 Patch applied successfully.\"));\n      } else {\n        const err = await res.text();\n        setStatus(toMDString(\"\u274c Failed to apply patch: \" + err));\n      }\n    } catch (err) {\n      setStatus(toMDString(\"\u274c Patch request failed: \" + String(err)));\n    }\n  };\n\n  if (typeof status !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof status, status);\n  }\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <h1 className=\"text-2xl font-bold\">\ud83e\udde0 Codex \u2014 Code Editing Agent</h1>\n\n      <CodexEditor code={code} setCode={setCode} />\n      <CodexPromptBar prompt={prompt} setPrompt={setPrompt} onSubmit={handleSubmit} />\n      <CodexPatchView patch={streamingPatch} />\n\n      {parsedPatch && (\n        <div className=\"space-y-2\">\n          <Button onClick={applyPatch}>\u2705 Approve & Apply Patch</Button>\n          {status && (\n            <div className=\"text-sm text-muted-foreground\">\n              <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                <SafeMarkdown>{toMDString(status)}</SafeMarkdown>\n              </div>\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CodexPage;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3841, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9b265d65-99a5-4a3d-9583-8f45490b7217": {"__data__": {"id_": "9b265d65-99a5-4a3d-9583-8f45490b7217", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/control/page.tsx", "file_name": "page.tsx", "file_size": 893, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1f52bb5e-5527-4ead-917e-3698d69e883d", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/control/page.tsx", "file_name": "page.tsx", "file_size": 893, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "df89d8b09fc4c56223bce29ba2b6a1d9f6c4bb903cefbe2ad83d90255ebf843b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/app/control/page.tsx\n// Purpose: Admin control dashboard with patch queue, logs, and memory panels\n\nimport ActionQueuePanel from \"@/components/ActionQueue/ActionQueuePanel\";\nimport LogsPanel from \"@/components/LogsPanel/LogsPanel\";\nimport MemoryPanel from \"@/components/MemoryPanel\";\n\nexport default function ControlPage() {\n  return (\n    <main className=\"p-6 space-y-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\ud83e\udde0 Relay Control Center</h1>\n\n      <section>\n        <h2 className=\"text-xl font-semibold mb-2\">\ud83d\udcdd Pending Actions</h2>\n        <ActionQueuePanel />\n      </section>\n\n      <section>\n        <h2 className=\"text-xl font-semibold mb-2\">\ud83d\udcc4 Execution Logs</h2>\n        <LogsPanel />\n      </section>\n\n      <section>\n        <h2 className=\"text-xl font-semibold mb-2\">\ud83e\uddec Memory Log</h2>\n        <MemoryPanel />\n      </section>\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 880, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "705e9116-db44-4ec7-a7f3-51b890687cfa": {"__data__": {"id_": "705e9116-db44-4ec7-a7f3-51b890687cfa", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/dashboard/page.tsx", "file_name": "page.tsx", "file_size": 173, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "daccb6a2-084c-40fa-8805-cbe98cf053d8", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/dashboard/page.tsx", "file_name": "page.tsx", "file_size": 173, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "880a7440546bd4183d6a7f32ad24081af03c66dd868f4d6ec3c05328d14a37aa", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/app/dashboard/page.tsx\n\nimport Dashboard from \"@/components/dashboard/Dashboard\";\n\nexport default function DashboardPage() {\n  return <Dashboard />;\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 172, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "582e57ca-774b-447b-9ba3-9bde4ae890ea": {"__data__": {"id_": "582e57ca-774b-447b-9ba3-9bde4ae890ea", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/docs/page.tsx", "file_name": "page.tsx", "file_size": 217, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d357c4c3-f764-487e-b32a-62f89a2c5e77", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/docs/page.tsx", "file_name": "page.tsx", "file_size": 217, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a8147000ee73624430ca7cd6984476603747136f653e9add1df72dce27730761", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/app/docs/page.tsx\n// Purpose: Route-level page that renders the full DocsViewer\n\nimport DocsViewer from '@/components/DocsViewer/DocsViewer'\n\nexport default function DocsPage() {\n  return <DocsViewer />\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 217, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "074565ed-1b0b-4d34-9835-7e188b79e9e9": {"__data__": {"id_": "074565ed-1b0b-4d34-9835-7e188b79e9e9", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/email/page.tsx", "file_name": "page.tsx", "file_size": 253, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "286c068c-ea4f-4b1d-840b-08ba53e1c421", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/email/page.tsx", "file_name": "page.tsx", "file_size": 253, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a5c3f8f845775c73c6991c30622d35e74def2064f52e4605343eccad587abbcc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import GmailOpsPanel from \"@/components/GmailOps/GmailOpsPanel\";\n\nexport default function EmailPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\u2709\ufe0f Email Ops</h1>\n      <GmailOpsPanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 248, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4c374582-e34b-44d8-9b20-b74f9a964d80": {"__data__": {"id_": "4c374582-e34b-44d8-9b20-b74f9a964d80", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/gmail-ops/page.tsx", "file_name": "page.tsx", "file_size": 340, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9f6a7c1d-60f7-4ae5-9db2-823ffccc1c28", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/gmail-ops/page.tsx", "file_name": "page.tsx", "file_size": 340, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d70bfdf98b7dc7b0436a52aa8031c46429f76f13bccf496f8b1bec4226720e59", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import GmailOpsPanel from \"@/components/GmailOps/GmailOpsPanel\";\n\nexport default function GmailOpsPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\u2709\ufe0f Gmail Ops</h1>\n      {/* Renders the GmailOpsPanel component which handles Gmail operations UI */}\n      <GmailOpsPanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 335, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1cc10007-0f8b-4eb2-8a2b-a51e62508544": {"__data__": {"id_": "1cc10007-0f8b-4eb2-8a2b-a51e62508544", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/janitor/page.tsx", "file_name": "page.tsx", "file_size": 184, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c6f923eb-d868-409b-89b9-ac2a1a11f3b7", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/janitor/page.tsx", "file_name": "page.tsx", "file_size": 184, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2f9eaa6ecc958fd640d3b30ad076136a6060529e00a18d0e2f7664b68e156fe2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\";\n\nexport default function JanitorPage() {\n  return (\n    <main className=\"p-6 text-sm text-gray-500\">\n      Janitor operations are not yet implemented.\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 183, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3642bf29-c47f-4202-8a0c-f86ad557859a": {"__data__": {"id_": "3642bf29-c47f-4202-8a0c-f86ad557859a", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/layout.tsx", "file_name": "layout.tsx", "file_size": 514, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "0a4b441a-a6cb-46cc-aa10-ee91d2fd9913", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/layout.tsx", "file_name": "layout.tsx", "file_size": 514, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b04327544c98dd3cb319af64fae071db2767700b39bad90905ccb024c4c58292", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import './globals.css';\nimport { ReactNode } from 'react';\nimport Sidebar from '@/components/Sidebar/Sidebar';\n\nexport default function RootLayout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body className=\"min-h-screen font-sans bg-background text-foreground\">\n        <div className=\"flex h-screen\">\n          <Sidebar />\n          <main className=\"flex-1 overflow-auto p-6 bg-gray-50\">\n            {children}\n          </main>\n        </div>\n      </body>\n    </html>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 513, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "153f053c-5af8-491d-9415-4e68d74c7859": {"__data__": {"id_": "153f053c-5af8-491d-9415-4e68d74c7859", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/logs/page.tsx", "file_name": "page.tsx", "file_size": 248, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "17719e89-ab8c-499c-9748-9edf49a82a5c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/logs/page.tsx", "file_name": "page.tsx", "file_size": 248, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6b21e4c4c274f493c5c32b4579f46069d6d53b50137af219ff3e8ef599c525b3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\";\nimport LogsPanel from \"@/components/LogsPanel/LogsPanel\";\n\nexport default function LogsPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\ud83d\udcdc Logs</h1>\n      <LogsPanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 244, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "44837b55-578d-4fe4-9f75-093c8804c91f": {"__data__": {"id_": "44837b55-578d-4fe4-9f75-093c8804c91f", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/page.tsx", "file_name": "page.tsx", "file_size": 1969, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d1bfe65c-28e3-4992-bffb-5825640cdd08", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/page.tsx", "file_name": "page.tsx", "file_size": 1969, "creation_date": "2025-07-02", "last_modified_date": "2025-07-02", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1fed78bbb0a1d084fb9f74ab21e257a386e3f27610f23748910a405c06efc6ec", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/app/page.tsx\n// Purpose: Wildfire Ranch Command Center UI (Puck-free)\n\n'use client'\n\nimport Image from 'next/image'\n\nexport default function HomePage() {\n  const statusColors = ['red', 'green', 'orange', 'green']\n\n  return (\n    <main className=\"flex-1 grid grid-cols-4 grid-rows-2 gap-4 p-4 bg-gray-50\">\n      {/* Top Left Panel */}\n      <div className=\"col-span-3 row-span-1 bg-white rounded-xl shadow p-4\">\n        <h3 className=\"font-semibold mb-2\">Top Left Panel</h3>\n        <p>Content goes here\u2026</p>\n      </div>\n\n      {/* Agent Status */}\n      <div className=\"col-span-1 row-span-1 bg-white rounded-xl shadow p-4\">\n        <h4 className=\"font-bold flex items-center gap-2 mb-2\">\n          <Image src=\"/PlannerCop.png\" alt=\"agent\" width={20} height={20} />\n          Agent Status\n        </h4>\n        <ul className=\"text-sm space-y-1\">\n          {statusColors.map((color, i) => (\n            <li key={i} className=\"flex items-center gap-2\">\n              <span className={`w-3 h-3 rounded-full bg-${color}-500`} />\n              Service {i + 1}\n            </li>\n          ))}\n        </ul>\n      </div>\n\n      {/* Bottom Left Panel */}\n      <div className=\"col-span-3 row-span-1 bg-white rounded-xl shadow p-4\">\n        <h3 className=\"font-semibold mb-2\">Bottom Left Panel</h3>\n        <p>More content here\u2026</p>\n      </div>\n\n      {/* Shack Status */}\n      <div className=\"col-span-1 row-span-1 bg-white rounded-xl shadow p-4\">\n        <h4 className=\"font-bold flex items-center gap-2 mb-2\">\n          <Image src=\"/WildfireMang.png\" alt=\"shack\" width={20} height={20} />\n          Shack Status\n        </h4>\n        <ul className=\"text-sm space-y-1\">\n          {statusColors.map((color, i) => (\n            <li key={i} className=\"flex items-center gap-2\">\n              <span className={`w-3 h-3 rounded-full bg-${color}-500`} />\n              Service {i + 1}\n            </li>\n          ))}\n        </ul>\n      </div>\n    </main>\n  )\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1964, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d24367d1-aec8-4706-8eb4-b3b736961c95": {"__data__": {"id_": "d24367d1-aec8-4706-8eb4-b3b736961c95", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/planner/page.tsx", "file_name": "page.tsx", "file_size": 171, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "8a9ea1a9-34c1-43c7-8e57-9aa932d8506d", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/planner/page.tsx", "file_name": "page.tsx", "file_size": 171, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4ef47b7394d15c7d3a4161e26ee5ebe0e309c227b6aa685c33e38165c623ef5e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\";\n\nexport default function PlannerPage() {\n  return (\n    <main className=\"p-6 text-sm text-gray-500\">\n      Planner interface coming soon.\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 170, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f356be95-84bb-4af2-b20d-5bb84072c937": {"__data__": {"id_": "f356be95-84bb-4af2-b20d-5bb84072c937", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/search/page.tsx", "file_name": "page.tsx", "file_size": 248, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5fa920a0-50c1-4c4b-8e16-b150b537936b", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/search/page.tsx", "file_name": "page.tsx", "file_size": 248, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b4e2366cd2dcedc63de3c7ccfc37479b15bb87652bab7e00cc16e949050abb59", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\";\nimport SearchPanel from \"@/components/SearchPanel\";\n\nexport default function SearchPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\ud83d\udd0d Search</h1>\n      <SearchPanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 244, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6d622a73-65bf-487a-aacf-0135940bd173": {"__data__": {"id_": "6d622a73-65bf-487a-aacf-0135940bd173", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/settings/page.tsx", "file_name": "page.tsx", "file_size": 353, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9377a47f-46c2-4867-8316-add61c6da567", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/settings/page.tsx", "file_name": "page.tsx", "file_size": 353, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "55c6dc962b255079bffa0bb8a7e2020a841c3f14a9f6f7d4b400a29fa8424db3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/app/settings/page.tsx\n\nexport default function SettingsPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\u2699\ufe0f Settings</h1>\n      <p className=\"text-muted-foreground\">Configure your Relay experience here.</p>\n      {/* Add settings forms, toggles, API keys, etc. */}\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 348, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8061263a-047e-468e-a339-50a86d1f0cdf": {"__data__": {"id_": "8061263a-047e-468e-a339-50a86d1f0cdf", "embedding": null, "metadata": {"file_path": "/app/frontend/src/app/status/page.tsx", "file_name": "page.tsx", "file_size": 284, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "272e87a0-91e2-432e-aae9-b5fb9ffe7444", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/app/status/page.tsx", "file_name": "page.tsx", "file_size": 284, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a85e6270ce9eb072818aa3cdac43de0142cb3f73eabfa565e2e8751ae4388df5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/app/status/page.tsx\n\nimport StatusPanel from \"@/components/StatusPanel\";\n\nexport default function StatusPage() {\n  return (\n    <main className=\"p-6\">\n      <h1 className=\"text-2xl font-bold mb-4\">\ud83d\udcca System Status</h1>\n      <StatusPanel />\n    </main>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 280, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "66d3d858-719f-4aa6-b017-c999939770f3": {"__data__": {"id_": "66d3d858-719f-4aa6-b017-c999939770f3", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "84c8f2e1-1494-4ff3-aef9-de480f737563", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "35704f9b096d0ab814e3c24a0a34415b367096fe46e03109ebea992f6cabd330", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b248f7f2-e3ac-4be8-810c-8d93c5d8e1ed", "node_type": "1", "metadata": {}, "hash": "fa741834527ccf3b6307651c6d4d239e15838bfa37341b0b529b3c9d29cd44c6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/ActionQueuePanel.tsx\n// Purpose: Superpanel for agent patch/action queue with approve/deny, context diff, and deep audit.\n//          All rationale, diff, content, and context fields are rendered with SafeMarkdown for bulletproof safety.\n\n\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { API_ROOT } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\nimport { toMDString } from \"@/lib/toMDString\";\n\ntype ActionStatus = \"pending\" | \"approved\" | \"denied\";\n\ntype HistoryEntry = {\n  timestamp: string;\n  status: ActionStatus;\n  user?: string;\n  comment?: string;\n};\n\ntype Action = {\n  id: string;\n  timestamp: string;\n  status: ActionStatus;\n  action: {\n    type: string;\n    path?: string;\n    content?: string;\n    diff?: string;\n    context?: string;\n    rationale?: string;\n  };\n  history?: HistoryEntry[];\n};\n\n\nexport default function ActionQueuePanel() {\n  const [actions, setActions] = useState<Action[]>([]);\n  const [processing, setProcessing] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [showContext, setShowContext] = useState<{ [id: string]: boolean }>({});\n  const [showHistory, setShowHistory] = useState<{ [id: string]: boolean }>({});\n  const [comment, setComment] = useState<{ [id: string]: string }>({});\n  const [compareContextId, setCompareContextId] = useState<string | null>(null);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n\n  const API_KEY = process.env.NEXT_PUBLIC_API_KEY || \"\";\n  const USER_ID = \"bret\";\n\n  const fetchQueue = useCallback(async () => {\n    setLoading(true);\n    setError(null);\n    try {\n      const res = await fetch(`${API_ROOT}/control/list_queue`, {\n        headers: {\n          \"X-API-Key\": API_KEY,\n          \"X-User-Id\": USER_ID\n        }\n      });\n      if (!res.ok) throw new Error(\"Bad response\");\n      const data = await res.json();\n      const mapped = (data.actions || []).map((a: Action) => ({\n        ...a,\n        action: {\n          ...a.action,\n          rationale: toMDString(a.action?.rationale),\n          diff: toMDString(a.action?.diff),\n          context: toMDString(a.action?.context),\n          content: toMDString(a.action?.content)\n        },\n        history: Array.isArray(a.history)\n          ? a.history.map(h => ({\n              ...h,\n              comment: toMDString(h.comment)\n            }))\n          : a.history\n      }));\n      setActions(mapped);\n    } catch (err) {\n      console.error(\"Queue fetch failed\", err);\n      setError(\"Failed to fetch action queue.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2859, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b248f7f2-e3ac-4be8-810c-8d93c5d8e1ed": {"__data__": {"id_": "b248f7f2-e3ac-4be8-810c-8d93c5d8e1ed", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "84c8f2e1-1494-4ff3-aef9-de480f737563", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "35704f9b096d0ab814e3c24a0a34415b367096fe46e03109ebea992f6cabd330", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "66d3d858-719f-4aa6-b017-c999939770f3", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "81ce702516bd8b86544d5a343c3cfaa71ad22a4b76f81bdb83367b21b63510db", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "01d94ed4-6737-4fd4-a45e-82b8dc1eb208", "node_type": "1", "metadata": {}, "hash": "51cdb2a56bdfa9b0fbe3ae28ce2ed81e46d64ce3a6b266bd42872bd9d631d0e3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "a.history.map(h => ({\n              ...h,\n              comment: toMDString(h.comment)\n            }))\n          : a.history\n      }));\n      setActions(mapped);\n    } catch (err) {\n      console.error(\"Queue fetch failed\", err);\n      setError(\"Failed to fetch action queue.\");\n    }\n    setLoading(false);\n  }, [API_KEY, USER_ID]);\n\n  const updateStatus = async (id: string, action: \"approve\" | \"deny\") => {\n    setProcessing(id + action);\n    try {\n      const res = await fetch(`${API_ROOT}/control/${action}_action`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-API-Key\": API_KEY,\n          \"X-User-Id\": USER_ID\n        },\n        body: JSON.stringify({ id, comment: comment[id] || \"\" })\n      });\n      if (!res.ok) throw new Error(`${action} failed`);\n      await fetchQueue();\n      setComment((prev) => ({ ...prev, [id]: \"\" }));\n    } catch (err) {\n      console.error(`Action ${action} failed`, err);\n      setError(`Failed to ${action} action.`);\n    }\n    setProcessing(null);\n  };\n\n  useEffect(() => {\n    fetchQueue();\n    if (!autoRefresh) return;\n    const interval = setInterval(fetchQueue, 15000);\n    return () => clearInterval(interval);\n  }, [fetchQueue, autoRefresh]);\n\n  const getActionById = (id: string) => actions.find(a => a.id === id);\n\n  for (const a of actions) {\n    if (a.action.rationale && typeof a.action.rationale !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof a.action.rationale, a.action.rationale);\n    }\n    if (a.action.diff && typeof a.action.diff !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof a.action.diff, a.action.diff);\n    }\n    if (typeof a.action.content !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof a.action.content, a.action.content);\n    }\n    if (a.action.context && typeof a.action.context !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof a.action.context, a.action.context);\n    }\n    if (Array.isArray(a.history)) {\n      for (const h of a.history) {\n        if (h.comment && typeof h.comment !== \"string\") {\n          console.log(\"DEBUG 418:\", typeof h.comment, h.comment);\n        }\n      }\n    }\n  }\n\n  if (error) return <p className=\"text-red-500\">{error}</p>;\n  if (loading) return <p className=\"text-muted-foreground\">Loading queue...</p>;\n  if (!actions.length) return <p className=\"text-muted-foreground\">No actions in queue.</p>;\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex gap-2 mb-4 items-center\">\n        <Button variant={autoRefresh ? \"default\" : \"outline\"} onClick={() => setAutoRefresh(!autoRefresh)}>\n          {autoRefresh ? \"Auto-Refresh ON\" : \"Auto-Refresh OFF\"}\n        </Button>\n        <span className=\"text-xs text-gray-400\">Queue updates every 15s</span>\n      </div>\n      {actions.map((a) => (\n        <Card key={a.id}>\n          <CardContent className=\"p-4 space-y-2\">\n            <div className=\"flex items-center gap-2 text-sm font-mono text-muted-foreground\">\n              #{a.id.slice(0, 8)} \u2022 {a.timestamp}\n              <Badge variant={\n                a.status === \"approved\" ? \"success\" :\n                a.status === \"denied\" ? \"destructive\" : \"secondary\"\n              }>\n                {a.status}\n              </Badge>\n            </div>\n\n            <div className=\"text-sm\">\n              <strong>Type:</strong> {a.action.type}\n              {a.action.path && <span className=\"ml-2\"><strong>Path:</strong> {a.action.path}</span>}\n            </div>\n\n            {a.action.rationale && (\n              <div className=\"text-xs text-blue-800 mt-1 italic\">\n                <strong>Why?</strong>{\" \"}\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{toMDString(a.action.rationale)}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n\n            {a.action.diff ?", "mimetype": "text/plain", "start_char_idx": 2584, "end_char_idx": 6450, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "01d94ed4-6737-4fd4-a45e-82b8dc1eb208": {"__data__": {"id_": "01d94ed4-6737-4fd4-a45e-82b8dc1eb208", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "84c8f2e1-1494-4ff3-aef9-de480f737563", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "35704f9b096d0ab814e3c24a0a34415b367096fe46e03109ebea992f6cabd330", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b248f7f2-e3ac-4be8-810c-8d93c5d8e1ed", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "35ba0e1c00867f1c6e764e41af16b4ca92a7f5a4d73ee3f3556533e33aaf441e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6a7e29fe-76af-40a6-92f3-1d6352c4db37", "node_type": "1", "metadata": {}, "hash": "bf12b638bb8fdc9f1c48e18bfaf33884ce294fc999841b19a8c22fb56cd9a77c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"success\" :\n                a.status === \"denied\" ? \"destructive\" : \"secondary\"\n              }>\n                {a.status}\n              </Badge>\n            </div>\n\n            <div className=\"text-sm\">\n              <strong>Type:</strong> {a.action.type}\n              {a.action.path && <span className=\"ml-2\"><strong>Path:</strong> {a.action.path}</span>}\n            </div>\n\n            {a.action.rationale && (\n              <div className=\"text-xs text-blue-800 mt-1 italic\">\n                <strong>Why?</strong>{\" \"}\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{toMDString(a.action.rationale)}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n\n            {a.action.diff ? (\n              <details>\n                <summary className=\"cursor-pointer text-xs text-blue-700\">View Diff</summary>\n                <div className=\"bg-muted p-2 rounded text-xs overflow-auto whitespace-pre-wrap\">\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <SafeMarkdown>{toMDString(a.action.diff)}</SafeMarkdown>\n                  </div>\n                </div>\n              </details>\n            ) : (\n              <div className=\"bg-muted p-2 rounded text-sm overflow-auto whitespace-pre-wrap\">\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{toMDString(a.action.content?.slice(0, 500) || \"No content\")}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n\n            {a.action.context && (\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                className=\"my-2\"\n                onClick={() => setShowContext(prev => ({ ...prev, [a.id]: !prev[a.id] }))}\n              >\n                {showContext[a.id] ? \"Hide Agent Context\" : \"Show Agent Context\"}\n              </Button>\n            )}\n\n            {showContext[a.id] && a.action.context && (\n              <div className=\"bg-gray-100 p-2 rounded text-xs max-h-32 overflow-auto mt-2\">\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{toMDString(a.action.context)}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n\n            {/* Context diff compare */}\n            <div className=\"mt-2\">\n              <label className=\"text-xs mr-2\">Compare context to:</label>\n              <select\n                className=\"border rounded px-1 py-0.5 text-xs\"\n                value={compareContextId === a.id ? \"\" : compareContextId || \"\"}\n                onChange={e => setCompareContextId(e.target.value || null)}\n              >\n                <option value=\"\">Select previous action\u2026</option>\n                {actions.filter(other => other.id !== a.id && other.action.context).map(other => (\n                  <option key={other.id} value={other.id}>\n                    #{other.id.slice(0, 8)} {other.action.type}\n                  </option>\n                ))}\n              </select>\n              {compareContextId && getActionById(compareContextId) && a.action.context && (\n                <details>\n                  <summary className=\"cursor-pointer text-xs text-blue-700 mt-1\">Show Context Diff</summary>\n                  <div className=\"bg-yellow-100 p-2 rounded text-xs overflow-auto whitespace-pre-wrap\">\n                    <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                      <SafeMarkdown>\n                        {toMDString(\n                          diffContext(a.action.context, getActionById(compareContextId)?.action.context || \"\")\n                        )}\n                      </SafeMarkdown>\n                    </div>\n                  </div>\n                </details>\n              )}\n            </div>\n\n            <Button\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"my-2\"\n              onClick={() => setShowHistory(prev => ({ ...prev, [a.id]: !prev[a.id] }))}\n            >\n              {showHistory[a.id] ?", "mimetype": "text/plain", "start_char_idx": 5673, "end_char_idx": 9809, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6a7e29fe-76af-40a6-92f3-1d6352c4db37": {"__data__": {"id_": "6a7e29fe-76af-40a6-92f3-1d6352c4db37", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "84c8f2e1-1494-4ff3-aef9-de480f737563", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "35704f9b096d0ab814e3c24a0a34415b367096fe46e03109ebea992f6cabd330", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "01d94ed4-6737-4fd4-a45e-82b8dc1eb208", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/ActionQueue/ActionQueuePanel.tsx", "file_name": "ActionQueuePanel.tsx", "file_size": 12602, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "60a5936a0e1a90b9dd00d1ff310f79805dacffeb27693cd3c0636b307e3eaff2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"Hide History\" : \"Show History\"}\n            </Button>\n\n            {showHistory[a.id] && Array.isArray(a.history) && (\n              <ul className=\"bg-gray-50 p-2 rounded text-xs mt-1 max-h-32 overflow-auto border\">\n                {a.history.map((h, i) => (\n                  <li key={i}>\n                    <span className=\"font-mono\">{h.timestamp}</span> \u2022 <Badge>{h.status}</Badge>\n                    {h.user && <span className=\"ml-2 text-blue-700\">{h.user}</span>}\n                    {h.comment && (\n                      <span className=\"ml-2 italic\">\n                        <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                          <SafeMarkdown>{toMDString(h.comment)}</SafeMarkdown>\n                        </div>\n                      </span>\n                    )}\n                  </li>\n                ))}\n              </ul>\n            )}\n\n            {a.status === \"pending\" && (\n              <form className=\"flex flex-col gap-2 mt-2\" onSubmit={e => e.preventDefault()}>\n                <Textarea\n                  id={`comment-${a.id}`}\n                  name={`comment-${a.id}`}\n                  placeholder=\"Optional comment (why approve/deny?)\"\n                  value={comment[a.id] || \"\"}\n                  onChange={e =>\n                    setComment(prev => ({ ...prev, [a.id]: e.target.value }))\n                  }\n                  className=\"text-xs\"\n                  rows={2}\n                />\n                <div className=\"flex gap-2\">\n                  <Button\n                    variant=\"default\"\n                    onClick={() => updateStatus(a.id, \"approve\")}\n                    disabled={processing === a.id + \"approve\"}\n                    type=\"button\"\n                  >\n                    {processing === a.id + \"approve\" ? \"Approving...\" : \"Approve\"}\n                  </Button>\n                  <Button\n                    variant=\"destructive\"\n                    onClick={() => updateStatus(a.id, \"deny\")}\n                    disabled={processing === a.id + \"deny\"}\n                    type=\"button\"\n                  >\n                    {processing === a.id + \"deny\" ? \"Denying...\" : \"Deny\"}\n                  </Button>\n                </div>\n              </form>\n            )}\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n\n  // Simple line diff for context comparison\n  function diffContext(ctx1: string, ctx2: string): string {\n    const lines1 = new Set((ctx1 || \"\").split(\"\\n\"));\n    const lines2 = new Set((ctx2 || \"\").split(\"\\n\"));\n    let out = \"\";\n    for (const l of lines1) {\n      if (!lines2.has(l)) out += `+ ${l}\\n`;\n    }\n    for (const l of lines2) {\n      if (!lines1.has(l)) out += `- ${l}\\n`;\n    }\n    return out || \"No differences.\";\n  }\n}", "mimetype": "text/plain", "start_char_idx": 9810, "end_char_idx": 12595, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3264aed3-bc99-4b69-b264-7350e2945113": {"__data__": {"id_": "3264aed3-bc99-4b69-b264-7350e2945113", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AskAgent/ChatMessage.tsx", "file_name": "ChatMessage.tsx", "file_size": 908, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "638fe33f-050b-4e62-905f-e229dc0772e1", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/ChatMessage.tsx", "file_name": "ChatMessage.tsx", "file_size": 908, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "dc49e0843b4e6c896fb85cd7d5b9658e01af404f2c15aeb20595ec8bfe57fd09", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/AskAgent/ChatMessage.tsx\n// Purpose: Renders a single chat message, always string-coercing content for SafeMarkdown.\n\n\"use client\";\nimport React from \"react\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\"; // Use the shared safe renderer\nimport { toMDString } from \"@/lib/toMDString\";\n\ntype Props = {\n  role: \"user\" | \"assistant\";\n  content: unknown; // Accept anything, always coerce to string for safety\n};\n\n\nexport default function ChatMessage({ role, content }: Props) {\n  const alignClass =\n    role === \"user\" ? \"text-right text-blue-700\" : \"text-left text-green-700\";\n\n  if (typeof content !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof content, content);\n  }\n\n  return (\n    <div className={alignClass}>\n      <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n        <SafeMarkdown>{toMDString(content)}</SafeMarkdown>\n      </div>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 907, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9628fd2d-2c1c-4918-8454-6eb1a3d27961": {"__data__": {"id_": "9628fd2d-2c1c-4918-8454-6eb1a3d27961", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AskAgent/ChatWindow.tsx", "file_name": "ChatWindow.tsx", "file_size": 1669, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6acff44f-e035-4df2-a482-2f37a1d52800", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/ChatWindow.tsx", "file_name": "ChatWindow.tsx", "file_size": 1669, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "137d94f1539b38cad5e22ca8646d31602540ea114942fd1902987f2d7e05f804", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/AskEcho/ChatWindow.tsx\n// Purpose: Chat window for Ask Echo UI using /mcp/run pipeline\n// Updated: 2025-07-01\n\n\nimport ChatMessage from \"./ChatMessage\";\nimport InputBar from \"./InputBar\";\nimport { useAskEcho } from \"./useAskEcho\";\nimport { toMDString } from \"@/lib/toMDString\";\n\nexport default function ChatWindow() {\n  // Unified chat state and actions from the custom hook\n  const {\n    input,\n    setInput,\n    messages,\n    sendMessage,\n    loading,\n    bottomRef,\n  } = useAskEcho();\n\n  const renderedMessages = messages.map((msg, i) => {\n    if (typeof msg.content !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof msg.content, msg.content);\n    }\n    return (\n      <>\n        <ChatMessage key={i} role={msg.role} content={toMDString(msg.content)} />\n      </>\n    );\n  });\n\n  return (\n    <div className=\"w-full max-w-2xl mx-auto min-h-screen flex flex-col\">\n      {/* Header */}\n      <h1 className=\"text-3xl font-bold my-4\">Ask Echo</h1>\n\n      {/* Message List */}\n      <div className=\"flex-1 space-y-2 overflow-y-auto border rounded-xl p-4 bg-muted\">\n        {renderedMessages}\n        {loading && (\n          <div className=\"text-left text-green-700 animate-pulse\">\n            Echo is thinking\u2026\n          </div>\n        )}\n        <div ref={bottomRef} />\n      </div>\n\n      {/* Input Bar */}\n      <InputBar\n        value={input}\n        onChange={setInput}\n        onSend={sendMessage}\n        loading={loading}\n      />\n\n      {/* Keyboard shortcut hint */}\n      <div className=\"text-xs text-gray-400 text-center mt-2\">\n        Tip: Press <code>Enter</code> to send. Shift+Enter for newline.\n      </div>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1666, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "182f69c3-30b2-4558-804d-e9a8e72d710d": {"__data__": {"id_": "182f69c3-30b2-4558-804d-e9a8e72d710d", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AskAgent/InputBar.tsx", "file_name": "InputBar.tsx", "file_size": 1460, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6f132efe-0260-4c0e-b318-0ddea78861bd", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/InputBar.tsx", "file_name": "InputBar.tsx", "file_size": 1460, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5883f88804fbca6a008a1e24153a5ef4ea97278598661ae762fd25a2cd336ab2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/AskAgent/InputBar.tsx\n// Purpose: Text input + send button for AskAgent chat UI\n// Updated: 2025-06-30\n\nimport React from \"react\";\n\ntype Props = {\n  value: string;                 // Input value (controlled)\n  onChange: (val: string) => void; // Handle text changes\n  onSend: () => void;              // Called to send message\n  loading: boolean;                // Loading state (disables input/button)\n};\n\nconst InputBar: React.FC<Props> = ({ value, onChange, onSend, loading }) => {\n  return (\n    <form\n      className=\"flex items-center gap-2 mt-4\"\n      autoComplete=\"off\"\n      onSubmit={(e) => {\n        e.preventDefault();\n        if (!loading && value.trim()) onSend();\n      }}\n    >\n      <input\n        type=\"text\"\n        className=\"flex-1 rounded border px-3 py-2\"\n        placeholder=\"Type your question\u2026\"\n        value={value}\n        onChange={(e) => onChange(e.target.value)}\n        disabled={loading}\n        name=\"echo-message\"\n        id=\"echo-message\"\n        onKeyDown={(e) => {\n          if (e.key === \"Enter\" && !e.shiftKey && value.trim() && !loading) {\n            e.preventDefault();\n            onSend();\n          }\n        }}\n        autoFocus\n      />\n      <button\n        type=\"submit\"\n        className=\"bg-blue-600 text-white rounded px-4 py-2\"\n        disabled={loading || !value.trim()}\n      >\n        {loading ? \"Sending\u2026\" : \"Send\"}\n      </button>\n    </form>\n  );\n};\n\nexport default InputBar;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1455, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fd97a52b-11e4-4d03-8396-32f3ab0129dc": {"__data__": {"id_": "fd97a52b-11e4-4d03-8396-32f3ab0129dc", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AskAgent/hooks.ts", "file_name": "hooks.ts", "file_size": 3634, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "512b20ea-86b8-4126-8a8d-896010f5867b", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/hooks.ts", "file_name": "hooks.ts", "file_size": 3634, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6eb067be97dc878d6f5139a16447dda0cc6f2b64a668893cef271ad67b5f4f30", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/AskAgent/hooks.ts\n// Purpose: Reusable React hook for AskAgent chat\u2014now wired to /mcp/run for agent/critic orchestration\n//          Ensures ALL message fields for markdown rendering are always strings (prevents React #418).\n// Updated: 2025-07-01\n\n\"use client\";\nimport { useState } from \"react\";\nimport { API_ROOT } from \"@/lib/api\";\nimport { toMDString } from \"@/lib/toMDString\";\n\n// Message interface for chat history\nexport interface Message {\n  user: string;   // User's input\n  agent: string;  // Agent's reply (ALWAYS stringified)\n  context?: string; // (ALWAYS stringified if present)\n  action?: { type: string; payload: unknown };\n  id?: string;\n  status?: \"pending\" | \"approved\" | \"denied\";\n}\n\n\n// Main hook for agent chat\nexport function useAskAgent(userId: string) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  // Send user query to backend, add both user and agent messages\n  const sendQuery = async (\n    query: string,\n    files: string[] = [],\n    topics: string[] = [],\n    role: string = \"planner\", // Optionally allow agent selection\n    debug: boolean = true,\n    scrollToBottom?: () => void\n  ) => {\n    if (!query.trim()) return;\n\n    // Add user message\n    setMessages((prev) => [...prev, { user: toMDString(query), agent: \"\" }]);\n    setLoading(true);\n\n    try {\n      // Build payload for unified MCP endpoint\n      const payload = {\n        query,\n        files,\n        topics,\n        role,\n        debug,\n      };\n\n      const res = await fetch(`${API_ROOT}/mcp/run`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-Id\": userId,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await res.json();\n      const result = data?.result || data;\n\n      // Coerce all markdown-displayed fields to strings for safety\n      setMessages((prev) => [\n        ...prev.slice(0, -1),\n        {\n          user: query,\n          agent: toMDString(\n            result?.plan?.objective ||\n            result?.plan?.recommendation ||\n            result?.recommendation ||\n            result?.response ||\n            data?.response ||\n            \"[no answer]\"\n          ),\n          context: toMDString(result?.context || data?.context),\n          action: result?.action,\n          id: result?.id,\n          status: result?.id ? \"pending\" : undefined,\n        },\n      ]);\n\n      scrollToBottom?.();\n    } catch {\n      setMessages((prev) => [\n        ...prev.slice(0, -1),\n        { user: toMDString(query), agent: toMDString(\"Error contacting Relay.\") },\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Approve/deny an agent-generated action, update status in message array\n  const updateActionStatus = async (\n    id: string,\n    action: \"approve\" | \"deny\",\n    idx: number\n  ) => {\n    try {\n      await fetch(`${API_ROOT}/control/${action}_action`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-Id\": userId,\n        },\n        body: JSON.stringify({ id, comment: \"inline approval\" }),\n      });\n\n      setMessages((prev) => {\n        const updated = [...prev];\n        if (updated[idx]) {\n          updated[idx] = {\n            ...updated[idx],\n            status: action === \"approve\" ? \"approved\" : \"denied\",\n          };\n        }\n        return updated;\n      });\n    } catch {\n      alert(\"Error approving/denying action.\");\n    }\n  };\n\n  return {\n    messages,\n    setMessages,\n    sendQuery,\n    updateActionStatus,\n    loading,\n  };\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3631, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cb400dcb-02fc-40b4-a390-e138996fb6e2": {"__data__": {"id_": "cb400dcb-02fc-40b4-a390-e138996fb6e2", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AskAgent/useAskEcho.ts", "file_name": "useAskEcho.ts", "file_size": 5907, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ff1cbba5-90d0-4f2c-883a-b0c47300b208", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/useAskEcho.ts", "file_name": "useAskEcho.ts", "file_size": 5907, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "db71121ce1bd08a4d0b22a2ed1e798e7a8d69e9fcb757b5acd513e448ac2fe7e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ded4df9c-1c44-49c0-a7b5-a8916d7d6da0", "node_type": "1", "metadata": {}, "hash": "24e30d32b3369372e48cc5155bf8f95557849ba98d3107d4737b4eba50c9c925", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/AskAgent/useAskEcho.ts\n// Purpose: Custom React hook for agent chat, POSTing to /mcp/run for full agent/critic orchestration\n// Updated: 2025-06-30\n\nimport { useState, useRef, useEffect, useCallback } from \"react\";\nimport { API_ROOT } from \"@/lib/api\";\nimport { toMDString } from \"@/lib/toMDString\";\n\n// Message type for chat history\nexport type Message = {\n  role: \"user\" | \"assistant\";\n  content: string;\n  context?: string;\n  action?: { type: string; payload: unknown };\n  id?: string;\n  status?: \"pending\" | \"approved\" | \"denied\";\n};\n\n// Set a test user ID; in production, wire this to user/session context\nconst USER_ID = \"bret-demo\";\nconst STORAGE_KEY = `echo-chat-history-${USER_ID}`;\n\nexport function useAskEcho() {\n  // Chat state and UI controls\n  const [messages, setMessages] = useState<Message[]>([]);\n  const [input, setInput] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [files, setFiles] = useState(\"\");      // Comma-separated string in UI\n  const [topics, setTopics] = useState(\"\");    // Comma-separated string in UI\n  const [role, setRole] = useState(\"planner\"); // Agent role, can be \"planner\", \"codex\", etc.\n  const [showContext, setShowContext] = useState<Record<number, boolean>>({});\n  const bottomRef = useRef<HTMLDivElement>(null);\n\n  // Load chat history from localStorage on mount\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      const raw = localStorage.getItem(STORAGE_KEY);\n      if (raw) {\n        try {\n          const parsed = JSON.parse(raw);\n          if (Array.isArray(parsed)) {\n            setMessages(\n             parsed\n  .filter(\n    (m: unknown): m is { role?: unknown; content?: unknown; context?: unknown } =>\n      typeof m === \"object\" &&\n      m !== null &&\n      \"content\" in m\n  )\n  .map((m) => ({\n    role:\n      m.role === \"user\" || m.role === \"assistant\"\n        ? m.role\n        : \"assistant\", // Fallback if missing\n    content: toMDString(m.content),\n    ...(typeof m.context === \"string\" && { context: toMDString(m.context) }),\n  }))\n\n            );\n          }\n        } catch {\n          setMessages([]);\n        }\n      }\n    }\n  }, []);\n\n  // Save chat history and scroll to bottom on message update\n  useEffect(() => {\n    if (typeof window !== \"undefined\") {\n      localStorage.setItem(STORAGE_KEY, JSON.stringify(messages));\n    }\n    bottomRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  // Toggle expanded context view for a message\n  const toggleContext = useCallback((index: number) => {\n    setShowContext((prev) => ({ ...prev, [index]: !prev[index] }));\n  }, []);\n\n  // Approve or deny an agent-suggested action (e.g., code patch)\n  const updateActionStatus = useCallback(\n    async (id: string, action: \"approve\" | \"deny\", idx: number) => {\n      try {\n        await fetch(`${API_ROOT}/control/${action}_action`, {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            \"X-User-Id\": USER_ID,\n          },\n          body: JSON.stringify({ id, comment: \"inline approval\" }),\n        });\n\n        setMessages((prev) => {\n          const updated = [...prev];\n          if (updated[idx]) {\n            updated[idx] = {\n              ...updated[idx],\n              status: action === \"approve\" ? \"approved\" : \"denied\",\n            };\n          }\n          return updated;\n        });\n      } catch {\n        alert(\"Error approving/denying action.\");\n      }\n    },\n    []\n  );\n\n  // Send user input to the backend (MCP entrypoint), add both user and agent messages\n  const sendMessage = useCallback(async () => {\n    if (!input.trim() || loading) return;\n\n    const userMessage = input;\n    setMessages((msgs) => [...msgs, { role: \"user\", content: toMDString(userMessage) }]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      // Prepare the payload, parsing files/topics as arrays, include selected agent role\n      const payload = {\n        query: userMessage, // could also use \"question\", but \"query\" is unified\n        files: files ?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4056, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ded4df9c-1c44-49c0-a7b5-a8916d7d6da0": {"__data__": {"id_": "ded4df9c-1c44-49c0-a7b5-a8916d7d6da0", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AskAgent/useAskEcho.ts", "file_name": "useAskEcho.ts", "file_size": 5907, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ff1cbba5-90d0-4f2c-883a-b0c47300b208", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/useAskEcho.ts", "file_name": "useAskEcho.ts", "file_size": 5907, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "db71121ce1bd08a4d0b22a2ed1e798e7a8d69e9fcb757b5acd513e448ac2fe7e", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "cb400dcb-02fc-40b4-a390-e138996fb6e2", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/AskAgent/useAskEcho.ts", "file_name": "useAskEcho.ts", "file_size": 5907, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a12bbaa4ebb74d0a1a0300ba3a0dc5b50763d19a3afd746c268276d1bd08d7e7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"approved\" : \"denied\",\n            };\n          }\n          return updated;\n        });\n      } catch {\n        alert(\"Error approving/denying action.\");\n      }\n    },\n    []\n  );\n\n  // Send user input to the backend (MCP entrypoint), add both user and agent messages\n  const sendMessage = useCallback(async () => {\n    if (!input.trim() || loading) return;\n\n    const userMessage = input;\n    setMessages((msgs) => [...msgs, { role: \"user\", content: toMDString(userMessage) }]);\n    setInput(\"\");\n    setLoading(true);\n\n    try {\n      // Prepare the payload, parsing files/topics as arrays, include selected agent role\n      const payload = {\n        query: userMessage, // could also use \"question\", but \"query\" is unified\n        files: files ? files.split(\",\").map((f) => f.trim()).filter(Boolean) : [],\n        topics: topics ? topics.split(\",\").map((t) => t.trim()).filter(Boolean) : [],\n        role,        // \"planner\", \"codex\", etc. (add a UI selector for more roles)\n        debug: true, // always enable debug for richer agent responses\n      };\n\n      const res = await fetch(`${API_ROOT}/mcp/run`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-User-Id\": USER_ID,\n        },\n        body: JSON.stringify(payload),\n      });\n\n      const data = await res.json();\n\n      // Compose assistant's reply (try multiple possible keys)\n      const result = data?.result || data;\n        // Helper: always coerce to string for SafeMarkdown\n\n      setMessages((msgs) => [\n        ...msgs,\n        {\n          role: \"assistant\",\n          content:\n            toMDString(\n              result?.plan?.objective ||\n              result?.plan?.recommendation ||\n              result?.recommendation ||\n              result?.response ||\n              data?.response ||\n              \"[no answer]\"\n            ),\n          context: toMDString(result?.context || data?.context),\n          action: result?.action,\n          id: result?.id,\n          status: result?.id ? \"pending\" : undefined,\n        },\n      ]);\n\n    } catch {\n      setMessages((msgs) => [\n        ...msgs,\n        { role: \"assistant\", content: toMDString(\"[error] Unable to get response.\") },\n      ]);\n    }\n\n    setLoading(false);\n  }, [input, loading, files, topics, role]);\n\n  return {\n    input,\n    setInput,\n    messages,\n    sendMessage,\n    loading,\n    bottomRef,\n    files,\n    setFiles,\n    topics,\n    setTopics,\n    role,\n    setRole, // Expose role setter so UI can allow agent role selection\n    showContext,\n    toggleContext,\n    updateActionStatus,\n  };\n}", "mimetype": "text/plain", "start_char_idx": 3307, "end_char_idx": 5906, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "162ef16d-c319-4da0-bf27-8c040fbc560f": {"__data__": {"id_": "162ef16d-c319-4da0-bf27-8c040fbc560f", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "74181fcf-6715-451a-9f01-70dad7b3f492", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4b59272a36d71fb220e690043d8ce087fbdadb7389fcded52e7b4df1ff801ab2", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "681cd387-4e45-40e5-9efa-fada0d9a122d", "node_type": "1", "metadata": {}, "hash": "0d705ede0fe6d92a9519553655597b6502a80630092da532d401082a3b150f2c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/AuditPanel.tsx\n// Purpose: Unified agent audit dashboard with drilldown into agent actions/patches and related context.\n//          All comments, context, rationales, and diffs now render via SafeMarkdown for clarity and security.\n\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { API_ROOT } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\n\n// Bulletproof Markdown stringifier for all content/comments/diffs/rationales/etc.\nfunction toMDString(val: unknown): string {\n  if (val == null) return \"\";\n  if (typeof val === \"string\") return val;\n  if (Array.isArray(val)) return val.map(toMDString).join(\"\\n\\n\");\n  try {\n    return \"```json\\n\" + JSON.stringify(val, null, 2) + \"\\n```\";\n  } catch {\n    return String(val);\n  }\n}\n\n\n// === Types ===\ntype LogEntry = {\n  id: string;\n  type?: string;\n  path?: string;\n  timestamp: string;\n  status: string;\n  user?: string;\n  comment?: string;\n  result?: unknown;\n};\ntype ActionDetail = {\n  id: string;\n  action: {\n    context?: string;\n    rationale?: string;\n    diff?: string;\n  };\n  history?: {\n    timestamp: string;\n    status: string;\n    user?: string;\n    comment?: string;\n  }[];\n};\n\nexport default function AuditPanel() {\n  const [logs, setLogs] = useState<LogEntry[]>([]);\n  const [filter, setFilter] = useState<{ user?: string; type?: string; status?: string }>({});\n  const [search, setSearch] = useState(\"\");\n  const [exporting, setExporting] = useState(false);\n  const [selected, setSelected] = useState<LogEntry | null>(null);\n  const [relatedAction, setRelatedAction] = useState<ActionDetail | null>(null);\n\n  // === Fetch audit logs from backend ===\n  async function fetchLog() {\n    try {\n      const res = await fetch(`${API_ROOT}/control/list_log`, {\n        headers: { \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\" }\n      });\n      if (!res.ok) throw new Error(\"Bad response\");\n      const data = await res.json();\n      const mapped = (data.log || []).map((l: LogEntry) => ({\n        ...l,\n        comment: toMDString(l.comment),\n        result: toMDString(l.result)\n      }));\n      setLogs(mapped);\n    } catch (err) {\n      console.error(\"[AuditPanel] Failed to fetch logs:\", err);\n      setLogs([]);\n    }\n  }\n\n  // === Fetch related queue action by id ===\n  async function fetchRelated(id: string) {\n    try {\n      const res = await fetch(`${API_ROOT}/control/list_queue`, {\n        headers: { \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\" }\n      });\n      if (!res.ok) throw new Error(\"Bad response\");\n      const data = await res.json();\n      const action: ActionDetail | undefined = (data.actions as ActionDetail[] | undefined)?.find(a => a.id === id);\n      const mapped = action\n        ? {\n            ...action,\n            action: {\n              ...action.action,\n              context: toMDString(action.action?.context),\n              rationale: toMDString(action.action?.rationale),\n              diff: toMDString(action.action?.diff)\n            },\n            history: Array.isArray(action.history)\n              ? action.history.map(h => ({\n                  ...h,\n                  comment: toMDString(h.comment)\n                }))\n              : action.history\n          }\n        : null;\n      setRelatedAction(mapped);\n    } catch (err) {\n      console.error(\"[AuditPanel] Failed to fetch related action:\", err);\n      setRelatedAction(null);\n    }\n  }\n\n  useEffect(() => {\n    fetchLog();\n    const interval = setInterval(fetchLog, 15000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // === Filtered/search results ===\n  const filtered = logs.filter(entry =>\n    (!filter.user || entry.user === filter.user) &&\n    (!filter.type || entry.type === filter.type) &&\n    (!filter.status || entry.status === filter.status) &&\n    (search.trim() === \"\" ||\n      (entry.comment?.toLowerCase().includes(search.toLowerCase()) ?? false) ||\n      (entry.type?.toLowerCase().includes(search.toLowerCase()) ?? false) ||\n      (entry.path?.toLowerCase().includes(search.toLowerCase()) ??", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4162, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "681cd387-4e45-40e5-9efa-fada0d9a122d": {"__data__": {"id_": "681cd387-4e45-40e5-9efa-fada0d9a122d", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "74181fcf-6715-451a-9f01-70dad7b3f492", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4b59272a36d71fb220e690043d8ce087fbdadb7389fcded52e7b4df1ff801ab2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "162ef16d-c319-4da0-bf27-8c040fbc560f", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4d639ad90dbfa613eb201da44d6914b399ee3b2261d2661ba7f1819eb5291266", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "d698cddc-4039-4d4b-a368-f17a2007921b", "node_type": "1", "metadata": {}, "hash": "c56c2ad2f9b8153f6bad5218482a9a374f64486b8886f687b0fe1a5c0861eba8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "? false) ||\n      (entry.type?.toLowerCase().includes(search.toLowerCase()) ?? false) ||\n      (entry.path?.toLowerCase().includes(search.toLowerCase()) ?? false) ||\n      (entry.id?.toLowerCase().includes(search.toLowerCase()) ?? false))\n  );\n\n  // === Export as JSON/CSV ===\n  function exportLog(format: \"json\" | \"csv\") {\n    setExporting(true);\n    let blob;\n    if (format === \"json\") {\n      blob = new Blob([JSON.stringify(filtered, null, 2)], { type: \"application/json\" });\n    } else {\n      const header = [\"id\", \"type\", \"path\", \"timestamp\", \"status\", \"user\", \"comment\"];\n      const csv = [\n        header.join(\",\"),\n        ...filtered.map(l => header.map(k => `\"${(l as Record<string, string | undefined>)[k] ?? \"\"}\"`).join(\",\"))\n      ].join(\"\\n\");\n      blob = new Blob([csv], { type: \"text/csv\" });\n    }\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `relay_audit_log.${format}`;\n    a.click();\n    setTimeout(() => {\n      setExporting(false);\n      URL.revokeObjectURL(url);\n    }, 1000);\n  }\n\n  // === UI ===\n  const rows = filtered.map((entry, i) => {\n    if (entry.comment && typeof entry.comment !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof entry.comment, entry.comment);\n    }\n    return (\n      <tr\n        key={i}\n        className=\"border-t border-gray-300 cursor-pointer hover:bg-blue-50\"\n        onClick={() => {\n          setSelected(entry);\n          fetchRelated(entry.id);\n        }}\n      >\n        <td className=\"px-2 py-1\">{entry.timestamp}</td>\n        <td className=\"px-2 py-1\">\n          <Badge\n            variant={\n              entry.status === \"approved\"\n                ? \"success\"\n                : entry.status === \"denied\"\n                ? \"destructive\"\n                : entry.status === \"pending\"\n                ? \"secondary\"\n                : \"default\"\n            }\n          >\n            {entry.status}\n          </Badge>\n        </td>\n        <td className=\"px-2 py-1\">{entry.user || \"\"}</td>\n        <td className=\"px-2 py-1\">{entry.type || \"\"}</td>\n        <td className=\"px-2 py-1 font-mono\">{entry.path || \"\"}</td>\n        <td className=\"px-2 py-1 font-mono\">{entry.id.slice(0, 8)}</td>\n        <td className=\"px-2 py-1\">\n          {entry.comment ?", "mimetype": "text/plain", "start_char_idx": 4007, "end_char_idx": 6298, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d698cddc-4039-4d4b-a368-f17a2007921b": {"__data__": {"id_": "d698cddc-4039-4d4b-a368-f17a2007921b", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "74181fcf-6715-451a-9f01-70dad7b3f492", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4b59272a36d71fb220e690043d8ce087fbdadb7389fcded52e7b4df1ff801ab2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "681cd387-4e45-40e5-9efa-fada0d9a122d", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c2536f35df99ebb3ef67c54113334eed41c167e44fdb9644804f4ccfd2772eec", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "da09405c-05b3-433e-96c0-fd1fd0ca72d2", "node_type": "1", "metadata": {}, "hash": "d72abc6a3db9762afe8e4b39b32e575453efb92e2ae131e123408c84a4477def", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"success\"\n                : entry.status === \"denied\"\n                ? \"destructive\"\n                : entry.status === \"pending\"\n                ? \"secondary\"\n                : \"default\"\n            }\n          >\n            {entry.status}\n          </Badge>\n        </td>\n        <td className=\"px-2 py-1\">{entry.user || \"\"}</td>\n        <td className=\"px-2 py-1\">{entry.type || \"\"}</td>\n        <td className=\"px-2 py-1 font-mono\">{entry.path || \"\"}</td>\n        <td className=\"px-2 py-1 font-mono\">{entry.id.slice(0, 8)}</td>\n        <td className=\"px-2 py-1\">\n          {entry.comment ? (\n            <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n              <SafeMarkdown>{entry.comment}</SafeMarkdown>\n            </div>\n          ) : (\n            \"\"\n          )}\n        </td>\n      </tr>\n    );\n  });\n\n  if (selected && typeof selected.comment !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof selected.comment, selected.comment);\n  }\n  if (relatedAction?.action?.context && typeof relatedAction.action.context !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof relatedAction.action.context, relatedAction.action.context);\n  }\n  if (relatedAction?.action?.rationale && typeof relatedAction.action.rationale !== \"string\") {\n    console.log(\n      \"DEBUG 418:\",\n      typeof relatedAction.action.rationale,\n      relatedAction.action.rationale\n    );\n  }\n  if (relatedAction?.action?.diff && typeof relatedAction.action.diff !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof relatedAction.action.diff, relatedAction.action.diff);\n  }\n  if (relatedAction?.history) {\n    for (const h of relatedAction.history) {\n      if (h.comment && typeof h.comment !== \"string\") {\n        console.log(\"DEBUG 418:\", typeof h.comment, h.comment);\n      }\n    }\n  }\n\n  return (\n    <div className=\"max-w-5xl mx-auto py-8\">\n      <h2 className=\"font-bold text-xl mb-6\">\ud83d\udee1\ufe0f Audit Log & Operator Panel</h2>\n      <div className=\"flex gap-2 mb-4 items-end\">\n        <input\n          placeholder=\"\ud83d\udd0e Search user/type/path/comment/ID\"\n          className=\"border rounded px-2 py-1 w-60 text-sm\"\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n        />\n        <input\n          placeholder=\"Filter user\"\n          className=\"border rounded px-2 py-1 text-xs\"\n          value={filter.user || \"\"}\n          onChange={e => setFilter(f => ({ ...f, user: e.target.value }))}\n        />\n        <input\n          placeholder=\"Filter type\"\n          className=\"border rounded px-2 py-1 text-xs\"\n          value={filter.type || \"\"}\n          onChange={e => setFilter(f => ({ ...f, type: e.target.value }))}\n        />\n        <select\n          className=\"border rounded px-2 py-1 text-xs\"\n          value={filter.status || \"\"}\n          onChange={e => setFilter(f => ({ ...f, status: e.target.value }))}\n        >\n          <option value=\"\">Status</option>\n          <option value=\"approved\">approved</option>\n          <option value=\"denied\">denied</option>\n          <option value=\"executed\">executed</option>\n          <option value=\"pending\">pending</option>\n        </select>\n        <Button onClick={() => fetchLog()} className=\"ml-2\">Refresh</Button>\n        <Button\n          variant=\"outline\"\n          disabled={exporting}\n          onClick={() => exportLog(\"json\")}\n        >\n          Export JSON\n        </Button>\n        <Button\n          variant=\"outline\"\n          disabled={exporting}\n          onClick={() => exportLog(\"csv\")}\n        >\n          Export CSV\n        </Button>\n      </div>\n      <div className=\"bg-gray-100 rounded-md p-2 max-h-[60vh] overflow-auto text-xs\">\n        {filtered.length === 0 && (\n          <div className=\"text-muted-foreground text-center py-8\">\n            No log entries match the filters.", "mimetype": "text/plain", "start_char_idx": 5706, "end_char_idx": 9483, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "da09405c-05b3-433e-96c0-fd1fd0ca72d2": {"__data__": {"id_": "da09405c-05b3-433e-96c0-fd1fd0ca72d2", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "74181fcf-6715-451a-9f01-70dad7b3f492", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4b59272a36d71fb220e690043d8ce087fbdadb7389fcded52e7b4df1ff801ab2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "d698cddc-4039-4d4b-a368-f17a2007921b", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e4a5d82bcb3f96726d88fc642dca6683066394ce264ac011eacbb60549070927", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3d4a843f-4b2a-4d1b-93d7-9ced81e2c746", "node_type": "1", "metadata": {}, "hash": "8ae553d866a8640cf9c3e25353e62ed6aee5bd5099d52700cfdac3338b52f327", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "</div>\n        )}\n        <table className=\"w-full\">\n          <thead>\n            <tr className=\"font-semibold text-gray-700 bg-gray-200\">\n              <th className=\"px-2 py-1 text-left\">Time</th>\n              <th className=\"px-2 py-1 text-left\">Status</th>\n              <th className=\"px-2 py-1 text-left\">User</th>\n              <th className=\"px-2 py-1 text-left\">Type</th>\n              <th className=\"px-2 py-1 text-left\">Path</th>\n              <th className=\"px-2 py-1 text-left\">ID</th>\n              <th className=\"px-2 py-1 text-left\">Comment</th>\n            </tr>\n          </thead>\n          <tbody>{rows}</tbody>\n        </table>\n      </div>\n      <div className=\"text-xs text-gray-400 mt-3\">\n        Tip: Click any row for full drilldown: context, rationale, diff, timeline, and more.\n      </div>\n\n      {/* === Per-action Modal Drilldown === */}\n      {selected && (\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black/30 z-50\">\n          <div className=\"bg-white p-6 rounded shadow-lg w-full max-w-xl relative\">\n            <button className=\"absolute top-2 right-3 text-xl\" onClick={() => { setSelected(null); setRelatedAction(null); }}>&times;</button>\n            <h3 className=\"font-bold mb-2\">Action Detail (#{selected.id.slice(0, 8)})</h3>\n            <div className=\"mb-2 text-xs\">\n              <strong>Status:</strong>{\" \"}\n              <Badge variant={\n                selected.status === \"approved\" ? \"success\" :\n                selected.status === \"denied\" ? \"destructive\" : \"secondary\"\n              }>\n                {selected.status}\n              </Badge><br />\n              <strong>User:</strong> {selected.user}<br />\n              <strong>Type:</strong> {selected.type}<br />\n              <strong>Path:</strong> {selected.path}<br />\n              <strong>Comment:</strong>{\" \"}\n              {selected.comment ?", "mimetype": "text/plain", "start_char_idx": 9494, "end_char_idx": 11381, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3d4a843f-4b2a-4d1b-93d7-9ced81e2c746": {"__data__": {"id_": "3d4a843f-4b2a-4d1b-93d7-9ced81e2c746", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "74181fcf-6715-451a-9f01-70dad7b3f492", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4b59272a36d71fb220e690043d8ce087fbdadb7389fcded52e7b4df1ff801ab2", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "da09405c-05b3-433e-96c0-fd1fd0ca72d2", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/AuditPanel/AuditPanel.tsx", "file_name": "AuditPanel.tsx", "file_size": 14146, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7c98a426f6c6d87df91f8dc08e4292bb86d7e4ad81e4aa80fba88a0cd4916120", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"success\" :\n                selected.status === \"denied\" ? \"destructive\" : \"secondary\"\n              }>\n                {selected.status}\n              </Badge><br />\n              <strong>User:</strong> {selected.user}<br />\n              <strong>Type:</strong> {selected.type}<br />\n              <strong>Path:</strong> {selected.path}<br />\n              <strong>Comment:</strong>{\" \"}\n              {selected.comment ? (\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{selected.comment}</SafeMarkdown>\n                </div>\n              ) : \"\"}\n              <br />\n              <strong>Timestamp:</strong> {selected.timestamp}\n            </div>\n            {relatedAction?.action?.context && (\n              <details>\n                <summary className=\"cursor-pointer text-blue-700 mb-2\">View Agent Context</summary>\n                <div className=\"bg-gray-50 p-2 rounded text-xs max-h-40 overflow-auto whitespace-pre-wrap\">\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <SafeMarkdown>{relatedAction.action.context}</SafeMarkdown>\n                  </div>\n                </div>\n              </details>\n            )}\n            {relatedAction?.action?.rationale && (\n              <div className=\"text-xs italic mb-2\">\n                <strong>Agent rationale:</strong>{\" \"}\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{relatedAction.action.rationale}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n            {relatedAction?.action?.diff && (\n              <details>\n                <summary className=\"cursor-pointer text-blue-700 mb-2\">View Diff</summary>\n                <div className=\"bg-yellow-50 p-2 rounded text-xs max-h-40 overflow-auto whitespace-pre-wrap\">\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <SafeMarkdown>{relatedAction.action.diff}</SafeMarkdown>\n                  </div>\n                </div>\n              </details>\n            )}\n            {relatedAction?.history && (\n              <div>\n                <h4 className=\"font-semibold mt-2 mb-1 text-sm\">Timeline</h4>\n                <ul className=\"bg-gray-100 p-2 rounded text-xs max-h-32 overflow-auto border\">\n                  {relatedAction.history.map((h, i) => (\n                    <li key={i}>\n                      <span className=\"font-mono\">{h.timestamp}</span> \u2022 <Badge>{h.status}</Badge>\n                      {h.user && <span className=\"ml-2 text-blue-700\">{h.user}</span>}\n                      {h.comment && (\n                        <span className=\"ml-2 italic\">\n                          <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                            <SafeMarkdown>{h.comment}</SafeMarkdown>\n                          </div>\n                        </span>\n                      )}\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 10959, "end_char_idx": 14135, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "76ad0a4d-dd58-4505-a59b-1400c63dd820": {"__data__": {"id_": "76ad0a4d-dd58-4505-a59b-1400c63dd820", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexEditor.tsx", "file_name": "CodexEditor.tsx", "file_size": 842, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ed177ef1-de4e-4ba0-a581-b2d09a06d946", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexEditor.tsx", "file_name": "CodexEditor.tsx", "file_size": 842, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "689e6ea87c64f432f10b2bf0ccee21b4d8f71c8478a3f3c00013745178a19080", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/components/Codex/CodexEditor.tsx\n// Purpose: Simple text/code editor for Codex agent\n// Updated: 2025-06-30\n\nimport { Dispatch, SetStateAction } from \"react\";\n\nexport interface Props {\n  code: string; // Source code being edited\n  setCode: Dispatch<SetStateAction<string>>; // Update function\n}\n\nexport default function CodexEditor({ code, setCode }: Props) {\n  return (\n    <div>\n      <label htmlFor=\"codex-editor\" className=\"block text-sm font-medium mb-1\">\n        Source Code\n      </label>\n      <textarea\n        id=\"codex-editor\"\n        value={code}\n        onChange={(e) => setCode(e.target.value)}\n        className=\"w-full h-48 p-2 border rounded font-mono resize-y\"\n        spellCheck={false}\n        placeholder=\"Paste or type your code here\u2026\"\n        aria-label=\"Code input for Codex\"\n      />\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 839, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "23a940da-7769-4ca8-a007-66de5637e5ca": {"__data__": {"id_": "23a940da-7769-4ca8-a007-66de5637e5ca", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexPatchView.tsx", "file_name": "CodexPatchView.tsx", "file_size": 1321, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "7be35d74-13cc-43a1-8339-7541afdfc08a", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexPatchView.tsx", "file_name": "CodexPatchView.tsx", "file_size": 1321, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "81980eb1315db441c764e1e92ea10e38be94f28b7360ba3a116f4876aee3d3a7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/Codex/CodexPatchView.tsx\n// Purpose: Displays the generated code patch/result from the Codex agent.\n//          All Markdown/code rendering MUST go through SafeMarkdown.\n// Updated: 2025-07-01\n\n\"use client\";\n\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\n\ninterface Props {\n  patch: string;\n  loading?: boolean; // Optionally show loading state (prop-driven)\n}\n\nexport default function CodexPatchView({ patch, loading = false }: Props) {\n  if (typeof patch !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof patch, patch);\n  }\n  return (\n    <div className=\"mt-4\">\n      <label htmlFor=\"codex-patch\" className=\"block text-sm font-medium mb-1\">\n        Generated Patch\n      </label>\n      <div\n        id=\"codex-patch\"\n        className=\"w-full max-h-[500px] overflow-auto bg-black text-green-400 p-4 rounded text-sm whitespace-pre-wrap\"\n        aria-busy={loading}\n      >\n        {/* DO NOT render markdown/code any other way\u2014SafeMarkdown only */}\n        {loading ? (\n          \"\u23f3 Codex is generating your patch...\"\n        ) : patch?.trim() ? (\n          <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n            <SafeMarkdown>{patch}</SafeMarkdown>\n          </div>\n        ) : (\n          \"No patch yet.\"\n        )}\n      </div>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1316, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "afde9662-254f-4aa8-89d4-cfcc965ccbae": {"__data__": {"id_": "afde9662-254f-4aa8-89d4-cfcc965ccbae", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexPromptBar.tsx", "file_name": "CodexPromptBar.tsx", "file_size": 1423, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bba0e0b8-7ee4-4ce0-be9b-e5e3e946d0bd", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/Codex/CodexPromptBar.tsx", "file_name": "CodexPromptBar.tsx", "file_size": 1423, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4241cc660107d617edb7bc757eeb263b8412aab11439489e9eeb848bcddaaca7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/Codex/CodexPromptBar.tsx\n// Purpose: Prompt input bar for Codex code editing agent\n// Updated: 2025-06-30\n\n\"use client\";\n\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\n\ninterface Props {\n  prompt: string;                 // Prompt/instruction for the code agent\n  setPrompt: (val: string) => void; // Handler to update prompt in parent state\n  onSubmit: () => void;           // Handler called when user submits\n  loading?: boolean;              // Show loading state, disable input (prop-driven)\n}\n\nexport default function CodexPromptBar({ prompt, setPrompt, onSubmit, loading = false }: Props) {\n  // Handle Enter key to submit (unless Shift is held for multi-line, if ever needed)\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"Enter\" && !e.shiftKey && prompt.trim() && !loading) {\n      e.preventDefault();\n      onSubmit();\n    }\n  };\n\n  return (\n    <div className=\"flex items-center gap-4\">\n      <Input\n        value={prompt}\n        onChange={(e) => setPrompt(e.target.value)}\n        onKeyDown={handleKeyDown}\n        placeholder=\"What should Codex do? (e.g., Add docstrings)\"\n        className=\"flex-1\"\n        disabled={loading}\n      />\n      <Button onClick={onSubmit} disabled={loading || !prompt.trim()}>\n        {loading ? \"Running...\" : \"Run\"}\n      </Button>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1422, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6480e81f-fb2a-48ee-94cf-ddc46c5bf5ee": {"__data__": {"id_": "6480e81f-fb2a-48ee-94cf-ddc46c5bf5ee", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/Codex/index.ts", "file_name": "index.ts", "file_size": 277, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "212bb3ac-6ae0-4466-9ae5-42c5787b7cc8", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/Codex/index.ts", "file_name": "index.ts", "file_size": 277, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e1b06829afca5473517200b637a451de8c95a8e37693c97b151a53a9f88e5ad8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/Codex/index.ts\n// Purpose: Barrel exports for Codex components\n\nexport { default as CodexEditor } from \"./CodexEditor\";\nexport { default as CodexPromptBar } from \"./CodexPromptBar\";\nexport { default as CodexPatchView } from \"./CodexPatchView\";", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 276, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c7b59a9a-5f89-47ff-8c2f-469b06d25f28": {"__data__": {"id_": "c7b59a9a-5f89-47ff-8c2f-469b06d25f28", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/Codex/page.tsx", "file_name": "page.tsx", "file_size": 2108, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "7cc742d0-c5e5-4646-8a49-2b9f3a1e07fe", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/Codex/page.tsx", "file_name": "page.tsx", "file_size": 2108, "creation_date": "2025-06-30", "last_modified_date": "2025-06-30", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "16babdc904f3ef9a997730a922dbed16445c30c8d85769aec574d003814f5b26", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/Codex/CodexPage.tsx\n// Purpose: UI for Codex agent with code editor, prompt bar, and streaming patch view\n// Updated: 2025-06-30\n\n\"use client\";\n\nimport { CodexEditor, CodexPromptBar, CodexPatchView } from \"@/components/Codex\";\nimport { useState } from \"react\";\nimport { API_ROOT } from \"@/lib/api\";\n\nexport default function CodexPage() {\n  const [code, setCode] = useState(\"\");           // User's source code\n  const [prompt, setPrompt] = useState(\"\");       // Editing instruction (prompt)\n  const [streamingPatch, setStreamingPatch] = useState(\"\"); // Live code patch output\n  const [loading, setLoading] = useState(false);  // Loading state for UX\n\n  // Handler for submitting the edit prompt to the Codex agent\n  const handleSubmit = async () => {\n    if (!prompt.trim() || !code.trim() || loading) return;\n\n    setStreamingPatch(\"\u23f3 Working...\");\n    setLoading(true);\n\n    try {\n      const res = await fetch(`${API_ROOT}/ask/codex_stream`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ question: prompt, context: code }),\n      });\n\n      const reader = res.body?.getReader();\n      const decoder = new TextDecoder();\n      let patch = \"\";\n\n      while (reader) {\n        const { value, done } = await reader.read();\n        if (done) break;\n        patch += decoder.decode(value, { stream: true });\n        setStreamingPatch(patch);\n      }\n    } catch {\n      setStreamingPatch(\"\u274c Error streaming patch from Codex agent.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      <h1 className=\"text-2xl font-bold\">\ud83e\udde0 Codex \u2014 Code Editing Agent</h1>\n      {/* Code input area */}\n      <CodexEditor code={code} setCode={setCode} />\n\n      {/* Prompt bar for edit instructions */}\n      <CodexPromptBar\n        prompt={prompt}\n        setPrompt={setPrompt}\n        onSubmit={handleSubmit}\n        loading={loading}\n      />\n\n      {/* Patch/result area */}\n      <CodexPatchView patch={streamingPatch} loading={loading} />\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2098, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "601534df-c3a8-4a8d-b300-377886a3fe68": {"__data__": {"id_": "601534df-c3a8-4a8d-b300-377886a3fe68", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/DocsSyncPanel.tsx", "file_name": "DocsSyncPanel.tsx", "file_size": 5149, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "27a6dbac-d228-4ba6-a9be-26e884cd8356", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/DocsSyncPanel.tsx", "file_name": "DocsSyncPanel.tsx", "file_size": 5149, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7bd41e2b3ad522e000c49599e5d8ff2d099c02181a775df279312b94e2708480", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ee518652-8d33-45e3-95fa-f07c71f23f7a", "node_type": "1", "metadata": {}, "hash": "8348f415bde548b00a8639a40d4b25066ca39bef8b4dbc7f98e5f23b7ceb5d23", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/DocsSyncPanel.tsx\n// Purpose: UI panel for syncing, refreshing, and reindexing knowledge base docs. \n// All status and result messages are rendered with SafeMarkdown for rich, safe output.\n\n\"use client\";\n\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { API_ROOT } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\nimport { toMDString } from \"@/lib/toMDString\";\n\nexport default function DocsSyncPanel() {\n  const [status, setStatus] = useState<string | null>(null);\n  const [files, setFiles] = useState<string[]>([]);\n  const [loading, setLoading] = useState<boolean>(false);\n\n  // New state for reindex button\n  const [reindexStatus, setReindexStatus] = useState<string | null>(null);\n  const [reindexLoading, setReindexLoading] = useState<boolean>(false);\n\n  /**\n   * Trigger a sync operation at the given endpoint and handle results.\n   * @param endpoint 'sync', 'refresh_kb', or 'full_sync'\n   */\n  const triggerSync = async (endpoint: string) => {\n    if (!API_ROOT) {\n      setStatus(toMDString(\"\u274c API URL not configured\"));\n      return;\n    }\n    setStatus(toMDString(\"\u23f3 Running...\"));\n    setFiles([]);\n    setLoading(true);\n    try {\n      const res = await fetch(`${API_ROOT}/docs/${endpoint}`, { method: \"POST\" });\n      if (!res.ok) {\n        throw new Error(`Request failed: ${res.status}`);\n      }\n      const data = await res.json();\n      if (Array.isArray(data.synced_docs)) {\n        setFiles(data.synced_docs);\n        setStatus(toMDString(`\u2705 Synced ${data.synced_docs.length} docs.`));\n      } else if (data.message) {\n        setStatus(toMDString(`\u2705 ${data.message}`));\n      } else {\n        setStatus(toMDString(\"\u2705 Operation completed.\"));\n      }\n    } catch (err) {\n      console.error(\"DocsSync error:\", err);\n      setStatus(toMDString(\"\u274c Failed to sync. See console for details.\"));\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- NEW: Trigger a KB reindex (admin only) ---\n  const triggerReindex = async () => {\n    if (!API_ROOT) {\n      setReindexStatus(toMDString(\"\u274c API URL not configured\"));\n      return;\n    }\n    setReindexStatus(toMDString(\"\u23f3 Reindexing...\"));\n    setReindexLoading(true);\n    try {\n      const res = await fetch(`${API_ROOT}/admin/trigger_reindex`, {\n        method: \"POST\",\n        headers: {\n          // If you use a static admin API key for local, include it here\n          // For production, secure this!\n          \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\",\n        },\n      });\n      const data = await res.json();\n      if (res.ok) {\n        setReindexStatus(toMDString(`\u2705 ${data.message || \"Reindex complete.\"}`));\n      } else {\n        setReindexStatus(toMDString(`\u274c ${data.detail || \"Reindex failed.\"}`));\n      }\n    } catch (err) {\n      console.error(\"Reindex error:\", err);\n      setReindexStatus(toMDString(\"\u274c Failed to reindex. See console for details.\"));\n    } finally {\n      setReindexLoading(false);\n    }\n  };\n\n  if (typeof status !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof status, status);\n  }\n  if (typeof reindexStatus !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof reindexStatus, reindexStatus);\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <h2 className=\"text-lg font-semibold\">\ud83e\udde0 Sync & Refresh Docs</h2>\n      <div className=\"flex flex-wrap gap-2\">\n        <Button onClick={() => triggerSync(\"sync\")} disabled={loading}>\n          {loading ? \"\u23f3 Syncing...\" : \"\ud83d\udd04 Sync Google Docs\"}\n        </Button>\n        <Button onClick={() => triggerSync(\"refresh_kb\")} disabled={loading}>\n          {loading ? \"\u23f3 Refreshing...\" : \"\ud83e\udde0 Refresh KB\"}\n        </Button>\n        <Button onClick={() => triggerSync(\"full_sync\")} disabled={loading}>\n          {loading ?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3769, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ee518652-8d33-45e3-95fa-f07c71f23f7a": {"__data__": {"id_": "ee518652-8d33-45e3-95fa-f07c71f23f7a", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/DocsSyncPanel.tsx", "file_name": "DocsSyncPanel.tsx", "file_size": 5149, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "27a6dbac-d228-4ba6-a9be-26e884cd8356", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/DocsSyncPanel.tsx", "file_name": "DocsSyncPanel.tsx", "file_size": 5149, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7bd41e2b3ad522e000c49599e5d8ff2d099c02181a775df279312b94e2708480", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "601534df-c3a8-4a8d-b300-377886a3fe68", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/DocsSyncPanel.tsx", "file_name": "DocsSyncPanel.tsx", "file_size": 5149, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b3876ef7c1ae58ada1dc074d1bbdc04152e59f9203e57827af226ba778c7a259", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\u23f3 Syncing...\" : \"\ud83d\udd04 Sync Google Docs\"}\n        </Button>\n        <Button onClick={() => triggerSync(\"refresh_kb\")} disabled={loading}>\n          {loading ? \"\u23f3 Refreshing...\" : \"\ud83e\udde0 Refresh KB\"}\n        </Button>\n        <Button onClick={() => triggerSync(\"full_sync\")} disabled={loading}>\n          {loading ? \"\u23f3 Working...\" : \"\ud83d\ude80 Full Sync\"}\n        </Button>\n      </div>\n\n      {/* Status messages rendered as markdown */}\n      {status && (\n        <div className=\"mt-2 text-sm text-muted-foreground\">\n          <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n            <SafeMarkdown>{status}</SafeMarkdown>\n          </div>\n        </div>\n      )}\n\n      {files.length > 0 && (\n        <ul className=\"mt-2 list-disc list-inside\">\n          {files.map((f) => (\n            <li key={f} className=\"text-sm\">{f}</li>\n          ))}\n        </ul>\n      )}\n\n      {/* Divider */}\n      <hr className=\"my-4\" />\n\n      {/* Reindex Button */}\n      <div>\n        <h3 className=\"text-base font-medium mb-2\">Admin: Reindex KB</h3>\n        <Button\n          onClick={triggerReindex}\n          disabled={reindexLoading}\n          variant=\"destructive\"\n          className=\"mb-2\"\n        >\n          {reindexLoading ? \"\u23f3 Reindexing...\" : \"\ud83d\udee0\ufe0f Reindex Now\"}\n        </Button>\n        {reindexStatus && (\n          <div className={`mt-1 text-sm ${reindexStatus.startsWith(\"\u2705\") ? \"text-green-600\" : \"text-red-500\"}`}>\n            <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n              <SafeMarkdown>{reindexStatus}</SafeMarkdown>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 3462, "end_char_idx": 5099, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "871a6ede-7e19-4512-96d7-e5ac9020f274": {"__data__": {"id_": "871a6ede-7e19-4512-96d7-e5ac9020f274", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6445f7bb-e68d-43eb-bc9d-de57b1131ff1", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "dce07f63854af81abd30daff90be94a3ed3276a32e463daacdca969b41720b13", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c607b158-7956-4e3e-89f1-b3865c9423e6", "node_type": "1", "metadata": {}, "hash": "63e7876707afe439daa1522cd23f0de76dc771e33a82805a4888fcf0f8e573d7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/DocsViewer.tsx\n// Purpose: Browse, manage, and debug semantic context docs with tier-aware metadata.\n//          Renders all doc/snippet/context output via SafeMarkdown for safety/uniformity.\n\n\"use client\";\n\nimport { API_ROOT } from \"@/lib/api\";\nimport { useEffect, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\n\n// --- Types for KB docs and semantic search ---\ntype KBMeta = {\n  path: string;\n  doc_id?: string;\n  tier?: string;\n  source?: string;\n  last_modified?: string;\n};\n\ntype KBHit = {\n  file?: string;\n  snippet: string;\n  score?: number;\n  type?: string;\n  line?: number;\n};\n\nconst apiUrl = API_ROOT || \"\";\n\n// --- Main DocsViewer Component ---\nexport default function DocsViewer() {\n  const [tab, setTab] = useState<\"docs\" | \"search\" | \"context\">(\"docs\");\n  const [docs, setDocs] = useState<KBMeta[]>([]);\n  const [activeDoc, setActiveDoc] = useState<string | null>(null);\n  const [content, setContent] = useState<string>(\"\");\n\n  const [search, setSearch] = useState(\"\");\n  const [hits, setHits] = useState<KBHit[]>([]);\n  const [selectedHit, setSelectedHit] = useState<number | null>(null);\n  const [searchLoading, setSearchLoading] = useState(false);\n\n  const [ctxQuestion, setCtxQuestion] = useState(\"\");\n  const [ctxLoading, setCtxLoading] = useState(false);\n  const [ctxResult, setCtxResult] = useState<string>(\"\");\n\n  useEffect(() => {\n    if (tab === \"docs\") loadDocs();\n  }, [tab]);\n\n  useEffect(() => {\n    if (activeDoc) loadContent(activeDoc);\n    else setContent(\"\");\n  }, [activeDoc]);\n\n  async function loadDocs() {\n    try {\n      const res = await fetch(`${apiUrl}/docs/list`);\n      const data = await res.json();\n      setDocs(data.files || []);\n    } catch {\n      setDocs([]);\n    }\n  }\n\n  async function loadContent(path: string) {\n    try {\n      const res = await fetch(`${apiUrl}/docs/view?path=${encodeURIComponent(path)}`);\n      const data = await res.json();\n      setContent(data.content || \"\");\n    } catch {\n      setContent(\"Failed to load doc.\");\n    }\n  }\n\n  async function doSearch(e?: React.FormEvent) {\n    if (e) e.preventDefault();\n    setSearchLoading(true);\n    setHits([]);\n    setSelectedHit(null);\n    try {\n      const res = await fetch(`${apiUrl}/kb/search?query=${encodeURIComponent(search)}`);\n      const data = await res.json();\n      setHits(data.results || []);\n    } catch {\n      setHits([]);\n    }\n    setSearchLoading(false);\n  }\n\n  async function fetchContextForPrompt(e?: React.FormEvent) {\n    if (e) e.preventDefault();\n    if (!ctxQuestion) return;\n    setCtxLoading(true);\n    setCtxResult(\"\");\n    try {\n      const res = await fetch(`${apiUrl}/ask?question=${encodeURIComponent(ctxQuestion)}&debug=true`);\n      const data = await res.json();\n      setCtxResult(data.context || \"No context returned.\");\n    } catch {\n      setCtxResult(\"Failed to fetch context window.\");\n    }\n    setCtxLoading(false);\n  }\n\n  if (typeof content !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof content, content);\n  }\n  for (const hit of hits) {\n    if (typeof hit.snippet !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof hit.snippet, hit.snippet);\n    }\n  }\n  if (ctxResult && typeof ctxResult !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof ctxResult, ctxResult);\n  }\n\n  return (\n    <div className=\"max-w-5xl mx-auto py-6\">\n      <div className=\"flex gap-4 mb-4\">\n        <Button variant={tab === \"docs\" ? \"default\" : \"outline\"} onClick={() => setTab(\"docs\")}>\ud83d\udcdd Docs</Button>\n        <Button variant={tab === \"search\" ? \"default\" : \"outline\"} onClick={() => setTab(\"search\")}>\ud83d\udd0d Semantic Search</Button>\n        <Button variant={tab === \"context\" ?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3739, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c607b158-7956-4e3e-89f1-b3865c9423e6": {"__data__": {"id_": "c607b158-7956-4e3e-89f1-b3865c9423e6", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6445f7bb-e68d-43eb-bc9d-de57b1131ff1", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "dce07f63854af81abd30daff90be94a3ed3276a32e463daacdca969b41720b13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "871a6ede-7e19-4512-96d7-e5ac9020f274", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "341d368be79ae565a9e90f5e61bdd394b1d0153a83cd90747f9bd998012527d7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "9138d686-bd6e-4912-952e-49a9ae95a89e", "node_type": "1", "metadata": {}, "hash": "0a9c3d89e2f70e07a6ee363990c8c7df204a1564641ffe71a83710da1c3add3d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"default\" : \"outline\"} onClick={() => setTab(\"docs\")}>\ud83d\udcdd Docs</Button>\n        <Button variant={tab === \"search\" ? \"default\" : \"outline\"} onClick={() => setTab(\"search\")}>\ud83d\udd0d Semantic Search</Button>\n        <Button variant={tab === \"context\" ? \"default\" : \"outline\"} onClick={() => setTab(\"context\")}>\ud83e\udde0 Agent Context</Button>\n      </div>\n\n      {tab === \"docs\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-6 gap-6\">\n          <div className=\"space-y-4 col-span-1 md:col-span-1\">\n            <div>\n              <div className=\"font-semibold mb-2\">Knowledge Base Files</div>\n              <ul className=\"space-y-1 text-xs max-h-80 overflow-y-auto\">\n                {docs.map((doc) => (\n                  <li key={doc.path}>\n                    <button\n                      className={`w-full text-left py-1 px-2 rounded hover:bg-accent/40 ${activeDoc === doc.path ? \"bg-accent/30 font-bold\" : \"\"}`}\n                      onClick={() => setActiveDoc(doc.path)}\n                    >\n                      {doc.path}\n                      {doc.tier && <span className=\"ml-2 text-emerald-600 font-semibold\">[{doc.tier}]</span>}\n                      {doc.source && <span className=\"ml-1 text-xs text-gray-400\">({doc.source})</span>}\n                    </button>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </div>\n          <div className=\"col-span-5\">\n            <h2 className=\"font-semibold mb-2\">{activeDoc || \"Select a document\"}</h2>\n            <div className=\"h-[400px] overflow-auto border rounded-md p-4 whitespace-pre-wrap text-sm bg-background\">\n              {content ? (\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{content}</SafeMarkdown>\n                </div>\n              ) : (\n                \"Select a document to view its content.\"\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {tab === \"search\" && (\n        <div className=\"grid grid-cols-1 md:grid-cols-6 gap-6\">\n          <div className=\"space-y-4 col-span-1\">\n            <form className=\"flex gap-2 mb-2\" onSubmit={doSearch}>\n              <input\n                className=\"border px-2 py-1 rounded w-full\"\n                placeholder=\"Search docs/knowledge base\u2026\"\n                value={search}\n                onChange={(e) => setSearch(e.target.value)}\n              />\n              <Button type=\"submit\" size=\"sm\" disabled={searchLoading}>\n                {searchLoading ? \"\u2026\" : \"Search\"}\n              </Button>\n            </form>\n            <ul className=\"space-y-1 text-xs max-h-72 overflow-y-auto\">\n              {hits.map((hit, i) => (\n                <li key={i}>\n                  <button\n                    className={`w-full text-left py-1 px-2 rounded hover:bg-accent/30 ${selectedHit === i ? \"bg-accent/40 font-bold\" : \"\"}`}\n                    onClick={() => setSelectedHit(i)}\n                  >\n                    {hit.file || \"Semantic Snippet\"}\n                  </button>\n                </li>\n              ))}\n            </ul>\n          </div>\n          <div className=\"col-span-5\">\n            {selectedHit !== null && hits[selectedHit] ? (\n              <div>\n                <div className=\"font-bold mb-2\">{hits[selectedHit].file || \"Semantic Snippet\"}</div>\n                <div className=\"bg-gray-100 p-3 rounded max-h-[70vh] overflow-y-auto whitespace-pre-wrap text-xs\">\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <SafeMarkdown>{hits[selectedHit].snippet}</SafeMarkdown>\n                  </div>\n                </div>\n                <div className=\"text-xs text-gray-500 mt-2\">\n                  Score: {hits[selectedHit].score?.toFixed(2) || \"N/A\"} | Type: {hits[selectedHit].type || \"?\"}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-gray-500 text-center pt-10\">\n                {searchLoading ? \"Searching\u2026\" : \"Select a semantic hit to preview context.\"}", "mimetype": "text/plain", "start_char_idx": 3498, "end_char_idx": 7552, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "9138d686-bd6e-4912-952e-49a9ae95a89e": {"__data__": {"id_": "9138d686-bd6e-4912-952e-49a9ae95a89e", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "6445f7bb-e68d-43eb-bc9d-de57b1131ff1", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "dce07f63854af81abd30daff90be94a3ed3276a32e463daacdca969b41720b13", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c607b158-7956-4e3e-89f1-b3865c9423e6", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/DocsViewer/DocsViewer.tsx", "file_name": "DocsViewer.tsx", "file_size": 8731, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c53b080e78074a4d7b0ffefc544dab08496af69bebf92568e9a7aeb625c80eb6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "(\n              <div>\n                <div className=\"font-bold mb-2\">{hits[selectedHit].file || \"Semantic Snippet\"}</div>\n                <div className=\"bg-gray-100 p-3 rounded max-h-[70vh] overflow-y-auto whitespace-pre-wrap text-xs\">\n                  <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                    <SafeMarkdown>{hits[selectedHit].snippet}</SafeMarkdown>\n                  </div>\n                </div>\n                <div className=\"text-xs text-gray-500 mt-2\">\n                  Score: {hits[selectedHit].score?.toFixed(2) || \"N/A\"} | Type: {hits[selectedHit].type || \"?\"}\n                </div>\n              </div>\n            ) : (\n              <div className=\"text-gray-500 text-center pt-10\">\n                {searchLoading ? \"Searching\u2026\" : \"Select a semantic hit to preview context.\"}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {tab === \"context\" && (\n        <div className=\"max-w-2xl mx-auto mt-8\">\n          <form className=\"flex gap-2 mb-4\" onSubmit={fetchContextForPrompt}>\n            <input\n              className=\"border px-2 py-1 rounded w-full\"\n              placeholder=\"Type a user/agent prompt\u2026\"\n              value={ctxQuestion}\n              onChange={(e) => setCtxQuestion(e.target.value)}\n            />\n            <Button type=\"submit\" disabled={ctxLoading}>\n              {ctxLoading ? \"\u2026\" : \"Show Context\"}\n            </Button>\n          </form>\n          <div className=\"h-[400px] overflow-auto border rounded-md p-4 whitespace-pre-wrap text-xs bg-gray-50\">\n            {ctxLoading\n              ? \"Fetching context\u2026\"\n              : ctxResult\n              ? (\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{ctxResult}</SafeMarkdown>\n                </div>\n              )\n              : \"Enter a prompt to see what context the agent would use.\"}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 6713, "end_char_idx": 8709, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d3632c0a-6cc4-4d53-9190-71a2ed4d3329": {"__data__": {"id_": "d3632c0a-6cc4-4d53-9190-71a2ed4d3329", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/GmailOps/GmailOpsPanel.tsx", "file_name": "GmailOpsPanel.tsx", "file_size": 3509, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5d579761-247a-4833-aa30-4aa31ff4412f", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/GmailOps/GmailOpsPanel.tsx", "file_name": "GmailOpsPanel.tsx", "file_size": 3509, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ba38c2005e71aa6c9a2bdf12c621692cbce88491ac12432f96e1d739fef69dde", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/GmailOps/GmailOpsPanel.tsx\n// Purpose: Panel to send and view emails, now with SafeMarkdown rendering for messages and snippets.\n\n\"use client\";\nimport { useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { API_ROOT } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\nimport { toMDString } from \"@/lib/toMDString\";\n\n// Explicitly type the Email shape\ntype Email = {\n  from: string;\n  subject: string;\n  date: string;\n  snippet: string;\n};\n\nexport default function GmailOpsPanel() {\n  const [to, setTo] = useState(\"\");\n  const [subject, setSubject] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [msg, setMsg] = useState<string | null>(null);\n  const [emails, setEmails] = useState<Email[]>([]);\n\n  async function send() {\n    const res = await fetch(`${API_ROOT}/control/send_email`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\", \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\" },\n      body: JSON.stringify({ to_email: to, subject, body })\n    });\n    const data = await res.json();\n    setMsg(\n      toMDString(\n        data.status === \"sent\" ? \"Email sent!\" : `Failed: ${data.detail}`\n      )\n    );\n  }\n\n  async function list() {\n    const res = await fetch(`${API_ROOT}/control/list_email`, {\n      headers: { \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\" }\n    });\n    const data = await res.json();\n    const mapped = Array.isArray(data.emails)\n      ? (data.emails as Email[]).map((em) => ({\n          ...em,\n          snippet: toMDString(em.snippet),\n        }))\n      : [];\n    setEmails(mapped);\n  }\n\n  if (msg && typeof msg !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof msg, msg);\n  }\n  for (const em of emails) {\n    if (typeof em.snippet !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof em.snippet, em.snippet);\n    }\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto my-8 space-y-4\">\n      <div>\n        <h3 className=\"font-bold mb-2\">Send Email</h3>\n        <input className=\"border rounded px-2 py-1 w-full mb-1\" placeholder=\"To Email\" value={to} onChange={e => setTo(e.target.value)} />\n        <input className=\"border rounded px-2 py-1 w-full mb-1\" placeholder=\"Subject\" value={subject} onChange={e => setSubject(e.target.value)} />\n        <textarea className=\"border rounded px-2 py-1 w-full mb-2\" placeholder=\"Body\" rows={4} value={body} onChange={e => setBody(e.target.value)} />\n        <Button onClick={send}>Send Email</Button>\n        {msg && (\n          <div className=\"text-xs mt-2\">\n            <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n              <SafeMarkdown>{msg}</SafeMarkdown>\n            </div>\n          </div>\n        )}\n      </div>\n      <div>\n        <h3 className=\"font-bold mb-2\">List Recent Emails</h3>\n        <Button onClick={list}>Refresh Inbox</Button>\n        <ul className=\"mt-2 space-y-1\">\n          {emails.map((em, i) => (\n            <li key={i} className=\"bg-gray-100 rounded p-2 text-xs\">\n              <div><strong>From:</strong> {em.from}</div>\n              <div><strong>Subject:</strong> {em.subject}</div>\n              <div><strong>Date:</strong> {em.date}</div>\n              <div className=\"text-gray-500\">\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{em.snippet}</SafeMarkdown>\n                </div>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3508, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8c8ebcdf-a579-47be-bf10-688d6c29ccae": {"__data__": {"id_": "8c8ebcdf-a579-47be-bf10-688d6c29ccae", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/LogsPanel/LogsPanel.tsx", "file_name": "LogsPanel.tsx", "file_size": 7092, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c6803de6-5ee4-4125-8431-3340f4931143", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/LogsPanel/LogsPanel.tsx", "file_name": "LogsPanel.tsx", "file_size": 7092, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2eb36d789ed57d462e9af7a5b5605e1011494fd7b4c49daac572ff98a5d268b8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "35650091-39cb-4623-b66a-c600f4ba4834", "node_type": "1", "metadata": {}, "hash": "896c45bc3f2eb3de3b52b7f0664de6ad7276873e94a0c10cbac1275421c102fd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/LogsPanel/LogsPanel.tsx\n// Purpose: Production-grade system log/audit/error viewer with filtering, searching, stack trace viewing, and CSV/JSON export.\n\n\"use client\";\n\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { API_ROOT } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\n\nexport interface AuditLogEntry {\n  id: string;\n  time: string;\n  source: string;\n  level: string;\n  message: string;\n  stack_trace?: string;\n  [key: string]: unknown;\n}\n\n// === Utility Export Functions =================================================\nfunction exportJSON(logs: AuditLogEntry[]) {\n  const blob = new Blob([JSON.stringify(logs, null, 2)], { type: \"application/json\" });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = \"logs_audit.json\";\n  link.click();\n  URL.revokeObjectURL(url);\n}\n\nfunction exportCSV(logs: AuditLogEntry[]) {\n  const headers = [\"time\", \"source\", \"level\", \"message\"];\n  const csvRows = [headers.join(\",\")];\n\n  logs.forEach(entry => {\n    const row = [\n      entry.time,\n      entry.source,\n      entry.level,\n      (entry.message || \"\").toString().replace(/\"/g, '\"\"').replace(/\\n/g, \"\\\\n\"),\n    ].map(field => `\"${field}\"`);\n    csvRows.push(row.join(\",\"));\n  });\n\n  const blob = new Blob([csvRows.join(\"\\n\")], { type: \"text/csv\" });\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement(\"a\");\n  link.href = url;\n  link.download = \"logs_audit.csv\";\n  link.click();\n  URL.revokeObjectURL(url);\n}\n\n// === Main Component ============================================================\nexport default function LogsPanel() {\n  const [logs, setLogs] = useState<AuditLogEntry[]>([]);\n  const [autoRefresh, setAutoRefresh] = useState(true);\n  const [levelFilter, setLevelFilter] = useState<string>(\"\");\n  const [sourceFilter, setSourceFilter] = useState<string>(\"\");\n  const [searchText, setSearchText] = useState<string>(\"\");\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchLogs = useCallback(async () => {\n    try {\n      setError(null);\n      const params = new URLSearchParams();\n      if (levelFilter) params.append(\"level_filter\", levelFilter);\n      params.append(\"n\", \"100\");\n\n      const res = await fetch(`${API_ROOT}/logs/recent?${params.toString()}`, {\n        headers: {\n          \"X-API-Key\": (process.env.NEXT_PUBLIC_API_KEY as string) || \"\",\n        },\n      });\n\n      if (!res.ok) throw new Error(`Error fetching logs: ${res.status}`);\n\n      const data = await res.json();\n\n      const mapped: AuditLogEntry[] = Array.isArray(data.logs)\n        ? data.logs.map((entry: Record<string, unknown>, idx: number) => ({\n            id: String(entry.id || entry.time || idx),\n            time: String(entry.time || \"\"),\n            source: String(entry.source || \"system\"),\n            level: String(entry.level || \"INFO\"),\n            message: String(entry.message || \"\"),\n            stack_trace: typeof entry.stack_trace === \"string\" ? entry.stack_trace : \"\",\n            ...entry,\n          }))\n        : [];\n\n      setLogs(mapped);\n    } catch (e: unknown) {\n      const err = e instanceof Error ?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3318, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "35650091-39cb-4623-b66a-c600f4ba4834": {"__data__": {"id_": "35650091-39cb-4623-b66a-c600f4ba4834", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/LogsPanel/LogsPanel.tsx", "file_name": "LogsPanel.tsx", "file_size": 7092, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c6803de6-5ee4-4125-8431-3340f4931143", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/LogsPanel/LogsPanel.tsx", "file_name": "LogsPanel.tsx", "file_size": 7092, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2eb36d789ed57d462e9af7a5b5605e1011494fd7b4c49daac572ff98a5d268b8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8c8ebcdf-a579-47be-bf10-688d6c29ccae", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/LogsPanel/LogsPanel.tsx", "file_name": "LogsPanel.tsx", "file_size": 7092, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5fab8866855109a464b82be23c3d6077394dfe915ce548d4981a385759920e1d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "data.logs.map((entry: Record<string, unknown>, idx: number) => ({\n            id: String(entry.id || entry.time || idx),\n            time: String(entry.time || \"\"),\n            source: String(entry.source || \"system\"),\n            level: String(entry.level || \"INFO\"),\n            message: String(entry.message || \"\"),\n            stack_trace: typeof entry.stack_trace === \"string\" ? entry.stack_trace : \"\",\n            ...entry,\n          }))\n        : [];\n\n      setLogs(mapped);\n    } catch (e: unknown) {\n      const err = e instanceof Error ? e : new Error(\"Unknown error\");\n      setError(err.message);\n    }\n  }, [levelFilter]);\n\n  useEffect(() => {\n    fetchLogs();\n    if (!autoRefresh) return;\n    const interval = setInterval(fetchLogs, 15000);\n    return () => clearInterval(interval);\n  }, [autoRefresh, levelFilter, fetchLogs]);\n\n  const uniqueSources = Array.from(new Set(logs.map(log => log.source))).sort();\n\n  const filteredLogs = logs.filter(entry => {\n    const matchesLevel = !levelFilter || entry.level === levelFilter;\n    const matchesSource = !sourceFilter || entry.source === sourceFilter;\n    const matchesSearch =\n      !searchText ||\n      JSON.stringify(entry).toLowerCase().includes(searchText.toLowerCase());\n\n    return matchesLevel && matchesSource && matchesSearch;\n  });\n\n  if (error) {\n    return (\n      <p className=\"text-red-600 font-mono p-4 bg-red-50 rounded\">\n        Failed to load logs: {error}\n      </p>\n    );\n  }\n\n  if (!filteredLogs.length) {\n    return (\n      <p className=\"text-muted-foreground\">\n        No log entries\n        {levelFilter ? ` of level '${levelFilter}'` : \"\"}\n        {sourceFilter ? ` from '${sourceFilter}'` : \"\"} found.\n      </p>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      {/* Controls */}\n      <div className=\"flex flex-wrap gap-4 mb-4 items-center\">\n        <Button\n          variant={autoRefresh ? \"default\" : \"outline\"}\n          onClick={() => setAutoRefresh(!autoRefresh)}\n        >\n          {autoRefresh ? \"Auto-Refresh ON\" : \"Auto-Refresh OFF\"}\n        </Button>\n        <span className=\"text-sm text-gray-500\">Log updates every 15s</span>\n\n        <select\n          className=\"border rounded px-2 py-1 text-sm\"\n          value={levelFilter}\n          onChange={e => setLevelFilter(e.target.value)}\n        >\n          <option value=\"\">All Levels</option>\n          <option value=\"INFO\">INFO</option>\n          <option value=\"ERROR\">ERROR</option>\n          <option value=\"WARNING\">WARNING</option>\n        </select>\n\n        <select\n          className=\"border rounded px-2 py-1 text-sm\"\n          value={sourceFilter}\n          onChange={e => setSourceFilter(e.target.value)}\n        >\n          <option value=\"\">All Sources</option>\n          {uniqueSources.map(source => (\n            <option key={source} value={source}>\n              {source}\n            </option>\n          ))}\n        </select>\n\n        <input\n          type=\"text\"\n          placeholder=\"Search logs...\"\n          value={searchText}\n          onChange={e => setSearchText(e.target.value)}\n          className=\"border rounded px-2 py-1 text-sm w-60\"\n        />\n\n        <Button onClick={() => exportJSON(filteredLogs)} variant=\"secondary\">\n          Download JSON\n        </Button>\n        <Button onClick={() => exportCSV(filteredLogs)} variant=\"outline\">\n          Export CSV\n        </Button>\n      </div>\n\n      {/* Log Entries */}\n      {filteredLogs.map(entry => (\n        <Card key={entry.id} className={entry.level === \"ERROR\" ? \"border-red-400\" : \"\"}>\n          <CardContent className=\"p-4 space-y-2\">\n            <div className=\"text-xs font-mono text-muted-foreground\">\n              {entry.time} \u2022 <span className=\"font-bold\">{entry.source}</span> [{entry.level}]\n            </div>\n            <div className=\"text-sm break-words\">\n              <SafeMarkdown>{entry.message}</SafeMarkdown>\n            </div>\n            {entry.stack_trace && (\n              <details>\n                <summary className=\"text-red-700 cursor-pointer\">Stack trace</summary>\n                <pre className=\"bg-red-100 text-xs p-2 rounded overflow-x-auto whitespace-pre-wrap\">\n                  {entry.stack_trace}\n                </pre>\n              </details>\n            )}\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 2771, "end_char_idx": 7089, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "96a3cf01-2bb1-44e2-b517-6d4ac7461b47": {"__data__": {"id_": "96a3cf01-2bb1-44e2-b517-6d4ac7461b47", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "012b6fd4c2774af846f8d28892d8356ed588ec0c28a9d4ab59b16a3537c7463a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c379f768-4f68-4b85-8221-bd49ed132db5", "node_type": "1", "metadata": {}, "hash": "22e9239df320bfd134ddccbf5e7dec143159ce88280e672b61ca9299ae777335", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/MemoryPanel.tsx\n// Purpose: Robust, scalable, tier-aware memory inspector with pagination, user filtering, tag/save, date filtering, and replay support.\n//          Now supports Markdown/code in summary, agent response, and context modals via SafeMarkdown.\n\n\"use client\"\n\nimport { useEffect, useMemo, useState } from \"react\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { API_ROOT } from \"@/lib/api\"\nimport SafeMarkdown from \"@/components/SafeMarkdown\"\nimport { toMDString } from \"@/lib/toMDString\"\n\ninterface ContextSource {\n  type: string\n  title?: string\n  path?: string\n  tier?: string\n  score?: number\n  doc_id?: string\n}\n\ninterface MemoryEntry {\n  timestamp: string\n  user: string\n  query: string\n  topics?: string[]\n  files?: string[]\n  summary?: string\n  context_length?: number\n  used_global_context?: boolean\n  context_files?: string[]\n  files_used?: ContextSource[]\n  agent_response?: string\n  prompt_length?: number\n  response_length?: number\n  fallback?: boolean\n  tags?: string[]\n  saved?: boolean\n}\n\nconst isNonEmptyArray = <T,>(arr?: T[] | null): arr is T[] => Array.isArray(arr) && arr.length > 0\n\nexport default function MemoryPanel() {\n  const [memory, setMemory] = useState<MemoryEntry[]>([])\n  const [search, setSearch] = useState(\"\")\n  const [filterUser, setFilterUser] = useState(\"\")\n  const [filterGlobal, setFilterGlobal] = useState<\"any\" | \"with\" | \"without\">(\"any\")\n  const [filterDays, setFilterDays] = useState(7)\n  const [fetchInfo, setFetchInfo] = useState({\n    status: \"idle\",\n    time: 0,\n    error: undefined as string | undefined,\n  })\n  const [modalContext, setModalContext] = useState<{ path: string; content: string } | null>(null)\n\n  const [currentPage, setCurrentPage] = useState(1)\n  const pageSize = 10\n\n  useEffect(() => {\n    fetchMemory()\n  }, [])\n\n  async function fetchMemory() {\n    const start = Date.now()\n    setFetchInfo({ status: \"loading\", time: 0, error: undefined })\n\n    try {\n      const res = await fetch(`${API_ROOT}/logs/sessions/all`, {\n        headers: { \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\" },\n      })\n      if (!res.ok) throw new Error(`Status ${res.status}`)\n      const data = await res.json()\n      const mapped = (data.entries || []).map((m: unknown) => {\n        const entry = m as Partial<MemoryEntry>\n        return {\n          ...entry,\n          summary: toMDString(entry.summary),\n          agent_response: toMDString(entry.agent_response),\n        }\n      })\n      setMemory(mapped)\n      setFetchInfo({ status: \"success\", time: Date.now() - start, error: \"\" })\n    } catch (e: unknown) {\n      const errorMsg = e instanceof Error ?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2724, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c379f768-4f68-4b85-8221-bd49ed132db5": {"__data__": {"id_": "c379f768-4f68-4b85-8221-bd49ed132db5", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "012b6fd4c2774af846f8d28892d8356ed588ec0c28a9d4ab59b16a3537c7463a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "96a3cf01-2bb1-44e2-b517-6d4ac7461b47", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a9a3d0a477b9f9e7b310db764b8c989a505ac9305db4cafac69e75b782735355", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "05cb4718-5266-46b0-af81-3502bcd51122", "node_type": "1", "metadata": {}, "hash": "dafe6d5c45c52f4f18659c30ea6f68530eb5079353feae41a8df26732475a72c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "e.message : String(e)\n      setFetchInfo({ status: \"error\", time: Date.now() - start, error: errorMsg })\n      setMemory([])\n    }\n  }\n\n  async function fetchContextFile(path: string) {\n    try {\n      const res = await fetch(`${API_ROOT}/files/context?path=${encodeURIComponent(path)}`, {\n        headers: { \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\" },\n      })\n      if (!res.ok) throw new Error(`Status ${res.status}`)\n      const content = await res.text()\n      setModalContext({ path, content })\n    } catch (e) {\n      setModalContext({ path, content: `Failed to fetch: ${e}` })\n    }\n  }\n\n  function toggleSave(index: number) {\n    setMemory(prev => {\n      const clone = [...prev]\n      clone[index].saved = !clone[index].saved\n      return clone\n    })\n  }\n\n  function toggleTag(index: number, tag: string) {\n    setMemory(prev => {\n      const clone = [...prev]\n      const tags = new Set(clone[index].tags || [])\n      if (tags.has(tag)) {\n        tags.delete(tag)\n      } else {\n        tags.add(tag)\n      }\n      clone[index].tags = Array.from(tags)\n      return clone\n    })\n  }\n\n  const users = useMemo(() => Array.from(new Set(memory.map(m => m.user))).sort(), [memory])\n\n  const filtered = useMemo(() => {\n    const now = Date.now()\n    const cutoff = now - filterDays * 24 * 60 * 60 * 1000\n\n    return memory\n      .filter(m => {\n        const matchUser = !filterUser || m.user === filterUser\n        const matchSearch = !search || JSON.stringify(m).toLowerCase().includes(search.toLowerCase())\n        const matchGlobal =\n          filterGlobal === \"any\"\n            ? true\n            : filterGlobal === \"with\"\n            ? !!m.used_global_context\n            : !m.used_global_context\n        const matchTime = new Date(m.timestamp).getTime() >= cutoff\n        return matchUser && matchSearch && matchGlobal && matchTime\n      })\n      .sort((a, b) => {\n        const tierScore = (tier?: string) => (tier === \"global\" ? 3 : tier === \"project\" ? 2 : tier === \"code\" ? 1 : 0)\n        const maxTier = (files?: ContextSource[]) => Math.max(...(files || []).map(f => tierScore(f.tier)), 0)\n        return maxTier(b.files_used) - maxTier(a.files_used)\n      })\n  }, [memory, search, filterUser, filterGlobal, filterDays])\n\n  const paginated = useMemo(() => {\n    const start = (currentPage - 1) * pageSize\n    return filtered.slice(start, start + pageSize)\n  }, [filtered, currentPage])\n\n  function replayQuery(query: string) {\n    window.open(`/ask?question=${encodeURIComponent(query)}`, \"_blank\")\n  }\n\n  for (const m of paginated) {\n    if (m.summary && typeof m.summary !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof m.summary, m.summary)\n    }\n    if (m.agent_response && typeof m.agent_response !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof m.agent_response, m.agent_response)\n    }\n  }\n  if (modalContext && typeof modalContext.content !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof modalContext.content, modalContext.content)\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex flex-wrap gap-4 text-xs text-gray-500 mb-2 items-center\">\n        <span>Fetch: <b>{fetchInfo.status}</b>{fetchInfo.time ?", "mimetype": "text/plain", "start_char_idx": 2725, "end_char_idx": 5904, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "05cb4718-5266-46b0-af81-3502bcd51122": {"__data__": {"id_": "05cb4718-5266-46b0-af81-3502bcd51122", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "012b6fd4c2774af846f8d28892d8356ed588ec0c28a9d4ab59b16a3537c7463a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c379f768-4f68-4b85-8221-bd49ed132db5", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7a06d6b869cf86d643b17e29a03da1992807c9490173936500a1de96ae14eab8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "23225086-f91f-4f78-b618-445c606ce599", "node_type": "1", "metadata": {}, "hash": "3b06cdd63bb18eae281bfb45d566cb3c357730a99df311dc90b3b18b434c855a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "` (${fetchInfo.time}ms)` : \"\"}</span>\n        <span>Total: <b>{memory.length}</b></span>\n        <span>Filtered: <b>{filtered.length}</b></span>\n        <span>Users: <b>{users.length}</b></span>\n        <span>Global: <b>{filtered.filter(m => m.used_global_context).length}</b></span>\n        <Button onClick={fetchMemory} variant=\"outline\">Refresh</Button>\n      </div>\n\n      <div className=\"flex gap-2 mb-4\">\n        <select className=\"border rounded px-2 py-1 text-sm\" value={filterUser} onChange={e => setFilterUser(e.target.value)}>\n          <option value=\"\">All Users</option>\n          {users.map(u => <option key={u} value={u}>{u}</option>)}\n        </select>\n        <select\n          className=\"border rounded px-2 py-1 text-sm\"\n          value={filterGlobal}\n          onChange={e =>\n            setFilterGlobal(\n              e.target.value as \"any\" | \"with\" | \"without\"\n            )\n          }\n        >\n          <option value=\"any\">All Context</option>\n          <option value=\"with\">With Global</option>\n          <option value=\"without\">Without Global</option>\n        </select>\n        <input\n          className=\"border rounded px-2 py-1 text-sm w-64\"\n          placeholder=\"Search memory...\"\n          value={search}\n          onChange={e => setSearch(e.target.value)}\n        />\n        <select\n          className=\"border rounded px-2 py-1 text-sm\"\n          value={filterDays}\n          onChange={e => setFilterDays(parseInt(e.target.value))}\n        >\n          {[1, 7, 14, 30, 90].map(days => (\n            <option key={days} value={days}>Last {days} days</option>\n          ))}\n        </select>\n      </div>\n\n      {paginated.map((m, i) => (\n        <Card key={i}>\n          <CardContent className=\"p-4 space-y-2\">\n            <div className=\"text-sm font-mono text-muted-foreground\">\n              {new Date(m.timestamp).toLocaleString()} \u2022 {m.user}\n            </div>\n            <div className=\"text-sm font-semibold\">Query:</div>\n            <div className=\"text-sm\">{m.query}</div>\n\n            {isNonEmptyArray(m.topics) && <div className=\"text-xs\">Topics: {m.topics.join(\", \")}</div>}\n            {isNonEmptyArray(m.files) && <div className=\"text-xs\">Files: {m.files.join(\", \")}</div>}\n\n            {isNonEmptyArray(m.context_files) && (\n              <div className=\"text-xs text-blue-800\">\n                <strong>Context Files:</strong> {m.context_files.map((cf, idx) => (\n                  <span key={cf}>\n                    <a className=\"underline cursor-pointer\" onClick={() => fetchContextFile(cf)}>{cf}</a>\n                    {idx < m.context_files!.length - 1 ? \", \" : \"\"}\n                  </span>\n                ))}\n              </div>\n            )}\n\n            {isNonEmptyArray(m.files_used) && (\n              <div className=\"text-xs text-purple-700\">\n                <strong>Injected:</strong>{\" \"}\n                {m.files_used.map((f, idx) => (\n                  <span key={idx}>\n                    <span className=\"underline cursor-pointer\" onClick={() => f.path && fetchContextFile(f.path)}>\n                      {f.path || f.title || f.doc_id || f.type}\n                    </span>\n                    {f.tier && <span className=\"ml-1 text-gray-500\">[{f.tier}]</span>}\n                    {idx < m.files_used!.length - 1 ?", "mimetype": "text/plain", "start_char_idx": 5905, "end_char_idx": 9191, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "23225086-f91f-4f78-b618-445c606ce599": {"__data__": {"id_": "23225086-f91f-4f78-b618-445c606ce599", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "012b6fd4c2774af846f8d28892d8356ed588ec0c28a9d4ab59b16a3537c7463a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "05cb4718-5266-46b0-af81-3502bcd51122", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "269a5525aef72d1f8816b32dbc60bbc03e53791298f6652be0907fb028344c8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "ac98af0d-f350-4f9b-9dc7-7eff049e9f7f", "node_type": "1", "metadata": {}, "hash": "34ec20c5588c65005965f320bfb579099551c82d3c898f38893bdaff31fa04c5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\", \" : \"\"}\n                  </span>\n                ))}\n              </div>\n            )}\n\n            {isNonEmptyArray(m.files_used) && (\n              <div className=\"text-xs text-purple-700\">\n                <strong>Injected:</strong>{\" \"}\n                {m.files_used.map((f, idx) => (\n                  <span key={idx}>\n                    <span className=\"underline cursor-pointer\" onClick={() => f.path && fetchContextFile(f.path)}>\n                      {f.path || f.title || f.doc_id || f.type}\n                    </span>\n                    {f.tier && <span className=\"ml-1 text-gray-500\">[{f.tier}]</span>}\n                    {idx < m.files_used!.length - 1 ? \", \" : \"\"}\n                  </span>\n                ))}\n              </div>\n            )}\n\n            <div className=\"text-xs text-gray-600\">\n              {typeof m.context_length === \"number\" && <>Context Length: {m.context_length} chars<br /></>}\n              {typeof m.prompt_length === \"number\" && <>Prompt: {m.prompt_length}, Response: {m.response_length}</>}\n            </div>\n\n            {m.used_global_context && (\n              <span className=\"inline-block px-2 py-1 text-xs bg-green-100 text-green-700 rounded\">Global context</span>\n            )}\n            {m.fallback && (\n              <span className=\"inline-block px-2 py-1 text-xs bg-orange-100 text-orange-700 rounded\">Fallback</span>\n            )}\n\n            {Array.isArray(m.tags) && m.tags.length > 0 && (\n              <div className=\"text-xs text-blue-600\">\n                <strong>Tags:</strong> {m.tags.join(\", \")}\n              </div>\n            )}\n\n            {/* Markdown/code for memory summary */}\n            {typeof m.summary === \"string\" && !!m.summary.trim() && (\n              <div className=\"bg-muted p-2 rounded text-xs whitespace-pre-wrap\">\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{m.summary}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n\n            {/* Markdown/code for agent response */}\n            {typeof m.agent_response === \"string\" && !!m.agent_response.trim() && (\n              <div className=\"bg-muted p-2 rounded text-xs whitespace-pre-wrap mt-2\">\n                <strong>Agent Response:</strong>\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{m.agent_response}</SafeMarkdown>\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex gap-2 flex-wrap text-xs mt-2\">\n              {[\"important\", \"bug\", \"training\", \"review\"].map(tag => (\n                <Button\n                  key={tag}\n                  variant={m.tags?.includes(tag) ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => toggleTag(i, tag)}\n                >\n                  {tag}\n                </Button>\n              ))}\n              <Button\n                variant={m.saved ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => toggleSave(i)}\n              >\n                {m.saved ?", "mimetype": "text/plain", "start_char_idx": 8515, "end_char_idx": 11640, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ac98af0d-f350-4f9b-9dc7-7eff049e9f7f": {"__data__": {"id_": "ac98af0d-f350-4f9b-9dc7-7eff049e9f7f", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "012b6fd4c2774af846f8d28892d8356ed588ec0c28a9d4ab59b16a3537c7463a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "23225086-f91f-4f78-b618-445c606ce599", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/MemoryPanel.tsx", "file_name": "MemoryPanel.tsx", "file_size": 13812, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e58a420f6f495542050eb41a915deb89a7970adeb67b406ffd1239a16585612c", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => toggleTag(i, tag)}\n                >\n                  {tag}\n                </Button>\n              ))}\n              <Button\n                variant={m.saved ? \"default\" : \"outline\"}\n                size=\"sm\"\n                onClick={() => toggleSave(i)}\n              >\n                {m.saved ? \"\ud83d\udcbe Saved\" : \"Save\"}\n              </Button>\n              <Button size=\"sm\" variant=\"ghost\" onClick={() => replayQuery(m.query)}>\n                \ud83d\udd01 Replay\n              </Button>\n            </div>\n\n            <details className=\"mt-2\">\n              <summary className=\"cursor-pointer text-xs text-blue-700\">Debug: Raw Entry</summary>\n              <pre className=\"bg-gray-100 p-2 rounded text-xs overflow-auto\">{JSON.stringify(m, null, 2)}</pre>\n            </details>\n          </CardContent>\n        </Card>\n      ))}\n\n      {/* Pagination controls */}\n      {filtered.length > pageSize && (\n        <div className=\"flex gap-2 justify-center mt-4\">\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n            disabled={currentPage === 1}\n          >\n            \u2b05 Prev\n          </Button>\n          <span className=\"text-xs flex items-center\">Page {currentPage} / {Math.ceil(filtered.length / pageSize)}</span>\n          <Button\n            size=\"sm\"\n            variant=\"outline\"\n            onClick={() => setCurrentPage(p => p + 1)}\n            disabled={currentPage * pageSize >= filtered.length}\n          >\n            Next \u27a1\n          </Button>\n        </div>\n      )}\n\n      {/* Modal viewer for context file contents (markdown/code-friendly) */}\n      {modalContext && (\n        <div className=\"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-40\">\n          <div className=\"bg-white rounded shadow-lg max-w-2xl w-full p-6 relative\">\n            <div className=\"text-sm mb-2 font-bold\">Context File: <code>{modalContext.path}</code></div>\n            <div className=\"bg-gray-100 p-4 rounded max-h-[400px] overflow-auto text-xs\">\n              <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                <SafeMarkdown>{modalContext.content}</SafeMarkdown>\n              </div>\n            </div>\n            <Button variant=\"secondary\" onClick={() => setModalContext(null)} className=\"absolute top-2 right-2\">\n              Close\n            </Button>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}", "mimetype": "text/plain", "start_char_idx": 11257, "end_char_idx": 13799, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "60cfc60e-936f-4610-8fed-a074816c04ca": {"__data__": {"id_": "60cfc60e-936f-4610-8fed-a074816c04ca", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/MermaidGraph.tsx", "file_name": "MermaidGraph.tsx", "file_size": 408, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f25cf645-70eb-4cd6-8478-42a8b1c9d2cc", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/MermaidGraph.tsx", "file_name": "MermaidGraph.tsx", "file_size": 408, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "da0165cba5ffb9d2f398cdd5ff95da8a2db483b5abbcfa61d94bf170678a5d52", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\"\nimport React from 'react';\nimport mermaid from 'mermaid';\nimport { useEffect } from 'react';\n\nexport default function MermaidGraph({ code }: { code: string }) {\n  useEffect(() => {\n    mermaid.initialize({ startOnLoad: true });\n    mermaid.contentLoaded();\n  }, []);\n\n  return (\n    <div className=\"mermaid text-sm p-4 border rounded-md bg-white overflow-x-auto\">\n      {code}\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 407, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3c76ff70-82d7-4738-a28a-460e5749a1f1": {"__data__": {"id_": "3c76ff70-82d7-4738-a28a-460e5749a1f1", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/SafeMarkdown.tsx", "file_name": "SafeMarkdown.tsx", "file_size": 3365, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "416a7264-956d-48d6-9fb1-d3c068366ec9", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/SafeMarkdown.tsx", "file_name": "SafeMarkdown.tsx", "file_size": 3365, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1e4852624ede92b459ccc939e69cf7b5475b94d3b675464a6d8763d59c3133f9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/components/SafeMarkdown.tsx\n// Purpose: Bulletproof, consistent, and safe Markdown rendering for all app content.\n//          Hardened against XSS, raw HTML, and rendering bugs. All code blocks are syntax-highlighted (Prism).\n//          This is the ONLY allowed way to render Markdown in the app.\n\nimport React from \"react\";\nimport ReactMarkdown, { Components } from \"react-markdown\";\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\";\nimport { vscDarkPlus } from \"react-syntax-highlighter/dist/esm/styles/prism\";\n\n// Props for the SafeMarkdown component\ntype SafeMarkdownProps = {\n  /** Markdown text to render (always a string) */\n  children: string;\n  /** Optional CSS className for wrapper */\n  className?: string;\n};\n\n// Custom Markdown renderer for code blocks (uses Prism for highlighting)\nconst markdownComponents: Components = {\n  code(props) {\n    const { inline, className, children, ...rest } = props as {\n      inline?: boolean;\n      className?: string;\n      children: React.ReactNode;\n    };\n    const match = /language-(\\w+)/.exec(className || \"\");\n    const content = String(children).replace(/\\n$/, \"\");\n\n    if (!inline && match) {\n      return (\n        <SyntaxHighlighter\n          style={vscDarkPlus}\n          language={match[1]}\n          PreTag=\"div\"\n          {...rest}\n        >\n          {content}\n        </SyntaxHighlighter>\n      );\n    }\n\n    return (\n      <code {...(className ? { className } : {})} {...rest}>\n        {content}\n      </code>\n    );\n  },\n  // You can expand here for tables, images, links if needed\n};\n\nexport default function SafeMarkdown({ children, className }: SafeMarkdownProps) {\n  // Dev-only: Warn if a non-string slips through (should never happen in production)\n  if (typeof children !== \"string\" && process.env.NODE_ENV !== \"production\") {\n    console.warn(\n      \"[SafeMarkdown] Expected children to be a string, got:\",\n      typeof children,\n      children\n    );\n  }\n\n  // Always coerce to string for React safety\n  const strChildren =\n    typeof children === \"string\" ? children : children ? String(children) : \"\";\n\n  // Debug: Log if somehow a non-string is still about to render (for final #418 hunting)\n  if (typeof strChildren !== \"string\") {\n    // eslint-disable-next-line no-console\n    console.error(\"SAFE-MARKDOWN-418-DEBUG\", typeof strChildren, strChildren);\n  }\n\n  // Ultra-safe: Escape anything that looks like raw HTML before markdown parsing\n  // (belt-and-suspenders, since skipHtml & disallowedElements are also set)\n  const likelyRawHtml = /<\\s*[a-zA-Z]+[^>]*>/.test(strChildren);\n  const safeChildren = likelyRawHtml\n    ? strChildren.replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\")\n    : strChildren;\n\n  return (\n    <ReactMarkdown\n      components={markdownComponents}\n      // SECURITY: Never allow any HTML passthrough from markdown\n      skipHtml={true}\n      disallowedElements={[\"html\", \"head\", \"body\", \"style\", \"script\", \"iframe\"]}\n      {...(className ? { className } : {})}\n    >\n      {safeChildren}\n    </ReactMarkdown>\n  );\n}\n\n/**\n * Usage:\n * <SafeMarkdown>{markdownString}</SafeMarkdown>\n *\n * - NEVER use ReactMarkdown directly in any other file.\n * - All markdown content (LLM, docs, search, context, etc) MUST be rendered via SafeMarkdown.\n * - Always ensure children is a string (coerce using toMDString or similar as needed).\n */", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3364, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "588893be-708d-445f-9f5b-14d31392b654": {"__data__": {"id_": "588893be-708d-445f-9f5b-14d31392b654", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/SearchPanel.tsx", "file_name": "SearchPanel.tsx", "file_size": 4576, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bbb5ff5f-c763-4222-ae30-a4a8fec94cc2", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/SearchPanel.tsx", "file_name": "SearchPanel.tsx", "file_size": 4576, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "123070290530c4e0d0cd4b0e6958e2af3c9b6ce8c40752b99b12e860f6c0a68a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b36dafba-90e3-4c28-b0c7-738c5f487505", "node_type": "1", "metadata": {}, "hash": "a05b37f20f3dd04a8475dbcffad33196c334c135e0edbe6df5612813d74f13d0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/components/SearchPanel.tsx\n// Purpose: Robust, debounced UI panel for semantic KB search (GET /kb/search).\n//          Now renders result snippets with SafeMarkdown for readable markdown/code.\n\n\"use client\";\n\nimport { useEffect, useRef, useState } from \"react\";\nimport { Input } from \"@/components/ui/input\";\nimport { Button } from \"@/components/ui/button\";\nimport { API_ROOT, API_KEY } from \"@/lib/api\";\nimport SafeMarkdown from \"@/components/SafeMarkdown\";\nimport { toMDString } from \"@/lib/toMDString\";\n\nexport type KBResult = {\n  path: string;\n  title: string;\n  snippet: string;\n  updated: string;\n  similarity: number;\n};\n\nconst DEBOUNCE_MS = 400;\nconst TOP_K = 5;\n\nexport default function SearchPanel() {\n  const [query, setQuery] = useState<string>(\"\");\n  const [results, setResults] = useState<KBResult[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  const controllerRef = useRef<AbortController | null>(null);\n  const debounceRef = useRef<ReturnType<typeof setTimeout> | null>(null);\n\n  const clearDebounce = () => {\n    if (debounceRef.current) {\n      clearTimeout(debounceRef.current);\n    }\n  };\n\n  // Core fetch logic\n  const fetchResults = async (q: string) => {\n    if (!API_ROOT) {\n      setError(\"API URL not configured\");\n      return;\n    }\n    if (!API_KEY) {\n      setError(\"API key missing\");\n      return;\n    }\n\n    setError(null);\n    setLoading(true);\n\n    controllerRef.current?.abort();\n    const controller = new AbortController();\n    controllerRef.current = controller;\n\n    try {\n      const url = new URL(\"/kb/search\", API_ROOT);\n      url.searchParams.set(\"query\", q);\n      url.searchParams.set(\"k\", String(TOP_K));\n\n      const res = await fetch(url.toString(), {\n        method: \"GET\",\n        headers: {\n          \"x-api-key\": API_KEY,\n          Accept: \"application/json\",\n        },\n        signal: controller.signal,\n      });\n\n      if (res.status === 401 || res.status === 403) {\n        throw new Error(\"Unauthorized \u2013 check API key / login\");\n      }\n      if (!res.ok) {\n        throw new Error(`HTTP ${res.status}`);\n      }\n\n      const data: KBResult[] = await res.json();\n      const mapped = data.map((r) => ({\n        ...r,\n        snippet: toMDString(r.snippet),\n      }));\n      setResults(mapped);\n    } catch (err) {\n      if (err instanceof DOMException && err.name === \"AbortError\") {\n        return; // request was cancelled\n      }\n      console.error(\"KB search error\", err);\n      setError((err as Error).message ?? \"Search failed\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Debounce typing\n  useEffect(() => {\n    if (!query.trim()) {\n      setResults([]);\n      setError(null);\n      return;\n    }\n\n    clearDebounce();\n    debounceRef.current = setTimeout(() => fetchResults(query.trim()), DEBOUNCE_MS);\n\n    return () => {\n      clearDebounce();\n    };\n  }, [query]);\n\n  const onSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    clearDebounce();\n    fetchResults(query.trim());\n  };\n\n  for (const r of results) {\n    if (typeof r.snippet !== \"string\") {\n      console.log(\"DEBUG 418:\", typeof r.snippet, r.snippet);\n    }\n  }\n\n  return (\n    <div className=\"space-y-4\" aria-busy={loading}>\n      <form onSubmit={onSubmit} className=\"flex gap-2\">\n        <label htmlFor=\"kb-query\" className=\"sr-only\">\n          Search knowledge base\n        </label>\n        <Input\n          id=\"kb-query\"\n          placeholder=\"Ask a question\u2026\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n        />\n        <Button type=\"submit\" disabled={loading}>\n          {loading ? \"\u23f3\" : \"Search\"}\n        </Button>\n      </form>\n\n      {error ?", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3742, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b36dafba-90e3-4c28-b0c7-738c5f487505": {"__data__": {"id_": "b36dafba-90e3-4c28-b0c7-738c5f487505", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/SearchPanel.tsx", "file_name": "SearchPanel.tsx", "file_size": 4576, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "bbb5ff5f-c763-4222-ae30-a4a8fec94cc2", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/SearchPanel.tsx", "file_name": "SearchPanel.tsx", "file_size": 4576, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "123070290530c4e0d0cd4b0e6958e2af3c9b6ce8c40752b99b12e860f6c0a68a", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "588893be-708d-445f-9f5b-14d31392b654", "node_type": "1", "metadata": {"file_path": "/app/frontend/src/components/SearchPanel.tsx", "file_name": "SearchPanel.tsx", "file_size": 4576, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "24783c2696b329e2fc344349e28919f41b0fd29d9c9b2e1fc8909db61bc7f047", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"\u23f3\" : \"Search\"}\n        </Button>\n      </form>\n\n      {error ? <p className=\"text-sm text-red-500\">{error}</p> : null}\n\n      {results.length > 0 && (\n        <div className=\"space-y-2\">\n          {results.map((r, i) => (\n            <article key={i} className=\"border rounded p-4 text-sm space-y-1\">\n              <header className=\"text-muted-foreground\">\n                <strong>{r.title}</strong> ({r.similarity.toFixed(2)})\n              </header>\n              <div className=\"mb-1\">\n                <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n                  <SafeMarkdown>{r.snippet}</SafeMarkdown>\n                </div>\n              </div>\n              <footer className=\"text-xs text-muted-foreground\">\n                Updated: {r.updated || \"\u2014\"}\n              </footer>\n            </article>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 3679, "end_char_idx": 4567, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3de37428-c55c-457d-9e83-f23b72d95555": {"__data__": {"id_": "3de37428-c55c-457d-9e83-f23b72d95555", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/Sidebar/Sidebar.tsx", "file_name": "Sidebar.tsx", "file_size": 1657, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "7ccbcf9a-aa7e-4c84-bd6b-f77c189cbc6e", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/Sidebar/Sidebar.tsx", "file_name": "Sidebar.tsx", "file_size": 1657, "creation_date": "2025-07-06", "last_modified_date": "2025-07-06", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2ae122c78d5b00a62d5cd4a47154b3ee744fc136366759b484036253e05ab987", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/components/Sidebar/Sidebar.tsx\n\"use client\";\n\nconsole.log(\"Sidebar mounted\");\n\nimport Image from \"next/image\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\n\nconst links = [\n  { href: \"/ask\", label: \"Ask Echo\", icon: \"/Hoody.png\" },\n  { href: \"/codex\", label: \"Codex\", icon: \"/PlannerCop.png\" },\n  { href: \"/docs\", label: \"Docs\", icon: \"/PigTails.png\" },\n  { href: \"/logs\", label: \"Logs\", icon: \"/echo.png\" }, // Pick a fun icon!\n  { href: \"/control\", label: \"Control\", icon: \"/Echo.png\" },\n  { href: \"/planner\", label: \"Planner\", icon: \"/ballcap beard.png\" },\n  { href: \"/email\", label: \"Email\", icon: \"/blackbeard earing.png\" },\n  { href: \"/action-queue\", label: \"ActionQueue\", icon: \"/beanie and smoke.png\" },\n  { href: \"/janitor\", label: \"Janitor\", icon: \"/sunglass shadow.png\" },\n\n];\n\nexport default function Sidebar() {\n  const pathname = usePathname();\n\n  return (\n    <aside className=\"w-48 bg-white border-r p-3 space-y-2\">\n      <h2 className=\"text-lg font-bold flex items-center gap-2\">\n        <Image src=\"/WildfireMang.png\" alt=\"logo\" width={24} height={24} />\n        Wildfire Ranch\n      </h2>\n      <nav className=\"mt-4 space-y-2 text-sm\">\n        {links.map(({ href, label, icon }) => (\n          <Link\n            key={href}\n            href={href}\n            className={`flex items-center gap-2 px-2 py-1 rounded hover:bg-gray-100 ${\n              pathname === href ? \"bg-blue-100 font-semibold\" : \"\"\n            }`}\n          >\n            <Image src={icon} alt={label} width={24} height={24} />\n            <span>{label}</span>\n          </Link>\n        ))}\n      </nav>\n    </aside>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1656, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4fb1ab5c-ff78-48a6-adc8-ad7c9268e72c": {"__data__": {"id_": "4fb1ab5c-ff78-48a6-adc8-ad7c9268e72c", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/StatusPanel.tsx", "file_name": "StatusPanel.tsx", "file_size": 4399, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "abdd1972-b2e2-48b6-81f2-53eafa90f318", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/StatusPanel.tsx", "file_name": "StatusPanel.tsx", "file_size": 4399, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "53b88f4fd5cbf17b04040d8ff6f5d0012be586560c0e6c15929d686fe32f499e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/StatusPanel.tsx\n// Directory: frontend/src/components\n// Purpose: Display Relay service status and embed a UI panel for Google Docs sync and KB/context awareness\n\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport DocsSyncPanel from \"@/components/DocsSyncPanel\";\nimport { API_ROOT } from \"@/lib/api\";\n\ninterface StatusSummary {\n  version?: { git_commit?: string };\n  paths?: {\n    base_path?: string;\n    resolved_paths?: Record<string, boolean>;\n  };\n}\n\ninterface ContextFile {\n  path: string;\n  size_bytes: number;\n  last_modified: string;\n}\n\ninterface ContextStatus {\n  context_files: ContextFile[];\n  global_context_used: string;\n  global_context_manual_last_updated: string;\n  global_context_auto_last_updated: string;\n}\n\nexport default function StatusPanel() {\n  const [status, setStatus] = useState<StatusSummary | null>(null);\n  const [context, setContext] = useState<ContextStatus | null>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    async function fetchStatus() {\n      if (!API_ROOT) {\n        setError(\"API URL not configured.\");\n        setLoading(false);\n        return;\n      }\n      try {\n        const [statusRes, contextRes] = await Promise.all([\n          fetch(`${API_ROOT}/status/summary`),\n          fetch(`${API_ROOT}/status/context`),\n        ]);\n        if (!statusRes.ok || !contextRes.ok)\n          throw new Error(\"Failed to fetch one or more endpoints\");\n        const statusData: StatusSummary = await statusRes.json();\n        const contextData: ContextStatus = await contextRes.json();\n        setStatus(statusData);\n        setContext(contextData);\n      } catch (err) {\n        console.error(\"Status fetch error:\", err);\n        setError(\"Failed to load status.\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchStatus();\n  }, []);\n\n  if (loading) return <p className=\"text-sm text-muted-foreground\">Loading service status\u2026</p>;\n  if (error) return <p className=\"text-sm text-red-500\">{error}</p>;\n  if (!status) return <p className=\"text-sm\">No status data available.</p>;\n\n  return (\n    <>\n      <Card className=\"mt-6\">\n        <CardContent className=\"p-4 space-y-3\">\n          <h2 className=\"text-xl font-bold\">\ud83d\udcca Relay Service Status</h2>\n          <div><strong>Version:</strong> {status.version?.git_commit || \"unknown\"}</div>\n          <div><strong>Base Path:</strong> {status.paths?.base_path || \"\u2014\"}</div>\n          <div>\n            <strong>Docs Folder Health:</strong>\n            <ul className=\"list-disc ml-6\">\n              {Object.entries(status.paths?.resolved_paths || {}).map(\n                ([pathKey, ok]) => (\n                  <li key={pathKey} className=\"text-sm\">\n                    {pathKey}: {ok ? \"\u2705 OK\" : \"\u274c Missing\"}\n                  </li>\n                )\n              )}\n            </ul>\n          </div>\n        </CardContent>\n      </Card>\n\n      {context && (\n        <Card className=\"mt-6\">\n          <CardContent className=\"p-4 space-y-3\">\n            <h2 className=\"text-xl font-bold\">\ud83e\udde0 Context Awareness</h2>\n            <div><strong>Context Strategy:</strong> {context.global_context_used === \"manual\" ? \"\ud83d\udcdd Manual\" : context.global_context_used === \"auto\" ? \"\ud83e\udd16 Auto-generated\" : \"None\"}</div>\n            <div><strong>Last Manual Update:</strong> {context.global_context_manual_last_updated}</div>\n            <div><strong>Last Auto Update:</strong> {context.global_context_auto_last_updated}</div>\n            <div>\n              <strong>Active Context Files:</strong>\n              <ul className=\"list-disc ml-6\">\n                {context.context_files.map((file) => (\n                  <li key={file.path} className=\"text-sm\">\n                    {file.path}{\" \"}\n                    <span className=\"text-xs text-gray-500\">\n                      ({Math.round(file.size_bytes / 1024)} KB,\n                      {\" \"}\n                      {new Date(file.last_modified).toLocaleString()})\n                    </span>\n                  </li>\n                ))}\n              </ul>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Embed DocsSyncPanel below status */}\n      <div className=\"mt-6\">\n        <DocsSyncPanel />\n      </div>\n    </>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4378, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f2184771-2cad-4ab6-bd53-54f536f4cc28": {"__data__": {"id_": "f2184771-2cad-4ab6-bd53-54f536f4cc28", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/dashboard/Dashboard.stories.tsx", "file_name": "Dashboard.stories.tsx", "file_size": 152, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "428a3c91-498d-4ab4-95c7-ef6be02f473f", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/dashboard/Dashboard.stories.tsx", "file_name": "Dashboard.stories.tsx", "file_size": 152, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8ff435bf50daa12ec94dd6508e05b371465debcebf91c6f0ef8b59ee95717f98", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import Dashboard from \"./Dashboard\";\nexport default {\n  title: \"Dashboard/Main\",\n  component: Dashboard,\n};\nexport const Default = () => <Dashboard />;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 151, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0cb652fa-530d-40ef-ab53-1b5e56383d41": {"__data__": {"id_": "0cb652fa-530d-40ef-ab53-1b5e56383d41", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/dashboard/Dashboard.tsx", "file_name": "Dashboard.tsx", "file_size": 3449, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a942bc55-b158-43fd-b032-721672aa0a8c", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/dashboard/Dashboard.tsx", "file_name": "Dashboard.tsx", "file_size": 3449, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d3c25890acf4c24bc3191534ba23cb732d2521e7d382154d2bed05fd50e7cfc4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: DashboardWizard.tsx\n// Directory: frontend/src/components/dashboard\n// Purpose: Multi-step, animated setup wizard for Command Center dashboard onboarding.\n//   - Built with shadcn/ui components for consistent styling\n//   - Uses Framer Motion for smooth step transitions\n//   - Easy to customize steps/fields for your infra/ops flows\n\n\"use client\";\nimport { useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { AnimatePresence, motion } from \"framer-motion\";\n\n// ---- Wizard step definitions ----\n// Each step defines a title and content (could use form logic, API calls, etc)\nconst steps = [\n  {\n    title: \"Connect Infrastructure\",\n    content: (\n      <>\n        <p className=\"mb-4 text-sm text-muted-foreground\">\n          Connect your infrastructure to begin tracking data.\n        </p>\n        <Input placeholder=\"Enter node endpoint or IP\" />\n      </>\n    ),\n  },\n  {\n    title: \"Add Notification Channel\",\n    content: (\n      <>\n        <p className=\"mb-4 text-sm text-muted-foreground\">\n          Add email or webhook to get alerts on events.\n        </p>\n        <Input placeholder=\"Email or webhook URL\" />\n      </>\n    ),\n  },\n  {\n    title: \"Finish Setup\",\n    content: (\n      <>\n        <p className=\"mb-4 text-sm text-muted-foreground\">\n          You\u2019re ready! Start using the Command Center.\n        </p>\n        <ul className=\"list-disc text-xs pl-5 text-muted-foreground\">\n          <li>Monitor live data</li>\n          <li>Configure automations</li>\n          <li>Access analytics & reports</li>\n        </ul>\n      </>\n    ),\n  },\n];\n\nexport default function DashboardWizard() {\n  // ---- State: Current wizard step ----\n  const [step, setStep] = useState(0);\n\n  // ---- Step navigation handlers ----\n  const next = () => setStep((s) => Math.min(s + 1, steps.length - 1));\n  const prev = () => setStep((s) => Math.max(s - 1, 0));\n\n  return (\n    <Card className=\"max-w-md mx-auto shadow-2xl\">\n      <CardHeader>\n        <CardTitle>\n          Setup Wizard\n          <span className=\"ml-2 text-xs font-normal text-muted-foreground\">\n            Step {step + 1} of {steps.length}\n          </span>\n        </CardTitle>\n        {/* Progress bar shows % complete */}\n        <Progress value={((step + 1) / steps.length) * 100} className=\"h-2 mt-4\" />\n      </CardHeader>\n      <CardContent>\n        {/* Animated transition between steps */}\n        <AnimatePresence mode=\"wait\">\n          <motion.div\n            key={step}\n            initial={{ opacity: 0, x: 24 }}\n            animate={{ opacity: 1, x: 0 }}\n            exit={{ opacity: 0, x: -24 }}\n            transition={{ duration: 0.25 }}\n            className=\"min-h-[110px]\"\n          >\n            <h3 className=\"font-semibold mb-2\">{steps[step].title}</h3>\n            {steps[step].content}\n          </motion.div>\n        </AnimatePresence>\n        {/* Navigation buttons */}\n        <div className=\"flex justify-between mt-6\">\n          <Button variant=\"secondary\" onClick={prev} disabled={step === 0}>\n            Back\n          </Button>\n          <Button onClick={next} disabled={step === steps.length - 1}>\n            {step === steps.length - 1 ? \"Done\" : \"Next\"}\n          </Button>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3446, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "55f6cbd0-d231-4f21-b3db-f277dc3822f1": {"__data__": {"id_": "55f6cbd0-d231-4f21-b3db-f277dc3822f1", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/index.ts", "file_name": "index.ts", "file_size": 717, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "563794c6-00e2-4f3d-aa0c-af991bdc4558", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/index.ts", "file_name": "index.ts", "file_size": 717, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bb5ab1887ba365c2ecc021630e76a1d10807d31f08cd91e6eda4f7a7c63cd696", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/components/index.ts\n\nexport { default as AskEcho } from \"./AskAgent/ChatWindow\";\nexport { default as ActionQueuePanel } from \"./ActionQueue/ActionQueuePanel\";\nexport { default as AuditPanel } from \"./AuditPanel/AuditPanel\";\nexport { default as DocsViewer } from \"./DocsViewer/DocsViewer\";\nexport { default as DocsSyncPanel } from \"./DocsSyncPanel\";\nexport { default as GmailOpsPanel } from \"./GmailOps/GmailOpsPanel\";\nexport { default as LogsPanel } from \"./LogsPanel/LogsPanel\";\nexport { default as MemoryPanel } from \"./MemoryPanel\";\nexport { default as SearchPanel } from \"./SearchPanel\";\nexport { default as StatusPanel } from \"./StatusPanel\";\nexport { default as Sidebar } from \"./Sidebar/Sidebar\";", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 716, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "42b32e2e-5958-4943-b0b7-94fe672c5df0": {"__data__": {"id_": "42b32e2e-5958-4943-b0b7-94fe672c5df0", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/AskAgent/AskAgent.tsx", "file_name": "AskAgent.tsx", "file_size": 1644, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "65d4c4cf-dee6-459f-9c8a-078b29106ce1", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/AskAgent/AskAgent.tsx", "file_name": "AskAgent.tsx", "file_size": 1644, "creation_date": "2025-07-01", "last_modified_date": "2025-07-01", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "544ad5ea27543f0c7f33e54e28e3e965ba956b6feea4f68b057157f9fd398acd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/components/ui/AskAgent/AskAgent.tsx\n\n\"use client\"\n\nimport { useState } from \"react\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { Button } from \"@/components/ui/button\"\nimport SafeMarkdown from \"@/components/SafeMarkdown\"\n\nexport default function AskAgent() {\n  const [query, setQuery] = useState(\"\")\n  const [response, setResponse] = useState<string | null>(null)\n  const [loading, setLoading] = useState(false)\n\n  async function sendQuery() {\n    if (!query) return\n    setLoading(true)\n    setResponse(null)\n\n    const res = await fetch(\"https://relay.wildfireranch.us/ask?q=\" + encodeURIComponent(query), {\n      headers: {\n        \"X-API-Key\": process.env.NEXT_PUBLIC_API_KEY || \"\"\n      }\n    })\n\n    const data = await res.json()\n    setResponse(\n      data.answer ||\n      data.function_call?.arguments ||\n      \"No answer.\"\n    )\n    setLoading(false)\n  }\n\n  if (response && typeof response !== \"string\") {\n    console.log(\"DEBUG 418:\", typeof response, response)\n  }\n\n  return (\n    <div className=\"max-w-xl space-y-4\">\n      <Textarea\n        placeholder=\"Ask Echo something...\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        disabled={loading}\n      />\n      <Button onClick={sendQuery} disabled={loading || !query}>\n        {loading ? \"Thinking...\" : \"Ask Echo\"}\n      </Button>\n      {response && (\n        <div className=\"bg-muted p-4 rounded text-sm whitespace-pre-wrap border\">\n          <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n            <SafeMarkdown>{response}</SafeMarkdown>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1643, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "809de6fd-3e9e-4678-9888-568d63099cfe": {"__data__": {"id_": "809de6fd-3e9e-4678-9888-568d63099cfe", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/badge.tsx", "file_name": "badge.tsx", "file_size": 882, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2e38772e-12bc-46d7-8d86-18b5c5aedbdd", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/badge.tsx", "file_name": "badge.tsx", "file_size": 882, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3f70fabe7cbc2f62b0e5bfebd88b701433f785dc2aabe8cae1e639a71a8b3406", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: components/ui/badge.tsx\n// Simple, styleable Badge component for statuses/labels\n\nimport React from \"react\";\nimport clsx from \"clsx\";\n\ntype BadgeVariant = \"default\" | \"success\" | \"destructive\" | \"secondary\";\n\nconst variantStyles: Record<BadgeVariant, string> = {\n  default: \"bg-gray-200 text-gray-700\",\n  success: \"bg-green-100 text-green-800 border border-green-300\",\n  destructive: \"bg-red-100 text-red-800 border border-red-300\",\n  secondary: \"bg-blue-100 text-blue-800 border border-blue-300\",\n};\n\nexport const Badge: React.FC<{\n  children: React.ReactNode;\n  variant?: BadgeVariant;\n  className?: string;\n}> = ({ children, variant = \"default\", className = \"\" }) => (\n  <span\n    className={clsx(\n      \"inline-block rounded px-2 py-0.5 text-xs font-semibold\",\n      variantStyles[variant],\n      className\n    )}\n  >\n    {children}\n  </span>\n);\n\nexport default Badge;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 881, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "293cff5d-33e0-4d56-8684-84a7da2ed30a": {"__data__": {"id_": "293cff5d-33e0-4d56-8684-84a7da2ed30a", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/button.tsx", "file_name": "button.tsx", "file_size": 2123, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ccf087e4-9ffe-47ed-900f-ce34e42f410b", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/button.tsx", "file_name": "button.tsx", "file_size": 2123, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "44287bf8c45aeeffb1b1d28886772ee3d1bf1eb9da434484cbfe25c2c6a92756", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2122, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bc90d625-2307-40fc-91c6-0e0f54e59955": {"__data__": {"id_": "bc90d625-2307-40fc-91c6-0e0f54e59955", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/card.tsx", "file_name": "card.tsx", "file_size": 1989, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "33a1398b-c0fc-4961-9a1d-3fe6dda49492", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/card.tsx", "file_name": "card.tsx", "file_size": 1989, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6ef01021ac57c21b6c75d8fa8d6681a5f2fc7f5c2226f97d6e9fc9b8f49b83a2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1988, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a7946a32-1459-41da-91d5-a28b4d9eb043": {"__data__": {"id_": "a7946a32-1459-41da-91d5-a28b4d9eb043", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/input.tsx", "file_name": "input.tsx", "file_size": 967, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "74b5bfe5-2a9e-4b96-ad23-eed88a33b4f0", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/input.tsx", "file_name": "input.tsx", "file_size": 967, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "29d2b793137c5ea939b7dee3a6dc981b1cbf803d552ec6e772f4e232b78bba0b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Input({ className, type, ...props }: React.ComponentProps<\"input\">) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        \"file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        \"focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]\",\n        \"aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 966, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4c532350-13b1-4bd2-8cfc-04f27c63855c": {"__data__": {"id_": "4c532350-13b1-4bd2-8cfc-04f27c63855c", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/label.tsx", "file_name": "label.tsx", "file_size": 611, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e8c403c1-b4f9-4198-bf82-f7f6560fbdc5", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/label.tsx", "file_name": "label.tsx", "file_size": 611, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "d023a623bdb03f2f1bdac03599a1fbac55dbc9987709a336dd2b4d168d3e8d14", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 610, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a9171cbc-7957-410b-9703-3559811a7c1c": {"__data__": {"id_": "a9171cbc-7957-410b-9703-3559811a7c1c", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/progress.tsx", "file_name": "progress.tsx", "file_size": 683, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3f474d81-0cd6-4ba8-a0a0-528253f57c85", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/progress.tsx", "file_name": "progress.tsx", "file_size": 683, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b1d88d3227fe1b67a9a934ec17553a5184c0f8d7a9f438e7c9cb2f23db671fa8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: progress.tsx\n// Directory: frontend/components/ui\n// Purpose: shadcn/ui Progress bar component\n\nimport * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Progress = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & { value?: number }\n>(({ className, value, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"relative h-2 w-full overflow-hidden rounded-full bg-secondary\", className)}\n    {...props}\n  >\n    <div\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value ?? 0)}%)` }}\n    />\n  </div>\n));\nProgress.displayName = \"Progress\";\n\nexport { Progress };", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 682, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2f694c50-49a1-40a7-b558-12f7e3e510b6": {"__data__": {"id_": "2f694c50-49a1-40a7-b558-12f7e3e510b6", "embedding": null, "metadata": {"file_path": "/app/frontend/src/components/ui/textarea.tsx", "file_name": "textarea.tsx", "file_size": 759, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b3a19d06-4684-4fa0-8ac0-739358908416", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/components/ui/textarea.tsx", "file_name": "textarea.tsx", "file_size": 759, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b5bb3410fdfcef8bf64510178c29c258225906e607e47cb4def3f18dad551814", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Textarea({ className, ...props }: React.ComponentProps<\"textarea\">) {\n  return (\n    <textarea\n      data-slot=\"textarea\"\n      className={cn(\n        \"border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Textarea }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 758, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "67109efd-410a-4834-8c73-7332d46026ed": {"__data__": {"id_": "67109efd-410a-4834-8c73-7332d46026ed", "embedding": null, "metadata": {"file_path": "/app/frontend/src/lib/api.ts", "file_name": "api.ts", "file_size": 278, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "158ad2fb-63cb-45f4-aad6-034415c6d5f6", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/lib/api.ts", "file_name": "api.ts", "file_size": 278, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6b8fa1b17b1a7cfd9da7bba4098e93cf11d443e8816968cd13f82c195a26a73f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: lib/api.ts\n// Directory: frontend/src/lib\n// Purpose: Single source of truth for backend API config\n\nexport const API_ROOT =\n  process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8080\";\n\nexport const API_KEY =\n  process.env.NEXT_PUBLIC_API_KEY ?? \"\";  // \u2190 new line", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 275, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "de723bbf-86ed-4e56-9f9b-b5a83b25e656": {"__data__": {"id_": "de723bbf-86ed-4e56-9f9b-b5a83b25e656", "embedding": null, "metadata": {"file_path": "/app/frontend/src/lib/toMDString.ts", "file_name": "toMDString.ts", "file_size": 539, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "25c02450-2509-495e-a5d7-49ec897c7e2d", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/lib/toMDString.ts", "file_name": "toMDString.ts", "file_size": 539, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ab8d0670f1eb8cecd68d3e933e64341d3e63c7f2044410935b46ddf992a7eae1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: frontend/src/lib/toMDString.ts\n// Purpose: Convert various data types to a Markdown string representation.\n\nexport function toMDString(val: unknown): string {\n  if (val == null) return \"\";\n  if (typeof val === \"string\") return val;\n  if (Array.isArray(val)) {\n    return val.map((v) => toMDString(v)).join(\"\\n\\n\");\n  }\n  if (typeof val === \"object\") {\n    try {\n      return \"```json\\n\" + JSON.stringify(val, null, 2) + \"\\n```\";\n    } catch {\n      return String(val);\n    }\n  }\n  return String(val);\n}\nexport default toMDString;", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 538, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "37ffab05-330c-4b92-b3b1-b54fdf29c5c0": {"__data__": {"id_": "37ffab05-330c-4b92-b3b1-b54fdf29c5c0", "embedding": null, "metadata": {"file_path": "/app/frontend/src/lib/utils.ts", "file_name": "utils.ts", "file_size": 273, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "771dc622-6b0b-4eca-8abf-06c1a2b0f84a", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/lib/utils.ts", "file_name": "utils.ts", "file_size": 273, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a04884f34df7c68504e98fd13b810e60ecfbeb0f134cc463a2ced57fd29242fb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: src/lib/utils.ts\n// Purpose: Utility functions for class name merging and other common tasks.\n\nimport { clsx, type ClassValue } from \"clsx\";\nimport { twMerge } from \"tailwind-merge\";\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 272, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4a1a20a6-6da1-4d59-966b-21728bfa5be1": {"__data__": {"id_": "4a1a20a6-6da1-4d59-966b-21728bfa5be1", "embedding": null, "metadata": {"file_path": "/app/frontend/src/types/react-syntax-highlighter.d.ts", "file_name": "react-syntax-highlighter.d.ts", "file_size": 317, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "819ced54-a80a-4ae0-905e-9f5acf7a9e00", "node_type": "4", "metadata": {"file_path": "/app/frontend/src/types/react-syntax-highlighter.d.ts", "file_name": "react-syntax-highlighter.d.ts", "file_size": 317, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "31c5089d4c842cb35a10b29b2f165d8a1ef4786820ec23196caa984ec5cc76a5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// Directory: frontend/src/types\n// Purpose: Type definitions for react-syntax-highlighter module.\ndeclare module \"react-syntax-highlighter\";\ndeclare module \"react-syntax-highlighter/*\";\ndeclare module \"react-syntax-highlighter/dist/esm/styles/prism\";\ndeclare module \"react-syntax-highlighter/dist/cjs/styles/prism\";", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 316, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5e401298-50ba-4fc7-b0e4-d2b919ff7e81": {"__data__": {"id_": "5e401298-50ba-4fc7-b0e4-d2b919ff7e81", "embedding": null, "metadata": {"file_path": "/app/frontend/sync/sync_google_docs.py", "file_name": "sync_google_docs.py", "file_type": "text/x-python", "file_size": 5308, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "32e424bb-9646-4ffb-a4b5-cff32bdbdcf6", "node_type": "4", "metadata": {"file_path": "/app/frontend/sync/sync_google_docs.py", "file_name": "sync_google_docs.py", "file_type": "text/x-python", "file_size": 5308, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e86695fdb09ecfce188d6e144688596349761c833848e0ddc9476bfc792a0c64", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "fc59dcbc-afc6-494b-a215-e64327404c14", "node_type": "1", "metadata": {}, "hash": "6c7cec628cd8031a0e1579f3d520537b0488a067b643db80826df118b5ed5dd2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "#---------------------------------------------------------\n# File: sync_google_docs.py\n# Directory: frontend/sync\n# Purpose: # Purpose: Synchronize documents from Google Docs to local storage, handling authentication and document retrieval.\n#\n# Upstream:\n#   - ENV: ENV, GOOGLE_CREDS_JSON, GOOGLE_TOKEN_JSON\n#   - Imports: base64, google.auth.transport.requests, google.oauth2.credentials, google_auth_oauthlib.flow, googleapiclient.discovery, googleapiclient.errors, json, markdownify, os, pathlib\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - fetch_and_save_doc()\n#   - find_folder_id()\n#   - get_docs_in_folder()\n#   - get_google_service()\n#   - sync_google_docs()\n#---------------------------------------------------------\nimport os\nimport json\nimport base64\nfrom pathlib import Path\nfrom google.oauth2.credentials import Credentials\nfrom google_auth_oauthlib.flow import InstalledAppFlow\nfrom googleapiclient.discovery import build\nfrom googleapiclient.errors import HttpError\nfrom markdownify import markdownify as md\nfrom google.auth.transport.requests import Request\n\n# === Config ===\nSCOPES = [\n    \"https://www.googleapis.com/auth/drive.readonly\",\n    \"https://www.googleapis.com/auth/documents.readonly\"\n]\nCREDENTIALS_PATH = Path(\"/tmp/credentials.json\")\nTOKEN_PATH = Path(\"frontend/sync/token.json\")\nIMPORT_PATH = Path(\"docs/imported\")\nCOMMAND_CENTER_FOLDER_NAME = \"COMMAND_CENTER\"\nIMPORT_PATH.mkdir(parents=True, exist_ok=True)\n\n# === Auth ===\ndef get_google_service():\n    creds = None\n\n    # Decode credentials from env at runtime only\n    if not CREDENTIALS_PATH.exists():\n        if os.getenv(\"ENV\") == \"local\":\n            local_path = Path(\"frontend/sync/credentials.json\")\n            print(\"\ud83d\udd27 Using local credentials.json from frontend/sync/\")\n            if not local_path.exists():\n                raise FileNotFoundError(\"\u274c Local credentials.json not found at frontend/sync/\")\n            CREDENTIALS_PATH.write_text(local_path.read_text())\n        else:\n            raw = os.getenv(\"GOOGLE_CREDS_JSON\")\n            print(\"\ud83e\uddea Length of GOOGLE_CREDS_JSON:\", len(raw) if raw else \"Not Found\")\n            if not raw:\n                raise FileNotFoundError(\"\u274c Missing GOOGLE_CREDS_JSON in environment variables\")\n            decoded = base64.b64decode(raw.encode()).decode()\n            CREDENTIALS_PATH.write_text(decoded)\n            print(f\"\u2705 credentials.json written to: {CREDENTIALS_PATH}\")\n\n    # Decode token from env at runtime only (optional bootstrap)\n    if not TOKEN_PATH.exists():\n        token_raw = os.getenv(\"GOOGLE_TOKEN_JSON\")\n        print(\"\ud83e\uddea GOOGLE_TOKEN_JSON found:\", bool(token_raw))\n        if token_raw:\n            TOKEN_PATH.write_text(base64.b64decode(token_raw).decode())\n            print(f\"\u2705 token.json written to: {TOKEN_PATH}\")\n\n    # Load token if available\n    if TOKEN_PATH.exists():\n        creds = Credentials.from_authorized_user_file(TOKEN_PATH, SCOPES)\n\n    # If token missing or expired, launch interactive auth flow\n    if not creds or not creds.valid:\n        if creds and creds.expired and creds.refresh_token:\n            creds.refresh(Request())\n        else:\n            flow = InstalledAppFlow.from_client_secrets_file(str(CREDENTIALS_PATH), SCOPES)\n            print(\"\ud83c\udf10 Launching OAuth flow on dynamic localhost port...\")\n            creds = flow.run_local_server(port=0)\n        # Save new token\n        with open(TOKEN_PATH, 'w') as token:\n            token.write(creds.to_json())\n\n    # Build API clients\n    drive_service = build('drive', 'v3', credentials=creds)\n    docs_service = build('docs', 'v1', credentials=creds)\n    return drive_service, docs_service\n\n# === Google Docs Operations ===\ndef find_folder_id(drive_service, folder_name):\n    results = drive_service.files().list(\n        q=f\"mimeType='application/vnd.google-apps.folder' and name='{folder_name}'\",\n        spaces='drive',\n        fields=\"files(id, name)\",\n    ).execute()\n    folders = results.get('files', [])\n    return folders[0]['id'] if folders else None\n\ndef get_docs_in_folder(drive_service, folder_id):\n    query = f\"'{folder_id}' in parents and mimeType='application/vnd.google-apps.document'\"\n    results = drive_service.files().", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4183, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "fc59dcbc-afc6-494b-a215-e64327404c14": {"__data__": {"id_": "fc59dcbc-afc6-494b-a215-e64327404c14", "embedding": null, "metadata": {"file_path": "/app/frontend/sync/sync_google_docs.py", "file_name": "sync_google_docs.py", "file_type": "text/x-python", "file_size": 5308, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "32e424bb-9646-4ffb-a4b5-cff32bdbdcf6", "node_type": "4", "metadata": {"file_path": "/app/frontend/sync/sync_google_docs.py", "file_name": "sync_google_docs.py", "file_type": "text/x-python", "file_size": 5308, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e86695fdb09ecfce188d6e144688596349761c833848e0ddc9476bfc792a0c64", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5e401298-50ba-4fc7-b0e4-d2b919ff7e81", "node_type": "1", "metadata": {"file_path": "/app/frontend/sync/sync_google_docs.py", "file_name": "sync_google_docs.py", "file_type": "text/x-python", "file_size": 5308, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "27ca13607347e2799517790f79bb63ceed1ba031ca52475ca30c73851a44e9c9", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "'w') as token:\n            token.write(creds.to_json())\n\n    # Build API clients\n    drive_service = build('drive', 'v3', credentials=creds)\n    docs_service = build('docs', 'v1', credentials=creds)\n    return drive_service, docs_service\n\n# === Google Docs Operations ===\ndef find_folder_id(drive_service, folder_name):\n    results = drive_service.files().list(\n        q=f\"mimeType='application/vnd.google-apps.folder' and name='{folder_name}'\",\n        spaces='drive',\n        fields=\"files(id, name)\",\n    ).execute()\n    folders = results.get('files', [])\n    return folders[0]['id'] if folders else None\n\ndef get_docs_in_folder(drive_service, folder_id):\n    query = f\"'{folder_id}' in parents and mimeType='application/vnd.google-apps.document'\"\n    results = drive_service.files().list(q=query, fields=\"files(id, name)\").execute()\n    return results.get('files', [])\n\ndef fetch_and_save_doc(docs_service, file):\n    doc = docs_service.documents().get(documentId=file['id']).execute()\n    title = file['name'].replace(\" \", \"_\").lower()\n    content = doc.get(\"body\", {}).get(\"content\", [])\n    html = \"\"\n    for element in content:\n        if 'paragraph' in element:\n            for el in element['paragraph'].get('elements', []):\n                html += el.get('textRun', {}).get('content', '')\n            html += \"\\n\"\n    markdown = md(html)\n    out_path = IMPORT_PATH / f\"{title}.md\"\n    out_path.write_text(markdown, encoding='utf-8')\n    return out_path.name\n\n# === Main Sync Function ===\ndef sync_google_docs():\n    drive_service, docs_service = get_google_service()\n    folder_id = find_folder_id(drive_service, COMMAND_CENTER_FOLDER_NAME)\n    if not folder_id:\n        raise RuntimeError(f\"Folder '{COMMAND_CENTER_FOLDER_NAME}' not found in Google Drive\")\n    files = get_docs_in_folder(drive_service, folder_id)\n    return [fetch_and_save_doc(docs_service, f) for f in files]", "mimetype": "text/plain", "start_char_idx": 3395, "end_char_idx": 5285, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6716489e-95d6-4170-af2f-1839a296d8bb": {"__data__": {"id_": "6716489e-95d6-4170-af2f-1839a296d8bb", "embedding": null, "metadata": {"file_path": "/app/frontend/tailwind.config.js", "file_name": "tailwind.config.js", "file_type": "application/javascript", "file_size": 923, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "0e0aa969-d8c2-4bb6-a135-e08f0700bc79", "node_type": "4", "metadata": {"file_path": "/app/frontend/tailwind.config.js", "file_name": "tailwind.config.js", "file_type": "application/javascript", "file_size": 923, "creation_date": "2025-07-09", "last_modified_date": "2025-07-09", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "706cbf3eaf1eaa8a82d9394fe29e72584d786a399adc0e69bd04e815ec070849", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "/** @type {import('tailwindcss').Config} */\nexport const content = [\n  './app/**/*.{js,ts,jsx,tsx,mdx}',\n  './components/**/*.{js,ts,jsx,tsx,mdx}',\n  './src/app/**/*.{js,ts,jsx,tsx,mdx}',\n  './src/components/**/*.{js,ts,jsx,tsx,mdx}',\n  './src/layouts/**/*.{js,ts,jsx,tsx,mdx}',\n  './src/**/*.mdx'\n];\nexport const theme = {\n  extend: {\n    fontFamily: {\n      sans: ['var(--font-geist-sans)', 'ui-sans-serif', 'system-ui'],\n      mono: ['var(--font-geist-mono)', 'ui-monospace', 'SFMono-Regular']\n    },\n    borderRadius: {\n      sm: 'calc(var(--radius) - 4px)',\n      md: 'calc(var(--radius) - 2px)',\n      lg: 'var(--radius)',\n      xl: 'calc(var(--radius) + 4px)'\n    },\n    // You can add more: e.g., background, foreground, etc.\n    border: 'var(--border)',\n    // You can add more: e.g., background, foreground, etc.\n  }\n};\nexport const darkMode = 'class';\nexport const plugins = [require('@tailwindcss/typography')];", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 923, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7c31bc10-29eb-41b5-8d8b-aaf60c8ab9a1": {"__data__": {"id_": "7c31bc10-29eb-41b5-8d8b-aaf60c8ab9a1", "embedding": null, "metadata": {"file_path": "/app/frontend/types/next-auth.d.ts", "file_name": "next-auth.d.ts", "file_size": 655, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2d351948-b3e0-4286-9043-ee86fb4847c8", "node_type": "4", "metadata": {"file_path": "/app/frontend/types/next-auth.d.ts", "file_name": "next-auth.d.ts", "file_size": 655, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1918d0d46029ebdaedb3afe6c883534d2df8c657cbca839df49d8806195585eb", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// /types/next-auth.d.ts\nimport NextAuth, { DefaultSession, DefaultUser, Profile as DefaultProfile } from \"next-auth\";\n\ndeclare module \"next-auth\" {\n  interface Profile extends DefaultProfile {\n    hd?: string; // Add hosted domain for Google SSO\n    picture?: string; // Add picture if you want it\n  }\n  interface Session {\n    user?: {\n      name?: string | null;\n      email?: string | null;\n      image?: string | null;\n      hd?: string | null;     // Add this line\n      picture?: string | null; // If you want it\n    };\n    accessToken?: string;\n  }\n  interface User extends DefaultUser {\n    hd?: string | null;\n    picture?: string | null;\n  }\n}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 654, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "07b60809-d644-4b27-81e5-65a600f51d8d": {"__data__": {"id_": "07b60809-d644-4b27-81e5-65a600f51d8d", "embedding": null, "metadata": {"file_path": "/app/frontend/vitest.config.ts", "file_name": "vitest.config.ts", "file_size": 629, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "8e5e00f7-ba30-49b7-be3e-b49b88145958", "node_type": "4", "metadata": {"file_path": "/app/frontend/vitest.config.ts", "file_name": "vitest.config.ts", "file_size": 629, "creation_date": "2025-07-03", "last_modified_date": "2025-07-03", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f9191feef377f7125165e554fca9d3d086dbbcb46612b2156e9a5a0afb00d226", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "// File: vitest.config.ts\n\nimport path from 'node:path';\nimport { fileURLToPath } from 'node:url';\n\nimport { defineConfig } from 'vitest/config';\n\nconst dirname =\n  typeof __dirname !== 'undefined'\n    ? __dirname\n    : path.dirname(fileURLToPath(import.meta.url));\n\nexport default defineConfig({\n  test: {\n    name: 'unit',\n    include: ['tests/**/*.{test,spec}.{ts,tsx}'],\n    environment: 'jsdom',\n    globals: true,\n    browser: {\n      enabled: true,\n      headless: true,\n      provider: 'playwright',\n      instances: [{ browser: 'chromium' }],\n    },\n    setupFiles: [], // Optional: add test setup scripts here\n  },\n});", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 628, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6b53868a-8826-49c4-a063-f7fbc5ef5136": {"__data__": {"id_": "6b53868a-8826-49c4-a063-f7fbc5ef5136", "embedding": null, "metadata": {"file_path": "/app/frontend/vitest.shims.d.ts", "file_name": "vitest.shims.d.ts", "file_size": 62, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2e33b2ab-f387-432c-9938-70b7c8eab311", "node_type": "4", "metadata": {"file_path": "/app/frontend/vitest.shims.d.ts", "file_name": "vitest.shims.d.ts", "file_size": 62, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5bafa6d2af78b6b2aff259da0f30d8b2e636020ace6ad5e7e3876b148ed3f900", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "/// <reference types=\"@vitest/browser/providers/playwright\" />", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 62, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6323901f-858e-4c02-ac2e-320c5d430842": {"__data__": {"id_": "6323901f-858e-4c02-ac2e-320c5d430842", "embedding": null, "metadata": {"file_path": "/app/services/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e4727b0c-6303-499a-98e5-1a383d2df8e6", "node_type": "4", "metadata": {"file_path": "/app/services/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8082f2cb7fdf8bb84dee08a72f1460a042e29aab809365f038c37c9b686368d7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 0, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5ceee623-db21-447f-b8c5-9b77a46ba385": {"__data__": {"id_": "5ceee623-db21-447f-b8c5-9b77a46ba385", "embedding": null, "metadata": {"file_path": "/app/services/_init_.py", "file_name": "_init_.py", "file_type": "text/x-python", "file_size": 98, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "0d9aa071-f457-4fdc-be1a-1831222b8325", "node_type": "4", "metadata": {"file_path": "/app/services/_init_.py", "file_name": "_init_.py", "file_type": "text/x-python", "file_size": 98, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7d42b02923db9151530d7cfd78370bbb29e2c0eae3516a5422865a50fe538667", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# File: __init__.py\n# Directory: services/\n# Purpose: Marks this as a package for Python imports.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 97, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f1c5df75-5b78-4fd5-8607-9e5ff21befcc": {"__data__": {"id_": "f1c5df75-5b78-4fd5-8607-9e5ff21befcc", "embedding": null, "metadata": {"file_path": "/app/services/action_queue.py", "file_name": "action_queue.py", "file_type": "text/x-python", "file_size": 670, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "9b0e2d30-4ee0-42ab-b017-f31e95d938a8", "node_type": "4", "metadata": {"file_path": "/app/services/action_queue.py", "file_name": "action_queue.py", "file_type": "text/x-python", "file_size": 670, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2531c84af3c20530209ccb74ed59a58b8190b41f6581708f09fd9d8d3ac9d916", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# File: services/action_queue.py\nfrom __future__ import annotations\nimport json, os, time\nfrom datetime import datetime, timezone\nfrom typing import Any, Dict\n\nLOG_PATH = os.getenv(\"ACTION_LOG_PATH\", \"logs/actions.log\")\n\ndef enqueue_action(kind: str, payload: Dict[str, Any]) -> None:\n    \"\"\"Simple local queue stub. Replace with DB/Redis later.\"\"\"\n    os.makedirs(os.path.dirname(LOG_PATH), exist_ok=True)\n    rec = {\n        \"ts\": datetime.now(timezone.utc).isoformat(),\n        \"kind\": kind,\n        \"payload\": payload,\n        \"id\": f\"{int(time.time()*1000)}-{kind}\"\n    }\n    with open(LOG_PATH, \"a\", encoding=\"utf-8\") as f:\n        f.write(json.dumps(rec) + \"\\n\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 669, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "ad729b16-65a1-462d-bccf-a08f1b3b501b": {"__data__": {"id_": "ad729b16-65a1-462d-bccf-a08f1b3b501b", "embedding": null, "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d5957cd9-995d-4fe2-9eb9-63374b176813", "node_type": "4", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "67b853854d51e4d3719413de8633e9075c5bbf705fba23cf3fca22bf71f80e8c", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c20fc30e-9a84-4b9f-b4eb-805386bc41ea", "node_type": "1", "metadata": {}, "hash": "367223f42ff136611247d78784f256d7c7ab4d39751938e09a1eb474007206af", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: agent.py\n# Directory: services\n# Purpose: Provides functionalities for automated documentation generation, code review, and interaction with knowledge base services.\n#\n# Upstream:\n#   - ENV: API_KEY, ENABLE_REFLECT_AND_PLAN, RAILWAY_URL\n#   - Imports: httpx, json, openai, os, pathlib, re, services.context_engine, services.kb, typing, utils.openai_client\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - answer()\n#   - gen()\n#   - generate_doc_for_path()\n#   - reflect_and_plan()\n#   - run_code_review()\n#   - search_docs()\n#   - wants_docgen()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nimport re\nimport json\nfrom pathlib import Path\nfrom typing import List, Dict, Any, Optional, AsyncGenerator\nfrom openai import AsyncOpenAI\nimport services.kb as kb\nimport httpx\nfrom services.context_engine import ContextEngine\nfrom utils.openai_client import create_openai_client\n\n# === Initialize OpenAI client ===\nclient = create_openai_client()\n\n# === Railway control endpoint for queueing actions/docs ===\nRAILWAY_KEY = os.getenv(\"API_KEY\")\nRAILWAY_URL = os.getenv(\"RAILWAY_URL\", \"https://relay.wildfireranch.us/control/queue_action\")\n\n# Optional reflection flag\nREFLECT_ENV = os.getenv(\"ENABLE_REFLECT_AND_PLAN\", \"false\").lower() in (\"1\", \"true\", \"yes\")\n\n# === System prompt to define Relay's identity and context awareness ===\nSYSTEM_PROMPT = \"\"\"\nYou are Relay, the intelligent assistant for Bret's WildfireRanch pursuits including the solar shack project (solar powered bitcoin mining) and developing a business plan for a utility scale solar farm.\nYou have access to:\n\n- Python source code in /services/\n- React and Next.js components in /frontend/src/app/ and /frontend/src/components/\n- FastAPI routes in /routes/\n- A local knowledge base in /docs/\n\nUse file paths in citations when helpful (e.g. src/components/LogsPanel/LogsPanel.tsx).\nIf the user asks about code, structure, or documentation, include relevant context.\nYou can generate and queue new documentation entries by calling /control/queue_action.\n\"\"\"\n\n# === Helper: detect requests to autogenerate docs ===\ndef wants_docgen(query: str) -> Optional[str]:\n    match = re.search(r\"(?:generate|create|make).*doc.*for ([\\w/\\\\.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2316, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c20fc30e-9a84-4b9f-b4eb-805386bc41ea": {"__data__": {"id_": "c20fc30e-9a84-4b9f-b4eb-805386bc41ea", "embedding": null, "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d5957cd9-995d-4fe2-9eb9-63374b176813", "node_type": "4", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "67b853854d51e4d3719413de8633e9075c5bbf705fba23cf3fca22bf71f80e8c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "ad729b16-65a1-462d-bccf-a08f1b3b501b", "node_type": "1", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bd936e0234050873a7de453b2630dbd892d75888f9fc2f4922d9d30bb9a04802", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "8f335690-1924-44a9-87d9-2c92779df3bd", "node_type": "1", "metadata": {}, "hash": "30a1997faec4e94cbf124e712d9f829b01d30c25bf059d0cbf555276fdb42dd0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "You have access to:\n\n- Python source code in /services/\n- React and Next.js components in /frontend/src/app/ and /frontend/src/components/\n- FastAPI routes in /routes/\n- A local knowledge base in /docs/\n\nUse file paths in citations when helpful (e.g. src/components/LogsPanel/LogsPanel.tsx).\nIf the user asks about code, structure, or documentation, include relevant context.\nYou can generate and queue new documentation entries by calling /control/queue_action.\n\"\"\"\n\n# === Helper: detect requests to autogenerate docs ===\ndef wants_docgen(query: str) -> Optional[str]:\n    match = re.search(r\"(?:generate|create|make).*doc.*for ([\\w/\\\\.]+\\.\\w+)\", query.lower())\n    return match.group(1).strip() if match else None\n\n# === In-memory store for multi-turn history (per user) ===\nconversation_history: Dict[str, List[Dict[str, Any]]] = {}\n\n# === Tool dispatchers ===\nasync def search_docs(query: str, user_id: str) -> Dict[str, Any]:\n    hits = kb.search(query, user_id=user_id, k=5) if 'user_id' in kb.search.__code__.co_varnames else kb.search(query, k=5)\n    return {\"matches\": hits}\n\nasync def run_code_review(path: str) -> Dict[str, Any]:\n    base = Path(__file__).resolve().parents[1]\n    target = base / path\n    if not target.exists() or not target.is_file():\n        return {\"issues\": [{\"path\": path, \"error\": \"File not found\"}]}  \n    content = target.read_text()\n    return {\"issues\": [{\"path\": path, \"summary\": f\"File loaded, {len(content)} characters\"}]}  \n\n# === Reflection & plan generation ===\nasync def reflect_and_plan(user_id: str, query: str) -> Dict[str, Any]:\n    messages = [\n        {\"role\": \"system\", \"content\": SYSTEM_PROMPT},\n        {\"role\": \"assistant\", \"content\": f\"Previous context:\\n{kb.get_recent_summaries(user_id)}\" if hasattr(kb, \"get_recent_summaries\") else \"\"},\n        {\"role\": \"user\", \"content\": f\"Reflect on this query for planning: {query}\"},\n    ]\n    response = await client.chat.completions.create(\n        model=\"gpt-4o\",\n        messages=messages,\n        temperature=0.0,\n        stream=False\n    )\n    try:\n        return json.loads(response.choices[0].message.content)\n    except json.JSONDecodeError:\n        return {\"plan\": []}\n\n# === Main answer function supporting multi-turn, tools, and reflection ===\nasync def answer(\n    user_id: str,\n    query: str,\n    context: Optional[str] = None,\n    stream: bool = False,\n    reflect: Optional[bool] = None,\n) -> Any:\n    \"\"\"Main agent entry point.\n\n    Parameters\n    ----------\n    user_id: str\n        Unique user identifier used for history and KB.\n    query: str\n        Raw user question.\n    context: Optional[str]\n        Pre-built context window. If not supplied the ContextEngine will\n        generate one from the user's query.\n    stream: bool\n        If ``True`` yield tokens as they are produced by OpenAI.  Otherwise\n        return the complete assistant message as a string.\n    reflect: Optional[bool]\n        If ``True`` run ``reflect_and_plan`` before answering. Defaults to\n        ``ENABLE_REFLECT_AND_PLAN`` environment variable when ``None``.\n    \"\"\"", "mimetype": "text/plain", "start_char_idx": 1679, "end_char_idx": 4747, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "8f335690-1924-44a9-87d9-2c92779df3bd": {"__data__": {"id_": "8f335690-1924-44a9-87d9-2c92779df3bd", "embedding": null, "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d5957cd9-995d-4fe2-9eb9-63374b176813", "node_type": "4", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "67b853854d51e4d3719413de8633e9075c5bbf705fba23cf3fca22bf71f80e8c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c20fc30e-9a84-4b9f-b4eb-805386bc41ea", "node_type": "1", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b645c1fcf614915e974199bb4c03505a51f6fac3d79632f7cce09a64a733d44e", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5b714d03-e694-470f-9d8a-75768212d3c0", "node_type": "1", "metadata": {}, "hash": "76a22a93dff45ac415306f787654432a7ecd47dddb31ab5d4b3e71e0c6cf0da2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Parameters\n    ----------\n    user_id: str\n        Unique user identifier used for history and KB.\n    query: str\n        Raw user question.\n    context: Optional[str]\n        Pre-built context window. If not supplied the ContextEngine will\n        generate one from the user's query.\n    stream: bool\n        If ``True`` yield tokens as they are produced by OpenAI.  Otherwise\n        return the complete assistant message as a string.\n    reflect: Optional[bool]\n        If ``True`` run ``reflect_and_plan`` before answering. Defaults to\n        ``ENABLE_REFLECT_AND_PLAN`` environment variable when ``None``.\n    \"\"\"\n\n    print(f\"[agent] Incoming query from {user_id}: {query}\")\n\n    # --- Check for doc generation ---\n    target_path = wants_docgen(query)\n    if target_path:\n        return await generate_doc_for_path(target_path)\n\n    # --- Build context if not provided ---\n    if context is None:\n        engine = ContextEngine(user_id=user_id)\n        context = engine.build_context(query)\n    print(f\"[agent] Built context length: {len(context)} chars\")\n\n    # --- Reflection & planning (optional) ---\n    use_reflection = reflect if reflect is not None else REFLECT_ENV\n    if use_reflection:\n        plan = await reflect_and_plan(user_id, query)\n        print(f\"[agent] Reflection plan: {plan}\")\n    else:\n        plan = {\"plan\": []}\n\n    # --- Update conversation history ---\n    history = conversation_history.setdefault(user_id, [])\n    history.append({\"role\": \"user\", \"content\": query})\n    \n    # --- Compose messages with history and plan ---\n    messages: List[Dict[str, Any]] = [\n        {\"role\": \"system\", \"content\": SYSTEM_PROMPT},\n        {\"role\": \"system\", \"content\": f\"Context:\\n{context}\"},\n        {\"role\": \"assistant\", \"content\": f\"Plan: {json.dumps(plan)}\"},\n    ] + history\n\n    try:\n        response = await client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=messages,\n            stream=stream,\n            temperature=0.3,\n            functions=[\n                {\n                    \"name\": \"search_docs\",\n                    \"description\": \"Search the local /docs/ for keywords\",\n                    \"parameters\": {\"type\": \"object\", \"properties\": {\"query\": {\"type\":\"string\"}, \"user_id\": {\"type\":\"string\"}}, \"required\":[\"query\",\"user_id\"]}\n                },\n                {\n                    \"name\": \"run_code_review\",\n                    \"description\": \"Run static analysis on a source file path\",\n                    \"parameters\": {\"type\":\"object\",\"properties\":{\"path\":{\"type\":\"string\"}},\"required\":[\"path\"]}\n                }\n            ],\n            function_call=\"auto\"\n        )\n        if stream:\n            async def gen() -> AsyncGenerator[str, None]:\n                collected: List[str] = []\n                async for chunk in response:\n                    delta = chunk.choices[0].delta\n                    if delta and delta.content:\n                        collected.append(delta.content)\n                        yield delta.content\n                history.append({\"role\": \"assistant\", \"content\": \"\".join(collected)})\n\n            return gen()\n        else:\n            message = response.choices[0].message\n            if hasattr(message, \"function_call\") and message.function_call:\n                fname = message.function_call.name\n                fargs = json.loads(message.function_call.arguments)\n                if fname == \"search_docs\":\n                    result = await search_docs(**fargs)\n                elif fname == \"run_code_review\":\n                    result = await run_code_review(**fargs)\n                else:\n                    result = {\"error\": f\"Unknown function: {fname}\"}\n                return json.dumps(result)\n            else:\n                history.append({\"role\": \"assistant\", \"content\": message.content})\n                return message.content\n\n    except Exception as e:\n        print(\"\u274c OpenAI call failed:\", str(e))\n        return f\"[error] OpenAI call failed. {str(e)}\"\n\n# === Generate and queue documentation for a specific source file ===\nasync def generate_doc_for_path(rel_path: str) -> str:\n    base = Path(__file__).resolve().parents[1]\n    full_path = base / rel_path\n\n    if not full_path.exists():\n        return f\"[error] File not found: {rel_path}\"\n\n    content = full_path.read_text()\n    prompt = f\"\"\"\nYou are a helpful documentation bot. Read the following source file and write a useful Markdown documentation entry about what it is, what it does, and how it's used. Keep it concise and developer-friendly.", "mimetype": "text/plain", "start_char_idx": 4128, "end_char_idx": 8679, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5b714d03-e694-470f-9d8a-75768212d3c0": {"__data__": {"id_": "5b714d03-e694-470f-9d8a-75768212d3c0", "embedding": null, "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d5957cd9-995d-4fe2-9eb9-63374b176813", "node_type": "4", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "67b853854d51e4d3719413de8633e9075c5bbf705fba23cf3fca22bf71f80e8c", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "8f335690-1924-44a9-87d9-2c92779df3bd", "node_type": "1", "metadata": {"file_path": "/app/services/agent.py", "file_name": "agent.py", "file_type": "text/x-python", "file_size": 9948, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "290a87549a9c06ab901e15c501761d414214a1630ad31d5ac34a4072e302d9f2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{str(e)}\"\n\n# === Generate and queue documentation for a specific source file ===\nasync def generate_doc_for_path(rel_path: str) -> str:\n    base = Path(__file__).resolve().parents[1]\n    full_path = base / rel_path\n\n    if not full_path.exists():\n        return f\"[error] File not found: {rel_path}\"\n\n    content = full_path.read_text()\n    prompt = f\"\"\"\nYou are a helpful documentation bot. Read the following source file and write a useful Markdown documentation entry about what it is, what it does, and how it's used. Keep it concise and developer-friendly.\n\nFile: {rel_path}\n{content[:3000]}\n\"\"\"\n\n    response = await client.chat.completions.create(\n        model=\"gpt-4o\",\n        messages=[\n            {\"role\": \"system\", \"content\": SYSTEM_PROMPT},\n            {\"role\": \"user\", \"content\": prompt},\n        ],\n        stream=False,\n        temperature=0.3,\n    )\n\n    doc_markdown = response.choices[0].message.content\n    doc_path = f\"docs/generated/{rel_path.replace('/', '_').replace('.', '-')}.md\"\n\n    payload = {\n        \"type\": \"write_file\",\n        \"path\": doc_path,\n        \"content\": doc_markdown\n    }\n\n    async with httpx.AsyncClient() as http_client:\n        res = await http_client.post(\n            RAILWAY_URL,\n            headers={\"X-API-Key\": RAILWAY_KEY},\n            json=payload\n        )\n        if res.status_code == 200:\n            return f\"\u2705 Documentation queued to: {doc_path}\"\n        else:\n            return f\"\u274c Failed to queue documentation: {res.status_code} {res.text}\"", "mimetype": "text/plain", "start_char_idx": 8118, "end_char_idx": 9627, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "cd9bad05-68aa-4f13-afc8-83c704d9909b": {"__data__": {"id_": "cd9bad05-68aa-4f13-afc8-83c704d9909b", "embedding": null, "metadata": {"file_path": "/app/services/config.py", "file_name": "config.py", "file_type": "text/x-python", "file_size": 541, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "01e6acbd-91fd-42fc-a97d-3f52f428f928", "node_type": "4", "metadata": {"file_path": "/app/services/config.py", "file_name": "config.py", "file_type": "text/x-python", "file_size": 541, "creation_date": "2025-06-27", "last_modified_date": "2025-06-27", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "2737c327a18034bf7adb0c9831345de396a263f7238003621872901e5dad2175", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "import os\nfrom pathlib import Path\n\n# Use current working directory as fallback\nDEFAULT_PROJECT_ROOT = Path.cwd()\n\nENV_NAME = os.getenv(\"ENV\", \"dev\")\nMODEL_NAME = (\n    os.getenv(\"KB_EMBED_MODEL\")\n    or os.getenv(\"OPENAI_EMBED_MODEL\")\n    or \"text-embedding-3-large\"\n)\n\n# Safer defaults: allow override, but don't break in test/dev\nINDEX_ROOT = Path(os.getenv(\"INDEX_ROOT\", str(DEFAULT_PROJECT_ROOT / \"index\" / ENV_NAME)))\nINDEX_DIR = Path(os.getenv(\"INDEX_DIR\", str(INDEX_ROOT / MODEL_NAME)))\n\nINDEX_DIR.mkdir(parents=True, exist_ok=True)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 540, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d0d5b2b0-9537-4599-9b01-0e81b00c5a57": {"__data__": {"id_": "d0d5b2b0-9537-4599-9b01-0e81b00c5a57", "embedding": null, "metadata": {"file_path": "/app/services/context_engine.py", "file_name": "context_engine.py", "file_type": "text/x-python", "file_size": 1582, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1dae8122-396a-4dd2-b7e7-b3f7d21d3842", "node_type": "4", "metadata": {"file_path": "/app/services/context_engine.py", "file_name": "context_engine.py", "file_type": "text/x-python", "file_size": 1582, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "db58818aff6547147da98d805421d8d21c4e5e9f8c45bc215bdc982b1b279883", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: context_engine.py\n# Directory: services\n# Purpose: # Purpose: Manages the creation and lifecycle of context objects, including caching mechanisms, for the application.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: services.context_injector\n#\n# Downstream:\n#   - routes.docs\n#   - services.agent\n#\n# Contents:\n#   - ContextEngine()\n#   - build()\n#   - clear_cache()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom services.context_injector import build_context\n\nclass ContextEngine:\n    \"\"\"\n    Facade for agent context building, cache clearing, and future extensions.\n    Call anywhere as ContextEngine.build(...) or ContextEngine.clear_cache().\n    \"\"\"\n\n    @staticmethod\n    async def build(\n        query: str, \n        files: list[str], \n        topics: list[str] = [], \n        debug: bool = False\n    ):\n        \"\"\"\n        Build multi-source context for agent prompts.\n        \"\"\"\n        return await build_context(query, files, topics, debug)\n\n    @staticmethod\n    def clear_cache():\n        \"\"\"\n        Placeholder for clearing context/semantic/graph/global caches.\n        Expand as needed for production.\n        \"\"\"\n        pass", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1267, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "617fa82e-528f-4ecb-8ca2-1a40f4d8d4ac": {"__data__": {"id_": "617fa82e-528f-4ecb-8ca2-1a40f4d8d4ac", "embedding": null, "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c2122b8c-e1ab-42cd-9102-529fb328176f", "node_type": "4", "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bf732e923c56535ca2266dfaa292ce691edb8833fdd3a5b2ab4c691121d868f8", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "586e7e8a-26e6-482c-813a-8b4a7a1c55d5", "node_type": "1", "metadata": {}, "hash": "d11a4f9378d0491ccfdb8bd3845bfea73f18b222f40a3a9dc03205621dd98946", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: context_injector.py\n# Directory: services\n# Purpose: # Purpose: Manages the aggregation and injection of contextual data from various services into the application's processing flow.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: os, pathlib, services.graph, services.kb, services.semantic_retriever, services.summarize_memory, typing\n#\n# Downstream:\n#   - agents.mcp_agent\n#   - services.context_engine\n#\n# Contents:\n#   - build_context()\n#   - build_recent_memory_summaries()\n#   - load_context()\n#   - load_global_context()\n#   - load_summary()\n#   - safe_truncate()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\nimport os\nfrom pathlib import Path\nfrom typing import List, Dict, Any, Union\n\nfrom services.semantic_retriever import get_semantic_context      # LlamaIndex semantic search\nfrom services.kb import query_index                              # Legacy KB (for optional hybrid)\nfrom services.graph import summarize_recent_context              # Graph-based memory (optional)\nfrom services.summarize_memory import summarize_memory_entry     # For summarizing recent memory, optional\n\n# === Section limits/config ===\nMAX_PROJECT_SUMMARY_CHARS = 2000\nMAX_SEMANTIC_CONTEXT_CHARS = 6000\nMAX_GRAPH_MEMORY_CHARS = 1500\nMAX_EXTERNAL_CONTEXT_CHARS = 1500\nMAX_GLOBAL_CONTEXT_CHARS = 2000\n\ndef safe_truncate(text: str, max_chars: int) -> str:\n    \"\"\"Truncates text safely, appends ellipsis if needed.\"\"\"\n    if not text: return \"\"\n    if len(text) <= max_chars: return text\n    return text[:max_chars] + \"\\n...[truncated]\"\n\n# === Load Project Summary ===\ndef load_summary(summary_file: str = \"./docs/PROJECT_SUMMARY.md\") -> str:\n    \"\"\"Loads and safely truncates the project summary file.\"\"\"\n    if os.path.exists(summary_file):\n        with open(summary_file, \"r\", encoding=\"utf-8\") as f:\n            return safe_truncate(f.read(), MAX_PROJECT_SUMMARY_CHARS)\n    return \"Project summary not available.\"\n\n# === Load Global Context ===\ndef load_global_context(path: str = \"./docs/generated/global_context.md\") -> str:\n    \"\"\"Loads and safely truncates global project context file.\"\"\"\n    if Path(path).exists():\n        with open(path, \"r\", encoding=\"utf-8\") as f:\n            return safe_truncate(f.read(), MAX_GLOBAL_CONTEXT_CHARS)\n    return \"Global project context not available.\"\n\n# === Load Markdown snippets from /context/<topic>.md files ===\ndef load_context(topics: List[str], base_dir: str = \"./context/\") -> str:\n    \"\"\"Loads and concatenates markdown for each requested topic.\"\"\"\n    chunks = []\n    for topic in topics:\n        path = Path(base_dir) / f\"{topic}.md\"\n        if path.exists():\n            with open(path, \"r\", encoding=\"utf-8\") as f:\n                content = f.read()\n                chunks.append(f\"\\n# {topic.title()}\\n{safe_truncate(content, MAX_EXTERNAL_CONTEXT_CHARS)}\")\n    return \"\\n\".join(chunks) if chunks else \"No external context available.\"\n\n# === Recent Memory Summaries (optional, using your summarizer) ===\nasync def build_recent_memory_summaries(entries: List[Dict[str, str]], max_entries: int = 5) -> str:\n    \"\"\"Summarizes recent user/agent memory entries.\"\"\"\n    if not entries: return \"No recent memory summaries.\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3282, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "586e7e8a-26e6-482c-813a-8b4a7a1c55d5": {"__data__": {"id_": "586e7e8a-26e6-482c-813a-8b4a7a1c55d5", "embedding": null, "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c2122b8c-e1ab-42cd-9102-529fb328176f", "node_type": "4", "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bf732e923c56535ca2266dfaa292ce691edb8833fdd3a5b2ab4c691121d868f8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "617fa82e-528f-4ecb-8ca2-1a40f4d8d4ac", "node_type": "1", "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1b12cd0dd091decbf7ca652b98a27ee0e377e1b0f36ef2b88bbe2989eb1f0c91", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b6d96529-ab8b-44cf-b035-fbdf61d0fd71", "node_type": "1", "metadata": {}, "hash": "1fad94a40c56ed6650d4e1d0967bcd13c6a4e3a8ebce0f9ec8f3ed9662407cb3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "chunks = []\n    for topic in topics:\n        path = Path(base_dir) / f\"{topic}.md\"\n        if path.exists():\n            with open(path, \"r\", encoding=\"utf-8\") as f:\n                content = f.read()\n                chunks.append(f\"\\n# {topic.title()}\\n{safe_truncate(content, MAX_EXTERNAL_CONTEXT_CHARS)}\")\n    return \"\\n\".join(chunks) if chunks else \"No external context available.\"\n\n# === Recent Memory Summaries (optional, using your summarizer) ===\nasync def build_recent_memory_summaries(entries: List[Dict[str, str]], max_entries: int = 5) -> str:\n    \"\"\"Summarizes recent user/agent memory entries.\"\"\"\n    if not entries: return \"No recent memory summaries.\"\n    summaries = []\n    for e in entries[-max_entries:]:\n        try:\n            summary = await summarize_memory_entry(e.get(\"question\", \"\"), e.get(\"response\", \"\"), e.get(\"context\", \"\"))\n            summaries.append(f\"- {summary}\")\n        except Exception as ex:\n            summaries.append(f\"- [Summary failed: {str(ex)}]\")\n    return \"\\n\".join(summaries)\n\n# === MAIN CONTEXT BUILDER ===\nasync def build_context(\n    query: str,\n    files: List[str] = [],\n    topics: List[str] = [],\n    debug: bool = False,\n    top_k_semantic: int = 6,\n    memory_entries: List[Dict[str, str]] = None,  # Optionally pass recent memory\n) -> Union[str, Dict[str, Any]]:\n    \"\"\"\n    Builds a multi-layered markdown context block for agent prompts:\n      - Project summary\n      - LlamaIndex-powered semantic retrieval (best chunks from code/docs)\n      - External project context (topics)\n      - Global context\n      - (Optionally) summarized graph memory\n      - (Optionally) recent memory summaries\n\n    Returns full context string, or dict with metadata if debug=True.\n    \"\"\"\n    files_used: List[Dict[str, Any]] = []\n\n    # === 1. Project Summary ===\n    project_summary = load_summary()\n    if \"not available\" not in project_summary:\n        files_used.append({\"type\": \"summary\", \"source\": \"docs/PROJECT_SUMMARY.md\"})\n\n    # === 2. Semantic Retrieval (LlamaIndex) ===\n    semantic_context = get_semantic_context(query, top_k=top_k_semantic)\n    semantic_context = safe_truncate(semantic_context, MAX_SEMANTIC_CONTEXT_CHARS)\n    files_used.append({\"type\": \"semantic\", \"desc\": f\"LlamaIndex top-{top_k_semantic} semantic retrieval\"})\n\n    # === 3. External Topic Context ===\n    external_context = load_context(topics)\n    if external_context.strip() and external_context != \"No external context available.\":\n        for topic in topics:\n            files_used.append({\"type\": \"external\", \"source\": f\"context/{topic}.md\"})\n\n    # === 4. Global Project Context ===\n    global_context = load_global_context()\n    if \"not available\" not in global_context:\n        files_used.append({\"type\": \"global\", \"source\": \"docs/generated/global_context.md\"})\n\n    # === 5. Graph Memory Context (summarized) ===\n    try:\n        graph_context = await summarize_recent_context(query)\n        graph_context = safe_truncate(graph_context, MAX_GRAPH_MEMORY_CHARS)\n        if graph_context.strip() and \"No graph memory matches\" not in graph_context:\n            files_used.append({\"type\": \"graph\", \"source\": \"neo4j\"})\n    except Exception as ex:\n        graph_context = f\"[Graph memory error: {str(ex)}]\"\n\n    # === 6.", "mimetype": "text/plain", "start_char_idx": 2615, "end_char_idx": 5871, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b6d96529-ab8b-44cf-b035-fbdf61d0fd71": {"__data__": {"id_": "b6d96529-ab8b-44cf-b035-fbdf61d0fd71", "embedding": null, "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "c2122b8c-e1ab-42cd-9102-529fb328176f", "node_type": "4", "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "bf732e923c56535ca2266dfaa292ce691edb8833fdd3a5b2ab4c691121d868f8", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "586e7e8a-26e6-482c-813a-8b4a7a1c55d5", "node_type": "1", "metadata": {"file_path": "/app/services/context_injector.py", "file_name": "context_injector.py", "file_type": "text/x-python", "file_size": 7581, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f6a7aa22fb1aa37450ebb7567c6ff85f731789a33e1bb3b48e7bcd28e8e59e69", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\":\n        for topic in topics:\n            files_used.append({\"type\": \"external\", \"source\": f\"context/{topic}.md\"})\n\n    # === 4. Global Project Context ===\n    global_context = load_global_context()\n    if \"not available\" not in global_context:\n        files_used.append({\"type\": \"global\", \"source\": \"docs/generated/global_context.md\"})\n\n    # === 5. Graph Memory Context (summarized) ===\n    try:\n        graph_context = await summarize_recent_context(query)\n        graph_context = safe_truncate(graph_context, MAX_GRAPH_MEMORY_CHARS)\n        if graph_context.strip() and \"No graph memory matches\" not in graph_context:\n            files_used.append({\"type\": \"graph\", \"source\": \"neo4j\"})\n    except Exception as ex:\n        graph_context = f\"[Graph memory error: {str(ex)}]\"\n\n    # === 6. Recent Memory Summaries (optional) ===\n    memory_summaries = \"\"\n    if memory_entries:\n        try:\n            memory_summaries = await build_recent_memory_summaries(memory_entries)\n        except Exception as ex:\n            memory_summaries = f\"[Memory summary error: {str(ex)}]\"\n\n    # === Assemble final context block ===\n    full_context = f\"\"\"\n## \ud83e\udde0 Project Summary:\n{project_summary}\n\n## \ud83e\udd99 Semantic Retrieval (Top Matches):\n{semantic_context}\n\n## \ud83c\udf0d External Project Context:\n{external_context}\n\n## \ud83c\udf10 Global Project Context:\n{global_context}\n\n## \ud83e\udde0 Graph Memory Summary:\n{graph_context}\n\n## \ud83d\udcdd Recent Memory Summaries:\n{memory_summaries}\n\"\"\".strip()\n\n    # === Logging for debugging ===\n    print(f\"[CTX] Length: {len(full_context)} chars | Files used: {files_used}\")\n    if len(full_context) > 12000:\n        print(\"[CTX] WARNING: Full context exceeds 12k chars, consider increasing truncation/aggressive filtering.\")\n\n    if debug:\n        return {\n            \"context\": full_context,\n            \"files_used\": files_used,\n            \"sections\": {\n                \"summary\": project_summary,\n                \"semantic\": semantic_context,\n                \"external\": external_context,\n                \"global\": global_context,\n                \"graph\": graph_context,\n                \"memory_summaries\": memory_summaries\n            }\n        }\n\n    return full_context", "mimetype": "text/plain", "start_char_idx": 5079, "end_char_idx": 7248, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3f82252e-2254-4a28-9f51-a30a77aaecfe": {"__data__": {"id_": "3f82252e-2254-4a28-9f51-a30a77aaecfe", "embedding": null, "metadata": {"file_path": "/app/services/delete_embeddings.py", "file_name": "delete_embeddings.py", "file_type": "text/x-python", "file_size": 3181, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2760374a-0143-4162-b121-a16ae2a93df7", "node_type": "4", "metadata": {"file_path": "/app/services/delete_embeddings.py", "file_name": "delete_embeddings.py", "file_type": "text/x-python", "file_size": 3181, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e8f40ef30c915df09daa59c13faf1baecb2f1a9478bf9ac1b81d621e820faf46", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: delete_embeddings.py\n# Directory: services\n# Purpose: # Purpose: Manages the deletion of text embeddings from a search index, including file handling and index updates.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: numpy, openai, os, pickle, sys\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - build_index()\n#   - embed_text()\n#   - iter_files()\n#   - search_index()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\"\"\"\nRelay Embeddings Service\n-----------------------------------\n- Indexes project docs and code with OpenAI embeddings.\n- Supports semantic search for agent context, docs, and Q&A.\n- Simple CLI: build index, search index.\n\"\"\"\n\nimport os\nimport openai\nimport numpy as np\nimport pickle\n\n# Config (tweak paths/extensions as needed for your codebase)\nSEARCH_DIRS = [\"./docs\", \"./core\", \"./agents\", \"./services\"]\nEXTS = [\".md\", \".py\", \".ts\", \".tsx\"]\nEMBED_MODEL = \"text-embedding-3-small\"\nEMBED_INDEX = \"file_embeddings.pkl\"\n\nopenai.api_key = os.environ.get(\"OPENAI_API_KEY\")\n\ndef iter_files():\n    for root in SEARCH_DIRS:\n        for dirpath, _, filenames in os.walk(root):\n            for fname in filenames:\n                if any(fname.endswith(ext) for ext in EXTS):\n                    yield os.path.join(dirpath, fname)\n\ndef embed_text(text):\n    \"\"\"Get OpenAI embedding for input text.\"\"\"\n    resp = openai.embeddings.create(input=text, model=EMBED_MODEL)\n    return np.array(resp.data[0].embedding)\n\ndef build_index():\n    \"\"\"Build and save the file embedding index.\"\"\"\n    index = []\n    for fpath in iter_files():\n        with open(fpath, encoding=\"utf-8\", errors=\"ignore\") as f:\n            text = f.read()[:8000]  # Truncate for OpenAI limit\n        emb = embed_text(text)\n        index.append({\n            \"file\": fpath,\n            \"embedding\": emb,\n            \"snippet\": text[:400]  # Preview for UI/context\n        })\n        print(f\"Indexed: {fpath}\")\n    with open(EMBED_INDEX, \"wb\") as out:\n        pickle.dump(index, out)\n    print(f\"Embedding index saved to {EMBED_INDEX}\")\n\ndef search_index(query, top_k=5):\n    \"\"\"Return top_k most relevant files/snippets for a query.\"\"\"\n    with open(EMBED_INDEX, \"rb\") as f:\n        index = pickle.load(f)\n    q_emb = embed_text(query)\n    scores = []\n    for doc in index:\n        sim = np.dot(q_emb, doc[\"embedding\"])\n        scores.append((sim, doc))\n    scores.sort(reverse=True, key=lambda x: x[0])\n    return [doc for _, doc in scores[:top_k]]\n\nif __name__ == \"__main__\":\n    import sys\n    if len(sys.argv) > 1 and sys.argv[1] == \"search\":\n        query = \" \".join(sys.argv[2:]) or \"relay agent context\"\n        results = search_index(query)\n        for doc in results:\n            print(f\"{doc['file']}\\n---\\n{doc['snippet'][:200]}\\n\")\n    else:\n        build_index()", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2864, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "0b62e877-6092-49c9-97b5-56a6a14dc64e": {"__data__": {"id_": "0b62e877-6092-49c9-97b5-56a6a14dc64e", "embedding": null, "metadata": {"file_path": "/app/services/docs_utils.py", "file_name": "docs_utils.py", "file_type": "text/x-python", "file_size": 4555, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a914b9c7-c65e-46c2-8f0b-aa056eafa77c", "node_type": "4", "metadata": {"file_path": "/app/services/docs_utils.py", "file_name": "docs_utils.py", "file_type": "text/x-python", "file_size": 4555, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7c170ffb74909c588f5bcecc87cc3c6c1eb4c225072828583206b7c3127ea2d3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: docs_utils.py\n# Directory: services/\n# Purpose : Support utilities for Relay doc tiering\n#           \u2022 Extract doc_id from file\n#           \u2022 Build registry of all docs grouped by ID\n#           \u2022 Determine which file version is canonical\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: collections, pathlib, re, typing\n#\n# Downstream:\n#   - routes.docs\n#\n# Contents:\n#   - build_doc_registry()\n#   - choose_canonical_path()\n#   - extract_doc_id()\n#   - write_doc_metadata()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\nimport re\nfrom collections import defaultdict\nfrom pathlib import Path\nfrom typing import Dict, List\n\n# \u2500\u2500\u2500 Constants \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nPROJECT_ROOT = Path(__file__).resolve().parents[1]\nBASE_DIR = PROJECT_ROOT / \"docs\"\nDOC_FOLDERS = [\"\", \"imported\", \"generated\"]  # relative to /docs/\n\n# \u2500\u2500\u2500 Extract doc_id from YAML frontmatter or filename \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ndef extract_doc_id(path: Path) -> str:\n    \"\"\"\n    Extract doc_id from a file's frontmatter or fallback to filename stem.\n    Assumes optional comment-style frontmatter: `doc_id: foo`\n    \"\"\"\n    try:\n        lines = path.read_text(encoding=\"utf-8\").splitlines()\n        for line in lines[:10]:\n            if \"doc_id:\" in line:\n                match = re.search(r\"doc_id:\\s*(\\S+)\", line)\n                if match:\n                    return match.group(1).strip()\n    except Exception:\n        pass\n\n    return path.stem  # fallback to filename without extension\n\n\n# \u2500\u2500\u2500 Build registry of doc_id \u2192 [all versions] \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ndef build_doc_registry() -> Dict[str, List[Path]]:\n    \"\"\"\n    Scans /docs folders and groups files by doc_id.\n    Returns dict of doc_id -> list of Path objects.\n    \"\"\"\n    registry: Dict[str, List[Path]] = defaultdict(list)\n\n    for folder in DOC_FOLDERS:\n        base = BASE_DIR / folder if folder else BASE_DIR\n        if not base.exists():\n            continue\n        for f in base.rglob(\"*.md\"):\n            try:\n                doc_id = extract_doc_id(f)\n                registry[doc_id].append(f)\n            except Exception:\n                continue\n\n    return registry\n\n\n# \u2500\u2500\u2500 Choose best version of a doc \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ndef choose_canonical_path(paths: List[Path]) -> Path:\n    \"\"\"\n    Select the canonical version of a doc from multiple paths.\n    Prefers root-level /docs/ files, else chooses most recently modified.\n    \"\"\"\n    for p in paths:\n        if p.parent == BASE_DIR:  # root /docs/\n            return p\n    return max(paths, key=lambda p: p.stat().st_mtime)\n\ndef write_doc_metadata(path: Path, updates: dict):\n    \"\"\"\n    Updates or inserts a metadata block (as comment) at the top of the markdown file.\n\n    Example block:\n    <!--\n    doc_id: foo\n    tier: global\n    pinned: true\n    -->\n    \"\"\"\n    if not path.exists():\n        raise FileNotFoundError(f\"{path} does not exist\")\n\n    lines = path.read_text(encoding=\"utf-8\").splitlines()\n    start, end = None, None\n\n    # Detect existing block\n    for i, line in enumerate(lines[:20]):\n        if line.strip() == \"<!--\":\n            start = i\n        elif line.strip() == \"-->\":\n            end = i\n            break\n\n    # Build updated block\n    metadata = {**updates}\n    if \"doc_id\" not in metadata:\n        metadata[\"doc_id\"] = extract_doc_id(path)\n\n    block = [\"<!--\"]\n    for key, val in metadata.items():\n        if val is not None:\n            block.append(f\"{key}: {str(val).lower() if isinstance(val, bool) else val}\")\n    block.append(\"-->\")\n\n    # Inject or replace block\n    if start is not None and end is not None:\n        new_lines = lines[:start] + block + lines[end + 1:]\n    else:\n        new_lines = block + [\"\"] + lines\n\n    path.write_text(\"\\n\".join(new_lines), encoding=\"utf-8\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3908, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5b6f04fe-f2e2-4827-8981-f8d1943d6196": {"__data__": {"id_": "5b6f04fe-f2e2-4827-8981-f8d1943d6196", "embedding": null, "metadata": {"file_path": "/app/services/env_checker.py", "file_name": "env_checker.py", "file_type": "text/x-python", "file_size": 2122, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ba59e68c-b4ff-42e8-ab62-904044e23810", "node_type": "4", "metadata": {"file_path": "/app/services/env_checker.py", "file_name": "env_checker.py", "file_type": "text/x-python", "file_size": 2122, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1f3d7623e93ba32e5de0af7dc0268fbfa15ed3b3c152af08181db2913dc5c8b3", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: env_checker.py\n# Directory: services\n# Purpose: # Purpose: Verify that all required environment variables are defined and correctly set up in the system.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: dotenv, os, pathlib, pprint, re\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - check_env_keys()\n#   - find_env_keys_in_code()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nimport re\nfrom pathlib import Path\nfrom dotenv import dotenv_values\n\nSERVICES_DIR = Path(__file__).resolve().parents[1] / \"services\"\nENV_FILE = Path(__file__).resolve().parents[1] / \".env\"\n\nGETENV_REGEX = re.compile(r\"os\\.getenv\\([\\\"'](.+?)[\\\"']\\)\")\n\ndef find_env_keys_in_code(path: Path):\n    found = {}\n    for file in path.rglob(\"*.py\"):\n        matches = GETENV_REGEX.findall(file.read_text(encoding=\"utf-8\"))\n        if matches:\n            found[file.name] = list(set(matches))\n    return found\n\ndef check_env_keys():\n    code_env_usage = find_env_keys_in_code(SERVICES_DIR)\n    used_keys = sorted({k for keys in code_env_usage.values() for k in keys})\n    \n    # Load .env if available\n    env_file_values = dotenv_values(dotenv_path=ENV_FILE)\n    env_file_keys = set(env_file_values.keys())\n    runtime_env_keys = set(os.environ.keys())\n\n    # Compare\n    missing_keys = [k for k in used_keys if k not in env_file_keys and k not in runtime_env_keys]\n    unused_env_keys = sorted(env_file_keys - set(used_keys))\n\n    return {\n        \"used_keys\": used_keys,\n        \"missing_in_env\": missing_keys,\n        \"defined_but_unused\": unused_env_keys,\n        \"used_in_files\": code_env_usage,\n    }\nif __name__ == \"__main__\":\n    from pprint import pprint\n    result = check_env_keys()\n    pprint(result)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1805, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "31311ca4-dcd8-444a-bc86-27a659f5b5ac": {"__data__": {"id_": "31311ca4-dcd8-444a-bc86-27a659f5b5ac", "embedding": null, "metadata": {"file_path": "/app/services/github_actions.py", "file_name": "github_actions.py", "file_type": "text/x-python", "file_size": 6443, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "68be0038-76e1-4592-ad76-feb0bc25c791", "node_type": "4", "metadata": {"file_path": "/app/services/github_actions.py", "file_name": "github_actions.py", "file_type": "text/x-python", "file_size": 6443, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8343c0312684c3de47a8d5dd630a2c40a7b77cb032f7c26adeb863e6013bf602", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "36ef8216-5298-4380-a294-f5a98bdea665", "node_type": "1", "metadata": {}, "hash": "9788dad606dc11fdc8fe607bee40e58fce8ab88de3137e3191ab63ad14c7141e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# File: routes/github_proxy.py\nimport os, hmac, hashlib, json\nfrom typing import Optional\nfrom fastapi import APIRouter, Depends, Header, HTTPException\nfrom pydantic import BaseModel\nfrom github.GithubException import GithubException\n\nrouter = APIRouter(prefix=\"/gh\", tags=[\"github\"])\n\n# \u2500\u2500 Auth (API_KEY or API_KEYS, comma-separated) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n_API_KEYS = {tok.strip() for tok in (os.getenv(\"API_KEY\",\"\")+\",\"+os.getenv(\"API_KEYS\",\"\")).split(\",\") if tok.strip()}\n\ndef require_api_key(authorization: str = Header(None)):\n    if not authorization or not authorization.lower().startswith(\"bearer \"):\n        raise HTTPException(status_code=401, detail=\"Missing bearer token\")\n    token = authorization.split(\" \", 1)[1].strip()\n    if not any(hmac.compare_digest(token, k) for k in _API_KEYS):\n        raise HTTPException(status_code=403, detail=\"Bad token\")\n\n@router.get(\"/debug/api-key\")\ndef debug_api_key(authorization: Optional[str] = Header(None)):\n    def sha8(s: str) -> str: return hashlib.sha256(s.encode()).hexdigest()[:8]\n    provided = \"\"\n    if authorization and authorization.lower().startswith(\"bearer \"):\n        provided = authorization.split(\" \", 1)[1].strip()\n    server = next(iter(_API_KEYS), \"\")\n    return {\n        \"keys_count\": len(_API_KEYS),\n        \"server_key_len\": len(server) if server else 0,\n        \"server_key_sha256_8\": sha8(server) if server else None,\n        \"provided_len\": len(provided),\n        \"provided_sha256_8\": sha8(provided) if provided else None,\n        \"match\": any(hmac.compare_digest(provided,k) for k in _API_KEYS),\n    }\n\ndef _ga():\n    try:\n        from services import github_actions as ga\n        return ga\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"github_actions import failed: {e}\")\n\n# \u2500\u2500 Models \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nclass FileGetReq(BaseModel):\n    repo: str\n    path: str\n    ref: Optional[str] = None\n\nclass FilePutReq(BaseModel):\n    repo: str\n    path: str\n    content_b64: str\n    message: str\n    branch: str\n    sha: Optional[str] = None\n\nclass BranchReq(BaseModel):\n    repo: str\n    base: str\n    new_branch: str\n\nclass PRReq(BaseModel):\n    repo: str\n    title: str\n    head: str\n    base: str\n    body: Optional[str] = None\n    draft: bool = False\n\nclass ApplyDiffReq(BaseModel):\n    repo: str\n    base_branch: str\n    new_branch: str\n    commit_message: str\n    diff: str\n    allow_deletes: bool = False\n    dry_run: bool = False\n\n# \u2500\u2500 Endpoints \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.get(\"/health\")\ndef gh_health(_: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        me = ga.gh.get_user().login  # type: ignore[attr-defined]\n        return {\"ok\": True, \"user\": me, \"allowlist\": sorted(list(ga.ALLOWLIST))}\n    except Exception as e:\n        return {\"ok\": False, \"error\": str(e)}\n\n@router.get(\"/repos\")\ndef list_repos(_: None = Depends(require_api_key)):\n    ga = _ga()\n    return ga.list_repos()\n\n@router.post(\"/file/get\")\ndef file_get(req: FileGetReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.get_file(req.repo, req.path, req.ref)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except GithubException as e:\n        detail = e.data if getattr(e, \"data\", None) else {\"message\": str(e)}\n        raise HTTPException(status_code=e.status or 500, detail=json.dumps(detail))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/file/put\")\ndef file_put(req: FilePutReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.put_file(req.repo, req.path, req.content_b64, req.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3744, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "36ef8216-5298-4380-a294-f5a98bdea665": {"__data__": {"id_": "36ef8216-5298-4380-a294-f5a98bdea665", "embedding": null, "metadata": {"file_path": "/app/services/github_actions.py", "file_name": "github_actions.py", "file_type": "text/x-python", "file_size": 6443, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "68be0038-76e1-4592-ad76-feb0bc25c791", "node_type": "4", "metadata": {"file_path": "/app/services/github_actions.py", "file_name": "github_actions.py", "file_type": "text/x-python", "file_size": 6443, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8343c0312684c3de47a8d5dd630a2c40a7b77cb032f7c26adeb863e6013bf602", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "31311ca4-dcd8-444a-bc86-27a659f5b5ac", "node_type": "1", "metadata": {"file_path": "/app/services/github_actions.py", "file_name": "github_actions.py", "file_type": "text/x-python", "file_size": 6443, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "30017a6ada65fec987648909687fd753c44cb3156ce3ca3b9e90a72f8b802875", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "post(\"/file/get\")\ndef file_get(req: FileGetReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.get_file(req.repo, req.path, req.ref)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except GithubException as e:\n        detail = e.data if getattr(e, \"data\", None) else {\"message\": str(e)}\n        raise HTTPException(status_code=e.status or 500, detail=json.dumps(detail))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/file/put\")\ndef file_put(req: FilePutReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.put_file(req.repo, req.path, req.content_b64, req.message, req.branch, req.sha)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except GithubException as e:\n        detail = e.data if getattr(e, \"data\", None) else {\"message\": str(e)}\n        raise HTTPException(status_code=e.status or 500, detail=json.dumps(detail))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/branch/create\")\ndef branch_create(req: BranchReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.create_branch(req.repo, req.base, req.new_branch)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except GithubException as e:\n        detail = e.data if getattr(e, \"data\", None) else {\"message\": str(e)}\n        raise HTTPException(status_code=e.status or 500, detail=json.dumps(detail))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/pr/open\")\ndef pr_open(req: PRReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.open_pr(req.repo, req.title, req.head, req.base, req.body or \"\", req.draft)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except GithubException as e:\n        detail = e.data if getattr(e, \"data\", None) else {\"message\": str(e)}\n        raise HTTPException(status_code=e.status or 500, detail=json.dumps(detail))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/apply-diff\")\ndef apply_diff(req: ApplyDiffReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.apply_diff(\n            req.repo,\n            req.base_branch,\n            req.new_branch,\n            req.commit_message,\n            req.diff,\n            allow_deletes=req.allow_deletes,\n            dry_run=req.dry_run,\n        )\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except ValueError as e:\n        raise HTTPException(status_code=409, detail=str(e))\n    except GithubException as e:\n        detail = e.data if getattr(e, \"data\", None) else {\"message\": str(e)}\n        raise HTTPException(status_code=e.status or 500, detail=json.dumps(detail))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))", "mimetype": "text/plain", "start_char_idx": 3019, "end_char_idx": 6132, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1a131d8f-cbd7-4e88-9ad4-0ec0dc5cf230": {"__data__": {"id_": "1a131d8f-cbd7-4e88-9ad4-0ec0dc5cf230", "embedding": null, "metadata": {"file_path": "/app/services/gmail.py", "file_name": "gmail.py", "file_type": "text/x-python", "file_size": 3679, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ff311b0e-81c4-46a6-8716-712f923fcafa", "node_type": "4", "metadata": {"file_path": "/app/services/gmail.py", "file_name": "gmail.py", "file_type": "text/x-python", "file_size": 3679, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "eabc49769074efac32b119faa5ae5a60567e9661c6f2f5ceffd41ee02f480ae7", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: gmail.py\n# Directory: services\n# Purpose: # Purpose: Provides utility functions for interacting with the Gmail API, including sending emails and managing email listings.\n#\n# Upstream:\n#   - ENV: GOOGLE_CREDS_JSON, NOTIFY_FROM_EMAIL\n#   - Imports: base64, email.mime.text, google.oauth2.service_account, googleapiclient.discovery, os, pathlib\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - get_email()\n#   - get_gmail_service()\n#   - list_emails()\n#   - send_email()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nfrom googleapiclient.discovery import build\nfrom email.mime.text import MIMEText\nimport base64\nfrom pathlib import Path\nfrom google.oauth2.service_account import Credentials\n\nGMAIL_SCOPES = ['https://www.googleapis.com/auth/gmail.send', 'https://www.googleapis.com/auth/gmail.readonly']\nGOOGLE_CREDS_JSON = os.getenv(\"GOOGLE_CREDS_JSON\")  # Path to service account JSON\n\ndef get_gmail_service():\n    \"\"\"Build a Gmail API client using service account credentials.\"\"\"\n    creds = Credentials.from_service_account_file(\n        GOOGLE_CREDS_JSON,\n        scopes=GMAIL_SCOPES,\n    )\n    delegated_email = os.getenv(\"NOTIFY_FROM_EMAIL\")\n    if delegated_email:\n        creds = creds.with_subject(delegated_email)\n    return build('gmail', 'v1', credentials=creds)\n\ndef send_email(to_email, subject, body):\n    \"\"\"Send an email via Gmail API.\"\"\"\n    service = get_gmail_service()\n    message = MIMEText(body)\n    message['to'] = to_email\n    message['from'] = os.getenv(\"NOTIFY_FROM_EMAIL\")\n    message['subject'] = subject\n    raw = base64.urlsafe_b64encode(message.as_bytes()).decode()\n    return service.users().messages().send(userId=\"me\", body={'raw': raw}).execute()\n\ndef list_emails(query=\"\", max_results=10):\n    \"\"\"List email messages in the inbox (by search query).\"\"\"\n    service = get_gmail_service()\n    results = service.users().messages().list(userId='me', q=query, maxResults=max_results).execute()\n    messages = results.get('messages', [])\n    emails = []\n    for m in messages:\n        msg = service.users().messages().get(userId='me', id=m['id'], format='metadata').execute()\n        headers = {h['name']: h['value'] for h in msg['payload']['headers']}\n        snippet = msg.get('snippet', '')\n        emails.append({\n            \"id\": m['id'],\n            \"snippet\": snippet,\n            \"from\": headers.get(\"From\"),\n            \"subject\": headers.get(\"Subject\"),\n            \"date\": headers.get(\"Date\"),\n        })\n    return emails\n\ndef get_email(email_id):\n    \"\"\"Fetch full content of a given email by ID.\"\"\"\n    service = get_gmail_service()\n    msg = service.users().messages().get(userId='me', id=email_id, format='full').execute()\n    headers = {h['name']: h['value'] for h in msg['payload']['headers']}\n    body = \"\"\n    if 'parts' in msg['payload']:\n        for part in msg['payload']['parts']:\n            if part['mimeType'] == 'text/plain':\n                body = base64.urlsafe_b64decode(part['body']['data']).decode()\n    else:\n        body = base64.urlsafe_b64decode(msg['payload']['body']['data']).decode()\n    return {\n        \"id\": email_id,\n        \"from\": headers.get(\"From\"),\n        \"subject\": headers.get(\"Subject\"),\n        \"date\": headers.get(\"Date\"),\n        \"body\": body\n    }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3364, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3ca65b70-9464-424e-a780-0f488a7da7c0": {"__data__": {"id_": "3ca65b70-9464-424e-a780-0f488a7da7c0", "embedding": null, "metadata": {"file_path": "/app/services/google.py", "file_name": "google.py", "file_type": "text/x-python", "file_size": 1902, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "2788a7fb-0c13-4940-bcf4-00f8e667e10d", "node_type": "4", "metadata": {"file_path": "/app/services/google.py", "file_name": "google.py", "file_type": "text/x-python", "file_size": 1902, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a04c3bfee79dca77b115dfa6b401f64170b847fdea90ce7f5451ac83a32b6273", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: google.py\n# Directory: services\n# Purpose: Provides functionality for fetching and converting Google Drive documents into markdown format.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: google_docs_sync, markdownify, typing\n#\n# Downstream:\n#   - scripts.sync_context_docs\n#\n# Contents:\n#   - fetch_drive_docs()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\"\"\"Utility helpers for fetching Google Docs content.\"\"\"\n\nfrom typing import List, Tuple\nfrom markdownify import markdownify as md\n\nfrom .google_docs_sync import (\n    get_google_service,\n    find_folder_id,\n    get_docs_in_folder,\n    COMMAND_CENTER_FOLDER_NAME,\n)\n\ndef fetch_drive_docs() -> List[Tuple[str, str]]:\n    \"\"\"Return (title, markdown) for docs in the COMMAND_CENTER folder.\"\"\"\n    drive_service, docs_service = get_google_service()\n    folder_id = find_folder_id(\n        drive_service, COMMAND_CENTER_FOLDER_NAME\n    )\n    files = get_docs_in_folder(drive_service, folder_id)\n\n    docs = []\n    for file in files:\n        doc = docs_service.documents().get(documentId=file[\"id\"]).execute()\n        elements = doc.get(\"body\", {}).get(\"content\", [])\n        html = \"\"\n        for element in elements:\n            if \"paragraph\" in element:\n                for part in element[\"paragraph\"].get(\"elements\", []):\n                    html += part.get(\"textRun\", {}).get(\"content\", \"\")\n                html += \"\\n\"\n        markdown = md(html)\n        docs.append((file[\"name\"], markdown))\n    return docs", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1587, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1b9d0abd-10da-4f73-b0c5-fc81edd78e3d": {"__data__": {"id_": "1b9d0abd-10da-4f73-b0c5-fc81edd78e3d", "embedding": null, "metadata": {"file_path": "/app/services/google_docs_sync.py", "file_name": "google_docs_sync.py", "file_type": "text/x-python", "file_size": 6379, "creation_date": "2025-08-11", "last_modified_date": "2025-08-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "909dd98e-0694-4459-a1a5-14ffbfe6584a", "node_type": "4", "metadata": {"file_path": "/app/services/google_docs_sync.py", "file_name": "google_docs_sync.py", "file_type": "text/x-python", "file_size": 6379, "creation_date": "2025-08-11", "last_modified_date": "2025-08-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c38f1dc178649557481fe0ac0a4d83002372b019f10d5eb3b2a1c2743b23715f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "acc4f59b-003b-4ebc-80bf-58f2b77ff254", "node_type": "1", "metadata": {}, "hash": "c1466e308b4b559e9395e00b32b72161e4826fb9959cb24a3ef3c396aa2e6a2b", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# File: services/google_docs_sync.py\n\"\"\"\nSynchronize documents from a Google Drive folder into local Markdown files.\n\nThis version includes several improvements over the original:\n- The Drive folder name can be set via the GOOGLE_FOLDER_NAME environment\n  variable instead of being hard-coded.\n- Credentials and token files are generated from base64-encoded environment\n  variables (`GOOGLE_CREDS_JSON` and `GOOGLE_TOKEN_JSON`) if they don't exist.\n- The Google Docs export API is used to fetch each document as HTML, which\n  preserves basic formatting when converting to Markdown.\n- Error handling provides clear messages when credentials are missing or a\n  specified folder can't be found.\n\"\"\"\n\nimport os\nimport base64\nfrom pathlib import Path\nfrom typing import List, Tuple\n\nfrom google.oauth2.credentials import Credentials\nfrom google_auth_oauthlib.flow import InstalledAppFlow\nfrom google.auth.transport.requests import Request\nfrom googleapiclient.discovery import build\nfrom markdownify import markdownify as md\n\n# The scopes our application requires to read files from Drive and Docs.\nSCOPES = [\n    \"https://www.googleapis.com/auth/drive.readonly\",\n    \"https://www.googleapis.com/auth/documents.readonly\",\n]\n\n# Paths used to store OAuth client credentials and tokens.\nCREDENTIALS_PATH = Path(\"/tmp/credentials.json\")\nTOKEN_PATH = Path(\"frontend/sync/token.json\")\n\n# Directory where imported Markdown files will be stored.\nIMPORT_PATH = Path(\"docs/imported\")\nIMPORT_PATH.mkdir(parents=True, exist_ok=True)\n\n# Name of the Drive folder to sync.  Can be overridden via env var.\nFOLDER_NAME = os.getenv(\"GOOGLE_FOLDER_NAME\", \"COMMAND_CENTER\")\n\n\ndef get_google_service() -> Tuple:\n    \"\"\"\n    Authenticate with Google APIs and return Drive and Docs service clients.\n\n    Credentials are loaded from environment variables if not already present.\n    In production, interactive OAuth flows are disabled.\n    \"\"\"\n    creds = None\n\n    # Write client secrets if they don't exist yet.\n    if not CREDENTIALS_PATH.exists():\n        raw = os.getenv(\"GOOGLE_CREDS_JSON\")\n        if not raw:\n            raise FileNotFoundError(\n                \"Missing GOOGLE_CREDS_JSON environment variable; cannot authenticate.\"\n            )\n        decoded = base64.b64decode(raw).decode()\n        CREDENTIALS_PATH.write_text(decoded)\n\n    # Write token from environment, if available and no token file exists.\n    if not TOKEN_PATH.exists() and os.getenv(\"GOOGLE_TOKEN_JSON\"):\n        try:\n            token_raw = os.getenv(\"GOOGLE_TOKEN_JSON\")\n            TOKEN_PATH.parent.mkdir(parents=True, exist_ok=True)\n            TOKEN_PATH.write_text(base64.b64decode(token_raw).decode())\n        except Exception as exc:\n            raise RuntimeError(f\"Failed to decode GOOGLE_TOKEN_JSON: {exc}\") from exc\n\n    # Load existing credentials\n    if TOKEN_PATH.exists():\n        creds = Credentials.from_authorized_user_file(str(TOKEN_PATH), SCOPES)\n\n    # Refresh or run interactive flow if necessary\n    if not creds or not creds.valid:\n        if creds and creds.expired and creds.refresh_token:\n            creds.refresh(Request())\n        else:\n            # Only allow interactive auth in local development\n            if os.getenv(\"ENV\", \"local\") == \"local\":\n                flow = InstalledAppFlow.from_client_secrets_file(\n                    str(CREDENTIALS_PATH), SCOPES\n                )\n                creds = flow.run_local_server(port=0)\n                TOKEN_PATH.write_text(creds.to_json())\n            else:\n                raise RuntimeError(\n                    \"Missing valid Google credentials; set GOOGLE_TOKEN_JSON \"\n                    \"or enable interactive login in a local environment.\"\n                )\n\n    # Build service clients\n    drive_service = build(\"drive\", \"v3\", credentials=creds)\n    docs_service = build(\"docs\", \"v1\", credentials=creds)\n    return drive_service, docs_service\n\n\ndef find_folder_id(drive_service, folder_name: str) -> str:\n    \"\"\"\n    Locate a folder on Drive by name and return its ID.\n\n    Raises a RuntimeError with guidance if the folder is not found.\n    \"\"\"\n    query = (\n        \"mimeType='application/vnd.google-apps.folder' \"\n        f\"and name='{folder_name}' and trashed=false\"\n    )\n    result = (\n        drive_service.files()\n        .list(q=query, spaces=\"drive\", fields=\"files(id, name)\")\n        .execute()\n    )\n    folders = result.get(\"files\", [])\n    if not folders:\n        raise RuntimeError(\n            f\"Folder '{folder_name}' not found in Drive. \"\n            \"Check the GOOGLE_FOLDER_NAME environment variable.\"\n        )\n    return folders[0][\"id\"]", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4613, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "acc4f59b-003b-4ebc-80bf-58f2b77ff254": {"__data__": {"id_": "acc4f59b-003b-4ebc-80bf-58f2b77ff254", "embedding": null, "metadata": {"file_path": "/app/services/google_docs_sync.py", "file_name": "google_docs_sync.py", "file_type": "text/x-python", "file_size": 6379, "creation_date": "2025-08-11", "last_modified_date": "2025-08-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "909dd98e-0694-4459-a1a5-14ffbfe6584a", "node_type": "4", "metadata": {"file_path": "/app/services/google_docs_sync.py", "file_name": "google_docs_sync.py", "file_type": "text/x-python", "file_size": 6379, "creation_date": "2025-08-11", "last_modified_date": "2025-08-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c38f1dc178649557481fe0ac0a4d83002372b019f10d5eb3b2a1c2743b23715f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1b9d0abd-10da-4f73-b0c5-fc81edd78e3d", "node_type": "1", "metadata": {"file_path": "/app/services/google_docs_sync.py", "file_name": "google_docs_sync.py", "file_type": "text/x-python", "file_size": 6379, "creation_date": "2025-08-11", "last_modified_date": "2025-08-11", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1220d252b2e401c3f7709e05b09b4298d2880ba7a59e25726df8257407e04a6a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "def find_folder_id(drive_service, folder_name: str) -> str:\n    \"\"\"\n    Locate a folder on Drive by name and return its ID.\n\n    Raises a RuntimeError with guidance if the folder is not found.\n    \"\"\"\n    query = (\n        \"mimeType='application/vnd.google-apps.folder' \"\n        f\"and name='{folder_name}' and trashed=false\"\n    )\n    result = (\n        drive_service.files()\n        .list(q=query, spaces=\"drive\", fields=\"files(id, name)\")\n        .execute()\n    )\n    folders = result.get(\"files\", [])\n    if not folders:\n        raise RuntimeError(\n            f\"Folder '{folder_name}' not found in Drive. \"\n            \"Check the GOOGLE_FOLDER_NAME environment variable.\"\n        )\n    return folders[0][\"id\"]\n\n\ndef get_docs_in_folder(drive_service, folder_id: str) -> List[dict]:\n    \"\"\"\n    Return a list of Google Docs files contained within the specified folder.\n    \"\"\"\n    query = (\n        f\"'{folder_id}' in parents \"\n        \"and mimeType='application/vnd.google-apps.document' \"\n        \"and trashed=false\"\n    )\n    result = (\n        drive_service.files()\n        .list(q=query, fields=\"files(id, name)\")\n        .execute()\n    )\n    return result.get(\"files\", [])\n\n\ndef fetch_and_save_doc(docs_service, file_info: dict) -> str:\n    \"\"\"\n    Fetch a Google Doc by ID, convert it to Markdown and save it locally.\n\n    Returns the filename of the saved Markdown file.\n    \"\"\"\n    # Export the doc as HTML; this includes basic formatting.\n    export = (\n        docs_service.documents()\n        .export(fileId=file_info[\"id\"], mimeType=\"text/html\")\n        .execute()\n    )\n    html_content = export.decode(\"utf-8\")\n    markdown = md(html_content)\n\n    # Use a slugified title for the output filename\n    title_slug = file_info[\"name\"].replace(\" \", \"_\").lower()\n    out_path = IMPORT_PATH / f\"{title_slug}.md\"\n    out_path.write_text(markdown, encoding=\"utf-8\")\n    return out_path.name\n\n\ndef sync_google_docs() -> List[str]:\n    \"\"\"\n    Authenticate and synchronise all Google Docs from the configured folder.\n\n    Returns a list of filenames that were saved.\n    \"\"\"\n    drive_service, docs_service = get_google_service()\n    folder_id = find_folder_id(drive_service, FOLDER_NAME)\n    doc_files = get_docs_in_folder(drive_service, folder_id)\n    saved = [fetch_and_save_doc(docs_service, f) for f in doc_files]\n    print(f\"Synced {len(saved)} file(s) from Drive folder '{FOLDER_NAME}': {saved}\")\n    return saved\n\n\nif __name__ == \"__main__\":\n    sync_google_docs()", "mimetype": "text/plain", "start_char_idx": 3899, "end_char_idx": 6378, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "041b41c1-5a0a-438d-bb1a-b11f1b9e4ca5": {"__data__": {"id_": "041b41c1-5a0a-438d-bb1a-b11f1b9e4ca5", "embedding": null, "metadata": {"file_path": "/app/services/graph.py", "file_name": "graph.py", "file_type": "text/x-python", "file_size": 3857, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1b794e97-6d50-46cd-ad00-1c9fc2edee80", "node_type": "4", "metadata": {"file_path": "/app/services/graph.py", "file_name": "graph.py", "file_type": "text/x-python", "file_size": 3857, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "ce62d845cc7ef02e1f3a3b0cbac566854d8dc3145ba9d7c93c31d547c885d7e6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: graph.py\n# Directory: services\n# Purpose: # Purpose: Provides functionalities to interact with graph databases for querying and summarizing route data.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: core.logging, services.neo4j_driver\n#\n# Downstream:\n#   - agents.metaplanner_agent\n#   - services.context_injector\n#\n# Contents:\n#   - query_similar_routes()\n#   - summarize_recent_context()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom services.neo4j_driver import neo4j_driver  # assumes driver is initialized separately\nfrom core.logging import log_event\n\n# === Fulltext similarity query using Neo4j index ===\nasync def query_similar_routes(query: str, top_k: int = 5) -> list[dict]:\n    \"\"\"\n    Returns top K similar past queries and their associated routes and critic scores.\n    Requires a fulltext index on :Query(text) and proper ROUTED_TO links.\n    \"\"\"\n    try:\n        cypher = \"\"\"\n        CALL db.index.fulltext.queryNodes('queryTextIndex', $q) YIELD node, score\n        MATCH (node)-[:PLANNED_WITH]->(plan:Plan)-[:RAN_ON]->(agent:Agent)\n        OPTIONAL MATCH (plan)-[:VALIDATED_BY]->(c:Critic)\n        WITH plan, agent, score, COUNT(c) AS total, SUM(CASE WHEN c.passes THEN 1 ELSE 0 END) AS passed\n        RETURN agent.name AS route,\n               score,\n               passed * 1.0 / CASE WHEN total = 0 THEN 1 ELSE total END AS confidence\n        ORDER BY confidence DESC, score DESC\n        LIMIT $top_k\n        \"\"\"\n\n        records = await neo4j_driver.execute_read(\n            cypher,\n            parameters={\"q\": query, \"top_k\": top_k}\n        )\n\n        return [\n            {\n                \"route\": record[\"route\"],\n                \"confidence\": float(record[\"confidence\"]),\n                \"score\": float(record[\"score\"])\n            }\n            for record in records\n            if record[\"route\"]\n        ]\n\n    except Exception as e:\n        log_event(\"graph_query_fail\", {\"error\": str(e)})\n        return []\n# === Generate text summary of relevant prior routes ===\nasync def summarize_recent_context(query: str, top_k: int = 5) -> str:\n    \"\"\"\n    Returns a markdown-style summary of recent graph memory relevant to the query.\n    Used for injecting graph-derived intelligence into planner context.\n    \"\"\"\n    try:\n        cypher = \"\"\"\n        CALL db.index.fulltext.queryNodes('queryTextIndex', $q) YIELD node, score\n        MATCH (node)-[:PLANNED_WITH]->(plan:Plan)-[:RAN_ON]->(agent:Agent)\n        OPTIONAL MATCH (plan)-[:VALIDATED_BY]->(c:Critic)\n        WITH plan, agent, score,\n             COUNT(c) AS total,\n             SUM(CASE WHEN c.passes THEN 1 ELSE 0 END) AS passed\n        RETURN plan.route AS route,\n               agent.name AS agent,\n               passed * 1.0 / CASE WHEN total = 0 THEN 1 ELSE total END AS confidence,\n               score\n        ORDER BY confidence DESC, score DESC\n        LIMIT $top_k\n        \"\"\"\n\n        records = await neo4j_driver.execute_read(cypher, {\"q\": query, \"top_k\": top_k})\n        if not records:\n            return \"\"\n\n        summary = [\"### \ud83d\udd0e Graph Memory Summary\"]\n        for r in records:\n            summary.append(\n                f\"- `{r['route']}` via `{r['agent']}` \u2192 \"\n                f\"Confidence: {r['confidence']:.0%} \u00b7 Relevance Score: {r['score']:.2f}\"\n            )\n\n        return \"\\n\".join(summary)\n\n    except Exception as e:\n        log_event(\"graph_summary_fail\", {\"error\": str(e)})\n        return \"\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3536, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c9130195-bee9-4067-bf3c-51a6e70c2a2d": {"__data__": {"id_": "c9130195-bee9-4067-bf3c-51a6e70c2a2d", "embedding": null, "metadata": {"file_path": "/app/services/indexer.py", "file_name": "indexer.py", "file_type": "text/x-python", "file_size": 7719, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d3698f2b-197f-4b44-9f74-afadd30b6ca3", "node_type": "4", "metadata": {"file_path": "/app/services/indexer.py", "file_name": "indexer.py", "file_type": "text/x-python", "file_size": 7719, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "881579b39d13cdf0c0cedd9bf3f77b8c1a860e40978fd00dce6f90dd60766634", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "5eff4ab7-a96d-46aa-91d2-719274fdee2b", "node_type": "1", "metadata": {}, "hash": "cdd51b24f8be6325e54597d0dfe60fc2de31e8ec71bd9f9a7167a5e34eb45844", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: indexer.py\n# Directory: services\n# Purpose: # Purpose: Provides functionality for indexing directories and files, extracting language data, and managing indexing conditions within the system.\n#\n# Upstream:\n#   - ENV: KB_EMBED_MODEL, OPENAI_EMBED_MODEL, WIPE_INDEX\n#   - Imports: glob, llama_index.core, llama_index.core.node_parser, llama_index.embeddings.openai, os, pathlib, services.config, shutil, sys\n#\n# Downstream:\n#   - routes.admin\n#   - routes.index\n#\n# Contents:\n#   - collect_code_context()\n#   - get_language_from_path()\n#   - index_directories()\n#   - should_index_file()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nimport os\nimport glob\nimport sys\nfrom pathlib import Path\nfrom llama_index.core import SimpleDirectoryReader, VectorStoreIndex, Document\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nfrom llama_index.core.node_parser import CodeSplitter, SentenceSplitter\nfrom services.config import INDEX_DIR\n\nimport shutil\n\n# --- Guard: WIPE_INDEX only deletes if explicitly set ---\nWIPE_INDEX = os.getenv(\"WIPE_INDEX\", \"false\").lower() == \"true\"\nif WIPE_INDEX:\n    if os.path.exists(INDEX_DIR):\n        print(\"WARNING: WIPE_INDEX is set\u2014deleting and recreating index directory.\")\n        shutil.rmtree(INDEX_DIR)\n    os.makedirs(INDEX_DIR, exist_ok=True)\nelse:\n    print(\"WIPE_INDEX not set\u2014existing index will be updated or extended if run.\")\n\n# ---- 1. Define priority tiers and associated paths ----\nPRIORITY_INDEX_PATHS = [\n    (\"global\", [\"./docs/generated/global_context.md\", \"./docs/generated/global_context.auto.md\"]),\n    (\"context\", [\"./context/\"]),  # Cross-project overlays\n    (\"project_summary\", [\"./docs/PROJECT_SUMMARY.md\", \"./docs/RELAY_CODE_UPDATE.md\", \"./docs/context-commandcenter.md\"]),\n    (\"project_docs\", [\"./docs/imported/\", \"./docs/kb/\", \"./docs/*.md\"]),\n    (\"code\", [\"./services/\", \"./routes/\", \"./frontend/\", \"./src/\", \"./backend/\"]),\n]\n\n# ---- 2. Exclude Rules for Files, Extensions, and Folders ----\nIGNORED_FILENAMES = {\n    \"package-lock.json\", \"yarn.lock\", \".env\", \".DS_Store\", \".gitignore\",\n}\nIGNORED_EXTENSIONS = {\n    \".lock\", \".log\", \".exe\", \".bin\", \".jpg\", \".jpeg\", \".png\", \".gif\", \".pdf\", \".ico\",\n}\nIGNORED_FOLDERS = {\n    \"node_modules\", \".git\", \"__pycache__\", \"dist\", \"build\", \".venv\", \"env\",\n}\nMAX_FILE_SIZE_MB = 2  # Optional: skip files over 2 MB (adjust as needed)\n\ndef should_index_file(filepath: str, tier: str) -> bool:\n    \"\"\"Returns True if a file should be indexed, otherwise False.\"\"\"\n    filename = os.path.basename(filepath)\n    ext = os.path.splitext(filename)[1].lower()\n    if filename in IGNORED_FILENAMES or ext in IGNORED_EXTENSIONS:\n        return False\n    # Ignore by folder in path\n    parts = filepath.replace(\"\\\\\", \"/\").split(\"/\")\n    if any(folder in parts for folder in IGNORED_FOLDERS):\n        return False\n    # Ignore big files\n    if os.path.isfile(filepath):\n        if os.path.getsize(filepath) > MAX_FILE_SIZE_MB * 1024 * 1024:\n            return False\n    # For code tier, allow a broad set of code/doc files for review\n    if tier == \"code\":\n        return ext in {\".py\", \".js\", \".ts\", \".tsx\", \".java\", \".go\", \".cpp\", \".json\", \".md\"}\n    return True\n\n# ---- 3. Embedding Model ----\nmodel_name = (\n    os.getenv(\"KB_EMBED_MODEL\")\n    or os.getenv(\"OPENAI_EMBED_MODEL\")\n    or \"text-embedding-3-large\"\n)\nembed_model = OpenAIEmbedding(\n    model=model_name,\n    dimensions=3072 if model_name == \"text-embedding-3-large\" else None\n)\n\n# ---- 4. Language detection for code files ----\ndef get_language_from_path(file_path: str) -> str:\n    \"\"\"Returns the code language for a given file path by extension.\"\"\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3734, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5eff4ab7-a96d-46aa-91d2-719274fdee2b": {"__data__": {"id_": "5eff4ab7-a96d-46aa-91d2-719274fdee2b", "embedding": null, "metadata": {"file_path": "/app/services/indexer.py", "file_name": "indexer.py", "file_type": "text/x-python", "file_size": 7719, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d3698f2b-197f-4b44-9f74-afadd30b6ca3", "node_type": "4", "metadata": {"file_path": "/app/services/indexer.py", "file_name": "indexer.py", "file_type": "text/x-python", "file_size": 7719, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "881579b39d13cdf0c0cedd9bf3f77b8c1a860e40978fd00dce6f90dd60766634", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c9130195-bee9-4067-bf3c-51a6e70c2a2d", "node_type": "1", "metadata": {"file_path": "/app/services/indexer.py", "file_name": "indexer.py", "file_type": "text/x-python", "file_size": 7719, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b4071f8839e02e94a0219530b38fd378977481c827d6f354e57d582e3afedf6e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Embedding Model ----\nmodel_name = (\n    os.getenv(\"KB_EMBED_MODEL\")\n    or os.getenv(\"OPENAI_EMBED_MODEL\")\n    or \"text-embedding-3-large\"\n)\nembed_model = OpenAIEmbedding(\n    model=model_name,\n    dimensions=3072 if model_name == \"text-embedding-3-large\" else None\n)\n\n# ---- 4. Language detection for code files ----\ndef get_language_from_path(file_path: str) -> str:\n    \"\"\"Returns the code language for a given file path by extension.\"\"\"\n    file_path = file_path.lower()\n    if file_path.endswith(\".py\"):\n        return \"python\"\n    elif file_path.endswith((\".js\", \".jsx\")):\n        return \"javascript\"\n    elif file_path.endswith((\".ts\", \".tsx\")):\n        return \"typescript\"\n    elif file_path.endswith(\".java\"):\n        return \"java\"\n    elif file_path.endswith(\".go\"):\n        return \"go\"\n    elif file_path.endswith(\".cpp\"):\n        return \"cpp\"\n    return \"python\"  # fallback\n\ndef collect_code_context(files: list[str], base_dir: str = \"./\") -> str:\n    \"\"\"Read and join contents of files for prompt context.\"\"\"\n    contents: list[str] = []\n    for f in files:\n        path = Path(base_dir) / f\n        if path.exists() and path.is_file():\n            try:\n                contents.append(f\"### {f}\\n\" + path.read_text())\n            except Exception:\n                continue\n    return \"\\n\\n\".join(contents)\n\ndef index_directories():\n    \"\"\"Scans all PRIORITY_INDEX_PATHS, splits, tags with tier, and embeds for semantic search.\"\"\"\n    documents = []\n    print(f\"[Indexer] Starting directory scan for priority tiers...\")\n    for tier, paths in PRIORITY_INDEX_PATHS:\n        for path in paths:\n            if path.endswith(\"/\"):\n                if os.path.exists(path):\n                    docs = SimpleDirectoryReader(path, recursive=True).load_data()\n                    filtered_docs = []\n                    for d in docs:\n                        file_path = d.metadata.get(\"file_path\") or d.metadata.get(\"filename\") or \"\"\n                        if should_index_file(file_path, tier):\n                            d.metadata = d.metadata or {}\n                            d.metadata[\"tier\"] = tier\n                            filtered_docs.append(d)\n                    documents.extend(filtered_docs)\n            elif \"*\" in path or path.endswith(\".md\"):\n                for f in glob.glob(path):\n                    if os.path.isfile(f) and should_index_file(f, tier):\n                        with open(f, \"r\", encoding=\"utf-8\") as file:\n                            text = file.read()\n                        doc = Document(\n                            text=text,\n                            metadata={\"tier\": tier, \"file_path\": f}\n                        )\n                        documents.append(doc)\n    print(f\"[Indexer] Total documents collected: {len(documents)}\")\n\n    # --- 5. Chunking: Get nodes (split text/code), flatten for indexing ---\n    all_chunked_nodes = []\n    text_splitter = SentenceSplitter(chunk_size=1024)\n    for doc in documents:\n        file_path = doc.metadata.get('file_path', '')\n        if file_path.endswith(('.py', '.js', '.ts', '.tsx', '.java', '.go', '.cpp')):\n            language = get_language_from_path(file_path)\n            code_splitter = CodeSplitter(language=language, max_chars=1024, chunk_lines=30)\n            nodes = code_splitter.get_nodes_from_documents([doc])\n            all_chunked_nodes.extend(nodes)\n        else:\n            nodes = text_splitter.get_nodes_from_documents([doc])\n            all_chunked_nodes.extend(nodes)\n    print(f\"[Indexer] Total nodes to index: {len(all_chunked_nodes)}\")\n\n    if not all_chunked_nodes:\n        print(\"[ERROR] No nodes to index! Aborting persist step.\")\n        sys.exit(1)\n\n    # --- 6. Index & Persist ---\n    index = VectorStoreIndex(\n        nodes=all_chunked_nodes,\n        embed_model=embed_model,\n        show_progress=True\n    )\n    index.storage_context.persist(persist_dir=\"./data/index\")\n    index.storage_context.persist(persist_dir=str(INDEX_DIR))\n    print(\"[Indexer] Indexing complete! Prioritized tiers saved to ./data/index.\")\n\nif __name__ == \"__main__\":\n    index_directories()", "mimetype": "text/plain", "start_char_idx": 3294, "end_char_idx": 7402, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1176edad-bb91-4075-9762-2a0ac70355d4": {"__data__": {"id_": "1176edad-bb91-4075-9762-2a0ac70355d4", "embedding": null, "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b", "node_type": "4", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a6e734dd9ff94d4119971c89cdf397d8b23e3ee3ef580eb27b9d0c043766862f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "328c48b9-dca0-4348-9524-a3a84eb56146", "node_type": "1", "metadata": {}, "hash": "a4e66b39c5520e41dd65400a70468567cfcfe69bfaed4c2301a9da9c8a799ed6", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: services/kb.py\n# Purpose: Full-featured semantic KB for LlamaIndex (robust chunking, tiering, filtering, search ,embedding operations within the system)\n#           - Aggressive junk filtering & deduplication\n#           - Tier-aware, content-boosted ranking\n#           - Context-rich node metadata for intelligent agent answers\n#           - CLI & debug\n#\n# Upstream:\n#   - ENV: KB_EMBED_MODEL, OPENAI_EMBED_MODEL\n#   - Imports: hashlib, json, llama_index.core, llama_index.core.extractors, llama_index.core.ingestion, llama_index.core.node_parser, llama_index.embeddings.openai, logging, os, pathlib, services.config, shutil, sys, time, typing\n#\n# Downstream:\n#   - services.agent\n#   - services.context_injector\n#\n# Contents:\n#   - _kb_cli()\n#   - _vector_dim_current()\n#   - _vector_dim_stored()\n#   - api_reindex()\n#   - api_search()\n#   - embed_all()\n#   - ensure_vector_dim_initialized()\n#   - get_index()\n#   - get_recent_summaries()\n#   - index_is_valid()\n#   - query_index()\n#   - search()\n#   - should_index_file()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nimport json\nimport shutil\nimport logging\nfrom pathlib import Path\nfrom typing import List, Optional, Dict, Any\n\nfrom services.config import INDEX_DIR, INDEX_ROOT\n\nfrom llama_index.core import (\n    SimpleDirectoryReader,\n    StorageContext,\n    VectorStoreIndex,\n    load_index_from_storage,\n)\nfrom llama_index.core.extractors import TitleExtractor\nfrom llama_index.core.ingestion import IngestionPipeline\nfrom llama_index.core.node_parser import SentenceSplitter\nfrom llama_index.embeddings.openai import OpenAIEmbedding\n\n# \u2500\u2500\u2500 Logging \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nlogging.basicConfig(\n    level=logging.INFO,\n    format=\"%(asctime)s %(levelname)-7s %(name)s  %(message)s\",\n    datefmt=\"%Y-%m-%d %H:%M:%S\",\n)\nlogger = logging.getLogger(__name__)\nlogger.info(\"\ud83d\udd25 Robust KB loaded (Echo edition)\")\n\n# \u2500\u2500\u2500 Model configuration \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nMODEL_NAME = (\n    os.getenv(\"KB_EMBED_MODEL\")\n    or os.getenv(\"OPENAI_EMBED_MODEL\")\n    or \"text-embedding-3-large\"\n)\nif MODEL_NAME == \"text-embedding-3-large\":\n    EMBED_MODEL = OpenAIEmbedding(model=MODEL_NAME, dimensions=3072)\nelse:\n    EMBED_MODEL = OpenAIEmbedding(model=MODEL_NAME)\n\n# \u2500\u2500\u2500 Aggressive filtering \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nIGNORED_FILENAMES = {\n    \"package-lock.json\", \"yarn.lock\", \"pnpm-lock.yaml\", \".env\", \".DS_Store\", \".gitignore\",\n    \"poetry.lock\", \"Pipfile.lock\", \"requirements.txt\", \".dockerignore\",\n    \"Dockerfile\", \"Makefile\", \"tsconfig.json\", \"jsconfig.json\", \"node_modules\",\n    \"README.md\", \"LICENSE\", \"Thumbs.db\", \"desktop.ini\", \"mypy.ini\", \"pyrightconfig.json\",\n}\nIGNORED_EXTENSIONS = {\n    \".lock\", \".log\", \".exe\", \".bin\", \".jpg\", \".jpeg\", \".png\", \".gif\", \".pdf\", \".ico\",\n    \".tgz\", \".zip\", \".tar\", \".gz\", \".mp4\", \".mov\", \".wav\", \".pyc\", \".so\", \".dll\",\n}\nIGNORED_FOLDERS = {\n    \"node_modules\", \".git\", \"__pycache__\", \"dist\", \"build\", \".venv\", \"env\", \".mypy_cache\", \".pytest_cache\",\n}\nMAX_FILE_SIZE_MB = 2\n\ndef should_index_file(filepath: str, tier: str) -> bool:\n    filename = os.path.basename(filepath)\n    ext = os.path.splitext(filename)[1].lower()\n    if filename in IGNORED_FILENAMES or ext in IGNORED_EXTENSIONS:\n        return False\n    parts = filepath.replace(\"\\\\\", \"/\").split(\"/\")\n    if any(folder in parts for folder in IGNORED_FOLDERS):\n        return False\n    if os.path.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3568, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "328c48b9-dca0-4348-9524-a3a84eb56146": {"__data__": {"id_": "328c48b9-dca0-4348-9524-a3a84eb56146", "embedding": null, "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b", "node_type": "4", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a6e734dd9ff94d4119971c89cdf397d8b23e3ee3ef580eb27b9d0c043766862f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1176edad-bb91-4075-9762-2a0ac70355d4", "node_type": "1", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "eb43c1e7ae63a1064770a8cec49afbe3b3120b74e64c8aea9d950ae0c921e87f", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "98116255-8c8e-497b-8e49-1cc5077b841a", "node_type": "1", "metadata": {}, "hash": "264bb1647f268118e27506e61c4cfb5a4abe08d7118481beb9f2467861521bce", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "jpeg\", \".png\", \".gif\", \".pdf\", \".ico\",\n    \".tgz\", \".zip\", \".tar\", \".gz\", \".mp4\", \".mov\", \".wav\", \".pyc\", \".so\", \".dll\",\n}\nIGNORED_FOLDERS = {\n    \"node_modules\", \".git\", \"__pycache__\", \"dist\", \"build\", \".venv\", \"env\", \".mypy_cache\", \".pytest_cache\",\n}\nMAX_FILE_SIZE_MB = 2\n\ndef should_index_file(filepath: str, tier: str) -> bool:\n    filename = os.path.basename(filepath)\n    ext = os.path.splitext(filename)[1].lower()\n    if filename in IGNORED_FILENAMES or ext in IGNORED_EXTENSIONS:\n        return False\n    parts = filepath.replace(\"\\\\\", \"/\").split(\"/\")\n    if any(folder in parts for folder in IGNORED_FOLDERS):\n        return False\n    if os.path.isfile(filepath):\n        if os.path.getsize(filepath) > MAX_FILE_SIZE_MB * 1024 * 1024:\n            return False\n    if tier == \"code\":\n        return ext in {\".py\", \".js\", \".ts\", \".tsx\", \".java\", \".go\", \".cpp\", \".json\", \".md\"}\n    return True\n\n# \u2500\u2500\u2500 Index cache \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n_INDEX_CACHE: Optional[VectorStoreIndex] = None\n\n# \u2500\u2500\u2500 Scrub any stale model folders \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfor path in INDEX_ROOT.iterdir():\n    if path.is_dir() and path.name != MODEL_NAME:\n        logger.warning(\"Removing stale index folder %s\", path)\n        shutil.rmtree(path, ignore_errors=True)\n\n# \u2500\u2500\u2500 Ingestion pipeline \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nROOT = Path(__file__).resolve().parent\nCODE_DIRS = [ROOT.parent / p for p in (\"src\", \"backend\", \"frontend\", \"services\", \"routes\")]\nDOCS_DIR = ROOT.parent / \"docs\"\nCHUNK_SIZE, CHUNK_OVERLAP = 1024, 200\n\nINGEST_PIPELINE = IngestionPipeline(\n    transformations=[\n        TitleExtractor(llm=None),\n        SentenceSplitter(chunk_size=CHUNK_SIZE, chunk_overlap=CHUNK_OVERLAP),\n        EMBED_MODEL,\n    ]\n)\n\n# \u2500\u2500\u2500 Dimension helpers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef _vector_dim_current() -> int:\n    return len(EMBED_MODEL.get_text_embedding(\"dim_check\"))\n\ndef _vector_dim_stored() -> int:\n    vs_file = INDEX_DIR / \"vector_store.json\"\n    if not vs_file.exists():\n        return -1\n    store = json.loads(vs_file.read_text())\n    for rec in store.values():\n        if isinstance(rec, dict) and isinstance(rec.get(\"embedding\"), list):\n            return len(rec[\"embedding\"])\n    return -1\n\nEXPECTED_DIM = None  # placeholder\n\ndef ensure_vector_dim_initialized():\n    global EXPECTED_DIM\n    if EXPECTED_DIM is None:\n        EXPECTED_DIM = _vector_dim_current()\n\n# \u2500\u2500\u2500 Public helpers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef index_is_valid() -> bool:\n    stored = _vector_dim_stored()\n    valid = stored == EXPECTED_DIM and stored > 0\n    logger.info(\"[index_is_valid] stored=%s current=%d \u2192 %s\", stored, EXPECTED_DIM, valid)\n    return valid\n\ndef embed_all(verbose: bool = False) -> None:\n    \"\"\"Rebuild the full semantic index, applying file exclusion and content deduplication.\"\"\"", "mimetype": "text/plain", "start_char_idx": 2912, "end_char_idx": 5815, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "98116255-8c8e-497b-8e49-1cc5077b841a": {"__data__": {"id_": "98116255-8c8e-497b-8e49-1cc5077b841a", "embedding": null, "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b", "node_type": "4", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a6e734dd9ff94d4119971c89cdf397d8b23e3ee3ef580eb27b9d0c043766862f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "328c48b9-dca0-4348-9524-a3a84eb56146", "node_type": "1", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "12e59b42a48664cd886a6a8dfd52d7e472a759edd6cf8d85e0e9090e65bf0ae7", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "b170668e-3ac5-45e1-b447-9dfa31c91eee", "node_type": "1", "metadata": {}, "hash": "e9c72ffec81e059aca58d62c0042e6ddc78d884a854025b0a540c7ea98e0eee5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "loads(vs_file.read_text())\n    for rec in store.values():\n        if isinstance(rec, dict) and isinstance(rec.get(\"embedding\"), list):\n            return len(rec[\"embedding\"])\n    return -1\n\nEXPECTED_DIM = None  # placeholder\n\ndef ensure_vector_dim_initialized():\n    global EXPECTED_DIM\n    if EXPECTED_DIM is None:\n        EXPECTED_DIM = _vector_dim_current()\n\n# \u2500\u2500\u2500 Public helpers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef index_is_valid() -> bool:\n    stored = _vector_dim_stored()\n    valid = stored == EXPECTED_DIM and stored > 0\n    logger.info(\"[index_is_valid] stored=%s current=%d \u2192 %s\", stored, EXPECTED_DIM, valid)\n    return valid\n\ndef embed_all(verbose: bool = False) -> None:\n    \"\"\"Rebuild the full semantic index, applying file exclusion and content deduplication.\"\"\"\n    logger.info(\"\ud83d\udcda Re-indexing KB with model %s\", MODEL_NAME)\n\n    docs: List = []\n    tier_paths = [\n        (\"global\", [DOCS_DIR / \"generated/global_context.md\", DOCS_DIR / \"generated/global_context.auto.md\"]),\n        (\"context\", [ROOT.parent / \"context/\"]),\n        (\"project_summary\", [\n            DOCS_DIR / \"PROJECT_SUMMARY.md\",\n            DOCS_DIR / \"RELAY_CODE_UPDATE.md\",\n            DOCS_DIR / \"context-commandcenter.md\"\n        ]),\n        (\"project_docs\", [DOCS_DIR / \"imported/\", DOCS_DIR / \"kb/\", DOCS_DIR.glob(\"*.md\")]),\n        (\"code\", CODE_DIRS),\n    ]\n\n    # Aggressively filter and tag all docs with tier/metadata\n    for tier, paths in tier_paths:\n        for path in paths:\n            # Folder: Use LlamaIndex reader (recursively)\n            if isinstance(path, Path) and path.is_dir():\n                docs_ = SimpleDirectoryReader(str(path), recursive=True).load_data() if path.exists() else []\n                docs_ = [d for d in docs_ if should_index_file(\n                    d.metadata.get(\"file_path\") or d.metadata.get(\"filename\") or \"\", tier)]\n                for d in docs_:\n                    d.metadata = d.metadata or {}\n                    d.metadata[\"tier\"] = tier\n                docs.extend(docs_)\n            # Glob or single file\n            elif hasattr(path, \"__iter__\") and not isinstance(path, str):\n                for f in path:\n                    if f and os.path.isfile(f) and should_index_file(str(f), tier):\n                        with open(f, \"r\", encoding=\"utf-8\") as file:\n                            text = file.read()\n                        from llama_index.core import Document\n                        doc = Document(text=text, metadata={\"tier\": tier, \"file_path\": str(f)})\n                        docs.append(doc)\n            elif isinstance(path, Path) and path.is_file():\n                if should_index_file(str(path), tier):\n                    with open(path, \"r\", encoding=\"utf-8\") as file:\n                        text = file.read()\n                    from llama_index.core import Document\n                    doc = Document(text=text, metadata={\"tier\": tier, \"file_path\": str(path)})\n                    docs.append(doc)\n\n    # Deduplicate by file_path and text hash\n    seen = set()\n    deduped_docs = []\n    import hashlib\n    for d in docs:\n        fp = d.metadata.get(\"file_path\", \"NOFILE\")\n        content_hash = hashlib.md5(d.text.encode(\"utf-8\")).hexdigest()\n        key = (fp, content_hash)\n        if key not in seen:\n            seen.add(key)\n            deduped_docs.append(d)\n    docs = deduped_docs\n\n    # \u2500\u2500\u2500 NEW: Debug output for document loading \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n    logger.info(f\"[KB] Docs loaded for indexing: {len(docs)}\")\n    for d in docs[:5]:\n        logger.info(f\"[KB] Sample doc: {d.metadata.get('file_path')} ({len(d.text)} chars)\")\n    if len(docs) == 0:\n        logger.error(\"[KB] No valid docs to index! Aborting index build to avoid hang.\")\n        raise RuntimeError(\"No valid docs for KB index. Please check your docs/code directory population.\")", "mimetype": "text/plain", "start_char_idx": 5012, "end_char_idx": 8868, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "b170668e-3ac5-45e1-b447-9dfa31c91eee": {"__data__": {"id_": "b170668e-3ac5-45e1-b447-9dfa31c91eee", "embedding": null, "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b", "node_type": "4", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a6e734dd9ff94d4119971c89cdf397d8b23e3ee3ef580eb27b9d0c043766862f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "98116255-8c8e-497b-8e49-1cc5077b841a", "node_type": "1", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3aee93f8e796686adfae1f3063237edc34a51246321164ebd96654a392b61fb0", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "344c4d54-81ff-438d-8ea6-e15cb4bd7428", "node_type": "1", "metadata": {}, "hash": "96bbcd534f2aaaf92696c272a4eef887bc511e26d27bbe2a9322328a1bdc7a69", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Aborting index build to avoid hang.\")\n        raise RuntimeError(\"No valid docs for KB index. Please check your docs/code directory population.\")\n\n    # \u2500\u2500\u2500 NEW: Wrap embedding in try/except for logging \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n    try:\n        nodes = INGEST_PIPELINE.run(documents=docs)\n    except Exception as e:\n        logger.exception(\"[KB] Failed in INGEST_PIPELINE.run\")\n        raise\n\n    logger.info(\"Generated %d vector nodes\", len(nodes))\n    index = VectorStoreIndex(nodes=nodes, embed_model=EMBED_MODEL)\n    index.storage_context.persist(persist_dir=str(INDEX_DIR))\n    logger.info(\"\u2705 Index persisted \u2192 %s\", INDEX_DIR)\n\ndef get_index() -> VectorStoreIndex:\n    \"\"\"Return a cached or loaded index, rebuilding if missing or mismatched.\"\"\"\n    global _INDEX_CACHE\n    if _INDEX_CACHE is not None and index_is_valid():\n        return _INDEX_CACHE\n    if not index_is_valid():\n        embed_all()\n    ctx = StorageContext.from_defaults(persist_dir=str(INDEX_DIR))\n    _INDEX_CACHE = load_index_from_storage(ctx, embed_model=EMBED_MODEL)\n    return _INDEX_CACHE\n\n# \u2500\u2500\u2500 Core search used by routes \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef search(\n    query: str,\n    k: int = 8,\n    search_type: str = \"all\",\n    score_threshold: Optional[float] = None,\n    user_id: Optional[str] = None,\n    explain: bool = False,\n    min_global: int = 1,\n) -> List[dict]:\n    \"\"\"\n    Tier-priority semantic search: returns top results ordered by tier.\n    - Always tries to surface global/context/project summary results first.\n    - Still returns code/project_docs if more space is available.\n    - Junk/unknown tier results are de-prioritized unless nothing else is found.\n    \"\"\"\n    PRIORITY_TIERS = [\n        \"global\", \"context\", \"project_summary\", \"project_docs\", \"code\",\n    ]\n\n    qe = get_index().as_query_engine(similarity_top_k=k * 3)\n    raw = qe.query(query)\n    tiered: Dict[str, List[Any]] = {tier: [] for tier in PRIORITY_TIERS}\n    unknown = []\n    for n in getattr(raw, \"source_nodes\", []):\n        if score_threshold is not None and n.score < score_threshold:\n            continue\n        tier = n.node.metadata.get(\"tier\", \"unknown\")\n        hit = {\n            \"id\": n.node.node_id,\n            \"snippet\": n.node.text,\n            \"similarity\": n.score,\n            \"tier\": tier,\n            \"path\": n.node.metadata.get(\"file_path\"),\n            \"title\": n.node.metadata.get(\"title\", n.node.metadata.get(\"file_path\") or \"Untitled\"),\n            \"meta\": n.node.metadata,\n        }\n        if tier in PRIORITY_TIERS:\n            tiered[tier].append(hit)\n        else:\n            unknown.append(hit)\n\n    # 1. First, fill with all global/context/summary docs, up to at least min_global if available\n    prioritized = []\n    for tier in [\"global\", \"context\", \"project_summary\"]:\n        prioritized.extend(tiered[tier][:k])\n    if len(prioritized) < min_global:\n        for tier in [\"project_docs\"]:\n            prioritized.extend(tiered[tier][:k - len(prioritized)])\n    if len(prioritized) < k:\n        prioritized.extend(tiered[\"code\"][:k - len(prioritized)])\n    if len(prioritized) < k:\n        prioritized.extend(unknown[:(k - len(prioritized))])\n\n    # Remove exact duplicates (by snippet or file path)\n    seen = set()\n    out = []\n    for h in prioritized:\n        key = (h[\"snippet\"], h[\"path\"])\n        if key not in seen:\n            seen.add(key)\n            out.append(h)\n\n    # If explain, add debug info\n    if explain:\n        print(\"[KB Search Debug]\")\n        for idx, h in enumerate(out):\n            print(f\"{idx+1:2d}.", "mimetype": "text/plain", "start_char_idx": 8723, "end_char_idx": 12265, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "344c4d54-81ff-438d-8ea6-e15cb4bd7428": {"__data__": {"id_": "344c4d54-81ff-438d-8ea6-e15cb4bd7428", "embedding": null, "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b", "node_type": "4", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a6e734dd9ff94d4119971c89cdf397d8b23e3ee3ef580eb27b9d0c043766862f", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "b170668e-3ac5-45e1-b447-9dfa31c91eee", "node_type": "1", "metadata": {"file_path": "/app/services/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 15449, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "f75ec271b074f2d64613bba5b1414f371a7b5417b02ec6c686a70625aae68f53", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "{h['tier']}: {h['title']} (score={h['similarity']:.3f})\")\n            print(f\"    Path: {h['path']}\")\n            print(f\"    Snippet: {h['snippet'][:200].replace(chr(10),' ')}\")\n        print(f\"\\nReturned {len(out)} results (out of {len(prioritized)})\")\n\n    return out[:k]\n\ndef api_search(query: str, k: int = 4, search_type: str = \"all\") -> List[dict]:\n    return search(query=query, k=k, search_type=search_type)\n\ndef query_index(query: str, k: int = 4) -> str:\n    \"\"\"Return formatted search snippets for a query.\"\"\"\n    results = search(query, k=k)\n    return \"\\n\\n\".join(f\"{r['title']}:\\n{r['snippet']}\" for r in results)\n\ndef api_reindex(verbose: bool = False) -> dict:\n    global _INDEX_CACHE\n    embed_all(verbose=verbose)\n    _INDEX_CACHE = None\n    return {\n        \"status\": \"ok\",\n        \"message\": \"Re-index complete\",\n        \"index_dir\": str(INDEX_DIR),\n        \"model\": MODEL_NAME,\n    }\n\ndef get_recent_summaries(user_id: str) -> list[str]:\n    return [\"No summary implemented yet.\"]\n\n# \u2500\u2500\u2500 CLI tools & debugging \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef _kb_cli():\n    import sys\n    import time\n    if len(sys.argv) > 1 and sys.argv[1] == \"search\":\n        q = \" \".join(sys.argv[2:]) or \"test\"\n        print(f\"\\n[KB CLI] Query: {q}\\n\")\n        t0 = time.time()\n        hits = search(q, k=10, explain=True)\n        print(f\"\u23f1\ufe0f  Search time: {time.time() - t0:.2f}s\\n\")\n        for h in hits:\n            print(f\"{h['title']} (score={h['similarity']:.2f}): {h['snippet'][:120].replace(chr(10),' ')}\u2026\")\n    else:\n        print(\"[KB CLI] Rebuilding index...\")\n        embed_all(verbose=True)\n        print(\"Index rebuild complete.\")\n\nif __name__ == \"__main__\":\n    _kb_cli()", "mimetype": "text/plain", "start_char_idx": 12266, "end_char_idx": 13968, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e99b5dc3-1c82-43fb-a29b-2ab9d1020e04": {"__data__": {"id_": "e99b5dc3-1c82-43fb-a29b-2ab9d1020e04", "embedding": null, "metadata": {"file_path": "/app/services/logger.py", "file_name": "logger.py", "file_type": "text/x-python", "file_size": 1302, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "e8f2fd47-aa00-4e98-b2c9-e19ba9fe6cc5", "node_type": "4", "metadata": {"file_path": "/app/services/logger.py", "file_name": "logger.py", "file_type": "text/x-python", "file_size": 1302, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "791bd06563494ddc207922c317aae3abb8449d944d6c235a2334a8291e78ae94", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: logger.py\n# Directory: services\n# Purpose: # Purpose: Provide centralized logging utilities for different levels of application events and errors.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: datetime, logging\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - log_error()\n#   - log_event()\n#   - log_info()\n#   - log_warning()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport logging\nfrom datetime import datetime\n\n# Basic logging config\nlogging.basicConfig(\n    level=logging.INFO,\n    format=\"%(asctime)s - %(levelname)s - %(message)s\",\n)\n\ndef log_info(message: str):\n    logging.info(message)\n\ndef log_warning(message: str):\n    logging.warning(message)\n\ndef log_error(message: str):\n    logging.error(message)\n\ndef log_event(event: str, data: dict = {}):\n    timestamp = datetime.utcnow().isoformat()\n    logging.info(f\"{timestamp} - EVENT: {event} | DATA: {data}\")", "mimetype": "text/plain", "start_char_idx": 1, "end_char_idx": 989, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "73049401-6879-4776-9960-1b650fa33b9d": {"__data__": {"id_": "73049401-6879-4776-9960-1b650fa33b9d", "embedding": null, "metadata": {"file_path": "/app/services/logs.py", "file_name": "logs.py", "file_type": "text/x-python", "file_size": 2533, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fd14f87f-0312-4d2c-b90f-55dbc54df855", "node_type": "4", "metadata": {"file_path": "/app/services/logs.py", "file_name": "logs.py", "file_type": "text/x-python", "file_size": 2533, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "c6fe193f2d9eb125abae189f3990ab0fae1007d7655572affec12c7f1a8c7084", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: logs.py\n# Directory: services\n# Purpose: # Purpose: Manage logging of application activities and exceptions, and provide access to recent log data.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: datetime, json, pathlib, requests, traceback\n#\n# Downstream:\n#   - routes.context\n#   - routes.logs\n#\n# Contents:\n#   - get_recent_logs()\n#   - log_and_refresh()\n#   - log_entry()\n#   - log_exception()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom datetime import datetime\nimport json\nimport pathlib\nimport requests\nimport traceback\n\nLOG_PATH = pathlib.Path(\"logs/session_log.jsonl\")\nLOG_PATH.parent.mkdir(parents=True, exist_ok=True)\n\ndef log_entry(source: str, message: str, level: str = \"INFO\", extra: dict = None):\n    \"\"\"\n    Write a new line to the session log, optionally with level and extra fields.\n    \"\"\"\n    entry = {\n        \"time\": datetime.utcnow().isoformat(),\n        \"source\": source,\n        \"level\": level,\n        \"message\": message,\n    }\n    if extra:\n        entry.update(extra)\n    with LOG_PATH.open(\"a\", encoding=\"utf-8\") as f:\n        f.write(json.dumps(entry) + \"\\n\")\n\ndef log_exception(source: str, exc: Exception, context: str = \"\"):\n    \"\"\"\n    Log an exception with stack trace and context.\n    \"\"\"\n    stack = traceback.format_exc()\n    log_entry(\n        source=source,\n        message=f\"Exception: {exc} | Context: {context}\",\n        level=\"ERROR\",\n        extra={\"stack_trace\": stack}\n    )\n\ndef get_recent_logs(n=100, level_filter=None):\n    \"\"\"\n    Retrieve the last n log entries, optionally filtering by log level.\n    \"\"\"\n    if not LOG_PATH.exists():\n        return []\n    lines = LOG_PATH.read_text(encoding=\"utf-8\").splitlines()\n    logs = [json.loads(line) for line in lines[-n:]]\n    if level_filter:\n        logs = [log for log in logs if log.get(\"level\") == level_filter]\n    return logs\n\ndef log_and_refresh(source: str, message: str):\n    log_entry(source, message)\n    try:\n        requests.post(\"http://localhost:8000/context/update\", timeout=2)\n    except Exception as e:\n        log_exception(\"log_and_refresh\", e, \"Failed to auto-refresh context\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2222, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4b7295a8-08e2-485c-bd36-e6d667b6ad89": {"__data__": {"id_": "4b7295a8-08e2-485c-bd36-e6d667b6ad89", "embedding": null, "metadata": {"file_path": "/app/services/memory.py", "file_name": "memory.py", "file_type": "text/x-python", "file_size": 2530, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a02b3d32-5e53-46e4-bd12-3e64f02dc01d", "node_type": "4", "metadata": {"file_path": "/app/services/memory.py", "file_name": "memory.py", "file_type": "text/x-python", "file_size": 2530, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b37588e277bee67bdb9b6769e1e478d9d2324e17076771bbe47eb05be4354edc", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: memory.py\n# Directory: services\n# Purpose: # Purpose: Manage and log memory-related data entries for debugging and tracking purposes.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: datetime, json, os\n#\n# Downstream:\n#   - agents.janitor_agent\n#\n# Contents:\n#   - debug_log_entry()\n#   - save_memory_entry()\n#   - summarize_memory_entry()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nimport json\nimport datetime\n\nSESSION_DIR = \"./logs/sessions\"\n\ndef summarize_memory_entry(\n    prompt: str,\n    response: str,\n    context: str = \"\",\n    actions: list = None,\n    user_id: str = \"anonymous\",\n    topics: list = None,\n    files: list = None,\n    context_files: list = None,\n    used_global_context: bool = False,\n    fallback: bool = False,\n    prompt_length: int = None,\n    response_length: int = None\n):\n    \"\"\"\n    Build a detailed memory entry for each session event.\n    Includes advanced context diagnostics for frontend insight.\n    \"\"\"\n    return {\n        \"timestamp\": datetime.datetime.utcnow().isoformat(),\n        \"user\": user_id,\n        \"query\": prompt,\n        \"topics\": topics or [],\n        \"files\": files or [],\n        \"context_files\": context_files or [],\n        \"context_length\": len(context or \"\"),\n        \"prompt_length\": prompt_length or (len(prompt) + len(context or \"\")),\n        \"response_length\": response_length or len(response or \"\"),\n        \"used_global_context\": used_global_context,\n        \"fallback\": fallback,\n        \"actions\": actions or [],\n        \"summary\": response  # Optionally replace with GPT summary if you want\n    }\n\ndef save_memory_entry(user_id: str, summary: dict):\n    \"\"\"\n    Write a single memory entry to the per-user log file as JSONL.\n    \"\"\"\n    os.makedirs(SESSION_DIR, exist_ok=True)\n    path = os.path.join(SESSION_DIR, f\"{user_id}.jsonl\")\n    with open(path, \"a\") as f:\n        f.write(json.dumps(summary) + \"\\n\")\n\n# === Utility: For debugging/logging what gets stored ===\ndef debug_log_entry(entry: dict):\n    print(\"[Memory] Log Entry Debug:\")\n    print(json.dumps(entry, indent=2)[:1200], \"...\\n\")  # Print first 1200 chars", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2219, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "be0a21e4-92d8-4cc7-9b30-d4d8e8736b7e": {"__data__": {"id_": "be0a21e4-92d8-4cc7-9b30-d4d8e8736b7e", "embedding": null, "metadata": {"file_path": "/app/services/neo4j_driver.py", "file_name": "neo4j_driver.py", "file_type": "text/x-python", "file_size": 2764, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "b5dfcd96-7560-4c64-8d7b-eb37bcfb251b", "node_type": "4", "metadata": {"file_path": "/app/services/neo4j_driver.py", "file_name": "neo4j_driver.py", "file_type": "text/x-python", "file_size": 2764, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "01a1f897ceed8b92d3ab8f71d2658f67e4db31a918043276e4ebd1215dcb7293", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: neo4j_driver.py\n# Directory: services\n# Purpose: # Purpose: Provides an interface for managing Neo4j database sessions and executing read/write operations.\n#\n# Upstream:\n#   - ENV: NEO4J_PASSWORD, NEO4J_URI, NEO4J_USER\n#   - Imports: contextlib, core.logging, neo4j, os\n#\n# Downstream:\n#   - agents.trainer_agent\n#   - services.graph\n#   - test_graph_neoagent\n#\n# Contents:\n#   - execute_read()\n#   - execute_write()\n#   - get_session()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nimport os\nfrom neo4j import AsyncGraphDatabase, AsyncDriver\nfrom contextlib import asynccontextmanager\nfrom core.logging import log_event\n\n# === Load Neo4j credentials from environment ===\nNEO4J_URI = os.getenv(\"NEO4J_URI\", \"neo4j+s://localhost:7687\")\nNEO4J_USER = os.getenv(\"NEO4J_USER\", \"neo4j\")\nNEO4J_PASSWORD = os.getenv(\"NEO4J_PASSWORD\", \"password\")\n\n# === Initialize Neo4j driver (singleton) ===\n# Aura users: DO NOT include `database=\"neo4j\"` in session()\n_driver: AsyncDriver = AsyncGraphDatabase.driver(\n    NEO4J_URI,\n    auth=(NEO4J_USER, NEO4J_PASSWORD)\n)\n\n# Optional export if needed elsewhere\nneo4j_driver = _driver\n\n# === Async context manager for clean session usage ===\n@asynccontextmanager\nasync def get_session():\n    async with _driver.session() as session:\n        yield session\n\n# === Execute a read query and return results ===\nasync def execute_read(query: str, parameters: dict = {}) -> list[dict]:\n    try:\n        async with get_session() as session:\n            result = await session.execute_read(lambda tx: tx.run(query, parameters))\n            return [record.data() async for record in result]\n    except Exception as e:\n        print(\"\u274c Neo4j read error:\", e)\n        log_event(\"neo4j_read_fail\", {\"error\": str(e), \"query\": query})\n        return []\n\n# === Execute a write query with debug logging ===\nasync def execute_write(query: str, parameters: dict = {}) -> None:\n    try:\n        print(\"\ud83d\ude80 Neo4j write executing...\")\n        print(\"\ud83e\uddfe Cypher:\", query[:120] + \"...\" if len(query) > 120 else query)\n        print(\"\ud83d\udce6 Params:\", parameters)\n        async with get_session() as session:\n            await session.execute_write(lambda tx: tx.run(query, parameters))\n    except Exception as e:\n        print(\"\u274c Neo4j write error:\", e)\n        log_event(\"neo4j_write_fail\", {\"error\": str(e), \"query\": query})", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2442, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "d07314e8-e784-46df-926e-dc8591b82d1d": {"__data__": {"id_": "d07314e8-e784-46df-926e-dc8591b82d1d", "embedding": null, "metadata": {"file_path": "/app/services/queue.py", "file_name": "queue.py", "file_type": "text/x-python", "file_size": 867, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "59b1af06-1a16-42b9-b599-4bb7b62dcc41", "node_type": "4", "metadata": {"file_path": "/app/services/queue.py", "file_name": "queue.py", "file_type": "text/x-python", "file_size": 867, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "4e28a02550173f34227cf9acf5073a68ad550ffa50b58ae01d3d52005694275a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: queue.py\n# Directory: services\n# Purpose: # Purpose: Provides functionality to manage and manipulate queue operations.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: \u2014\n#\n# Downstream:\n#   - agents.mcp_agent\n#\n# Contents:\n#   - queue_action()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ndef queue_action(*args, **kwargs):\n    # TODO: Replace with actual queue logic\n    print(\"queue_action called with:\", args, kwargs)\n    return None", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 554, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "bd81ef25-52d1-4fd7-8fac-d540698dea85": {"__data__": {"id_": "bd81ef25-52d1-4fd7-8fac-d540698dea85", "embedding": null, "metadata": {"file_path": "/app/services/semantic_retriever.py", "file_name": "semantic_retriever.py", "file_type": "text/x-python", "file_size": 2138, "creation_date": "2025-07-13", "last_modified_date": "2025-07-13", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fd4e44fa-6c6b-4cc1-a168-a755fd12cacd", "node_type": "4", "metadata": {"file_path": "/app/services/semantic_retriever.py", "file_name": "semantic_retriever.py", "file_type": "text/x-python", "file_size": 2138, "creation_date": "2025-07-13", "last_modified_date": "2025-07-13", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "aa7fa67dd99872632bfcb972127e7a4b197fb8eff711787baed0c0c59dec3840", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: semantic_retriever.py\n# Directory: services\n#\n# Purpose: # Purpose: Provide functionality to retrieve and handle semantic contexts using embeddings for natural language processing tasks.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: llama_index.core, llama_index.embeddings.openai, sys, traceback\n#\n# Downstream:\n#   - services.context_injector\n#\n# Contents:\n#   - get_semantic_context()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nfrom llama_index.core import load_index_from_storage, StorageContext\nfrom llama_index.embeddings.openai import OpenAIEmbedding\nimport sys\nimport traceback\n\n# === Configuration ===\nINDEX_DIR = \"./data/index\"\nEMBED_MODEL_NAME = \"text-embedding-3-large\"\n\n# === Embedding Model and Storage Context ===\n_embed_model = OpenAIEmbedding(model=EMBED_MODEL_NAME)\ntry:\n    storage_context = StorageContext.from_defaults(persist_dir=INDEX_DIR)\n    _index = load_index_from_storage(storage_context=storage_context, embed_model=_embed_model)\nexcept Exception as e:\n    print(\"LlamaIndex load_index_from_storage FAILED:\")\n    traceback.print_exc()\n    sys.exit(1)\n\n# === Main Retrieval Function ===\ndef get_semantic_context(query: str, top_k: int = 5) -> str:\n    \"\"\"\n    Retrieves the top_k most semantically relevant code/docs chunks for the query.\n    Returns concatenated context string (with file path/title if possible).\n    \"\"\"\n    results = _index.query(query, top_k=top_k)\n    if not results:\n        return \"No semantically relevant context found.\"\n    lines = []\n    for r in results:\n        meta = r.metadata or {}\n        title = meta.get(\"file_path\") or meta.get(\"tier\") or \"Unknown Source\"\n        lines.append(f\"### {title}\\n{r.text.strip()}\")\n    return \"\\n\\n\".join(lines)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1827, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "243e53fb-718c-46c6-847b-fdc198e3e897": {"__data__": {"id_": "243e53fb-718c-46c6-847b-fdc198e3e897", "embedding": null, "metadata": {"file_path": "/app/services/settings.py", "file_name": "settings.py", "file_type": "text/x-python", "file_size": 1564, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "eab75e70-88b5-4292-93c5-62ca8097f72e", "node_type": "4", "metadata": {"file_path": "/app/services/settings.py", "file_name": "settings.py", "file_type": "text/x-python", "file_size": 1564, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3612f55c86185618590efd1758425c377c436bef71f08cb29b58f31cfd2fe3e2", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: settings.py\n# Directory: services\n# Purpose: # Purpose: Manage application configuration and environment variable loading.\n#\n# Upstream:\n#   - ENV: GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, GOOGLE_REDIRECT_URI, OPENAI_API_KEY\n#   - Imports: dotenv, os, pathlib\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - assert_env()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nimport os\nfrom dotenv import load_dotenv\nfrom pathlib import Path\n\n# === Load .env file automatically at app startup ===\nload_dotenv(dotenv_path=Path(__file__).resolve().parents[1] / \".env\")\n\n# === Centralized environment variables ===\nOPENAI_API_KEY = os.getenv(\"OPENAI_API_KEY\")\nGOOGLE_CLIENT_ID = os.getenv(\"GOOGLE_CLIENT_ID\")\nGOOGLE_CLIENT_SECRET = os.getenv(\"GOOGLE_CLIENT_SECRET\")\nGOOGLE_REDIRECT_URI = os.getenv(\"GOOGLE_REDIRECT_URI\", \"http://localhost:3000/auth/callback\")\n\n# === Validation helper ===\ndef assert_env(var, hint=\"\"):\n    value = os.getenv(var)\n    if not value:\n        raise RuntimeError(f\"Missing required env var: {var}. {hint}\")\n    return value\n\n# Example usage:\n# assert_env(\"OPENAI_API_KEY\", \"Set in .env or as system environment variable\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1254, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "352e50bd-4041-43e6-baba-ad7f3182fda5": {"__data__": {"id_": "352e50bd-4041-43e6-baba-ad7f3182fda5", "embedding": null, "metadata": {"file_path": "/app/services/summarize_memory.py", "file_name": "summarize_memory.py", "file_type": "text/x-python", "file_size": 1492, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "35bff56c-aa2c-471f-ac7e-38b11f6e9623", "node_type": "4", "metadata": {"file_path": "/app/services/summarize_memory.py", "file_name": "summarize_memory.py", "file_type": "text/x-python", "file_size": 1492, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "99bf0c5dfeb7052c11804d08b18cf750033b4c2c8f40a7f09437b351014ac07e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: summarize_memory.py\n# Directory: services\n# Purpose: # Purpose: Provide a summary of memory usage and management within the system, utilizing OpenAI services for analysis.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: openai, os, utils.openai_client\n#\n# Downstream:\n#   - services.context_injector\n#\n# Contents:\n#   - summarize_memory_entry()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nimport os\nfrom openai import AsyncOpenAI\nfrom utils.openai_client import create_openai_client\n\nclient = create_openai_client()\n\nasync def summarize_memory_entry(question: str, response: str, context: str = \"\") -> str:\n    prompt = f\"\"\"\nYou are a concise summarizer of agent interactions.\n\nSummarize this user query and response in 1\u20132 sentences for memory recall:\n\nQ: {question}\n\nAgent response: {response}\n\nContext (if needed):\n{context[:500]}\n\nSummary:\n\"\"\"\n    result = await client.chat.completions.create(\n        model=\"gpt-4o\",\n        messages=[{\"role\": \"user\", \"content\": prompt}],\n        temperature=0.2\n    )\n    return result.choices[0].message.content.strip()", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1179, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "4045acca-7c7c-4c8e-870b-59c95effb7ab": {"__data__": {"id_": "4045acca-7c7c-4c8e-870b-59c95effb7ab", "embedding": null, "metadata": {"file_path": "/app/routes/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "839cf95f-3d0c-4f49-914e-146ce49a500a", "node_type": "4", "metadata": {"file_path": "/app/routes/__init__.py", "file_name": "__init__.py", "file_type": "text/x-python", "file_size": 0, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5707168f56c2cda97361e7bf3800115b965e05fee07e14b5aa1539baf3dcd998", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 0, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "745196d7-0177-4262-a579-ceb0c2fed024": {"__data__": {"id_": "745196d7-0177-4262-a579-ceb0c2fed024", "embedding": null, "metadata": {"file_path": "/app/routes/admin.py", "file_name": "admin.py", "file_type": "text/x-python", "file_size": 8127, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "370f91a2-e6c6-44fd-bb00-c3e402b480ac", "node_type": "4", "metadata": {"file_path": "/app/routes/admin.py", "file_name": "admin.py", "file_type": "text/x-python", "file_size": 8127, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "99ded163ad61ef71acc7a5357cae8d81c5b4477d48b7478c73088278c4134b48", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "aca7aa55-e0fd-4bbf-91e4-26b64c82075a", "node_type": "1", "metadata": {}, "hash": "6ec4d619890a43382956cfcd1ce971f806be528090e26f680da1425e2f4a1175", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: admin.py\n# Directory: routes\n# Purpose: # Purpose: Provides administrative functionalities like logging, indexing, and system health checks for the web service.\n# Admin and Ops Endpoints for Relay Command Center\n# Secure, auditable, and environment-driven maintenance tools.\n# ALL endpoints require a valid API key (X-API-Key header, matches API_KEY env var).\n# Review and update environment variables in Railway/Vercel/Codespaces as needed.\n\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: datetime, fastapi, fastapi.responses, os, pathlib, platform, psutil, services.config, services.indexer, shutil, zipfile\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - backup_index()\n#   - clean_index()\n#   - download_log()\n#   - health_check()\n#   - log_admin_event()\n#   - require_api_key()\n#   - trigger_reindex()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nimport shutil\nimport psutil\nimport platform\nimport zipfile\nfrom fastapi import APIRouter, HTTPException, Request, status, Header, Depends\nfrom fastapi.responses import FileResponse\nfrom pathlib import Path\nfrom datetime import datetime\n\nfrom services.config import INDEX_DIR\n\n# ------------------------------------------------------------------------\n# ENV/CONFIG SETUP\n# ------------------------------------------------------------------------\nrouter = APIRouter(prefix=\"/admin\", tags=[\"admin-ops\"])\n\nDATA_DIR = INDEX_DIR.parent\nADMIN_LOG = DATA_DIR / \"admin_events.log\"\n\n# ------------------------------------------------------------------------\n# SECURITY: Require valid API Key (X-API-Key header) for all admin ops\n# ------------------------------------------------------------------------\ndef require_api_key(x_api_key: str = Header(..., alias=\"X-API-Key\")):\n    api_key = os.environ.get(\"API_KEY\")\n    if not api_key or x_api_key != api_key:\n        raise HTTPException(status_code=403, detail=\"Invalid or missing API key.\")\n\n# ------------------------------------------------------------------------\n# UTIL: Audit logging\u2014append all events and errors\n# ------------------------------------------------------------------------\ndef log_admin_event(msg: str):\n    timestamp = datetime.utcnow().isoformat()\n    log_entry = f\"{timestamp} | {msg}\\n\"\n    with ADMIN_LOG.open(\"a\", encoding=\"utf-8\") as f:\n        f.write(log_entry)\n\n# ------------------------------------------------------------------------\n# ENDPOINT: Clean LlamaIndex index and SQLite DBs\n# ------------------------------------------------------------------------\n@router.post(\"/clean_index\")\nasync def clean_index(\n    request: Request,\n    user: str = \"\",\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Deletes all files in the index directory and SQLite DBs.\n    Requires valid X-API-Key header.\n    \"\"\"\n    deleted_files = []\n    # --- Index directory wipe ---\n    if INDEX_DIR.exists():\n        for f in INDEX_DIR.glob(\"*\"):\n            try:\n                if f.is_file():\n                    f.unlink()\n                    deleted_files.append(str(f))\n                elif f.is_dir():\n                    shutil.rmtree(f)\n                    deleted_files.append(str(f))\n            except Exception as e:\n                log_admin_event(f\"[ERROR] Failed to delete {f}: {e}\")\n    # --- SQLite DBs wipe ---\n    for sfile in DATA_DIR.glob(\"*.sqlite*\"):\n        try:\n            sfile.unlink()\n            deleted_files.append(str(sfile))\n        except Exception as e:\n            log_admin_event(f\"[ERROR] Failed to delete {sfile}: {e}\")\n\n    # --- Audit log ---\n    client_ip = request.client.host if request.client else \"unknown\"\n    now = datetime.utcnow().isoformat()\n    log_admin_event(f\"[CLEAN_INDEX] {now} by {user or 'unknown'} from {client_ip}: Deleted {len(deleted_files)} files\")\n\n    return {\n        \"status\": \"ok\",\n        \"message\": \"Index and SQLite files cleaned.\",\n        \"deleted_files\": deleted_files,\n        \"timestamp\": now,\n        \"user\": user,\n        \"ip\": client_ip\n    }\n\n# ------------------------------------------------------------------------\n# ENDPOINT: Trigger Index Rebuild (now fully implemented)\n# ------------------------------------------------------------------------\nfrom services.indexer import index_directories  # <-- add this import at the top if missing\n\n@router.post(\"/trigger_reindex\")\nasync def trigger_reindex(\n    request: Request,\n    user: str = \"\",\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Triggers a rebuild of the LlamaIndex (semantic KB).\n    Returns status/result.\n    \"\"\"\n    try:\n        index_directories()  # This will run synchronously (blocking until finished)\n        log_admin_event(f\"[REINDEX_TRIGGER] SUCCESS by {user or 'unknown'} from {request.client.host}\")\n        return {\"status\": \"ok\", \"message\": \"Reindex complete.\"}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4880, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aca7aa55-e0fd-4bbf-91e4-26b64c82075a": {"__data__": {"id_": "aca7aa55-e0fd-4bbf-91e4-26b64c82075a", "embedding": null, "metadata": {"file_path": "/app/routes/admin.py", "file_name": "admin.py", "file_type": "text/x-python", "file_size": 8127, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "370f91a2-e6c6-44fd-bb00-c3e402b480ac", "node_type": "4", "metadata": {"file_path": "/app/routes/admin.py", "file_name": "admin.py", "file_type": "text/x-python", "file_size": 8127, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "99ded163ad61ef71acc7a5357cae8d81c5b4477d48b7478c73088278c4134b48", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "745196d7-0177-4262-a579-ceb0c2fed024", "node_type": "1", "metadata": {"file_path": "/app/routes/admin.py", "file_name": "admin.py", "file_type": "text/x-python", "file_size": 8127, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7a28b40a91695488d005bfebceda404c9023ae1af63886bd23be82b1bac87297", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\",\n        \"deleted_files\": deleted_files,\n        \"timestamp\": now,\n        \"user\": user,\n        \"ip\": client_ip\n    }\n\n# ------------------------------------------------------------------------\n# ENDPOINT: Trigger Index Rebuild (now fully implemented)\n# ------------------------------------------------------------------------\nfrom services.indexer import index_directories  # <-- add this import at the top if missing\n\n@router.post(\"/trigger_reindex\")\nasync def trigger_reindex(\n    request: Request,\n    user: str = \"\",\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Triggers a rebuild of the LlamaIndex (semantic KB).\n    Returns status/result.\n    \"\"\"\n    try:\n        index_directories()  # This will run synchronously (blocking until finished)\n        log_admin_event(f\"[REINDEX_TRIGGER] SUCCESS by {user or 'unknown'} from {request.client.host}\")\n        return {\"status\": \"ok\", \"message\": \"Reindex complete.\"}\n    except Exception as exc:\n        log_admin_event(f\"[REINDEX_TRIGGER] ERROR by {user or 'unknown'} from {request.client.host}: {exc}\")\n        raise HTTPException(status_code=500, detail=f\"Reindex failed: {exc}\")\n\n\n# ------------------------------------------------------------------------\n# ENDPOINT: Health Check (disk, CPU, memory, config summary)\n# ------------------------------------------------------------------------\n@router.get(\"/health_check\")\nasync def health_check(\n    request: Request,\n    user: str = \"\",\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Returns backend, disk, memory, and config health for diagnostics.\n    Requires valid X-API-Key header.\n    \"\"\"\n    health = {\n        \"system\": platform.system(),\n        \"release\": platform.release(),\n        \"cpu_percent\": psutil.cpu_percent(),\n        \"memory\": dict(psutil.virtual_memory()._asdict()),\n        \"disk\": dict(psutil.disk_usage('/')._asdict()),\n        \"python_version\": platform.python_version(),\n        \"env\": {\n            \"index_dir\": str(INDEX_DIR),\n            \"data_dir\": str(DATA_DIR),\n        }\n    }\n    log_admin_event(f\"[HEALTH_CHECK] by {user or 'unknown'} from {request.client.host}\")\n    return health\n\n# ------------------------------------------------------------------------\n# ENDPOINT: Download Audit Log\n# ------------------------------------------------------------------------\n@router.get(\"/download_log\")\nasync def download_log(\n    request: Request,\n    user: str = \"\",\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Allows secure download of admin event log.\n    Requires valid X-API-Key header.\n    \"\"\"\n    if not ADMIN_LOG.exists():\n        raise HTTPException(status_code=404, detail=\"No log file found.\")\n    log_admin_event(f\"[DOWNLOAD_LOG] by {user or 'unknown'} from {request.client.host}\")\n    return FileResponse(str(ADMIN_LOG), media_type=\"text/plain\", filename=\"admin_events.log\")\n\n# ------------------------------------------------------------------------\n# ENDPOINT: Backup Index Directory (zip)\n# ------------------------------------------------------------------------\n@router.post(\"/backup_index\")\nasync def backup_index(\n    request: Request,\n    user: str = \"\",\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Zips the index directory for backup/offline restore.\n    Requires valid X-API-Key header.\n    \"\"\"\n    backup_path = DATA_DIR / f\"index_backup_{datetime.utcnow().strftime('%Y%m%d%H%M%S')}.zip\"\n    with zipfile.ZipFile(backup_path, \"w\") as zipf:\n        if INDEX_DIR.exists():\n            for f in INDEX_DIR.rglob(\"*\"):\n                if f.is_file():\n                    zipf.write(f, f.relative_to(DATA_DIR))\n    log_admin_event(f\"[BACKUP_INDEX] by {user or 'unknown'} from {request.client.host}\")\n    return {\n        \"status\": \"ok\",\n        \"message\": f\"Index directory backed up to {backup_path.name}\",\n        \"backup_file\": str(backup_path)\n    }", "mimetype": "text/plain", "start_char_idx": 3948, "end_char_idx": 7809, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "22b01e02-8219-4cab-b88e-69b270b6f690": {"__data__": {"id_": "22b01e02-8219-4cab-b88e-69b270b6f690", "embedding": null, "metadata": {"file_path": "/app/routes/admin_routes.py", "file_name": "admin_routes.py", "file_type": "text/x-python", "file_size": 1415, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "d9f1599b-c6df-4a72-93f6-553de0f14938", "node_type": "4", "metadata": {"file_path": "/app/routes/admin_routes.py", "file_name": "admin_routes.py", "file_type": "text/x-python", "file_size": 1415, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "941a1ce0d4013bb53d4fc85777c986da35ccbb65ef0617708c8de3d2546e3e2d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: admin_routes.py\n# Directory: routes\n# Purpose: Provide route handlers for administrative functionalities within the FastAPI application.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: fastapi, fastapi.responses, os, subprocess\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - generate_auto_context()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter, Depends\nfrom fastapi.responses import JSONResponse\nimport subprocess\nimport os\n\nrouter = APIRouter(prefix=\"/admin\", tags=[\"admin\"])\n\n@router.post(\"/generate_auto_context\")\ndef generate_auto_context():\n    try:\n        result = subprocess.run(\n            [\"python\", \"scripts/generate_global_context.auto.py\"],\n            capture_output=True, text=True, check=True\n        )\n        return JSONResponse({\"status\": \"success\", \"output\": result.stdout})\n    except subprocess.CalledProcessError as e:\n        return JSONResponse(\n            {\"status\": \"error\", \"detail\": e.stderr}, status_code=500\n        )", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1098, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "5e225d9b-4bc3-4302-8888-3f797afc3788": {"__data__": {"id_": "5e225d9b-4bc3-4302-8888-3f797afc3788", "embedding": null, "metadata": {"file_path": "/app/routes/ask.py", "file_name": "ask.py", "file_type": "text/x-python", "file_size": 8320, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3259b3ea-190f-4370-b8ca-a2bf6099ee91", "node_type": "4", "metadata": {"file_path": "/app/routes/ask.py", "file_name": "ask.py", "file_type": "text/x-python", "file_size": 8320, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3d2b825ca115c7cf52879c9d1043d222eaffcdcbc89fc4838ab31189cc2565cf", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "6aa4aa57-3a80-4e79-a9e2-6c5484435d57", "node_type": "1", "metadata": {}, "hash": "36dca2e0d4c3dff37f74c69a68666d52b5aaad12280e0b47c297470b81ee8621", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: ask.py\n# Directory: routes\n# Purpose: # Purpose: Provides API endpoints for handling various types of requests and interactions with OpenAI models and agents.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: agents.codex_agent, agents.echo_agent, agents.mcp_agent, fastapi, fastapi.responses, openai, traceback, typing, utils.openai_client\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - ask_codex_stream()\n#   - ask_echo_stream()\n#   - ask_get()\n#   - ask_post()\n#   - ask_stream()\n#   - test_openai()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport traceback\nfrom fastapi import APIRouter, Query, Request, Header, HTTPException\nfrom fastapi.responses import StreamingResponse\nfrom typing import Optional\n\nfrom agents.mcp_agent import run_mcp\nfrom agents.codex_agent import stream as codex_stream\nfrom agents.echo_agent import stream as echo_stream\nfrom utils.openai_client import create_openai_client\nfrom openai import OpenAIError\n\nrouter = APIRouter(prefix=\"/ask\", tags=[\"ask\"])\n\n# Streaming map for roles that support it\nSTREAM_ROUTING_TABLE = {\n    \"codex\": codex_stream,\n    \"echo\": echo_stream,\n    # Add more streaming agents here as needed in the future\n}\n\n# === GET /ask ==================================================================\n@router.get(\"\")\nasync def ask_get(\n    request: Request,\n    question: str = Query(..., description=\"User's natural language question\"),\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\"),\n    debug: Optional[bool] = Query(False, description=\"Return debug/context info\"),\n    role: Optional[str] = Query(\"planner\", description=\"Which agent role to use (planner, echo, codex, etc)\"),\n    files: Optional[str] = Query(None, description=\"Comma-separated file list for context\"),\n    topics: Optional[str] = Query(None, description=\"Comma-separated topics for context\")\n):\n    \"\"\"\n    GET version of /ask, mostly for quick dev/testing.\n    Routes to MCP with appropriate agent role.\n    Echo is always available as both primary and fallback agent.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    file_list = [f.strip() for f in files.split(\",\")] if files else []\n    topic_list = [t.strip() for t in topics.split(\",\")] if topics else []\n\n    if not question:\n        raise HTTPException(status_code=422, detail=\"Missing 'question' parameter.\")\n\n    try:\n        return await run_mcp(\n            query=question,\n            files=file_list,\n            topics=topic_list,\n            role=role,\n            user_id=user_id,\n            debug=debug\n        )\n    except Exception as e:\n        traceback.print_exc()\n        raise HTTPException(status_code=500, detail=str(e))\n\n# === POST /ask =================================================================\n@router.post(\"\")\nasync def ask_post(\n    request: Request,\n    payload: dict,\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\"),\n    debug: Optional[bool] = Query(False),\n):\n    \"\"\"\n    Main POST endpoint for /ask \u2014 entrypoint for planner, codex, echo, or other agents.\n    Routes all queries to MCP for context injection, agent routing, and critics.\n    Echo is always available as both primary and fallback agent.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    question = payload.get(\"question\", \"\")\n    context = payload.get(\"context\", \"\")\n    files = payload.get(\"files\", [])\n    topics = payload.get(\"topics\", [])\n    role = payload.get(\"role\", \"planner\")\n\n    if not question:\n        raise HTTPException(status_code=422, detail=\"Missing 'question' in request payload.\")\n\n    try:\n        result = await run_mcp(\n            query=question,\n            files=files,\n            topics=topics,\n            role=role,\n            user_id=user_id,\n            debug=debug\n        )\n        return result\n    except Exception as e:\n        traceback.print_exc()\n        raise HTTPException(status_code=500, detail=str(e))", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3981, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "6aa4aa57-3a80-4e79-a9e2-6c5484435d57": {"__data__": {"id_": "6aa4aa57-3a80-4e79-a9e2-6c5484435d57", "embedding": null, "metadata": {"file_path": "/app/routes/ask.py", "file_name": "ask.py", "file_type": "text/x-python", "file_size": 8320, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "3259b3ea-190f-4370-b8ca-a2bf6099ee91", "node_type": "4", "metadata": {"file_path": "/app/routes/ask.py", "file_name": "ask.py", "file_type": "text/x-python", "file_size": 8320, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3d2b825ca115c7cf52879c9d1043d222eaffcdcbc89fc4838ab31189cc2565cf", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "5e225d9b-4bc3-4302-8888-3f797afc3788", "node_type": "1", "metadata": {"file_path": "/app/routes/ask.py", "file_name": "ask.py", "file_type": "text/x-python", "file_size": 8320, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "b7b3f4e144b42e64ebd1647211e5c22b58f3f4bcfb7139e52311ca97954d8a4f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# === POST /ask/stream ==========================================================\n@router.post(\"/stream\")\nasync def ask_stream(\n    request: Request,\n    payload: dict,\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\"),\n):\n    \"\"\"\n    Streaming endpoint for planner/meta/explicit agent roles via MCP routing.\n    If the routed agent supports streaming, streams the response.\n    Fallbacks to Echo stream if the routed agent doesn't support streaming.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    question = payload.get(\"question\", \"\")\n    context = payload.get(\"context\", \"\")\n    files = payload.get(\"files\", [])\n    topics = payload.get(\"topics\", [])\n    role = payload.get(\"role\", \"planner\")\n\n    if not question:\n        raise HTTPException(status_code=422, detail=\"Missing 'question' in request payload.\")\n\n    try:\n        # Get plan and route via MCP (to know the agent/role to stream)\n        mcp_result = await run_mcp(\n            query=question,\n            files=files,\n            topics=topics,\n            role=role,\n            user_id=user_id,\n            debug=False\n        )\n        plan = mcp_result.get(\"plan\", {})\n        used_route = plan.get(\"meta_override\") or plan.get(\"route\") or role\n\n        stream_fn = STREAM_ROUTING_TABLE.get(used_route, echo_stream)\n        return StreamingResponse(\n            stream_fn(question, context, user_id),\n            media_type=\"text/plain\"\n        )\n    except Exception as e:\n        traceback.print_exc()\n        raise HTTPException(status_code=500, detail=str(e))\n\n\n# === POST /ask/codex_stream ===================================================\n@router.post(\"/codex_stream\")\nasync def ask_codex_stream(\n    request: Request,\n    payload: dict,\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\")\n):\n    \"\"\"\n    Streaming endpoint for Codex/code edits. Streams text output directly.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    question = payload.get(\"question\", \"\")\n    context = payload.get(\"context\", \"\")\n\n    if not question or not context:\n        raise HTTPException(status_code=422, detail=\"Missing 'question' or 'context' in request.\")\n\n    try:\n        return StreamingResponse(codex_stream(question, context, user_id), media_type=\"text/plain\")\n    except Exception as e:\n        traceback.print_exc()\n        raise HTTPException(status_code=500, detail=str(e))\n\n\n# === POST /ask/echo_stream ====================================================\n@router.post(\"/echo_stream\")\nasync def ask_echo_stream(\n    request: Request,\n    payload: dict,\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\"),\n):\n    \"\"\"\n    Streaming endpoint for Echo (LLM chat) responses.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    question = payload.get(\"question\", \"\")\n    context = payload.get(\"context\", \"\")\n\n    if not question:\n        raise HTTPException(status_code=422, detail=\"Missing 'question' in request.\")\n\n    try:\n        return StreamingResponse(\n            echo_stream(question, context, user_id),\n            media_type=\"text/plain\"\n        )\n    except Exception as e:\n        traceback.print_exc()\n        raise HTTPException(status_code=500, detail=str(e))\n\n\n# === GET /ask/test_openai ======================================================\n@router.get(\"/test_openai\")\nasync def test_openai():\n    \"\"\"\n    Quick endpoint to verify OpenAI API connectivity and model health.\n    \"\"\"\n    try:\n        client = create_openai_client()\n        response = await client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=[\n                {\"role\": \"system\", \"content\": \"You are a helpful assistant.\"},\n                {\"role\": \"user\", \"content\": \"Ping test\"}\n            ]\n        )\n        return { \"response\": response.choices[0].message.content }\n    except OpenAIError as e:\n        raise HTTPException(status_code=502, detail=str(e))\n    except Exception as e:\n        traceback.print_exc()\n        raise HTTPException(status_code=500, detail=f\"Unexpected error: {str(e)}\")", "mimetype": "text/plain", "start_char_idx": 3984, "end_char_idx": 8003, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "2426f942-d8f6-4210-b8c0-0ff09cf456c3": {"__data__": {"id_": "2426f942-d8f6-4210-b8c0-0ff09cf456c3", "embedding": null, "metadata": {"file_path": "/app/routes/codex.py", "file_name": "codex.py", "file_type": "text/x-python", "file_size": 2675, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "91ae219a-7b06-4859-851a-d194168f8f0a", "node_type": "4", "metadata": {"file_path": "/app/routes/codex.py", "file_name": "codex.py", "file_type": "text/x-python", "file_size": 2675, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "713fe2d39187983713a2eb7854ccebee189e3b81583daff5df1818760b32d398", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: codex.py\n# Directory: routes\n# Purpose: # Purpose: Provides API endpoints for applying patches to system configurations using FastAPI.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: core.logging, fastapi, fastapi.responses, os, pydantic, utils.patch_utils\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - PatchRequest()\n#   - apply_patch()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nfrom fastapi import APIRouter, HTTPException, Request\nfrom fastapi.responses import JSONResponse\nfrom pydantic import BaseModel\nfrom utils.patch_utils import validate_patch_format\nfrom core.logging import log_event\n\nrouter = APIRouter(prefix=\"/codex\", tags=[\"codex\"])\n\nclass PatchRequest(BaseModel):\n    target_file: str\n    patch: str\n    reason: str\n\n@router.post(\"/apply_patch\")\nasync def apply_patch(payload: PatchRequest, request: Request):\n    \"\"\"\n    Apply a code patch directly to the specified file on disk.\n    \"\"\"\n    if not validate_patch_format({\"type\": \"patch\", **payload.dict()}):\n        raise HTTPException(status_code=422, detail=\"Invalid patch format.\")\n\n    try:\n        file_path = os.path.abspath(payload.target_file)\n\n        # Optional: Prevent writing outside project root\n        project_root = os.path.abspath(os.getcwd())\n        if not file_path.startswith(project_root):\n            raise HTTPException(status_code=400, detail=\"Refused to write outside project scope.\")\n\n        # Optional: Ensure file exists (comment out if you want to allow creation)\n        if not os.path.exists(file_path):\n            raise HTTPException(status_code=404, detail=f\"Target file not found: {payload.target_file}\")\n\n        with open(file_path, \"w\", encoding=\"utf-8\") as f:\n            f.write(payload.patch)\n\n    except Exception as e:\n        log_event(\"codex_patch_error\", {\n            \"file\": payload.target_file,\n            \"error\": str(e)\n        })\n        raise HTTPException(status_code=500, detail=f\"Failed to apply patch: {e}\")\n\n    log_event(\"codex_patch_applied\", {\n        \"file\": payload.target_file,\n        \"user\": request.headers.get(\"X-User-Id\", \"anon\")\n    })\n    return JSONResponse({\n        \"status\": \"success\",\n        \"file\": payload.target_file,\n        \"message\": \"Patch written successfully.\"\n    })", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2360, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "98931f20-960f-46f7-b393-a6ed8a3f11b5": {"__data__": {"id_": "98931f20-960f-46f7-b393-a6ed8a3f11b5", "embedding": null, "metadata": {"file_path": "/app/routes/context.py", "file_name": "context.py", "file_type": "text/x-python", "file_size": 4834, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1589627b-e286-468c-8683-b722866fdfac", "node_type": "4", "metadata": {"file_path": "/app/routes/context.py", "file_name": "context.py", "file_type": "text/x-python", "file_size": 4834, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1ea15c295d26651fd22dc456af894461bc6549e02765bd873e201ba9e33535ef", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "45a23438-9e4a-4b1f-a48f-c0da4db3cd7f", "node_type": "1", "metadata": {}, "hash": "f125febcb5f96ebc58f12864dd49a6956336e1447714500252902d684f2223d0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: context.py\n# Directory: routes\n# Purpose: # Purpose: Manage and synchronize documentation context between local and cloud storage, ensuring consistency and updating legacy systems.\n#\n# Upstream:\n#   - ENV: OPENAI_API_KEY\n#   - Imports: fastapi, openai, os, pathlib, services.google_docs_sync, services.logs, traceback\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - ensure_stub_file()\n#   - legacy_sync_google()\n#   - safe_write_markdown()\n#   - sync_docs_and_update()\n#   - update_context_summary()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter, HTTPException\nfrom services.logs import get_recent_logs, log_and_refresh\nfrom services.google_docs_sync import sync_google_docs\nfrom openai import OpenAI\nfrom pathlib import Path\nimport os\nimport traceback\n\nrouter = APIRouter(prefix=\"/context\", tags=[\"context\"])\n\n# Paths for generated context files\nRELAY_CONTEXT_PATH = Path(\"docs/generated/relay_context.md\")\nGLOBAL_CONTEXT_PATH = Path(\"docs/generated/global_context.md\")\nRELAY_CONTEXT_PATH.parent.mkdir(parents=True, exist_ok=True)\n\ndef safe_write_markdown(path: Path, content: str, header: str = None):\n    \"\"\"Write markdown safely, fallback to a minimal file if an error occurs.\"\"\"\n    try:\n        with open(path, \"w\", encoding=\"utf-8\") as f:\n            if header:\n                f.write(f\"# {header}\\n\\n\")\n            f.write(content.strip() + \"\\n\")\n    except Exception as e:\n        print(f\"Failed to write {path}: {e}\")\n        # Ensure at least an empty file exists\n        try:\n            path.write_text(\"# (empty)\\n\", encoding=\"utf-8\")\n        except Exception:\n            pass\n\ndef ensure_stub_file(path: Path, stub: str = \"# (empty)\\n\"):\n    \"\"\"Ensure a minimal stub markdown file exists.\"\"\"\n    if not path.exists():\n        try:\n            path.write_text(stub, encoding=\"utf-8\")\n        except Exception as e:\n            print(f\"Failed to create stub {path}: {e}\")\n\n# --- Endpoint: Update relay_context.md from logs ---\n@router.post(\"/update\")\ndef update_context_summary():\n    \"\"\"Summarize recent logs to relay_context.md (markdown-safe, robust to errors).\"\"\"\n    ensure_stub_file(RELAY_CONTEXT_PATH, \"# Relay Context (not yet summarized)\\n\")\n    try:\n        logs = get_recent_logs(100)\n        if not logs:\n            safe_write_markdown(RELAY_CONTEXT_PATH, \"No logs to summarize.\", \"Relay Context (auto-generated)\")\n            return {\"status\": \"no logs to summarize\"}\n\n        text = \"\\n\".join(f\"[{l['source']}] {l['message']}\" for l in logs)\n\n        client = OpenAI(api_key=os.getenv(\"OPENAI_API_KEY\"))\n        response = client.chat.completions.create(\n            model=\"gpt-4o\",\n            messages=[\n                {\"role\": \"system\", \"content\": \"You are a system summarizer for a command center log.\"},\n                {\"role\": \"user\", \"content\": f\"Summarize the following session log:\\n\\n{text}\"}\n            ]\n        )\n\n        summary = response.choices[0].message.content.strip()\n        safe_write_markdown(RELAY_CONTEXT_PATH, summary, \"Relay Context (auto-generated)\")\n        log_and_refresh(\"system\", \"Updated relay_context.md from session logs.\")\n        return {\"status\": \"ok\", \"summary\": summary}\n\n    except Exception as e:\n        # Log the traceback and return a safe fallback\n        print(f\"Exception in update_context_summary: {e}\\n{traceback.format_exc()}\")\n        safe_write_markdown(RELAY_CONTEXT_PATH, f\"Error updating summary: {e}\", \"Relay Context (auto-generated)\")\n        raise HTTPException(status_code=500, detail=f\"Failed to update context: {e}\")\n\n# --- Sync Google Docs and ensure stub context files ---\n@router.post(\"/sync_docs\")\ndef sync_docs_and_update():\n    \"\"\"Sync Google Docs and ensure global context markdown is safe.\"\"\"", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3849, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "45a23438-9e4a-4b1f-a48f-c0da4db3cd7f": {"__data__": {"id_": "45a23438-9e4a-4b1f-a48f-c0da4db3cd7f", "embedding": null, "metadata": {"file_path": "/app/routes/context.py", "file_name": "context.py", "file_type": "text/x-python", "file_size": 4834, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "1589627b-e286-468c-8683-b722866fdfac", "node_type": "4", "metadata": {"file_path": "/app/routes/context.py", "file_name": "context.py", "file_type": "text/x-python", "file_size": 4834, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1ea15c295d26651fd22dc456af894461bc6549e02765bd873e201ba9e33535ef", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "98931f20-960f-46f7-b393-a6ed8a3f11b5", "node_type": "1", "metadata": {"file_path": "/app/routes/context.py", "file_name": "context.py", "file_type": "text/x-python", "file_size": 4834, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "7851f1da441983aff717e9ea33354b9fe2e35190eb052ec8156b4211d27d2b2a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "return {\"status\": \"ok\", \"summary\": summary}\n\n    except Exception as e:\n        # Log the traceback and return a safe fallback\n        print(f\"Exception in update_context_summary: {e}\\n{traceback.format_exc()}\")\n        safe_write_markdown(RELAY_CONTEXT_PATH, f\"Error updating summary: {e}\", \"Relay Context (auto-generated)\")\n        raise HTTPException(status_code=500, detail=f\"Failed to update context: {e}\")\n\n# --- Sync Google Docs and ensure stub context files ---\n@router.post(\"/sync_docs\")\ndef sync_docs_and_update():\n    \"\"\"Sync Google Docs and ensure global context markdown is safe.\"\"\"\n    ensure_stub_file(GLOBAL_CONTEXT_PATH, \"# Global Project Context (not yet generated)\\n\")\n    try:\n        synced = sync_google_docs()\n        log_and_refresh(\"system\", f\"Synced {len(synced)} docs from Google Drive into /docs/imported\")\n        return {\"status\": \"ok\", \"synced_docs\": synced}\n    except Exception as e:\n        print(f\"Exception in sync_docs_and_update: {e}\\n{traceback.format_exc()}\")\n        raise HTTPException(status_code=500, detail=str(e))\n\n# Deprecated sync route for compatibility with /docs/sync_google\n@router.post(\"/sync_google\")\ndef legacy_sync_google():\n    \"\"\"Backward-compatible alias for sync_docs.\"\"\"\n    return sync_docs_and_update()", "mimetype": "text/plain", "start_char_idx": 3254, "end_char_idx": 4519, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "860fd782-3638-4791-8108-eca938f081f2": {"__data__": {"id_": "860fd782-3638-4791-8108-eca938f081f2", "embedding": null, "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "550ab989-7266-4ba3-8f7d-fb3997604359", "node_type": "4", "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "70c7c5124df063b5d50b370aecc185696b409379051cbb0ad9ab55c771a04146", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "c1edf92d-c4a3-41fc-a231-937043823c81", "node_type": "1", "metadata": {}, "hash": "190f1a68f7778fa3439b45bf88a726c74967137cabe85faa48a2bda8834bbdb4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: control.py\n# Directory: routes\n# Purpose: # Purpose: Manages action control flows including authentication, logging, queuing, and approval processes within the application.\n#\n# Upstream:\n#   - ENV: API_KEY\n#   - Imports: agents, agents.control_agent, datetime, fastapi, json, os, pathlib, services, uuid\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - append_log()\n#   - approve_action()\n#   - auth()\n#   - control_test()\n#   - deny_action()\n#   - list_log()\n#   - list_queue()\n#   - load_actions()\n#   - queue_action()\n#   - save_actions()\n#   - update_action_history()\n#   - write_file()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os, json\nfrom uuid import uuid4\nfrom pathlib import Path\nfrom datetime import datetime\nfrom fastapi import APIRouter, Depends, Header, HTTPException, Body, Request\n\nfrom services import gmail\nfrom agents import codex_agent, docs_agent, echo_agent\nfrom agents.control_agent import control_agent\n\nrouter = APIRouter(prefix=\"/control\", tags=[\"control\"])\n\n# === Auth Middleware ===\ndef auth(key: str = Header(None, alias=\"X-API-Key\")):\n    expected = os.getenv(\"API_KEY\")\n    if not key or key != expected:\n        raise HTTPException(status_code=401, detail=\"Invalid API key\")\n    return \"admin\"\n\n# === File paths ===\nACTIONS_PATH = Path(__file__).resolve().parents[1] / \"data\" / \"pending_actions.json\"\nLOG_PATH = Path(__file__).resolve().parents[1] / \"logs\" / \"actions.log\"\nACTIONS_PATH.parent.mkdir(parents=True, exist_ok=True)\nLOG_PATH.parent.mkdir(parents=True, exist_ok=True)\nif not ACTIONS_PATH.exists():\n    ACTIONS_PATH.write_text(\"[]\")\n\n# === Utils ===\ndef load_actions():\n    return json.loads(ACTIONS_PATH.read_text())\n\ndef save_actions(actions):\n    ACTIONS_PATH.write_text(json.dumps(actions, indent=2))\n\ndef append_log(entry: dict):\n    with LOG_PATH.open(\"a\", encoding=\"utf-8\") as f:\n        f.write(json.dumps(entry) + \"\\n\")\n\ndef update_action_history(action, status, user, comment=\"\"):\n    action.setdefault(\"history\", []).append({\n        \"timestamp\": datetime.utcnow().isoformat(),\n        \"status\": status,\n        \"user\": user,\n        \"comment\": comment\n    })\n\n# === Agent Dispatch Map ===\nAGENT_DISPATCH = {\n    \"codex\": codex_agent.handle,\n    \"control\": control_agent.run,\n    \"docs\": docs_agent.analyze,\n    \"echo\": echo_agent.run,\n}\n\n# === /queue_action ===\n@router.post(\"/queue_action\")\ndef queue_action(data: dict = Body(...), user=Depends(auth)):\n    action_id = str(uuid4())\n    queued = {\n        \"id\": action_id,\n        \"timestamp\": datetime.utcnow().isoformat(),\n        \"status\": \"pending\",\n        \"action\": data,\n        \"history\": [{\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"status\": \"pending\",\n            \"user\": user,\n            \"comment\": data.get(\"rationale\", \"\")\n        }]\n    }\n    actions = load_actions()\n    actions.append(queued)\n    save_actions(actions)\n    return {\"status\": \"queued\", \"id\": action_id}\n\n# === /list_queue ===\n@router.get(\"/list_queue\")\ndef list_queue(user=Depends(auth)):\n    try:\n        return {\"actions\": load_actions()}\n    except Exception as e:\n        raise HTTPException(500, f\"Failed to load queue: {e}\")\n\n# === /approve_action ===\n@router.post(\"/approve_action\")\nasync def approve_action(data: dict = Body(...), user=Depends(auth)):\n    action_id = data.get(\"id\")\n    comment = data.get(\"comment\", \"\")\n    if not action_id:\n        raise HTTPException(400, \"Missing action ID\")\n\n    actions = load_actions()\n    updated = []\n    approved = None\n\n    for a in actions:\n        if a[\"id\"] == action_id and a[\"status\"] == \"pending\":\n            approved = a\n            a[\"status\"] = \"approved\"\n            a[\"approved_at\"] = datetime.utcnow().isoformat()\n            update_action_history(a, \"approved\", user,", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3882, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "c1edf92d-c4a3-41fc-a231-937043823c81": {"__data__": {"id_": "c1edf92d-c4a3-41fc-a231-937043823c81", "embedding": null, "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "550ab989-7266-4ba3-8f7d-fb3997604359", "node_type": "4", "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "70c7c5124df063b5d50b370aecc185696b409379051cbb0ad9ab55c771a04146", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "860fd782-3638-4791-8108-eca938f081f2", "node_type": "1", "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "59ae4d88ea2bfe8e44e9ae3dac387f57114c88e992684afcad74cd4cb3a2ff7a", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "7167263b-9f15-479f-a18d-aa21af50d846", "node_type": "1", "metadata": {}, "hash": "13174be9868992c0519f6524e825e7c1ec8de28a09613bcbc059a457cade301f", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "get(\"/list_queue\")\ndef list_queue(user=Depends(auth)):\n    try:\n        return {\"actions\": load_actions()}\n    except Exception as e:\n        raise HTTPException(500, f\"Failed to load queue: {e}\")\n\n# === /approve_action ===\n@router.post(\"/approve_action\")\nasync def approve_action(data: dict = Body(...), user=Depends(auth)):\n    action_id = data.get(\"id\")\n    comment = data.get(\"comment\", \"\")\n    if not action_id:\n        raise HTTPException(400, \"Missing action ID\")\n\n    actions = load_actions()\n    updated = []\n    approved = None\n\n    for a in actions:\n        if a[\"id\"] == action_id and a[\"status\"] == \"pending\":\n            approved = a\n            a[\"status\"] = \"approved\"\n            a[\"approved_at\"] = datetime.utcnow().isoformat()\n            update_action_history(a, \"approved\", user, comment)\n        updated.append(a)\n\n    if not approved:\n        raise HTTPException(404, \"No matching pending action found\")\n\n    save_actions(updated)\n    action_data = approved[\"action\"]\n\n    route = action_data.get(\"type\")\n    handler = AGENT_DISPATCH.get(route)\n\n    if handler:\n        result = await handler(\n            query=action_data.get(\"query\", \"\"),\n            context=action_data.get(\"context\", {}),\n            user_id=user\n        )\n        append_log({\n            \"id\": action_id,\n            \"type\": route,\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"status\": \"executed\",\n            \"result\": result,\n            \"user\": user,\n            \"comment\": comment\n        })\n        return result\n\n    # Optional: file write fallback\n    if action_data.get(\"type\") == \"write_file\":\n        result = write_file(action_data, user=user)\n        append_log({\n            \"id\": action_id,\n            \"type\": \"write_file\",\n            \"path\": action_data.get(\"path\"),\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"status\": \"executed\",\n            \"result\": result,\n            \"user\": user,\n            \"comment\": comment\n        })\n        return result\n\n    append_log({\n        \"id\": action_id,\n        \"type\": action_data.get(\"type\"),\n        \"timestamp\": datetime.utcnow().isoformat(),\n        \"status\": \"approved\",\n        \"user\": user,\n        \"comment\": comment\n    })\n\n    return {\"status\": \"approved\"}\n\n# === /deny_action ===\n@router.post(\"/deny_action\")\ndef deny_action(data: dict = Body(...), user=Depends(auth)):\n    action_id = data.get(\"id\")\n    comment = data.get(\"comment\", \"\")\n    if not action_id:\n        raise HTTPException(400, \"Missing action ID\")\n\n    actions = load_actions()\n    updated = []\n    denied = None\n\n    for a in actions:\n        if a[\"id\"] == action_id and a[\"status\"] == \"pending\":\n            denied = a\n            a[\"status\"] = \"denied\"\n            a[\"denied_at\"] = datetime.utcnow().isoformat()\n            update_action_history(a, \"denied\", user, comment)\n        updated.append(a)\n\n    if not denied:\n        raise HTTPException(404, \"No matching pending action found\")\n\n    save_actions(updated)\n    append_log({\n        \"id\": action_id,\n        \"type\": denied[\"action\"].get(\"type\"),\n        \"timestamp\": datetime.utcnow().isoformat(),\n        \"status\": \"denied\",\n        \"user\": user,\n        \"comment\": comment\n    })\n    return {\"status\": \"denied\"}\n\n# === /list_log ===\n@router.get(\"/list_log\")\ndef list_log(user=Depends(auth)):\n    try:\n        if not LOG_PATH.exists():\n            return {\"log\": []}\n        with LOG_PATH.open(\"r\", encoding=\"utf-8\") as f:\n            lines = f.readlines()\n        return {\"log\": [json.loads(line) for line in lines if line.strip()]}\n    except Exception as e:\n        raise HTTPException(500, f\"Failed to read log: {e}\")\n\n# === /write_file ===\n@router.post(\"/write_file\")\ndef write_file(data: dict = Body(...), user=Depends(auth)):\n    path = data.get(\"path\")\n    content = data.get(\"content\")\n    if not path or not content:\n        raise HTTPException(400, \"Missing path or content\")\n    base = Path(__file__).resolve().", "mimetype": "text/plain", "start_char_idx": 3082, "end_char_idx": 7050, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7167263b-9f15-479f-a18d-aa21af50d846": {"__data__": {"id_": "7167263b-9f15-479f-a18d-aa21af50d846", "embedding": null, "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "550ab989-7266-4ba3-8f7d-fb3997604359", "node_type": "4", "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "70c7c5124df063b5d50b370aecc185696b409379051cbb0ad9ab55c771a04146", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "c1edf92d-c4a3-41fc-a231-937043823c81", "node_type": "1", "metadata": {"file_path": "/app/routes/control.py", "file_name": "control.py", "file_type": "text/x-python", "file_size": 8376, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "549bc1a338dd62d22c1b46beb7cd8e291eee819b3272619a4f23e0977590c0d4", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "get(\"/list_log\")\ndef list_log(user=Depends(auth)):\n    try:\n        if not LOG_PATH.exists():\n            return {\"log\": []}\n        with LOG_PATH.open(\"r\", encoding=\"utf-8\") as f:\n            lines = f.readlines()\n        return {\"log\": [json.loads(line) for line in lines if line.strip()]}\n    except Exception as e:\n        raise HTTPException(500, f\"Failed to read log: {e}\")\n\n# === /write_file ===\n@router.post(\"/write_file\")\ndef write_file(data: dict = Body(...), user=Depends(auth)):\n    path = data.get(\"path\")\n    content = data.get(\"content\")\n    if not path or not content:\n        raise HTTPException(400, \"Missing path or content\")\n    base = Path(__file__).resolve().parents[1]\n    full_path = base / path\n    full_path.parent.mkdir(parents=True, exist_ok=True)\n    try:\n        full_path.write_text(content)\n        return {\n            \"status\": \"success\",\n            \"path\": str(full_path.relative_to(base)),\n            \"size\": len(content)\n        }\n    except Exception as e:\n        raise HTTPException(500, f\"Failed to write file: {e}\")\n\n# === /test (ControlAgent direct test) ===\n@router.post(\"/test\")\nasync def control_test(request: Request, user=Depends(auth)):\n    payload = await request.json()\n    query = payload.get(\"query\", \"\")\n    context = payload.get(\"context\", {})\n\n    result = await control_agent.run(query=query, context=context, user_id=user)\n    append_log({\n        \"id\": f\"manual-{datetime.utcnow().isoformat()}\",\n        \"type\": \"control_test\",\n        \"timestamp\": datetime.utcnow().isoformat(),\n        \"status\": \"executed\",\n        \"user\": user,\n        \"query\": query,\n        \"context\": context,\n        \"result\": result\n    })\n    return result", "mimetype": "text/plain", "start_char_idx": 6369, "end_char_idx": 8063, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "41d34ca6-51d4-40bb-80ac-a91af2217051": {"__data__": {"id_": "41d34ca6-51d4-40bb-80ac-a91af2217051", "embedding": null, "metadata": {"file_path": "/app/routes/debug.py", "file_name": "debug.py", "file_type": "text/x-python", "file_size": 1071, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f2ac2c15-b346-4f7b-86c3-7c6727516673", "node_type": "4", "metadata": {"file_path": "/app/routes/debug.py", "file_name": "debug.py", "file_type": "text/x-python", "file_size": 1071, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "82367accec02cd6cbdad8fd54b3adf20c84c2f105cf02c13ea2df941556f35a0", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: debug.py\n# Directory: routes\n# Purpose: # Purpose: Provides an API endpoint to display current environment settings for debugging purposes.\n#\n# Upstream:\n#   - ENV: GOOGLE_CREDS_JSON\n#   - Imports: fastapi, os\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - debug_env()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter\nimport os\n\nrouter = APIRouter()\n\n@router.get(\"/debug/env\")\ndef debug_env():\n    val = os.getenv(\"GOOGLE_CREDS_JSON\")\n    return {\n        \"GOOGLE_CREDS_JSON present\": bool(val),\n        \"length\": len(val) if val else 0,\n        \"starts_with\": val[:30] + \"...\" if val else \"MISSING\"\n    }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 758, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "eb11256f-18d9-4018-bef0-cc91242f353e": {"__data__": {"id_": "eb11256f-18d9-4018-bef0-cc91242f353e", "embedding": null, "metadata": {"file_path": "/app/routes/docs.py", "file_name": "docs.py", "file_type": "text/x-python", "file_size": 8925, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "43d94c9d-c438-4918-bc57-d6203464af11", "node_type": "4", "metadata": {"file_path": "/app/routes/docs.py", "file_name": "docs.py", "file_type": "text/x-python", "file_size": 8925, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "9def7a59695aaa47dcf4605d619673651f74a36f57f1e5345f0a50622b6194e9", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "871d8e56-f95a-4e35-ad16-3821faf655ce", "node_type": "1", "metadata": {}, "hash": "eba13685d670734e57cb7a43fd67dea77db92a1d267c64cc1161a93a11c48460", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: docs.py\n# Directory: routes/\n# Purpose: Provides endpoints for managing documentation, including listing, viewing, syncing, and organizing documents.\n# Notes   :\n#   \u2022 API\u2011key (or future SSO) required for every endpoint.\n#   \u2022 Path\u2011traversal safe: requested file must resolve inside project_root/docs.\n#   \u2022 Adds /mark_priority to manually set doc tier or pin for context.\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: __future__, fastapi, fastapi.responses, os, pathlib, services, services.context_engine, services.docs_utils, services.google_docs_sync, shutil, typing\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - _safe_resolve()\n#   - full_sync()\n#   - list_docs()\n#   - mark_priority()\n#   - promote_doc()\n#   - prune_duplicates()\n#   - refresh_kb()\n#   - require_api_key()\n#   - sync_docs()\n#   - view_doc()\n\n#-----docs.py-----\n\nfrom __future__ import annotations\n\nimport os\nimport shutil\nfrom pathlib import Path\nfrom typing import List\n\nfrom fastapi import APIRouter, Depends, HTTPException, Query, Request\nfrom fastapi.responses import JSONResponse\n\nfrom services.google_docs_sync import sync_google_docs\nfrom services import kb\nfrom services.context_engine import ContextEngine\nfrom services.docs_utils import (\n    extract_doc_id,\n    build_doc_registry,\n    choose_canonical_path,\n    write_doc_metadata,\n)\n\n# \u2500\u2500\u2500 Router Setup \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nrouter = APIRouter(prefix=\"/docs\", tags=[\"docs\"])\n\n# \u2500\u2500\u2500 Auth Stub (replace with real auth) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef require_api_key():\n    return True  # TODO: Replace with real API key or OAuth validation\n\n# \u2500\u2500\u2500 Constants \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nPROJECT_ROOT = Path(__file__).resolve().parents[1]\nBASE_DIR: Path = PROJECT_ROOT / \"docs\"\nCATEGORIES = (\"imported\", \"generated\")\n\ndef _safe_resolve(path: Path) -> Path:\n    resolved = path.resolve()\n    resolved.relative_to(BASE_DIR)\n    return resolved\n\n# \u2500\u2500\u2500 List docs with metadata \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.get(\"/list\", dependencies=[Depends(require_api_key)])\nasync def list_docs(\n    category: str = Query(\"all\", pattern=\"^(all|imported|generated)$\"),\n    limit: int = Query(100, ge=1, le=500),\n):\n    cats = CATEGORIES if category == \"all\" else (category,)\n    results: List[dict] = []\n\n    for sub in cats:\n        for f in (BASE_DIR / sub).rglob(\"*.md\"):\n            if len(results) >= limit:\n                break\n            try:\n                doc_id = extract_doc_id(f)\n                results.append({\n                    \"path\": str(f.relative_to(BASE_DIR)),\n                    \"doc_id\": doc_id,\n                    \"tier\": sub,\n                    \"source\": \"google\" if \"imported\" in str(f) else \"local\",\n                    \"last_modified\": f.stat().st_mtime,\n                })\n            except Exception:\n                continue\n\n    return {\"files\": results}\n\n# \u2500\u2500\u2500 View raw markdown \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.get(\"/view\", dependencies=[Depends(require_api_key)])\nasync def view_doc(path: str):\n    try:\n        doc_path = _safe_resolve(BASE_DIR / path)\n        if not doc_path.exists():\n            raise HTTPException(status_code=404, detail=\"Doc not found\")\n        return {\"content\": doc_path.read_text()}\n    except ValueError:\n        raise HTTPException(status_code=400, detail=\"Invalid path\")\n    except Exception:\n        raise HTTPException(status_code=500, detail=\"Internal error\")\n\n# \u2500\u2500\u2500 Google Docs Sync \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/sync\", dependencies=[Depends(require_api_key)])\nasync def sync_docs():\n    try:\n        saved_files = sync_google_docs()\n        kb.api_reindex()\n        ContextEngine.clear_cache()\n        return {\"synced_docs\": saved_files}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n# \u2500\u2500\u2500 Manual Reindex \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/refresh_kb\",", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4157, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "871d8e56-f95a-4e35-ad16-3821faf655ce": {"__data__": {"id_": "871d8e56-f95a-4e35-ad16-3821faf655ce", "embedding": null, "metadata": {"file_path": "/app/routes/docs.py", "file_name": "docs.py", "file_type": "text/x-python", "file_size": 8925, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "43d94c9d-c438-4918-bc57-d6203464af11", "node_type": "4", "metadata": {"file_path": "/app/routes/docs.py", "file_name": "docs.py", "file_type": "text/x-python", "file_size": 8925, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "9def7a59695aaa47dcf4605d619673651f74a36f57f1e5345f0a50622b6194e9", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "eb11256f-18d9-4018-bef0-cc91242f353e", "node_type": "1", "metadata": {"file_path": "/app/routes/docs.py", "file_name": "docs.py", "file_type": "text/x-python", "file_size": 8925, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "95d8112e46f2b8a26a50a926015c1e515b9442dc0022d905413dd2d3b3432780", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "exists():\n            raise HTTPException(status_code=404, detail=\"Doc not found\")\n        return {\"content\": doc_path.read_text()}\n    except ValueError:\n        raise HTTPException(status_code=400, detail=\"Invalid path\")\n    except Exception:\n        raise HTTPException(status_code=500, detail=\"Internal error\")\n\n# \u2500\u2500\u2500 Google Docs Sync \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/sync\", dependencies=[Depends(require_api_key)])\nasync def sync_docs():\n    try:\n        saved_files = sync_google_docs()\n        kb.api_reindex()\n        ContextEngine.clear_cache()\n        return {\"synced_docs\": saved_files}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n# \u2500\u2500\u2500 Manual Reindex \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/refresh_kb\", dependencies=[Depends(require_api_key)])\nasync def refresh_kb():\n    try:\n        result = kb.api_reindex()\n        ContextEngine.clear_cache()\n        return result\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/full_sync\", dependencies=[Depends(require_api_key)])\nasync def full_sync():\n    try:\n        files = sync_google_docs()\n        index_info = kb.api_reindex()\n        ContextEngine.clear_cache()\n        return {\"synced_docs\": files, \"kb\": index_info}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n# \u2500\u2500\u2500 Promote to canonical \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/promote\", dependencies=[Depends(require_api_key)])\nasync def promote_doc(request: Request):\n    data = await request.json()\n    path = data.get(\"path\")\n    if not path:\n        raise HTTPException(status_code=400, detail=\"Missing path\")\n\n    full_path = _safe_resolve(BASE_DIR / path)\n    if not full_path.exists():\n        raise HTTPException(status_code=404, detail=\"File not found\")\n\n    doc_id = extract_doc_id(full_path)\n    target_path = BASE_DIR / f\"{doc_id}.md\"\n\n    try:\n        shutil.copy(full_path, target_path)\n        kb.api_reindex()\n        ContextEngine.clear_cache()\n        return {\"promoted\": str(target_path.relative_to(BASE_DIR))}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"Promote failed: {e}\")\n\n# \u2500\u2500\u2500 Prune Duplicates \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/prune_duplicates\", dependencies=[Depends(require_api_key)])\nasync def prune_duplicates():\n    removed = []\n    try:\n        registry = build_doc_registry()\n        for doc_id, versions in registry.items():\n            if len(versions) <= 1:\n                continue\n            keep = choose_canonical_path(versions)\n            for path in versions:\n                if path != keep:\n                    try:\n                        os.remove(path)\n                        removed.append(str(path.relative_to(BASE_DIR)))\n                    except Exception as e:\n                        print(f\"\u26a0\ufe0f Failed to remove {path}: {e}\")\n        kb.api_reindex()\n        ContextEngine.clear_cache()\n        return {\"removed\": removed}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"Prune failed: {e}\")\n\n# \u2500\u2500\u2500 Mark Priority / Tier \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.post(\"/mark_priority\", dependencies=[Depends(require_api_key)])\nasync def mark_priority(request: Request):\n    \"\"\"\n    Set or update a doc's metadata: tier, pinned flag, or doc_id.\n    \"\"\"\n    data = await request.json()\n    path = data.get(\"path\")\n    tier = data.get(\"tier\")\n    pinned = data.get(\"pinned\")\n\n    if not path:\n        raise HTTPException(status_code=400, detail=\"Missing path\")\n\n    full_path = _safe_resolve(BASE_DIR / path)\n    if not full_path.exists():\n        raise HTTPException(status_code=404, detail=\"File not found\")\n\n    try:\n        write_doc_metadata(full_path, {\"tier\": tier, \"pinned\": pinned})\n        kb.api_reindex()\n        ContextEngine.clear_cache()\n        return {\"updated\": str(full_path.relative_to(BASE_DIR)), \"tier\": tier, \"pinned\": pinned}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"Metadata update failed: {e}\")", "mimetype": "text/plain", "start_char_idx": 3331, "end_char_idx": 7514, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "01450b42-b296-465e-b688-1cc41f6b3ee4": {"__data__": {"id_": "01450b42-b296-465e-b688-1cc41f6b3ee4", "embedding": null, "metadata": {"file_path": "/app/routes/embeddings.py", "file_name": "embeddings.py", "file_type": "text/x-python", "file_size": 2419, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "0aa5f664-d604-41b9-835b-9e67e02c9ebd", "node_type": "4", "metadata": {"file_path": "/app/routes/embeddings.py", "file_name": "embeddings.py", "file_type": "text/x-python", "file_size": 2419, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "8a337d3c1a8edd8bb0f13b457f6f5e47b28a627f69897e8a8d6b82abb0785d14", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: embeddings.py\n# Directory: routes\n# Purpose: # Purpose: Manage the lifecycle and API endpoints for embedding generation and updates in the system.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: fastapi, fastapi.responses, os, pathlib, pickle, services, time\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - embeddings_rebuild()\n#   - embeddings_status()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\"\"\"\nEmbeddings Debug & Maintenance API for Relay\n---------------------------------------------\n- /embeddings/status : Check if embedding index exists, get stats\n- /embeddings/rebuild : (POST) Trigger rebuild of the embedding index\n\"\"\"\n\nfrom fastapi import APIRouter, Response, status\nfrom fastapi.responses import JSONResponse\nfrom services import embeddings\nimport os\nfrom pathlib import Path\nimport time\n\nrouter = APIRouter()\n\nEMBED_INDEX = embeddings.EMBED_INDEX\n\n@router.get(\"/embeddings/status\")\ndef embeddings_status():\n    \"\"\"\n    Returns basic info about the current embedding index.\n    \"\"\"\n    info = {\n        \"exists\": False,\n        \"num_files\": None,\n        \"last_modified\": None\n    }\n    if os.path.exists(EMBED_INDEX):\n        stat = os.stat(EMBED_INDEX)\n        info[\"exists\"] = True\n        info[\"last_modified\"] = time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(stat.st_mtime))\n        try:\n            # Try to get number of files in index\n            import pickle\n            with open(EMBED_INDEX, \"rb\") as f:\n                idx = pickle.load(f)\n            info[\"num_files\"] = len(idx)\n        except Exception as e:\n            info[\"num_files\"] = f\"Error: {e}\"\n    return JSONResponse(info)\n\n@router.post(\"/embeddings/rebuild\")\ndef embeddings_rebuild():\n    \"\"\"\n    Triggers a rebuild of the embedding index.\n    \"\"\"\n    try:\n        embeddings.build_index()\n        return JSONResponse({\"status\": \"ok\", \"message\": \"Embedding index rebuilt.\"})\n    except Exception as e:\n        return JSONResponse({\"status\": \"error\", \"message\": str(e)}, status_code=500)", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2102, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "e743fd2f-ef2a-4974-ace7-3763fba29dd0": {"__data__": {"id_": "e743fd2f-ef2a-4974-ace7-3763fba29dd0", "embedding": null, "metadata": {"file_path": "/app/routes/github_proxy.py", "file_name": "github_proxy.py", "file_type": "text/x-python", "file_size": 4653, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "dc80056d-41f7-4254-85f4-ac621240a508", "node_type": "4", "metadata": {"file_path": "/app/routes/github_proxy.py", "file_name": "github_proxy.py", "file_type": "text/x-python", "file_size": 4653, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "83c93c97297bf57086b53a67ed6a2932e70afa50d7028811d74c0cde31f81088", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "a3a95083-8439-4c5b-b7d7-4c20691681c7", "node_type": "1", "metadata": {}, "hash": "6a7857bbda7c604f4c7d46101e29d136565b6cc536880dbdd56a65688c3fd939", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# File: routes/github_proxy.py\nimport os, hmac, hashlib\nfrom typing import Optional\nfrom fastapi import APIRouter, Depends, Header, HTTPException\nfrom pydantic import BaseModel\n\nrouter = APIRouter(prefix=\"/gh\", tags=[\"github\"])\n\n# \u2500\u2500 Auth (supports API_KEY or API_KEYS, comma-separated) \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n_API_KEYS = {tok.strip() for tok in (os.getenv(\"API_KEY\",\"\")+\",\"+os.getenv(\"API_KEYS\",\"\")).split(\",\") if tok.strip()}\n\ndef require_api_key(authorization: str = Header(None)):\n    if not authorization or not authorization.lower().startswith(\"bearer \"):\n        raise HTTPException(status_code=401, detail=\"Missing bearer token\")\n    token = authorization.split(\" \", 1)[1].strip()\n    if not any(hmac.compare_digest(token, k) for k in _API_KEYS):\n        raise HTTPException(status_code=403, detail=\"Bad token\")\n\n@router.get(\"/debug/api-key\")\ndef debug_api_key(authorization: Optional[str] = Header(None)):\n    def sha8(s: str) -> str: return hashlib.sha256(s.encode()).hexdigest()[:8]\n    provided = \"\"\n    if authorization and authorization.lower().startswith(\"bearer \"):\n        provided = authorization.split(\" \", 1)[1].strip()\n    server = next(iter(_API_KEYS), \"\")\n    return {\n        \"keys_count\": len(_API_KEYS),\n        \"server_key_len\": len(server) if server else 0,\n        \"server_key_sha256_8\": sha8(server) if server else None,\n        \"provided_len\": len(provided),\n        \"provided_sha256_8\": sha8(provided) if provided else None,\n        \"match\": any(hmac.compare_digest(provided,k) for k in _API_KEYS),\n    }\n\n# \u2500\u2500 Lazy import so a bad services import doesn\u2019t kill the router \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\ndef _ga():\n    try:\n        from services import github_actions as ga\n        return ga\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"github_actions import failed: {e}\")\n\n# \u2500\u2500 Request models \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\nclass FileGetReq(BaseModel):\n    repo: str\n    path: str\n    ref: Optional[str] = None\n\nclass FilePutReq(BaseModel):\n    repo: str\n    path: str\n    content_b64: str\n    message: str\n    branch: str\n    sha: Optional[str] = None\n\nclass BranchReq(BaseModel):\n    repo: str\n    base: str\n    new_branch: str\n\nclass PRReq(BaseModel):\n    repo: str\n    title: str\n    head: str\n    base: str\n    body: Optional[str] = None\n    draft: bool = False\n\n# \u2500\u2500 Endpoints \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n@router.get(\"/health\")\ndef gh_health(_: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        me = ga.gh.get_user().login  # type: ignore[attr-defined]\n        return {\"ok\": True, \"user\": me, \"allowlist\": sorted(list(ga.ALLOWLIST))}\n    except Exception as e:\n        return {\"ok\": False, \"error\": str(e)}\n\n@router.get(\"/repos\")\ndef list_repos(_: None = Depends(require_api_key)):\n    ga = _ga()\n    return ga.list_repos()\n\n@router.post(\"/file/get\")\ndef file_get(req: FileGetReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.get_file(req.repo, req.path, req.ref)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/file/put\")\ndef file_put(req: FilePutReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.put_file(req.repo, req.path, req.content_b64, req.message, req.branch, req.sha)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/branch/create\")\ndef branch_create(req: BranchReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.create_branch(req.repo,", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3763, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "a3a95083-8439-4c5b-b7d7-4c20691681c7": {"__data__": {"id_": "a3a95083-8439-4c5b-b7d7-4c20691681c7", "embedding": null, "metadata": {"file_path": "/app/routes/github_proxy.py", "file_name": "github_proxy.py", "file_type": "text/x-python", "file_size": 4653, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "dc80056d-41f7-4254-85f4-ac621240a508", "node_type": "4", "metadata": {"file_path": "/app/routes/github_proxy.py", "file_name": "github_proxy.py", "file_type": "text/x-python", "file_size": 4653, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "83c93c97297bf57086b53a67ed6a2932e70afa50d7028811d74c0cde31f81088", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "e743fd2f-ef2a-4974-ace7-3763fba29dd0", "node_type": "1", "metadata": {"file_path": "/app/routes/github_proxy.py", "file_name": "github_proxy.py", "file_type": "text/x-python", "file_size": 4653, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "6d2d151a02db64d0a268b028b917f05d45b3513761721e05e11fabc421872d4e", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "repo, req.path, req.ref)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/file/put\")\ndef file_put(req: FilePutReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.put_file(req.repo, req.path, req.content_b64, req.message, req.branch, req.sha)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/branch/create\")\ndef branch_create(req: BranchReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.create_branch(req.repo, req.base, req.new_branch)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))\n\n@router.post(\"/pr/open\")\ndef pr_open(req: PRReq, _: None = Depends(require_api_key)):\n    ga = _ga()\n    try:\n        return ga.open_pr(req.repo, req.title, req.head, req.base, req.body or \"\", req.draft)\n    except PermissionError as e:\n        raise HTTPException(status_code=403, detail=str(e))\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=str(e))", "mimetype": "text/plain", "start_char_idx": 2994, "end_char_idx": 4354, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "950bdf37-0955-44d2-af82-fe85d8e153d5": {"__data__": {"id_": "950bdf37-0955-44d2-af82-fe85d8e153d5", "embedding": null, "metadata": {"file_path": "/app/routes/index.py", "file_name": "index.py", "file_type": "text/x-python", "file_size": 1998, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "407114f8-4297-4934-82cc-5f0b35ff681f", "node_type": "4", "metadata": {"file_path": "/app/routes/index.py", "file_name": "index.py", "file_type": "text/x-python", "file_size": 1998, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "3291c2b5fee2dda7744eba5083e85c2dd65064d3ede69476290ed6cde7d4fdad", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: index.py\n# Directory: /routes/index.py\n# Purpose: # Purpose: Serve as the entry point for the API, handling key verifications, event logging, and triggering indexing operations.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: datetime, fastapi, os, pathlib, services.indexer\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - log_event()\n#   - require_api_key()\n#   - trigger_index()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\nfrom fastapi import APIRouter, Depends, HTTPException, Header\nimport os\nfrom services.indexer import index_directories\nfrom datetime import datetime\nfrom pathlib import Path\n\nrouter = APIRouter(prefix=\"/ops\", tags=[\"ops\"])\n\n# -- Security: Require X-API-Key header for indexing --\ndef require_api_key(x_api_key: str = Header(..., alias=\"X-API-Key\")):\n    api_key = os.environ.get(\"API_KEY\")\n    if not api_key or x_api_key != api_key:\n        raise HTTPException(status_code=403, detail=\"Invalid or missing API key.\")\n\n# -- Optional: Simple audit log to /data/ops_events.log --\nAUDIT_LOG = Path(os.environ.get(\"AUDIT_LOG\", \"/app/data/ops_events.log\"))\n\ndef log_event(msg: str):\n    now = datetime.utcnow().isoformat()\n    with AUDIT_LOG.open(\"a\", encoding=\"utf-8\") as f:\n        f.write(f\"{now} | {msg}\\n\")\n\n@router.post(\"/index\")\nasync def trigger_index(api_key: str = Depends(require_api_key), user: str = \"ops\"):\n    \"\"\"\n    Secured endpoint to start indexing codebase and docs (requires X-API-Key).\n    \"\"\"\n    log_event(f\"[TRIGGER_INDEX] by {user}\")\n    index_directories()\n    return {\"status\": \"ok\", \"message\": \"Indexing started!\"}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1681, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f8c3d138-5159-4cf0-9fb9-f797963d2f4d": {"__data__": {"id_": "f8c3d138-5159-4cf0-9fb9-f797963d2f4d", "embedding": null, "metadata": {"file_path": "/app/routes/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 3771, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "5771e42a-0ac9-4d0e-b6a4-5fd3a83abe82", "node_type": "4", "metadata": {"file_path": "/app/routes/kb.py", "file_name": "kb.py", "file_type": "text/x-python", "file_size": 3771, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1cb5d36bb5e52af8e85e4382b04df9946b1ad78b50966c19896b9329a59acf5a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: kb.py\n# Directory: routes\n# Purpose: Provides the backend functionality for knowledge base search and management, including API endpoints and data validation models.\n# Security: All admin/debug endpoints require X-API-Key header, which must match API_KEY in environment.\n# Stack: FastAPI, LlamaIndex/OpenAI (via services.kb), User-aware\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: fastapi, os, pydantic, services, typing\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - SearchQuery()\n#   - get_summary()\n#   - reindex_kb()\n#   - require_api_key()\n#   - search_kb()\n#   - search_kb_get()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter, HTTPException, Header, Depends, Query\nfrom pydantic import BaseModel\nfrom typing import Optional\nfrom services import kb\nimport os\n\n# === Security Dependency: Require X-API-Key header for all admin ops ===\ndef require_api_key(x_api_key: str = Header(..., alias=\"X-API-Key\")):\n    api_key = os.environ.get(\"API_KEY\")\n    if not api_key or x_api_key != api_key:\n        raise HTTPException(status_code=403, detail=\"Invalid or missing API key.\")\n\nrouter = APIRouter(prefix=\"/kb\", tags=[\"knowledge-base\"])\n\nclass SearchQuery(BaseModel):\n    query: str\n    k: int = 4\n    search_type: Optional[str] = \"all\"  # \"code\", \"doc\", or \"all\"\n\n@router.post(\"/search\")\nasync def search_kb(\n    q: SearchQuery,\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\")\n):\n    \"\"\"\n    Search the knowledge base (semantic vector index) for relevant snippets.\n    Optional X-User-Id header for user-aware results.\n    `search_type`: 'code', 'doc', or 'all'.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    try:\n        results = kb.api_search(\n            query=q.query,\n            k=q.k,\n            search_type=q.search_type or \"all\"\n        )\n        return {\"results\": results}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"KB search failed: {e}\")\n\n@router.get(\"/search\")\nasync def search_kb_get(\n    query: str,\n    k: int = 4,\n    search_type: Optional[str] = \"all\",\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\")\n):\n    \"\"\"\n    GET variant of KB search for easy testing.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    try:\n        results = kb.api_search(\n            query=query,\n            k=k,\n            search_type=search_type or \"all\"\n        )\n        return {\"results\": results}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"KB search failed: {e}\")\n\n@router.get(\"/summary\")\nasync def get_summary(\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\")\n):\n    \"\"\"\n    Fetch recent context summary for a given user, or fallback to generic summary.\n    \"\"\"\n    user_id = x_user_id or \"anonymous\"\n    try:\n        summary = kb.get_recent_summaries(user_id)\n        return {\"summary\": summary}\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"KB summary fetch failed: {e}\")\n\n@router.post(\"/reindex\")\nasync def reindex_kb(\n    api_key: str = Depends(require_api_key)\n):\n    \"\"\"\n    Trigger a rebuild of the KB index (admin/debug only).\n    Requires X-API-Key header.\n    \"\"\"\n    try:\n        resp = kb.api_reindex()\n        return resp\n    except Exception as e:\n        raise HTTPException(status_code=500, detail=f\"KB reindex failed: {e}\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3456, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "da0ccd92-d0f6-44d7-92ae-bc1fba68b199": {"__data__": {"id_": "da0ccd92-d0f6-44d7-92ae-bc1fba68b199", "embedding": null, "metadata": {"file_path": "/app/routes/logs.py", "file_name": "logs.py", "file_type": "text/x-python", "file_size": 1009, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "fd493bb4-7905-416e-8e72-977ac426fdb0", "node_type": "4", "metadata": {"file_path": "/app/routes/logs.py", "file_name": "logs.py", "file_type": "text/x-python", "file_size": 1009, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "a24e2a3bd30f5369f7b2ccba1e0b96e35868464f0da39df187c74ea4157f68c5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# Directory: routes\n# Purpose: # Purpose: Provide API endpoints for accessing and managing recent log entries.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: fastapi, services.logs\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - recent_logs()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter, Query\nfrom services.logs import get_recent_logs\n\nrouter = APIRouter(prefix=\"/logs\", tags=[\"logs\"])\n\n@router.get(\"/recent\")\ndef recent_logs(n: int = 50, level_filter: str = None):\n    logs = get_recent_logs(n=n, level_filter=level_filter)\n    return {\"logs\": logs}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 694, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "00a2ef53-7e13-4a12-b790-1fb9fb5b5aac": {"__data__": {"id_": "00a2ef53-7e13-4a12-b790-1fb9fb5b5aac", "embedding": null, "metadata": {"file_path": "/app/routes/logs_sessions.py", "file_name": "logs_sessions.py", "file_type": "text/x-python", "file_size": 1351, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "f036ec8d-e692-48df-a0eb-15ee8582f38b", "node_type": "4", "metadata": {"file_path": "/app/routes/logs_sessions.py", "file_name": "logs_sessions.py", "file_type": "text/x-python", "file_size": 1351, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "223b2ee9497c14111b421ccce9a592a2764de43739cd9fabf66bb8c3a8919657", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# Directory: routes\n# Purpose: # Purpose: Manage and retrieve logs of user sessions within the application.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: fastapi, json, pathlib\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - list_all_sessions()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter, Request\nfrom pathlib import Path\nimport json\n\nrouter = APIRouter(prefix=\"/logs/sessions\", tags=[\"logs\", \"memory\"])\n\nSESSION_LOG_DIR = Path(\"./logs/sessions\")\n\n@router.get(\"/all\")\ndef list_all_sessions():\n    entries = []\n    for path in SESSION_LOG_DIR.glob(\"*.jsonl\"):\n        with open(path) as f:\n            for line in f:\n                try:\n                    parsed = json.loads(line)\n                    entries.append(parsed)\n                except json.JSONDecodeError:\n                    continue\n    return {\"entries\": sorted(entries, key=lambda x: x.get(\"timestamp\", \"\"), reverse=True)}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1034, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7cad7f7d-8d70-4104-8374-179c517d60a2": {"__data__": {"id_": "7cad7f7d-8d70-4104-8374-179c517d60a2", "embedding": null, "metadata": {"file_path": "/app/routes/mcp.py", "file_name": "mcp.py", "file_type": "text/x-python", "file_size": 2311, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "34842591-2885-45ca-a1d7-4fceeacd1e58", "node_type": "4", "metadata": {"file_path": "/app/routes/mcp.py", "file_name": "mcp.py", "file_type": "text/x-python", "file_size": 2311, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e613e2a630886ccd1852a4181c25d9e60dbd34c6200ab8948e048d3011af9afd", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: routes/mcp.py\n# Directory: routes/\n# Purpose: API route for direct access to MCP handler (run_mcp) for testing, automation, or admin use\n\n# Directory: routes\n# Purpose: # Purpose: Provides the main control program (MCP) for handling API requests and managing agent interactions in a FastAPI application.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: agents.mcp_agent, fastapi, typing\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - mcp_run()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\nfrom fastapi import APIRouter, HTTPException, Request, Header\nfrom typing import Optional\nfrom agents.mcp_agent import run_mcp\n\nrouter = APIRouter(prefix=\"/mcp\", tags=[\"mcp\"])\n\n@router.post(\"/run\")\nasync def mcp_run(\n    request: Request,\n    x_user_id: Optional[str] = Header(None, alias=\"X-User-Id\")\n):\n    \"\"\"\n    Direct endpoint for invoking the MCP agent orchestrator (run_mcp).\n    Accepts flexible input for query/prompt, plus optional files, topics, role, debug.\n    \"\"\"\n    data = await request.json()\n    # Accept a variety of possible input keys for maximum compatibility.\n    query = data.get(\"query\") or data.get(\"question\") or data.get(\"prompt\")\n    if not query:\n        raise HTTPException(status_code=422, detail=\"Missing 'query' in payload\")\n\n    # Use .get() with default empty list to prevent passing None if omitted.\n    files = data.get(\"files\", [])\n    topics = data.get(\"topics\", [])\n    role = data.get(\"role\", \"planner\")\n    debug = data.get(\"debug\", False)\n    user_id = x_user_id or \"anonymous\"\n\n    try:\n        return await run_mcp(\n            query=query,\n            files=files,\n            topics=topics,\n            role=role,\n            user_id=user_id,\n            debug=debug,\n        )\n    except Exception as e:\n        # Optionally add traceback.print_exc() for debug\n        raise HTTPException(status_code=500, detail=f\"MCP error: {str(e)}\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1996, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "aea18028-5e7f-44f2-b3fa-fe3df1795835": {"__data__": {"id_": "aea18028-5e7f-44f2-b3fa-fe3df1795835", "embedding": null, "metadata": {"file_path": "/app/routes/oauth.py", "file_name": "oauth.py", "file_type": "text/x-python", "file_size": 5462, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "cfef4dce-12aa-413e-8964-73fc842ec310", "node_type": "4", "metadata": {"file_path": "/app/routes/oauth.py", "file_name": "oauth.py", "file_type": "text/x-python", "file_size": 5462, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e01be93f908b33e4a984b165c43bfc85761cbfc467fb11ab8f475efc81b97e44", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "3be98f36-17e8-4e64-9ebd-70d8938cf539", "node_type": "1", "metadata": {}, "hash": "e4287cf2a1d5980944d5eac49002e55bb2ed99441820b1eb409710ccf2da811a", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n#  File: oauth.py\n# Directory: routes\n# Purpose: # Purpose: Handle OAuth authentication flow for the application, including initiating authentication and processing callbacks.\n#\n# Upstream:\n#   - ENV: GOOGLE_CREDS_JSON, OAUTH_REDIRECT_URI, POST_AUTH_REDIRECT_URI\n#   - Imports: base64, fastapi, fastapi.responses, google_auth_oauthlib.flow, os, pathlib\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - oauth_callback()\n#   - start_oauth()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nimport os\nimport base64\nfrom pathlib import Path\nfrom fastapi import APIRouter, Request, HTTPException\nfrom fastapi.responses import RedirectResponse\nfrom google_auth_oauthlib.flow import Flow, InstalledAppFlow\n\nrouter = APIRouter()\n\n# === OAuth Configuration ===\nSCOPES = [\n    \"https://www.googleapis.com/auth/drive.readonly\",\n    \"https://www.googleapis.com/auth/documents.readonly\",\n]\nCREDENTIALS_PATH = Path(\"/tmp/credentials.json\")\nTOKEN_PATH = Path(\"frontend/sync/token.json\")\n# Default post-auth landing page (relative path)\nDEFAULT_POST_REDIRECT = \"/status/summary\"\n# Optional overrides (full URIs)\nOVERRIDE_REDIRECT_URI = os.getenv(\"OAUTH_REDIRECT_URI\")\nOVERRIDE_POST_REDIRECT = os.getenv(\"POST_AUTH_REDIRECT_URI\")\n\n@router.get(\"/google/auth\")\nasync def start_oauth(request: Request):\n    \"\"\"\n    Initiates the OAuth flow:\n    1. Ensure client secrets in /tmp/credentials.json from GOOGLE_CREDS_JSON.\n    2. Determine redirect URI (override or based on request.base_url).\n    3. Redirect browser to Google consent screen.\n    \"\"\"\n    # 1. Write client secrets if missing\n    if not CREDENTIALS_PATH.exists():\n        raw = os.getenv(\"GOOGLE_CREDS_JSON\")\n        if not raw:\n            raise HTTPException(500, detail=\"Missing GOOGLE_CREDS_JSON environment variable.\")\n        try:\n            creds_json = base64.b64decode(raw).decode()\n            CREDENTIALS_PATH.write_text(creds_json)\n            print(f\"\u2705 Wrote client secrets to {CREDENTIALS_PATH}\")\n        except Exception as e:\n            raise HTTPException(500, detail=f\"Error decoding GOOGLE_CREDS_JSON: {e}\")\n\n    # 2. Determine redirect URI\n    if OVERRIDE_REDIRECT_URI:\n        redirect_uri = OVERRIDE_REDIRECT_URI\n        print(f\"\ud83d\udd27 Using override redirect URI: {redirect_uri}\")\n    else:\n        base = str(request.base_url).rstrip(\"/\")\n        redirect_uri = f\"{base}/google/callback\"\n        print(f\"\ud83d\udd27 Using dynamic redirect URI: {redirect_uri}\")\n\n    # 3. Create flow and authorization URL\n    flow = Flow.from_client_secrets_file(\n        str(CREDENTIALS_PATH),\n        scopes=SCOPES,\n        redirect_uri=redirect_uri,\n    )\n    auth_url, state = flow.authorization_url(\n        access_type=\"offline\",\n        include_granted_scopes=\"true\",\n        prompt=\"consent\"\n    )\n    print(f\"\ud83c\udf10 Redirecting to Google consent: {auth_url}\")\n    return RedirectResponse(auth_url)\n\n@router.get(\"/google/callback\")\nasync def oauth_callback(request: Request, code: str = None, state: str = None):\n    \"\"\"\n    Handles the OAuth callback:\n    1. Validate 'code'.\n    2. Exchange code for credentials using redirect URI.\n    3. Persist token.json.\n    4. Redirect to post-auth landing (relative path).\n    \"\"\"\n    if not code:\n        raise HTTPException(400, detail=\"Missing authorization code in callback.\")\n\n    if not CREDENTIALS_PATH.exists():\n        raise HTTPException(500, detail=\"Client secrets not found.\")", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 3482, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "3be98f36-17e8-4e64-9ebd-70d8938cf539": {"__data__": {"id_": "3be98f36-17e8-4e64-9ebd-70d8938cf539", "embedding": null, "metadata": {"file_path": "/app/routes/oauth.py", "file_name": "oauth.py", "file_type": "text/x-python", "file_size": 5462, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "cfef4dce-12aa-413e-8964-73fc842ec310", "node_type": "4", "metadata": {"file_path": "/app/routes/oauth.py", "file_name": "oauth.py", "file_type": "text/x-python", "file_size": 5462, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "e01be93f908b33e4a984b165c43bfc85761cbfc467fb11ab8f475efc81b97e44", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "aea18028-5e7f-44f2-b3fa-fe3df1795835", "node_type": "1", "metadata": {"file_path": "/app/routes/oauth.py", "file_name": "oauth.py", "file_type": "text/x-python", "file_size": 5462, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1cfccfe0f224acefdbfc42ee7321152badf5da300c9307bc982408dde410108d", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "Validate 'code'.\n    2. Exchange code for credentials using redirect URI.\n    3. Persist token.json.\n    4. Redirect to post-auth landing (relative path).\n    \"\"\"\n    if not code:\n        raise HTTPException(400, detail=\"Missing authorization code in callback.\")\n\n    if not CREDENTIALS_PATH.exists():\n        raise HTTPException(500, detail=\"Client secrets not found.\")\n\n    # Determine redirect URI for token exchange\n    if OVERRIDE_REDIRECT_URI:\n        redirect_uri = OVERRIDE_REDIRECT_URI\n        print(f\"\ud83d\udd27 Exchanging token with override redirect URI: {redirect_uri}\")\n    else:\n        base = str(request.base_url).rstrip(\"/\")\n        redirect_uri = f\"{base}/google/callback\"\n        print(f\"\ud83d\udd27 Exchanging token with dynamic redirect URI: {redirect_uri}\")\n\n    # Exchange code for credentials\n    try:\n        flow = InstalledAppFlow.from_client_secrets_file(\n            str(CREDENTIALS_PATH),\n            scopes=SCOPES,\n            redirect_uri=redirect_uri,\n        )\n        flow.fetch_token(code=code)\n        creds = flow.credentials\n        print(f\"\u2705 Obtained credentials (expires: {creds.expiry})\")\n    except Exception as e:\n        print(f\"\u274c Token exchange failed: {e}\")\n        raise HTTPException(500, detail=f\"Token exchange failed: {e}\")\n\n    # Persist token.json\n    try:\n        TOKEN_PATH.parent.mkdir(parents=True, exist_ok=True)\n        TOKEN_PATH.write_text(creds.to_json())\n        print(f\"\u2705 Saved token.json to {TOKEN_PATH}\")\n    except Exception as e:\n        print(f\"\u274c Could not save token.json: {e}\")\n        raise HTTPException(500, detail=f\"Could not write token.json: {e}\")\n\n    # Redirect to post-auth page (use relative path to avoid port issues)\n    if OVERRIDE_POST_REDIRECT:\n        post_redirect = OVERRIDE_POST_REDIRECT\n        print(f\"\ud83d\udd04 Redirecting to override post-auth: {post_redirect}\")\n    else:\n        post_redirect = DEFAULT_POST_REDIRECT\n        print(f\"\ud83d\udd04 Redirecting to relative post-auth path: {post_redirect}\")\n    return RedirectResponse(post_redirect)", "mimetype": "text/plain", "start_char_idx": 3112, "end_char_idx": 5118, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "dacbbe57-6bdd-4988-af2c-5772ebaef4b4": {"__data__": {"id_": "dacbbe57-6bdd-4988-af2c-5772ebaef4b4", "embedding": null, "metadata": {"file_path": "/app/routes/search.py", "file_name": "search.py", "file_type": "text/x-python", "file_size": 3114, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "ce3e6856-3dc5-4a43-8a2d-27b374f56b18", "node_type": "4", "metadata": {"file_path": "/app/routes/search.py", "file_name": "search.py", "file_type": "text/x-python", "file_size": 3114, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "15d8b74e2fa2bfa8a01551b5b058e215a717292618d91ccc28eb5858d6074815", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: routes/search.py\n# Purpose: # Purpose: Provide API endpoints for handling search queries and validating API keys.\n#\n# Upstream:\n#   - ENV: API_KEY\n#   - Imports: __future__, fastapi, logging, os, services, typing\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - require_api_key()\n#   - search()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom __future__ import annotations\n\nimport os\nimport logging\nfrom typing import List, Optional\n\nfrom fastapi import APIRouter, Depends, HTTPException, Query, Request\n\nfrom services import kb\n\nlogger = logging.getLogger(__name__)\nrouter = APIRouter(prefix=\"/kb\", tags=[\"kb-search\"])\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# Auth helper\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\ndef require_api_key(request: Request) -> None:\n    \"\"\"Simple header check. OPTIONS (CORS pre-flight) bypasses auth.\"\"\"\n    if request.method == \"OPTIONS\":\n        return  # allow browser pre-flight\n\n    if request.headers.get(\"x-api-key\") != os.getenv(\"API_KEY\"):\n        raise HTTPException(status_code=401, detail=\"Invalid API key\")\n\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# Routes\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n\n@router.get(\n    \"/search\",\n    dependencies=[Depends(require_api_key)],\n    summary=\"Semantic KB search\",\n)\ndef search(\n    query: Optional[str] = Query(None, alias=\"query\", description=\"Search string\"),\n    q: Optional[str] = Query(None, description=\"Legacy alias for query\"),\n    k: int = Query(5, ge=1, le=20, description=\"Top\u2011K results\"),\n) -> List[dict]:\n    \"\"\"Proxy to `services.kb.api_search`. Returns a JSON\u2011serialisable list.\"\"\"\n    term = (query or q or \"\").strip()\n    if not term:\n        raise HTTPException(status_code=400, detail=\"Missing query parameter\")\n\n    try:\n        raw = kb.api_search(term, k=k)\n        safe = [\n            {\n                \"path\": r[\"path\"],\n                \"title\": r[\"title\"],\n                \"snippet\": r[\"snippet\"],\n                \"updated\": r[\"updated\"],\n                \"similarity\": float(r[\"similarity\"]),\n            }\n            for r in raw\n        ]\n        return safe\n    except Exception as exc:\n        logger.exception(\"KB search failed for %r\", term)\n        raise HTTPException(status_code=500, detail=\"KB backend error\") from exc", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 2413, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "7a129efd-f054-43e9-9140-86cc6b03a7c3": {"__data__": {"id_": "7a129efd-f054-43e9-9140-86cc6b03a7c3", "embedding": null, "metadata": {"file_path": "/app/routes/status.py", "file_name": "status.py", "file_type": "text/x-python", "file_size": 4601, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "586e6e69-198f-4810-b04f-40b336c7e0f3", "node_type": "4", "metadata": {"file_path": "/app/routes/status.py", "file_name": "status.py", "file_type": "text/x-python", "file_size": 4601, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "68b561a4a5527ec63d4b94ff5cd9733b81bb70ccdb680c1398db0d8baa23e3d8", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: status.py\n# Directory: routes\n# Purpose: # Purpose: Provide utilities to fetch and format system status, versioning, and operational context details for monitoring and diagnostics.\n#\n# Upstream:\n#   - ENV: RELAY_PROJECT_ROOT\n#   - Imports: datetime, fastapi, os, pathlib, subprocess\n#\n# Downstream:\n#   - main\n#\n# Contents:\n#   - fmt_time()\n#   - get_context_status()\n#   - get_env_status()\n#   - get_status_paths()\n#   - get_summary()\n#   - get_version()\n#   - list_context_inventory()\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter\nfrom pathlib import Path\nimport os\nfrom subprocess import check_output, CalledProcessError\nfrom datetime import datetime\n\nrouter = APIRouter(prefix=\"/status\", tags=[\"status\"])\n\n@router.get(\"/paths\")\ndef get_status_paths():\n    \"\"\"\n    Returns existence of major source code/data directories for debugging.\n    \"\"\"\n    env_root = os.getenv(\"RELAY_PROJECT_ROOT\")\n    base = Path(env_root).resolve() if env_root else Path.cwd()\n\n    roots = [\n        \"services\",\n        \"frontend/src/app\",\n        \"frontend/src/components\",\n        \"routes\",\n        \".\"\n    ]\n\n    visible = {}\n    for r in roots:\n        path = base / r\n        visible[r] = path.exists()\n\n    return {\n        \"base_path\": str(base),\n        \"resolved_paths\": visible\n    }\n\n@router.get(\"/env\")\ndef get_env_status():\n    \"\"\"\n    Returns selected environment variable statuses (partially masked for safety).\n    \"\"\"\n    keys = [\"OPENAI_API_KEY\", \"API_KEY\", \"RELAY_PROJECT_ROOT\", \"RAILWAY_URL\"]\n    values = {\n        k: os.getenv(k)[:5] + \"...\" if os.getenv(k) else None\n        for k in keys\n    }\n    return values\n\n@router.get(\"/version\")\ndef get_version():\n    \"\"\"\n    Returns current Git commit short hash.\n    \"\"\"\nfrom subprocess import check_output, CalledProcessError, DEVNULL\n\n@router.get(\"/version\")\ndef get_version():\n    \"\"\"\n    Returns current Git commit short hash.\n    \"\"\"\n    try:\n        commit = check_output([\"git\", \"rev-parse\", \"--short\", \"HEAD\"], stderr=DEVNULL).decode().strip()\n    except Exception:\n        commit = \"unknown\"\n    return {\"git_commit\": commit}\n\n\n@router.get(\"/summary\")\ndef get_summary():\n    \"\"\"\n    Returns a bundle of status: paths, env, and version.\n    \"\"\"\n    return {\n        \"paths\": get_status_paths(),\n        \"env\": get_env_status(),\n        \"version\": get_version()\n    }\n\ndef list_context_inventory(\n    base: Path, \n    roots = [\"docs\", \"context\"], \n    exts = [\".md\", \".txt\"]\n):\n    \"\"\"\n    Helper: Returns a list of context file metadata from all roots.\n    \"\"\"\n    inventory = []\n    for root in roots:\n        folder = base / root\n        if not folder.exists():\n            continue\n        for f in folder.rglob(\"*\"):\n            if f.is_file() and f.suffix in exts:\n                inventory.append({\n                    \"path\": str(f.relative_to(base)),\n                    \"size_bytes\": f.stat().st_size,\n                    \"last_modified\": datetime.utcfromtimestamp(f.stat().st_mtime).isoformat() + \"Z\"\n                })\n    return inventory\n\n@router.get(\"/context\")\ndef get_context_status():\n    \"\"\"\n    Returns details about all global context and overlays:\n    - All context files with metadata (from /docs, /context)\n    - Which global_context (manual or auto) is active\n    - Last updated timestamps\n    \"\"\"\n    env_root = os.getenv(\"RELAY_PROJECT_ROOT\")\n    base = Path(env_root).resolve() if env_root else Path.cwd()\n    global_manual = base / \"docs/generated/global_context.md\"\n    global_auto = base / \"docs/generated/global_context.auto.md\"\n\n    def fmt_time(path):\n        return datetime.utcfromtimestamp(path.stat().st_mtime).isoformat() + \"Z\" if path.exists() else \"missing\"\n\n    files = list_context_inventory(base)\n    files_sorted = sorted(files, key=lambda x: x[\"path\"])\n\n    return {\n        \"context_files\": files_sorted,\n        \"global_context_used\": \"manual\" if global_manual.exists() else \"auto\" if global_auto.exists() else \"none\",\n        \"global_context_manual_last_updated\": fmt_time(global_manual),\n        \"global_context_auto_last_updated\": fmt_time(global_auto),\n        \"file_count\": len(files_sorted),\n        \"root\": str(base)\n    }", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 4288, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f51bf376-5b25-449a-9913-a9e226025534": {"__data__": {"id_": "f51bf376-5b25-449a-9913-a9e226025534", "embedding": null, "metadata": {"file_path": "/app/routes/status_code.py", "file_name": "status_code.py", "file_type": "text/x-python", "file_size": 2214, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "440e260f-abad-418d-8625-6954a2066a6b", "node_type": "4", "metadata": {"file_path": "/app/routes/status_code.py", "file_name": "status_code.py", "file_type": "text/x-python", "file_size": 2214, "creation_date": "2025-07-08", "last_modified_date": "2025-07-08", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "0fcd31e98aeec86b83286e8a6287094186211684e8b4255d66ba0cc83df708d1", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n# File: status_code.py\n# Directory: routes\n# Purpose: # Purpose: Provides utilities to extract and interpret status codes from FastAPI responses.\n#\n# Upstream:\n#   - ENV: \u2014\n#   - Imports: ast, datetime, fastapi, os, pathlib\n#\n# Downstream:\n#   - \u2014\n#\n# Contents:\n#   - extract_functions()\n#   - get_code_status()\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\nfrom fastapi import APIRouter\nfrom pathlib import Path\nimport os, ast\nfrom datetime import datetime\n\nrouter = APIRouter(prefix=\"/status\", tags=[\"status\"])\n\nCODE_PATHS = [\n    (\"services/context_injector.py\", \"core\"),\n    (\"services/indexer.py\", \"core\"),\n    (\"routes/ask.py\", \"core\"),\n    (\"routes/admin_routes.py\", \"core\"),\n    (\"routes/status.py\", \"support\"),\n    (\"scripts/sync_context_docs.py\", \"support\"),\n    (\"scripts/generate_global_context.auto.py\", \"support\"),\n    (\"main.py\", \"entrypoint\")\n]\n\n# Extract function names from a file using AST\ndef extract_functions(path: Path) -> list:\n    try:\n        tree = ast.parse(path.read_text())\n        return [node.name for node in ast.walk(tree) if isinstance(node, (ast.FunctionDef, ast.AsyncFunctionDef))]\n    except Exception:\n        return []\n\n@router.get(\"/code\")\ndef get_code_status():\n    results = []\n    for rel_path, tag in CODE_PATHS:\n        path = Path(rel_path)\n        if not path.exists():\n            results.append({\"file\": rel_path, \"status\": \"\u274c Missing\", \"tag\": tag})\n            continue\n\n        functions = extract_functions(path)\n        modified = datetime.utcfromtimestamp(path.stat().st_mtime).isoformat() + \"Z\"\n        results.append({\n            \"file\": rel_path,\n            \"status\": \"\u2705 OK\",\n            \"tag\": tag,\n            \"functions\": functions,\n            \"last_modified\": modified\n        })\n\n    return {\"files\": results}", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1893, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "744eda12-d396-4ee4-be20-b1ffff7f6c0c": {"__data__": {"id_": "744eda12-d396-4ee4-be20-b1ffff7f6c0c", "embedding": null, "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38", "node_type": "4", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5a786850279aca45e7686d3f2089724b53e2f14977a7fdf2f9df0a652cfc3a71", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "67c60400-9402-4fef-8fdf-f16cd5205294", "node_type": "1", "metadata": {}, "hash": "2a2a75cb7f428e84e696824cc6c5a556fb593e0686a0924aa0990ba2142a9470", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "# File: routes/webhooks_github.py\n# Purpose: Verified, hardened GitHub webhook intake with background dispatch\n# Notes:\n# - Verifies X-Hub-Signature-256 (sha256=...) or legacy X-Hub-Signature (sha1=...)\n# - Returns 2xx quickly; heavy work runs in BackgroundTasks\n# - In-memory de-dupe on X-GitHub-Delivery to avoid reprocessing retries\n# - Dispatches common events (pull_request, issue_comment, push)\n# - Queues a Control action via in-process queue first; falls back to HTTP; else logs\n# - Does NOT execute repo writes; those live in /gh action endpoints\n\nfrom __future__ import annotations\n\nimport os\nimport hmac\nimport json\nimport hashlib\nimport logging\nimport urllib.request\nimport urllib.error\nfrom datetime import datetime, timezone\nfrom typing import Any, Optional\n\nfrom fastapi import APIRouter, Request, HTTPException, BackgroundTasks\n\nrouter = APIRouter(prefix=\"/webhooks\", tags=[\"webhooks\"])\nlog = logging.getLogger(\"webhooks.github\")\n\n# Config\nCONTROL_BASE_URL = os.getenv(\"CONTROL_BASE_URL\", \"http://127.0.0.1:8080\")\nAPI_KEY = os.getenv(\"API_KEY\", \"\")\nEVENT_LOG_PATH = os.getenv(\"EVENT_LOG_PATH\", \"logs/events.log\")\nMAX_EVENT_BYTES = int(os.getenv(\"GITHUB_WEBHOOK_MAX_BYTES\", \"1048576\"))  # 1 MiB default\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Helpers \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n@router.get(\"/github\")\nasync def github_probe():\n    return {\"ok\": True, \"msg\": \"github webhook endpoint is up (GET probe)\"}\n\n@router.get(\"/github/debug\")\nasync def github_debug():\n    # Do not return the actual secret, just its presence and cache size.", "mimetype": "text/plain", "start_char_idx": 0, "end_char_idx": 1537, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "67c60400-9402-4fef-8fdf-f16cd5205294": {"__data__": {"id_": "67c60400-9402-4fef-8fdf-f16cd5205294", "embedding": null, "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38", "node_type": "4", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5a786850279aca45e7686d3f2089724b53e2f14977a7fdf2f9df0a652cfc3a71", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "744eda12-d396-4ee4-be20-b1ffff7f6c0c", "node_type": "1", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5106b98f3fcb6f2689965db93ad3b8bbd98e96efee7e7505e817aa64e2a0fb21", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "1befcdd4-39a7-4714-b0e3-b6e1454f9855", "node_type": "1", "metadata": {}, "hash": "e0ef2e3224956fec4997747a34391d932a3caf323020b3fedd101a3893744606", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "return {\n        \"ok\": True,\n        \"has_secret\": bool(os.getenv(\"GITHUB_WEBHOOK_SECRET\")),\n        \"env\": os.getenv(\"ENV\", \"local\"),\n        \"delivery_cache_size\": len(_seen),\n        \"max_event_bytes\": MAX_EVENT_BYTES,\n    }\n\ndef _verify_sig(req: Request, body: bytes, secret: str):\n    if not secret:\n        raise HTTPException(status_code=500, detail=\"Webhook secret not configured\")\n\n    sig256 = req.headers.get(\"X-Hub-Signature-256\")  # sha256=...\n    sig1   = req.headers.get(\"X-Hub-Signature\")      # sha1=...\n\n    if sig256:\n        expected = \"sha256=\" + hmac.new(secret.encode(), body, hashlib.sha256).hexdigest()\n        if hmac.compare_digest(expected, sig256):\n            return\n        raise HTTPException(status_code=401, detail=\"Bad signature (sha256)\")\n\n    if sig1:\n        expected = \"sha1=\" + hmac.new(secret.encode(), body, hashlib.sha1).hexdigest()\n        if hmac.compare_digest(expected, sig1):\n            return\n        raise HTTPException(status_code=401, detail=\"Bad signature (sha1)\")\n\n    raise HTTPException(status_code=400, detail=\"Missing signature header\")\n\n_seen: set[str] = set()\ndef _already_seen(delivery_id: str) -> bool:\n    if not delivery_id:\n        return False\n    if delivery_id in _seen:\n        return True\n    if len(_seen) > 2048:\n        _seen.clear()\n    _seen.add(delivery_id)\n    return False\n\ndef _safe_json_loads(raw: bytes) -> dict[str, Any]:\n    try:\n        return json.loads(raw.decode(\"utf-8\") or \"{}\")\n    except json.JSONDecodeError:\n        raise HTTPException(status_code=400, detail=\"Invalid JSON payload\")\n\ndef _extract_fenced_block(text: str, lang_hint: str = \"\") -> Optional[str]:\n    fence = \"```\"\n    if fence not in text:\n        return None\n    parts = text.split(fence)\n    # search fenced sections; odd indexes are inside code fences\n    for i in range(1, len(parts), 2):\n        header_and_body = parts[i].strip().splitlines()\n        if not header_and_body:\n            continue\n        first = header_and_body[0].strip().lower()\n        body = \"\\n\".join(header_and_body[1:]) if len(header_and_body) > 1 else \"\"\n        if not lang_hint or lang_hint in first:\n            return body.strip() or None\n    return None\n\ndef _append_event_log(record: dict[str, Any]) -> None:\n    try:\n        os.makedirs(os.path.dirname(EVENT_LOG_PATH), exist_ok=True)\n        with open(EVENT_LOG_PATH, \"a\", encoding=\"utf-8\") as f:\n            f.write(json.dumps(record) + \"\\n\")\n    except Exception as e:\n        log.warning(\"Failed to write event log: %s\", e)\n\ndef _queue_control_action(kind: str, payload: dict[str, Any]) -> bool:\n    \"\"\"Prefer in-process queue (Codespaces-safe). Fallback to HTTP; else log.\"\"\"\n    # 1) In-process queue\n    try:\n        from services.action_queue import enqueue_action\n        enqueue_action(kind, payload)\n        return True\n    except Exception as e:\n        log.info(\"Local queue unavailable (%s); trying HTTP fallback\", e.__class__.__name__)\n\n    # 2) HTTP fallback (works when Control runs as a separate service)\n    url = f\"{CONTROL_BASE_URL.rstrip('/')}/control/queue_action\"\n    body = json.dumps({\n        \"action_type\": kind,\n        \"source\": \"github_webhook\",\n        \"payload\": payload,\n        \"queued_at\": datetime.now(timezone.utc).isoformat()\n    }).encode(\"utf-8\")\n    headers = {\"Content-Type\": \"application/json\"}\n    if API_KEY:\n        headers[\"Authorization\"] = f\"Bearer {API_KEY}\"\n\n    try:\n        req = urllib.request.Request(url, data=body, headers=headers, method=\"POST\")\n        with urllib.request.urlopen(req, timeout=3) as resp:\n            resp.read()  # drain\n        return True\n    except (urllib.error.HTTPError, urllib.error.URLError, TimeoutError) as e:\n        log.info(\"HTTP queue fallback failed: %s\", getattr(e, \"reason\", e))\n        _append_event_log({\"kind\": kind, \"payload\": payload, \"note\": \"queued_to_log\"})\n        return False\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Route \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n@router.", "mimetype": "text/plain", "start_char_idx": 1542, "end_char_idx": 5492, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "1befcdd4-39a7-4714-b0e3-b6e1454f9855": {"__data__": {"id_": "1befcdd4-39a7-4714-b0e3-b6e1454f9855", "embedding": null, "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38", "node_type": "4", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5a786850279aca45e7686d3f2089724b53e2f14977a7fdf2f9df0a652cfc3a71", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "67c60400-9402-4fef-8fdf-f16cd5205294", "node_type": "1", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "1968e8ad48114644c6c7c86b80b4bbff9ec0efdd4458fc4bdba3f8d1821c6459", "class_name": "RelatedNodeInfo"}, "3": {"node_id": "f2f22e8f-ce50-40c9-bfa6-ce4990cc269f", "node_type": "1", "metadata": {}, "hash": "9c96425202a6e1651f454b87cc10e47de7eb3498231dd93a2edec32c88edfa77", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "\"queued_at\": datetime.now(timezone.utc).isoformat()\n    }).encode(\"utf-8\")\n    headers = {\"Content-Type\": \"application/json\"}\n    if API_KEY:\n        headers[\"Authorization\"] = f\"Bearer {API_KEY}\"\n\n    try:\n        req = urllib.request.Request(url, data=body, headers=headers, method=\"POST\")\n        with urllib.request.urlopen(req, timeout=3) as resp:\n            resp.read()  # drain\n        return True\n    except (urllib.error.HTTPError, urllib.error.URLError, TimeoutError) as e:\n        log.info(\"HTTP queue fallback failed: %s\", getattr(e, \"reason\", e))\n        _append_event_log({\"kind\": kind, \"payload\": payload, \"note\": \"queued_to_log\"})\n        return False\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Route \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\n@router.post(\"/github\")\nasync def github(req: Request, bg: BackgroundTasks):\n    secret = os.getenv(\"GITHUB_WEBHOOK_SECRET\", \"\")\n    body = await req.body()\n\n    # Body size guard\n    if len(body) > MAX_EVENT_BYTES:\n        raise HTTPException(status_code=413, detail=\"Payload too large\")\n\n    _verify_sig(req, body, secret)\n\n    event    = req.headers.get(\"X-GitHub-Event\", \"unknown\")\n    delivery = req.headers.get(\"X-GitHub-Delivery\", \"\")\n\n    if _already_seen(delivery):\n        return {\"ok\": True, \"event\": event, \"delivery\": delivery, \"deduped\": True}\n\n    payload = _safe_json_loads(body)\n\n    # process async; keep GitHub happy with a fast 2xx\n    bg.add_task(_dispatch_event, event, payload, delivery)\n    return {\"ok\": True, \"event\": event, \"delivery\": delivery, \"queued\": True}\n\n# \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500 Dispatcher \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n\ndef _dispatch_event(event: str, p: dict[str, Any], delivery: str):\n    try:\n        if event == \"ping\":\n            _append_event_log({\"event\": \"ping\", \"delivery\": delivery})\n            return\n        if event == \"pull_request\":\n            _on_pull_request(p, delivery)\n        elif event == \"issue_comment\":\n            _on_issue_comment(p, delivery)\n        elif event == \"push\":\n            _on_push(p, delivery)\n        else:\n            log.info(\"Unhandled GH event=%s delivery=%s\", event, delivery)\n            _append_event_log({\"event\": event, \"delivery\": delivery, \"unhandled\": True})\n    except Exception as ex:\n        log.exception(\"Webhook dispatch failed: %s\", ex)\n        _append_event_log({\"event\": event, \"delivery\": delivery, \"error\": str(ex)})\n\ndef _on_pull_request(p: dict[str, Any], delivery: str):\n    action = p.get(\"action\")\n    repo = p.get(\"repository\", {}).get(\"full_name\")\n    pr = p.get(\"pull_request\", {}) or {}\n    number = pr.get(\"number\")\n    head_branch = (pr.get(\"head\", {}) or {}).get(\"ref\", \"\")\n    data = {\"repo\": repo, \"number\": number, \"branch\": head_branch, \"action\": action, \"delivery\": delivery}\n\n    # Example triage: label/notify for branches created by our bot\n    if head_branch and head_branch.startswith(\"echo/\") and action in {\"opened\", \"reopened\", \"synchronize\"}:\n        _queue_control_action(\"pr_triage\", data)\n    else:\n        _append_event_log({\"event\": \"pull_request\", **data})\n\ndef _on_issue_comment(p: dict[str, Any], delivery: str):\n    if p.get(\"action\") != \"created\":\n        return\n    repo = p.get(\"repository\", {}).get(\"full_name\")\n    issue = p.get(\"issue\", {}) or {}\n    number = issue.get(\"number\")\n    comment_body = (p.get(\"comment\", {}) or {}).get(\"body\", \"\") or \"\"\n    data = {\"repo\": repo, \"number\": number, \"delivery\": delivery}\n\n    # Command: /echo apply-diff with a ```diff fenced block\n    if comment_body.strip().startswith(\"/echo apply-diff\"):\n        diff = _extract_fenced_block(comment_body, lang_hint=\"diff\")\n        if not diff:\n            _queue_control_action(\"comment_error\", {**data, \"msg\": \"No ```diff block found\"})\n            return\n        _queue_control_action(\"apply_diff_request\", {**data,", "mimetype": "text/plain", "start_char_idx": 4751, "end_char_idx": 8531, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}, "f2f22e8f-ce50-40c9-bfa6-ce4990cc269f": {"__data__": {"id_": "f2f22e8f-ce50-40c9-bfa6-ce4990cc269f", "embedding": null, "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "excluded_embed_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "excluded_llm_metadata_keys": ["file_name", "file_type", "file_size", "creation_date", "last_modified_date", "last_accessed_date"], "relationships": {"1": {"node_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38", "node_type": "4", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "5a786850279aca45e7686d3f2089724b53e2f14977a7fdf2f9df0a652cfc3a71", "class_name": "RelatedNodeInfo"}, "2": {"node_id": "1befcdd4-39a7-4714-b0e3-b6e1454f9855", "node_type": "1", "metadata": {"file_path": "/app/routes/webhooks_github.py", "file_name": "webhooks_github.py", "file_type": "text/x-python", "file_size": 9168, "creation_date": "2025-08-12", "last_modified_date": "2025-08-12", "tier": "code", "document_title": "Relay Project: Comprehensive Overview and Next Steps"}, "hash": "da5e37bf4dc03af65ffb9129f9dd62e6d90c25a06ba9b53853a8a3875d0116b5", "class_name": "RelatedNodeInfo"}}, "metadata_template": "{key}: {value}", "metadata_separator": "\n", "text": "**data})\n\ndef _on_issue_comment(p: dict[str, Any], delivery: str):\n    if p.get(\"action\") != \"created\":\n        return\n    repo = p.get(\"repository\", {}).get(\"full_name\")\n    issue = p.get(\"issue\", {}) or {}\n    number = issue.get(\"number\")\n    comment_body = (p.get(\"comment\", {}) or {}).get(\"body\", \"\") or \"\"\n    data = {\"repo\": repo, \"number\": number, \"delivery\": delivery}\n\n    # Command: /echo apply-diff with a ```diff fenced block\n    if comment_body.strip().startswith(\"/echo apply-diff\"):\n        diff = _extract_fenced_block(comment_body, lang_hint=\"diff\")\n        if not diff:\n            _queue_control_action(\"comment_error\", {**data, \"msg\": \"No ```diff block found\"})\n            return\n        _queue_control_action(\"apply_diff_request\", {**data, \"diff\": diff})\n    else:\n        _append_event_log({\"event\": \"issue_comment\", **data})\n\ndef _on_push(p: dict[str, Any], delivery: str):\n    repo = p.get(\"repository\", {}).get(\"full_name\")\n    ref = p.get(\"ref\", \"\")\n    data = {\"repo\": repo, \"ref\": ref, \"delivery\": delivery}\n    _append_event_log({\"event\": \"push\", **data})", "mimetype": "text/plain", "start_char_idx": 7770, "end_char_idx": 8855, "metadata_seperator": "\n", "text_template": "{metadata_str}\n\n{content}", "class_name": "TextNode"}, "__type__": "1"}}, "docstore/metadata": {"fa3b7297-4388-4695-b5e4-f15167a391b4": {"doc_hash": "9105ffccf7b9448991737c625d5f87c20d956a67695ead55733a7e04b6e21003", "ref_doc_id": "0586af43-bf90-4393-9c42-8fbe729e109a"}, "c00fc62f-ec56-46a8-8f37-995227e24d73": {"doc_hash": "a92ff894f03bbee6e88f58e6c48edac3d0199b2a6bb063a60b117b16d5d0b538", "ref_doc_id": "af045316-2444-434a-b391-6dab4c2ff1d4"}, "6552e0fd-ccbb-4e75-9b2e-e98045397391": {"doc_hash": "b3f678c628fe1a3caa59673abb90f20721d1142c303d7584d820389ac19a3d4a", "ref_doc_id": "b40729fc-472b-4e2e-bf7c-295aea0e2ab7"}, "2df295fe-05ba-4979-9d7a-a39ec2fe043a": {"doc_hash": "223c872b403ae7618260ced719094bcf5a3225bfa249346bcd7887212d14cd39", "ref_doc_id": "9ef4c14f-f20e-462c-8d04-245210a10931"}, "ecd560d1-2f07-4ae8-985e-fa70d1ecb886": {"doc_hash": "d0f2291b2f5044634632e8f721dfe4a34a5f0fbaf40610180dc2cd0df1b179f7", "ref_doc_id": "b23e1497-6700-4cb4-bbd8-86eb3a04ee9f"}, "bbc0c915-33ea-44ad-b9e4-c7e154eee90c": {"doc_hash": "7e7a2dedaa9e1471284278187a56050c46d1fb889b6c01244aaae02524728f23", "ref_doc_id": "b23e1497-6700-4cb4-bbd8-86eb3a04ee9f"}, "5f336f0f-d45f-4533-8cb1-b5749de65a0a": {"doc_hash": "24f79b49109b11526a5502a4286171caf4047ea325396bfe2c8f4394659105e0", "ref_doc_id": "9ccc8290-c664-4b39-a2e7-a6c70e6455ea"}, "6ee7cb35-1ab6-4465-9984-a96306c53c90": {"doc_hash": "4aa2485df5812a6240c1b5b1abbd0e8cbe044b8a83b4d8998824e3086e8bedb3", "ref_doc_id": "1ee99886-cad7-475d-8cf9-ac27341df244"}, "eaebc08d-f4a5-4a92-b083-7c2f724b001e": {"doc_hash": "142c65964c89f31558421bc476b65d7cb205268b44711bd030b75cf109e953c3", "ref_doc_id": "1ee99886-cad7-475d-8cf9-ac27341df244"}, "f38caa9c-d00c-4daf-81b3-de90b0a98f8d": {"doc_hash": "f6c7d4527f4212572ca44e9fb37bca18264a0b298403e158bf32f752015b31f0", "ref_doc_id": "1ee99886-cad7-475d-8cf9-ac27341df244"}, "d7bdf921-0696-46cd-92b4-8a88f48d8983": {"doc_hash": "83fce6731dac32e9e63bd3fbb76413c6ac1ebfb196b70f3d97d684bf415379c4", "ref_doc_id": "493c8071-8e75-40a8-97c1-9a4963aa98e2"}, "a32012a9-cfb4-4348-a4da-a4f307855c60": {"doc_hash": "bbfdbdc48608d50ddf9b7158aacfa7d3f09fe5c022c0931a14bb29585afe3ced", "ref_doc_id": "c7081819-8165-475b-8418-4f6e7ae1e5af"}, "49aac477-69c9-4865-b87f-696ffa1dbd0f": {"doc_hash": "9aa11fec436814f74921170426eb447bb0cd132cef1a487f929df15bd01487d4", "ref_doc_id": "ec241d19-322e-4f3a-a687-655effb18a66"}, "52a61899-7700-4010-8d4a-18796f6304d3": {"doc_hash": "05964e2acb259ec9bde2f61390112f8365437ca0db74d6b8e6462b8b19832cea", "ref_doc_id": "83586bda-1f60-4d3d-9d13-13be055d9559"}, "ab01e946-537f-4a25-8257-1cc148af3390": {"doc_hash": "20fe48c0325b2e26e9f2b7a3bab8dfa814b9c30a65b848ec4db3c607035c2db7", "ref_doc_id": "47027b86-f8a8-41e4-96a4-039e46066578"}, "40723709-99e9-4311-ba95-7a02866227b7": {"doc_hash": "09ed198deecd51cfa10a04452136b8fd71ea51bb767e3f482e7b03b4716fbd2c", "ref_doc_id": "3691fab0-e6a0-4aa8-a019-8b09d04bcde3"}, "c7a655e2-4172-4208-9d9a-1332998199a2": {"doc_hash": "0d20d48b7963222f6d0ece31249aa054a9271209309bb4b0cffb28a1dfeabc91", "ref_doc_id": "f42014d8-f52f-432c-a23e-c4adf818bb80"}, "ae4615be-fd2f-49da-83c1-1e6a323bdeee": {"doc_hash": "0b4d2d9abba7fc1d191f66e3fd3bec2fa8801e235d771b31198007133b8ef1a7", "ref_doc_id": "706fbb7c-ddd2-48f6-af6c-3a0807367940"}, "f9c59816-a0ef-40cb-b282-377372e52016": {"doc_hash": "e4d0cfa264eb792fb865c8e19c3847aebde1eb07ba215c65bcfd4f8cdab7844f", "ref_doc_id": "a832645a-9453-4736-8025-aecf9a5eba91"}, "d6f61d78-a790-4f7e-b76e-94b7f5e0b72d": {"doc_hash": "50902a27c3127cc3ade2fecdfebd1255632d90d0a23a80deeb003c6928697692", "ref_doc_id": "8f8367db-5cac-4e15-93d0-a9d286be123f"}, "cda99eb6-93b2-47db-bd8d-1192bd5652d3": {"doc_hash": "319639b4925ac42589b101f844546d265f8cd3d376a1b2dd3220966ac4302ce0", "ref_doc_id": "3369d11c-8de4-437f-ba9a-0e316cafabab"}, "aefde810-25d5-4631-a13a-70cdc7084817": {"doc_hash": "61df146a6a8dd124cfc95f061b3bd5bb83b82d9a5bf4eba091acdc1f1a7a0ffc", "ref_doc_id": "1d6cd9fb-a361-4f78-992d-b56f76f279f8"}, "0d3b7044-3fda-4cb4-a2f3-fb8c763cb880": {"doc_hash": "b62d1ec42c76ac7a96fc51cf8ad3cca666aa67770412e6fe668787e49dfe38be", "ref_doc_id": "b0e405ef-9256-458a-81d1-66a8a3acde9a"}, "840156a8-2c98-4f5d-81fa-b238f06477b7": {"doc_hash": "fcfa65bd4864f7da085ee4655060e29734e72dde32c52a0c2499f5295da4cdfe", "ref_doc_id": "866b3fed-1f8f-4c4a-982d-5b6f98dec92d"}, "7497ab53-31f3-439e-aa18-a99b31a24a48": {"doc_hash": "7ab1913bfb173b0636c33365aeccb19834cabaede34ec66c4c48d9aff38f73ea", "ref_doc_id": "cc8c11db-2437-4b90-92d2-3f71f09b3fd4"}, "03f3e38a-8912-430a-a49a-8a976586ecb8": {"doc_hash": "27e9c3080d9df3e5b7618893fef214b37d4e2e42fde263ae2c28b81d210d282c", "ref_doc_id": "db8bb5a5-afd2-4451-9558-92b9c4565f3a"}, "788f7a29-c3c8-4b0c-8351-d2ac2b329ab6": {"doc_hash": "e5313e303095a921e4ce9bd5df9a17eee702a231328acb5d9776c6adb6af368b", "ref_doc_id": "4c25d2cf-5b1c-4588-b796-b32b0e82982c"}, "a3ab03dd-3e6e-4b0d-995f-05a6e34db1da": {"doc_hash": "6801bf1d434a930b0f72aa8d0fd38726f9a0debe152339b0aa83cc3bf9be3ff3", "ref_doc_id": "9a5843de-2db2-44e3-940b-9f80b60d7f83"}, "f108f1eb-1f3a-427e-a712-24be0b1fabba": {"doc_hash": "77e7e3ad7a5da0e926590f3e9202431c7cc9eefafcc890cce3731db3e06f09e4", "ref_doc_id": "5ff9ffae-496b-4bf3-90ac-f7b447b1c627"}, "e470bb1c-cef7-426f-a971-74931a6b7fa6": {"doc_hash": "1b9a04fe0a567418e653e58e879d17c1f109c4633f2939d70d72eac5f8ec9f64", "ref_doc_id": "76964f07-5872-4b8a-84cc-631239c2cd1b"}, "a535e976-59d2-4b32-b8e7-b9464a22e437": {"doc_hash": "672fc640ddfa99844c1f5155259a723783ea60796edef602db6c8baa85b42d90", "ref_doc_id": "151ba076-2f4d-4bf5-b03e-439d6caf12bd"}, "aa2cc713-394f-4ab3-91de-b32b8a765d47": {"doc_hash": "528de13abce46405a6a033ebd8541e1cfb643fb1ce3dd709ce13da8b2c1149d3", "ref_doc_id": "699da9e9-54a1-443b-8eb2-b6827196f08b"}, "37100292-9746-4187-8333-28d4d0b4dde8": {"doc_hash": "1b9a67154623d39fedfe417417edd7dea2c359c50891d41aa1bc6593eb09a7e9", "ref_doc_id": "b1cc43bf-4589-478e-81ff-0e07cb4e666d"}, "e2bbe2dc-7647-4136-b112-e818e83e2f17": {"doc_hash": "f13f861456fdb089e254c022c74c4d33acc6c095c97158eb8be5da829340b898", "ref_doc_id": "7fb56dc7-e6fd-47e8-9550-ee9c1ac40e78"}, "51addb2d-3b71-4c90-8bc4-77e4653e9148": {"doc_hash": "457ebb2c4dbe8d3b218b86c6e3db7b3aa794da62477ccdb3bd161961d46b5ca6", "ref_doc_id": "f69c4fcb-0c74-4e0c-aae1-60de6e84cfef"}, "2796e9bc-73c7-4160-9c85-d7a11b2aadd3": {"doc_hash": "55f049c02c25ee6bd075260316dfe393ec2613867f1181732f0151b896096516", "ref_doc_id": "88e8d530-a607-46e6-83dc-8869caa28d4d"}, "93525d34-0f25-48df-9d2d-08e796afd8a7": {"doc_hash": "af57945444b64a20d0cce3cca49787043093aa2f0c2fc90ad812544a12945faf", "ref_doc_id": "a892dcf7-2ecb-4529-8234-2e7db7818063"}, "63600eb1-fb86-4593-9a93-1c94b5ef99c2": {"doc_hash": "16925e4fce85cf86961d39ecc92db654302f4100025d0c6fb1957a1ecb605bd4", "ref_doc_id": "bbd7339a-c4cb-4319-8db4-a4c4834c9631"}, "290dced9-29eb-4d88-9dca-4479052f5f64": {"doc_hash": "864f62886b884bb1ed0543bd58c8cc7b4f7dd01ad06eb851f668b4f095cc9331", "ref_doc_id": "57885cc7-b129-463a-ad0c-bab1e0299b69"}, "f34b79c8-0626-4ace-b47c-e4bc01867f1a": {"doc_hash": "c39f485188a5fda2f6e95da5738a7e4840985952db15d477df096cef7fa61524", "ref_doc_id": "1fa4b4dd-7527-44a9-ac74-37d0de1245e4"}, "bc840d87-1fee-4c5d-ae06-5988d234c350": {"doc_hash": "965ab084248577c5491bc73ad23a4ce4e1f8cef776234d8ba15611d823b01823", "ref_doc_id": "8aa7876a-b637-4ad9-b75c-3073683f1a5f"}, "0493059e-e22c-4679-8a3f-42b7a5e4c359": {"doc_hash": "a6c9fef371c844f4b996a9b10b74ca1b9a9c8bc38a13aab557838fd8a3f4bc13", "ref_doc_id": "2cb798a6-7b13-4919-9eee-db4d36ee6a2d"}, "17dfb2c1-e905-47bb-a9a2-2100d4155d78": {"doc_hash": "d7c624becd6518727eeb50a381b32435ea1e43e4f9e3ba18c5f04249fe1f3953", "ref_doc_id": "b9cdee30-3ede-46b1-a11f-33e47fab4409"}, "94b5c87a-4fa7-45c6-b3fe-a6adab2cf745": {"doc_hash": "1e84075fd0504f48fedb6afff086b2ea40b840cf962ba9c36809a6701ff32f9c", "ref_doc_id": "218c7a63-04e1-40cc-9d10-0de6d414d4c5"}, "3e3509a7-e37c-408a-bbb4-5dce5f64613a": {"doc_hash": "fc929352ae4cfbfff139a1d3e458797820e48d0a9453cffb942f3f183840156a", "ref_doc_id": "da30af58-8099-4b15-8bcc-1de96ed7e084"}, "6f57ce86-3154-4bb6-aa4f-60e075b7d7d2": {"doc_hash": "c20979737ee042a7f91c240a857bf52d554bfd734f58ff6c3696a9e94acfea62", "ref_doc_id": "a19f0d88-6b00-4d92-88d5-7c6bbe6f393e"}, "d6042ce2-38b7-47a1-affe-d7768e79482b": {"doc_hash": "f084ee968dafcacc530316ca5a8e52b3ca7a40a39f8ec3754aae88f00db16324", "ref_doc_id": "e64c2eaa-2ad0-431a-a479-4ed02839f757"}, "f8b56a8c-0c88-4743-81ae-b7b4de4906a7": {"doc_hash": "856d9ddf548e3a1571a34d422986416dca3b39b6e6628e6f6d2deec914bf7bb0", "ref_doc_id": "ed4011cd-c225-4fe0-b628-eea9c7c94519"}, "d77f08bd-f843-44c6-a5fe-040d1977f638": {"doc_hash": "bb80f91b8313a07d6d0a69a21bc13453653f69271458eefff9d24d33bddbb0c3", "ref_doc_id": "ada3dd06-c709-4a5b-b32e-f5109ea9c4f9"}, "0ce6869c-84df-4bbc-b6fc-083764d3ec41": {"doc_hash": "eb820c3ccc14e85cb235659ae3bdc4d58d6333ce71b0282df5b7a5ad70507694", "ref_doc_id": "caf9723a-55d3-4cfc-b543-c0ea2195247d"}, "8cef1c91-7d1e-426e-9316-239c2b4d16b6": {"doc_hash": "db08f91e40b4abd224ead9a8ba099cda5e8f523898440443fb1209ecc9d210d2", "ref_doc_id": "a8d18b7c-d006-46d9-b90a-b28d53b1c1a0"}, "13bcb590-4b05-4adf-822d-a4cd14e0bb57": {"doc_hash": "1525bb64a3f4a16e6ae816f93cbac6faa507b322a8e03f5447d08acb449fedc1", "ref_doc_id": "c5ba274a-8e60-4949-937f-05ad9855bb8f"}, "de3773de-562c-4e08-9b5e-af3e1a50f434": {"doc_hash": "7509ae6f5c40ccf9d48204a5a79042bae59ff8fa7ff5948dd911f147f543edf0", "ref_doc_id": "e3d52a18-e42a-412c-930c-487f4c4b53e0"}, "777f3bc7-07c3-4ec7-bb7f-61570df6f9c6": {"doc_hash": "440dc33ca7d06da22c00102d3bbccc61202cd10c4a06b4e56d6f31de785dacf7", "ref_doc_id": "cf756839-05c1-45c6-94a3-d951cac05534"}, "56421468-52d0-4a9d-8adf-380025fcd13b": {"doc_hash": "b441e66de08a7fcdf64fcd374b95f8cd4a781455fcd905e2e18177d9764f2ff3", "ref_doc_id": "cd74ef63-f1f2-461a-b333-dc4c29d31454"}, "5108fc89-72a5-4e3f-81bc-c882a1f45fa3": {"doc_hash": "df328a0f11f8e62aeaa7c84636d53498861db164e3294a4eaa3d989211d6766e", "ref_doc_id": "6318a13f-30ce-4a53-abb8-bd66a8fefd0b"}, "81ee9871-7ace-4162-b451-5956b74d6606": {"doc_hash": "e05b92dfc9085c0871bd9f6eca6c0adb42df1f8341ec9815f220c4a11d4cd1ea", "ref_doc_id": "194092e5-0abb-4a5c-bffb-ee7e092c512d"}, "2851ddbe-50b9-48bf-8311-f1d0f926c598": {"doc_hash": "a6db61c0acbfc52248408b4c1021dda8ef6e9a56fbc8003857ebdb88839300f9", "ref_doc_id": "1cc10e7d-e036-4644-8f49-1672e73ab575"}, "511c972e-7fbb-49b3-afcb-540299d408f8": {"doc_hash": "87cc1a6778fd6e462a7e90e2810d01926ec28afbd5b5315e021f95974fa23702", "ref_doc_id": "5d57c41e-b51e-498c-9a63-f7d1803f1e5b"}, "ba80b972-49b9-42d0-b94e-4d35046d99a9": {"doc_hash": "d9738c3c480cff83a933bc5f182cc28d133c01530ec679149069367bd6153ff5", "ref_doc_id": "7005b7a1-ef4b-4945-b4c5-56d8a93b2526"}, "00bb5452-6964-41bb-800f-93ab00fbef9d": {"doc_hash": "85924f52838681e4e06bcc98fc56909b39f43032cbad1d70467ba91f22d24290", "ref_doc_id": "b39d371e-7a93-4175-9f8b-53a63cb50dab"}, "7a35a378-0f57-4ae0-af3b-10234d5514c3": {"doc_hash": "3cba2968f5fc7b385226f7c19db64b700941b162a6baeb142df5536f08a32dbf", "ref_doc_id": "c759b981-cc25-4b8a-a95c-ac88c5923b62"}, "ca259773-107a-41b0-86e6-b4ee8fa56810": {"doc_hash": "944f0b673d0f9854064d52717e1e2e4ce78d9c63abf7288781a888cc85279df7", "ref_doc_id": "4f61e4d8-ba03-4a38-b1b6-62e551cd88e4"}, "b751cb63-12d6-4bc1-8b45-89161560795a": {"doc_hash": "01f5249c6f2ca6dad12bf6ba04333c3636aa94e11a8aef8a3b3062ebcde564d1", "ref_doc_id": "631386d9-3f6f-4fba-ac09-41cfcd4dc881"}, "2ffc3ac1-a207-428c-967c-469dea281fc4": {"doc_hash": "7a7700f5d505575e3a4acf01e9503284943945c6691461b258ffc5ca8c27d3aa", "ref_doc_id": "1a0c998e-412a-4b25-8183-c295693faa19"}, "1314631e-dc91-4350-b05c-50dc3f9144e8": {"doc_hash": "410efc7ba8eb5925ae4af55263982505a37a5a688fc4b145e33602524d881ac0", "ref_doc_id": "8b1a66d5-95b0-4881-9aa7-a1aa06bc2021"}, "7aed4226-78d2-4cc7-ba9a-1a412cf4b104": {"doc_hash": "da8f19289e0585a8ccd60a0948e46caf512c7fbe84e38e7a8c462bc5b1eb5b93", "ref_doc_id": "079002c0-f34b-434a-9f3b-3325cba87150"}, "31b5c45e-f8d7-4dd4-846b-58929693f3ba": {"doc_hash": "d730301113bc28a32f209805ea1f22af7d535839532434169205ffe9e6fcb356", "ref_doc_id": "a6d03698-43b5-4d29-a3c4-a3d40e8d63b1"}, "1906bdff-e669-4cfd-9d57-b5fa79e96439": {"doc_hash": "6b269e98fb877abcdf5e9cc259cfbd85a43a333e34ef8565f53e9cf89a2e2a9f", "ref_doc_id": "2a307c34-6be5-4315-908d-3520f5cfc103"}, "5ca8da93-38b5-4af6-95ce-711ec9a85dba": {"doc_hash": "678dad64036289d153d90b7860c549ef53f54ce58e4165ab70a93dc691428875", "ref_doc_id": "f8e36951-a586-495c-8430-b1581ab5171f"}, "34c2e11c-f37c-4e52-8b5f-bd79a67aaad4": {"doc_hash": "4b47391323a1246f5fa3c3f3fc46e64695639fbecb8a404db2418dcf8be5af68", "ref_doc_id": "60517c13-e858-46e2-a691-91a58f497b75"}, "3bcdda6c-6045-4c33-bef7-0881cd2e8778": {"doc_hash": "e61e692d01908c9a0820dffc6a5daea224f0d7c052f1117d7f95d61fbd80befe", "ref_doc_id": "00d024be-4d97-4f77-8633-1fe1c4127654"}, "b329a323-4653-49a4-9665-d970b8a3a77b": {"doc_hash": "991e8b3c345441c1eae9ef80f882ff323341ef8214b70d8fd54606a7703e97e8", "ref_doc_id": "27c94ff6-0210-4edd-a5a9-2275d89a570f"}, "d664cb3e-6bb5-4792-ba25-49860df6c13a": {"doc_hash": "ed9a1b2ac1892c2bc029347cc13c5ddf70aeed08acbc44dcdcfb952bcbce30b7", "ref_doc_id": "62046d2b-288e-407d-8cc5-e2d2a362cb37"}, "9c0bb9f3-68ad-4131-859c-b1bdbeee2ce0": {"doc_hash": "1274f2044727183df1acd2c186802fe7ae58e8b48275173b2a4d5f60bb3c2d62", "ref_doc_id": "22ba7221-ecd2-4f2c-854d-8e92248c568b"}, "26825a22-74fd-42bb-a7ef-52941c344e53": {"doc_hash": "21f4bdd4d6029d80ea34735a2cd2d1977329f4069e5d140aa2f194ff180cba3c", "ref_doc_id": "8ce3153f-9047-4f88-ad4a-cccfb0a15063"}, "1e9b83dd-965a-4433-995b-e8ad9e5df2e5": {"doc_hash": "fa9bbb0b2071a3c4301a63de735edeaf9047755f909853687984889b893167c8", "ref_doc_id": "be04420b-d3a0-473d-90c2-f138dfb87bf8"}, "2b34de60-1fed-494c-a6af-29ed061d26f3": {"doc_hash": "9996ed49e60aa3f0d823102383eef8ae90767c0c79407edc9ab7d103ced5c9e7", "ref_doc_id": "0f994d4d-46ee-4818-a0b3-d7fefeb1e786"}, "c2014479-5256-459c-9d1d-4785cc68b621": {"doc_hash": "f1872660d8a2074bb1aa2e8beb73fe75ca4377092a5f1d2b4b27e1ff5615f362", "ref_doc_id": "34c7103e-02cb-4843-ad7f-de78e0baffeb"}, "458b5cd4-689b-440e-bb4c-9e19c3a2d4c5": {"doc_hash": "8c8fc1b8c0acb923324e20ba47d510de30fcfa448fee0f87fb87deafdbf869cb", "ref_doc_id": "700e52d7-7330-4174-bd96-7928b51e86a2"}, "69b726b7-e20b-438f-bea9-5bff7f558095": {"doc_hash": "c8d21b71f514151c1091280f1f1d590aadbfebd7d0170d3afc0b1d84d823b11d", "ref_doc_id": "01eed8f2-3ae7-4874-8c3c-35be85bd47b9"}, "b088f73e-3db0-446d-983f-f6d6125eb1ca": {"doc_hash": "59fce964a23491612c76c1522b735765fe53bac8ae1eaaf268fe7b6fcbd10622", "ref_doc_id": "cc182959-b317-415c-9c1c-ceeaa1430253"}, "618c2382-03af-4979-ac99-d3c0e558aac8": {"doc_hash": "9f38118be90abddc2a1a1f17763b8d34f9c9fcc8c3ca6f19b22e943c11540029", "ref_doc_id": "7f6768d4-2ab4-413a-a8f6-67fa96788f14"}, "af8e7e43-37ac-426e-8f44-aa155bc84649": {"doc_hash": "4c0c5cb42c24ed5297a468f52026f1b02c873b1c1fa80204f18445f09fd86d16", "ref_doc_id": "3ea4235d-f7e0-402a-bd81-91275b7b54e0"}, "e7163aa2-5c93-4cb4-93fa-c340048e13cb": {"doc_hash": "b0a93c793efd956cc4ccdc0292faed98adb87b16695156a4a0d24c380a64d394", "ref_doc_id": "c390b163-1003-4526-b36a-bf9e0a9b58e6"}, "03945c5a-3954-4b7b-a376-900f639817f0": {"doc_hash": "16d565e657a6871f0c4ea076ea99a038e48e4428e36e988b0bd8bc27ffd1a579", "ref_doc_id": "b1187c71-9afd-48fe-98bd-2f4bb72492a5"}, "4fb83fee-2883-42b4-8c47-bbddee036470": {"doc_hash": "4ce4f64a5e85072a2bde31a32c81a5327cca238c863b08ecda49582aeb0484ad", "ref_doc_id": "717377a8-6523-47e8-8be8-462768ff93d2"}, "c30390ca-58d5-4636-9ebd-b8d50380dadd": {"doc_hash": "add52ac9b1e1e0af7d761022a4c04be17178fa4897877b2bc8b18d7f4658b47c", "ref_doc_id": "dfc27b3f-6c16-41ab-ab7e-72002b633d34"}, "0b6304ab-af6c-4266-8d6b-43e3975e5bcf": {"doc_hash": "100e842f8ceff15a83c5273e0e3c718980808b5ad585c9f9caa5dc587426824c", "ref_doc_id": "8e3f21f9-be9b-4acd-bafc-66ff95e3a053"}, "62d1e9cd-0da1-4767-8ed8-9f09508718f4": {"doc_hash": "8cee1d6d7d41cb9b2e910a471bf517a275d8671166a59e6bed4ca972813f3563", "ref_doc_id": "9721de75-c6c1-4040-a130-7efbd4e3b7c4"}, "cead9c57-7750-4f97-a4e9-4a9e0bc0c270": {"doc_hash": "0b8a2e62ab58198b4bff0132c2d941f95b36f5667dbd539987cdfd41347a1cfa", "ref_doc_id": "0bb9738c-e6a8-43bf-af91-aa1c3b5760d7"}, "15ea1835-d244-4289-a869-76b1ad5e4ca5": {"doc_hash": "c028d368d2a7b5bf9925176147bd419041f66a45dd7e1ae103bd8a8d797b0c5e", "ref_doc_id": "bbf34297-c7a9-43ee-b147-a7c42af0f8c9"}, "bad9f179-f5e0-434b-b9dd-4ef54271e26b": {"doc_hash": "6577f8fe7e1bcccba78edd468ff201d38c7dc202090fd6f0ee5ee041d6533cd9", "ref_doc_id": "866bc93b-b49b-4bec-b97d-156405070c7f"}, "021fde1e-6e0b-4617-adff-7ad4b9ce441d": {"doc_hash": "33927e4177cd861439b7771e6d3eed4a253b3e80d38816a50523819cf52352ae", "ref_doc_id": "b3727c53-fc98-45f5-a9fb-972cd26b51af"}, "f7ba813b-16c1-4420-a78f-7e32cce1b83e": {"doc_hash": "faf4457ae9d9b61a9d63085dbee53a2ac9dde01277fbce34f6dc33861906d916", "ref_doc_id": "60d19c98-1262-4e6c-80db-0c19120d464d"}, "2a8ae901-08bb-4cb6-b91b-b65b92dfd19c": {"doc_hash": "cd88dcbd14afd9a88f1eea05390eef973cc6e59dddec03b2ac0a62d1efcf42d9", "ref_doc_id": "f35ddf0a-4e8d-4a55-9bd5-ecf82f1b9aeb"}, "307fc2d5-aac1-4f16-b5f8-8cef256da6cd": {"doc_hash": "066a9bc4731419f2686d6e40101184b166729f99ee8f5ee9473c780b88a35ecb", "ref_doc_id": "46f4c5d2-36a0-4bf1-b5a2-2f84441b2d7f"}, "b190f598-66cf-4a98-96a2-430b5d9b91f3": {"doc_hash": "d928296a3d277b5c289827767ddda0a41f09b5e7bd7bdb93c8ec70b501efea95", "ref_doc_id": "5931455f-0d08-4c91-bb83-7d0d7b14ceb4"}, "839daeb2-fa9c-4dae-af95-9e7519331239": {"doc_hash": "d6d7e85a548fb646f39a419b802451204cf96f812f3347566125519d2d0fad2d", "ref_doc_id": "ebe8adf1-9d7d-4871-af0d-a9f53ba9ae61"}, "800c35cf-55b7-4bc5-a072-a19f001936b5": {"doc_hash": "b9b16ce01ac019e527336b423ae69b9542b700a29acd9d3045349a4ed87b6781", "ref_doc_id": "c9d7aaae-bc9a-4c73-9d50-346268aa4db8"}, "a977954b-996d-4444-9aa8-d57015cca2d8": {"doc_hash": "ad0056fc103a4793e28658e9ada2dd0d3809a51aacf3ff431fd2207051fdb8fd", "ref_doc_id": "9077e178-8f15-44e9-ad9d-975861e37d0c"}, "9cbd0e0a-e1ae-4938-97a6-c135dce6f29d": {"doc_hash": "5025196076b6340cfd4341b5c53a702deb56094d968afdd975eff31ed5d27092", "ref_doc_id": "22e58bfe-1fb2-41d2-b690-c1b8ee564428"}, "477d3ad6-2ad7-4315-b2d0-05099e47647e": {"doc_hash": "1d0cdc2a9af4df0059dc07eebdd1f9155578198cde7da07e7599e60e58851218", "ref_doc_id": "e12c7cca-8dc3-4d64-8623-e21436403c00"}, "e898b90d-10b8-479c-8e71-7077efc8a39e": {"doc_hash": "2b3e7061a6d4fcad2509de7a775805bcf389e5ba4e527cb115fb11bf73eeabc8", "ref_doc_id": "1ad10336-bdd3-4a8f-ab34-03a8692683cc"}, "ba805bac-32b7-4106-9baf-afd099676599": {"doc_hash": "c697f1ee10cd1f99ee02078b07689fe8b27e2b1b45e3b4345b2edb6e5f96712a", "ref_doc_id": "8400a2ac-0dd5-402f-b7a0-0507aaaa2fed"}, "27db908a-e5b7-457c-a455-38cf5eaa2ca4": {"doc_hash": "838b26f256e4ca7258cbb24c564c670fac21bd2993be60a392b46ceb51867b9e", "ref_doc_id": "8400a2ac-0dd5-402f-b7a0-0507aaaa2fed"}, "035138a9-fbb0-42d3-8f07-17d61b3e275b": {"doc_hash": "196da1cb38f95727fea8927b3c2da8edba7a2d4f8c5018a74994fe1d7b8cd7d0", "ref_doc_id": "92efd620-bf7e-4537-9b81-1f8dfc95e8f1"}, "fdb2f2ea-94d7-47cd-8830-b87cc1eefde3": {"doc_hash": "3d95c8df9b6255855f7306e9de606aec3db1e8dfb593a3c84d6ffd5bcc1fc5b0", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "c37acf98-252e-44ec-968d-864e9e5a95d6": {"doc_hash": "be5a672a854a4596079070963fd61d1357313bbd423ad3c509888eaace242b0a", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "aca8ae74-c095-4102-8838-d5d22dfdb9fe": {"doc_hash": "a9348d9ead47536175e206bc37f16dc4a23e194643410c7c7604888406bcacd9", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "1a2ddcda-b2fd-4281-adca-c3b783c793f4": {"doc_hash": "2358dcc2b06b8ae4e9b063f716b46cc6466df1fc0f6174bb1cd39fabedd39fda", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "e40b1c73-e52a-45c6-9a13-60a6b09e739c": {"doc_hash": "63a25b6d69ba694e551ca47b99fbd83039e27f1e51421e6dc9d170da849d8390", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "1a12b08e-97f9-4dd9-a13c-4f5ca695801f": {"doc_hash": "5b12474256c933cd95a5754054bb6a88d0110d27c1a331c6e9af1342cb961069", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "5edab4fc-99c1-4a16-b7a8-d4b3beff515e": {"doc_hash": "6de4aaf8bcebd60621a0113d29d9cb6d01b7ffbd8484face49472d49fae18d21", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "e793cbfc-e405-4fd3-9e16-310b019fee2e": {"doc_hash": "dca7551ffd963981554e2798986849775e0944f575848492bbeb0b3dbde672b7", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "79e9c3df-b8fd-475a-a9ad-df427e14657f": {"doc_hash": "83add0889f5478ae1f9b1e4eb0ca156542aadadd8b0a4133afc24a1fc1619fed", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "4636ec65-14cc-4314-9eab-eda66d3a9113": {"doc_hash": "822fe352d7fb8d479d0dda7309f57328aab69772c09740d33c44e62b955aa901", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "d2be4e48-0769-460c-85cf-39068f32a10b": {"doc_hash": "ac9dc89434834c8558cc54825959a858c86bdaaa2cf130b98b0f925937656ffb", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "7f7ea703-49d6-4625-ac69-72bdea7ece75": {"doc_hash": "eff44f5719bf78d559895615aada69485946bd9917fba5a2ebee6e2ef561fed9", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "8aac0fe7-b02a-496c-a4de-4481efb2288f": {"doc_hash": "f35ec4c119742806c6c052f726fcc6359874c5650c54a5b1901143468221f4e0", "ref_doc_id": "d8fbb5ab-d3a9-466f-bfb0-af65c560f3b1"}, "3aa3000b-acbf-45b2-a993-9d2e9622893c": {"doc_hash": "a6a1709d95a8c8e8b49ba62b667beeca4192323e3224d266b07a192c1e626285", "ref_doc_id": "609a7723-7cbb-4198-b043-bfd4efe26ae7"}, "533037ab-3fda-44b6-9af9-d53b5581b289": {"doc_hash": "d7fb7c66c3ce1d5bc53a9e3cca39bb683465bc95d2f995faa6ba1d094f664e90", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "2ee49449-2def-49fd-b42a-c4499b56d0e8": {"doc_hash": "b490e7886365b7d24aa966b62619fe82448b60ad00885901fcf5c3aa338036f1", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "70b3becc-2225-445f-ba06-f94d504e8cc5": {"doc_hash": "42f11eeabce0858621da7b2c3eec7e0f24e87ed4d7191f11c05ece9fe9367f35", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "51c1e8a0-5951-4463-bbaa-4cc991904b31": {"doc_hash": "40d574b770910dfc8cece85c90ebd2420e3abbdcb048313b6020fab7c43db766", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "d9aced91-ffd6-46b7-9e1a-c4667231edfd": {"doc_hash": "82e78d68f9df384b75848d30ec9a388cb719d319d8ae7a544e0225ee8bb23d03", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "08ff3283-e0f4-4ede-b452-6a823125af3a": {"doc_hash": "0c03ca297d4557593567086c903caedbc5c6afa65e8998c2b891d8525a55cf57", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "368b613d-c4f5-4b96-9264-cb0cdf9b5902": {"doc_hash": "1e82c5fcba18fd75a888b3078ba3a9d7362c54cfc1a09656dd52045ab6f24e62", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "4b079d8e-1391-4121-8838-9ef4718b83a7": {"doc_hash": "38a7751032d6d234aff01d5f2ba4339bf7a8a4f1db8150029dc20f03deb4231e", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "26dcb355-18fc-46d5-95d4-0fc2d697ff25": {"doc_hash": "d55bbfbc9063e32a9a1220d60feaae89cd29baa56d6f2f3734ae05f8379d61b6", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "e1179d0f-3370-4b47-a449-ce4f7419e136": {"doc_hash": "87747087c7ecf1e0235adf829d5d25f75fd84fc8301b9825dc1dc20f7cbaad4e", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "2b3c289b-5ca8-47c5-badb-a1348667e7ec": {"doc_hash": "df3fd45913264d3fc41e71927c034ac646ee16d087a200805b0c75a41607ab1b", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "d6aaec6c-2ca6-4af0-9150-bb2853f31bb6": {"doc_hash": "a165d827220da97e19125afebbd08748e46b10dcde9b9caa463d76ce009d7502", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "311eacbf-0110-4005-bd0a-c7111291d73f": {"doc_hash": "6bce908ebdd0003438d412052a30c43073adaf2ab746100e0c52b9d566eeca1a", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "833a52c3-70cf-4b5c-b188-1853d9071f9c": {"doc_hash": "32767001a372902eede15da2aeb15570962377bbbff244f443d558f5acde6af5", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "bc32060a-3181-46f9-aa87-1ebcdd37d94f": {"doc_hash": "4de27134cd87cdc9ff5986a7d9634052f039be497a52b0eaef49a7880cec5f23", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "4dd43627-0a1e-4496-b07b-776848ca1c83": {"doc_hash": "e521b66f8d2c33b06b86ebbcfb6c8b0748d0168375aeeca9961cba7a2bc20e00", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "0017552c-0793-436d-96e1-3c5efdee073b": {"doc_hash": "0d233020099406a60e6818ecc9aeb80394741fa8a6aebaf6f2cbbb32deed0166", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "a4fc5142-9cbb-43df-a51a-4b128aaee962": {"doc_hash": "5e06bbf443675baed11d1993e96897f301b7a1b051cd1f2b5c73ca70167c1a40", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "d10e31c6-3db1-40a5-83a1-75900ecb8596": {"doc_hash": "2c64ab8b7cb854c040871a8275b84d18fd20f29d8c0272c8da76300b94741f72", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "0b479a11-278c-47a7-a7fb-77e01ee529f8": {"doc_hash": "4863eecc880bee2f2ae68245998a0a74d06384bca7132a335a3ddeda2f5e903e", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "6909c186-e9a6-4da0-98f0-8bc8b5f4bfd4": {"doc_hash": "8d606cd55e7c6d28bb47aec87cfa3ae55193b4f0bf4bf47071f69e1db918be5f", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "2a4dd005-aee4-470e-a168-303b84ea67fb": {"doc_hash": "927ed3bc84b742189419ee1424d1e18f9fec55bba61d1174fcbd32d261975d29", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "cf3aac61-b26d-4041-994d-3c26d8646505": {"doc_hash": "c2515dd47a6403c626edae0b8d4697ef72e261b9e2c68a295f0888825843cd9d", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "0e7f2f10-72b9-406a-b41d-2ff641397791": {"doc_hash": "f66500590beabdc926ececbd54ae4b4903cd8bb9cf155e6c7418b7881c2d4634", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "2bc74048-2e67-4757-bdcf-fbeea2d2a3c1": {"doc_hash": "3a44e95aeb048005fbf7d33eba795c7b14d5437e968e16ca05a47a211c22957f", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "8181e022-4203-40cc-8eab-256541a4393b": {"doc_hash": "b2851638d92ea98b1aaee1509b5060406d0df76e68fd87d7a43ff3aee3a8d0e4", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "6adf27f1-0fbf-426c-977b-65da9180d774": {"doc_hash": "f956313f4d02d51ae31823f0c98c6c3366eee02e0d8c07204a1ed7f22a7a6735", "ref_doc_id": "5f22111a-9d20-4635-97ce-2ef748506993"}, "87d56891-1197-46b8-9cf7-b77dc461eb16": {"doc_hash": "ed02da5ad55b3862d48724fc6a237986f23ed4fa0858e28526ca37bc4215f073", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "a0f1fd04-4e68-495f-ae95-fd1afb5576bd": {"doc_hash": "2a0ab3af4ea8df36affc40a172428970cefde40810f047a67a235a92c538f20b", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "82daa5c7-81c7-4a8b-8993-feadeffe036c": {"doc_hash": "7a2e00d79f73afc42344e41c41c3d955125e65bec9ceb001a3ac08dbb91fd7ae", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "7f29552f-2fa6-425c-b2db-37a3e570bf30": {"doc_hash": "61b2b6afc9b2ecdddb623cd78ef90905a439417e9f26d25b68695f2c1d6b2b44", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "46df35c0-582f-43f0-b7fb-0dece7f1ea54": {"doc_hash": "140a9515bde69a08f72f2e2afb1ef2e14eb9cc1665e6925b72ebe3dfe553566c", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "bdabbe82-6aa6-4faf-b6f5-edaefd9a38a7": {"doc_hash": "a51bc426d3d6d03f814f7706eb2bcc9686db17434ef269ebd93d91a8bde8c6d4", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "7c539327-0adf-4e25-ae04-cf1ca4df0551": {"doc_hash": "2ee1022be2be5ecc8fda35475015c87e1ecb148c154d866a81da78b90bc7b7f5", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "b2c5f6e0-c579-4ac3-aa46-32e26c979319": {"doc_hash": "0f905ae7a995601aa25447a4a9c4e348e68c82478da761290d835340ce622f9c", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "eff232ee-145d-4c04-a46f-3458567d8767": {"doc_hash": "4988b7397b7a006f8ca371fe4d522e2737f1c4402397763488728676587cd392", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "1d2e3a0d-6317-4791-adbe-8f06694002c3": {"doc_hash": "72fdb6ee2566708341ac43322300a6b0c56891f6616f151448a7393234f94053", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "a155c5fc-d860-4df1-97bf-b222f835bf33": {"doc_hash": "db09364d56b4dcc93e091b25aed6cf773afb851ded8c47ce1ffee4e5d8b39ad4", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "2d6e8521-dccd-4ae4-b171-83510eaa4e39": {"doc_hash": "f8eb283d3419a14f9e35d615865d96a3f08ded29e33622e308e00dbbc0c327f9", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "050a3a2c-5acd-41d0-9cec-3cd69a81e1a2": {"doc_hash": "785bd02348d04b97cad4251bff740abb9a09940f2e08d8cccf920685262c1508", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "4be1b1ed-39f6-4529-a24c-d4bb392953ca": {"doc_hash": "80ac01bb9ddf0c1705a59658721725cf1001b99b615ea7ef37786a0328f9e4d2", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "8fb8d2ed-f17e-4393-b005-ff3049397ab2": {"doc_hash": "0727df6454972a459e9e392f58ef04c04d1de1b4d39c581873d3da66782f2a71", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "d08c5d0d-5e39-4345-98c3-56ed3bdbc005": {"doc_hash": "1da47ade760fbeb256e4b2b6507befabd884092f8b15fb19ee9df42c5f4cee9c", "ref_doc_id": "777665a5-8d0c-4fe6-8dbb-9b0a6f5c31b5"}, "600c4618-12db-4492-9f3a-fea59e67fe56": {"doc_hash": "2d10773c24041d421e3ec4753b3290e23ac3f2d095ff6ff3e258f0cd450a3f07", "ref_doc_id": "11ef7807-b134-4d02-b8c4-66e21dc4facf"}, "ff55eb6b-664b-44a0-8e1e-b3e6d4cf7b22": {"doc_hash": "4d4f868113bf168002baa221456ecd6076327e2e146f38ae9e0328c98770b355", "ref_doc_id": "11ef7807-b134-4d02-b8c4-66e21dc4facf"}, "ebf8969f-7afc-48b9-8288-2d621c0d609b": {"doc_hash": "3ea2a11d5236ae450a0575cdb549c626dc9f37776b443fa549bc47ba29e8cbc2", "ref_doc_id": "fad0ded2-aa29-424b-87b8-9b44781ad117"}, "287bd5d2-0491-44fb-98a3-3f844aa8177e": {"doc_hash": "5e89e873641e094d46f6f2397810a2610a8450f080e1e6e3ddabb64bdda32834", "ref_doc_id": "bc77d36d-3e81-49b9-b152-a30b13439e1f"}, "82fe0e89-540f-4e62-9e12-b2d1e199fbec": {"doc_hash": "e2e6e07b4ef7d4be2379ce8c72501b205f8a85257d8f2c2057d45c536237c33e", "ref_doc_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e"}, "193c224d-f3bc-4eaa-bd35-ed70fbb56ede": {"doc_hash": "6cc8e8e1f06d015ba8436d2d4fa630f290a541109cf5697fa57be795e4dad841", "ref_doc_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e"}, "bab72163-74e4-44dc-93d6-aa0117fa0796": {"doc_hash": "0ad0864333fde6bc1143a7b695a1f1744b9e8ec8de8a9e9174ab3e27d22302bb", "ref_doc_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e"}, "4e8b9384-8c05-49d7-83ca-723f069413c0": {"doc_hash": "6ec6cf80a88c6cea421535aa61e291ebb63ab2d3632474c298f219b8c59f5a2e", "ref_doc_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e"}, "55e26c71-3d2f-4f58-8cdc-4c66fa53aee4": {"doc_hash": "062dca4ae05b1b4fdcfd1c74de917713b15f5d5a9ffc7092718693ebb4dc05be", "ref_doc_id": "ab1cfa15-11da-4fff-bbdf-a317f3dd904e"}, "d81540d0-0a0c-4c53-ba96-cc1012db90bb": {"doc_hash": "f2ee191b6cc34e0b0aa74075b72731d351fb5ecd71d764f8742262d278a48214", "ref_doc_id": "a75ba012-e1af-4fcf-950c-5320f85c4c58"}, "ffb7de70-0a0b-40eb-913e-be81e86d43f4": {"doc_hash": "71b4537775af2d37f1096111ec93c9a29a21782bd65439a80f14ff68159ed41d", "ref_doc_id": "40f075e9-bf92-4ed0-ad07-16199637e94d"}, "adeb366b-0227-436e-993b-55d3a6c7c927": {"doc_hash": "02058a4e5451676905a94ca814d8bd474f2c2c0e76cc2736e490f42ae4ae2523", "ref_doc_id": "d4f089a7-3a19-4a6c-a6a1-e70a66cc3cbe"}, "62481a49-c4b1-4c91-9c00-190413aa5b5a": {"doc_hash": "f802513aac60fffb9a602c98ca1a3e4b838386373fafc97be38d1b7d07487f23", "ref_doc_id": "9a27e8e8-bca7-4ed2-89d4-0dca44fc207a"}, "6fbbee5e-21e9-4a66-ae10-a3db4be020cf": {"doc_hash": "8b5a5e6c3cf80a3b50dfee17dda5fa717d8750905443734fa802afdab8fbd275", "ref_doc_id": "cde23128-cad9-4585-91c5-c180d025d187"}, "dfde2677-aaf9-43f7-9b0d-a1f62642ab49": {"doc_hash": "251cd7f43b840eecd1acb724f57a1a220b04c9d12ff63e723aec5e94440b063f", "ref_doc_id": "30d6008a-7156-423a-8089-d09cf91992b3"}, "f7b0304f-215d-44cd-bc38-06cbd4882adb": {"doc_hash": "9169b00fc11a09baf380a124ef7f36ab85a91b683b7ca512fca36de457f35c6a", "ref_doc_id": "2b373b16-a535-48b8-8264-2db1afad22c6"}, "534f2ef3-ef07-4a63-8d33-523c740c3dba": {"doc_hash": "948c139392bf3faa7203ec4e5ee465327ff17423fd1dedd882fa747ec5c1d8a9", "ref_doc_id": "a0704ccb-bad2-4643-8ce5-b0010d58b241"}, "935c5349-65e3-41d8-b343-b6d7bb963da4": {"doc_hash": "f2d0a69437d13fa8ac4a48d5b5d8a69a8c72c432ca9e75a52a09f683d69ffec5", "ref_doc_id": "a0704ccb-bad2-4643-8ce5-b0010d58b241"}, "f8b09eb5-4323-474c-bdde-788e3fa23604": {"doc_hash": "4e84ce1a75994abf8db59fe50aa5b6a3f11b40f91c3e9bedb6c33ace5ca7fc17", "ref_doc_id": "a0704ccb-bad2-4643-8ce5-b0010d58b241"}, "8de0a06b-fcf6-47df-a19d-cea907b5c09c": {"doc_hash": "f459c8c39ec0afd36f6a8b0c4e44e2986d7e3449f0fd6fba881983f7eda612db", "ref_doc_id": "b380de43-9ae8-4630-8530-5fba9b332bd4"}, "ddb1b6b4-58a5-4512-8a32-72fdb3ee1b49": {"doc_hash": "92772821edb6ffcc66cf7f414ff8d394a8fcbb21bcfdf78500d08848cd92a0d2", "ref_doc_id": "b380de43-9ae8-4630-8530-5fba9b332bd4"}, "f01ae7c7-31c2-497b-b803-e1667724ec1a": {"doc_hash": "1fb246fdd04b8da0d9cd2357e6bf55a432ae98cc9e878235b26ddd66480467ae", "ref_doc_id": "24315215-37ad-4481-a949-ada47ebefb4f"}, "8e2425c4-545b-48d4-97fb-0f329683a554": {"doc_hash": "8cfc8eb2d24b3024877495e39b7185faed9d605c44a86afda2855405556d6a66", "ref_doc_id": "4da0f121-ba17-4815-a304-da46468d3fa8"}, "ebb55676-d16c-4bde-b52c-ae310754fbd4": {"doc_hash": "6f38e02a904343321209f86c76ecb1c533950d70c296b6848bc72cb18ababd23", "ref_doc_id": "41e6c757-76f7-49e2-ac82-0c9af7a47c8a"}, "91a71609-be8a-4d92-8921-76a68b4c19b8": {"doc_hash": "46694a2028954ddd01f034f86042b4d24ef275548354e5a7b2ce58b4d24738c6", "ref_doc_id": "7e582451-665e-4d45-bc38-c3c07ad7c817"}, "e2c08bf5-54c0-490b-b597-d8437016241a": {"doc_hash": "fc379c2caceee49392cd407cf2310642cb249f093e296bcc69720a825a03c26e", "ref_doc_id": "a39f6f2a-ab49-405c-979d-54346bbc899b"}, "ebd638d8-39bd-4b98-a5ce-161e1ec352e4": {"doc_hash": "696a0b9a1396072af58280baeeb8ea7ec6cfc36e69ce9f34e22b335bb9ecc25d", "ref_doc_id": "829932e1-5c51-4abc-99f1-3b5d627126e3"}, "b1a77881-22f7-41f6-b757-d3451bf621e4": {"doc_hash": "36bebcb53636a4551a65caca6ec2e7cb0adedf66f0772ed224b30c42b9f7c9c7", "ref_doc_id": "dd4bd519-6f83-44cb-8756-3b2181bacd03"}, "7fe13b48-4c77-4dff-9dc4-9f53f8f5c907": {"doc_hash": "9d4a68f95c09de99c7d825a24d478a1792c6b4f2d286a9b9ac5d4747c1e9387b", "ref_doc_id": "d45e242f-f10f-4b41-836e-4e686b6932d7"}, "e1b58b9b-a1ed-4347-9948-d44c87705068": {"doc_hash": "d4433a6ba310ec8611e6489f176e258413a52d457bd3959b8043a107db219e2d", "ref_doc_id": "53df26b3-b951-4e0e-a474-a0037f26f89d"}, "26fe8ad1-98b9-45f3-a037-c7889ce99d22": {"doc_hash": "df4259cb96f514e1249649f10968f9070e6c9a9fa29a44a3d126f86575ea2919", "ref_doc_id": "754fbf18-fa85-49ef-b444-016910f9425b"}, "857ecffb-85c2-4312-83e3-614077a63b06": {"doc_hash": "e8b7bf939755e56b21bb68867fe7c3c43514074d06d63d1f3c5e87b62d2e80a6", "ref_doc_id": "bf84fca2-df74-4029-b51c-89d2d44816f1"}, "68d0c78c-aee2-4843-aea2-d429776ba807": {"doc_hash": "5b7599dbced095031b837af4fb513d1be772a2c7e51e346a8ad717d2f3f5a73b", "ref_doc_id": "4296355d-479c-44bb-b60d-483d45c1d4b1"}, "da82d75f-7075-46b2-b121-6b0422f7971f": {"doc_hash": "c06168cef434221af2430247549eef6a9b0acef56c0f0284df694a5451dc0d1f", "ref_doc_id": "37cb8db6-4e94-4b2d-8f21-9bc60f5ef623"}, "f7cb2ce6-a029-4338-9725-4151b1d66f52": {"doc_hash": "bfbd7bb794919898a8c7f248be2c5804c1ba7a3832b0a7b8ddc62f04ec1849e3", "ref_doc_id": "c8f5951a-3b9e-42c0-97c4-b9ed09806a77"}, "4c576ad4-e1b6-47e7-a618-e6e8f343a992": {"doc_hash": "bc279e5b268f29fd90561cef274a500150e2fad7142d15a86eeef6744f63d6a3", "ref_doc_id": "f70506b9-168d-4e5f-b798-a189da9c9126"}, "9a012e7a-4f90-45bc-a7e8-412a22f72ce1": {"doc_hash": "05ee11b28c09cb411afcd0a277aeaf2ec31a96a410e621e34e170dad9d7001d1", "ref_doc_id": "41d8555e-3847-4b7e-aedd-122714b9c269"}, "cb7ea229-7540-43a3-81c2-1fda97512a9b": {"doc_hash": "95c751539ad3a4fbcd66458d2e6ff3af347327871a1bb611ed174f60ce9e7a4d", "ref_doc_id": "7c83fa77-fd44-4139-990b-9c2f280426b6"}, "1b0915ec-f18b-45b6-ad7e-6d22a6100201": {"doc_hash": "79f1e95616da0f8e80deecb5b8bdb572c99729bb46b7f8970e9c7fe0917cd8ca", "ref_doc_id": "8a3c3712-f8bf-4de3-878b-3f60b204b7cb"}, "6c58dc28-c6c9-467f-8dcf-edbf2b358d85": {"doc_hash": "0946e65805172da18ee09d6228f8df613d52c643539a17a8092361ce96d807ff", "ref_doc_id": "a75282ec-5426-4705-b4a3-cf8eb8ffca9c"}, "9647adc1-b8e7-4220-8332-3305114c2bf6": {"doc_hash": "728af62ffb0d1de0bcf21a49afbc2a5bcf2fa27baeb1a1de7ef02d950316738e", "ref_doc_id": "a75282ec-5426-4705-b4a3-cf8eb8ffca9c"}, "e9e97799-4ae8-48fc-b84c-772509651d81": {"doc_hash": "b9274228fbc787db9bf9ad8c2912b7b5ff9de075a483368b3cd17140bb69c3cd", "ref_doc_id": "a952629f-3554-4cfb-a3a9-7f3fc6cd4617"}, "e45ffb0a-48d6-4dbb-8bc7-80fdf33a63b5": {"doc_hash": "1038adefd25574a394d92f29f62aee92c1e9114d1604f0b6cfbec437ddf7a3df", "ref_doc_id": "a2287776-760c-4750-9d54-8e34fcb7790f"}, "9b265d65-99a5-4a3d-9583-8f45490b7217": {"doc_hash": "e4d0fabd7d2d3aad0ac998eb24809ee8af9baa65b0429114b260b6dc7d8fd4b2", "ref_doc_id": "1f52bb5e-5527-4ead-917e-3698d69e883d"}, "705e9116-db44-4ec7-a7f3-51b890687cfa": {"doc_hash": "a9dbe078e8d97fa13993593568422ec2cc4ebdf82e9d253fc7d08e1205f63e4b", "ref_doc_id": "daccb6a2-084c-40fa-8805-cbe98cf053d8"}, "582e57ca-774b-447b-9ba3-9bde4ae890ea": {"doc_hash": "d8b1e41ec47a7b697daf297bc6c35dfe67409bb57ffbe0210c152baf3b784e17", "ref_doc_id": "d357c4c3-f764-487e-b32a-62f89a2c5e77"}, "074565ed-1b0b-4d34-9835-7e188b79e9e9": {"doc_hash": "e50aafd7463270dbf1d9b6e22fbb0e9bec8625864475ff2d4af70782813677de", "ref_doc_id": "286c068c-ea4f-4b1d-840b-08ba53e1c421"}, "4c374582-e34b-44d8-9b20-b74f9a964d80": {"doc_hash": "29ff657bdc957daf65fd7567a46baaa94d5de61e493141067c640df8b167fb48", "ref_doc_id": "9f6a7c1d-60f7-4ae5-9db2-823ffccc1c28"}, "1cc10007-0f8b-4eb2-8a2b-a51e62508544": {"doc_hash": "b75be98657ed534d3fb81c656d541fb013451dd707336d74cec2611932a8f3c5", "ref_doc_id": "c6f923eb-d868-409b-89b9-ac2a1a11f3b7"}, "3642bf29-c47f-4202-8a0c-f86ad557859a": {"doc_hash": "48d1dc18e8d5671340ecf6857f2497a4e77fef84041949f58e0bdb44317fd72d", "ref_doc_id": "0a4b441a-a6cb-46cc-aa10-ee91d2fd9913"}, "153f053c-5af8-491d-9415-4e68d74c7859": {"doc_hash": "761c24f139a0de61ed3c087c901310fb79516a625e60d5b05b3c83f622dbd8d6", "ref_doc_id": "17719e89-ab8c-499c-9748-9edf49a82a5c"}, "44837b55-578d-4fe4-9f75-093c8804c91f": {"doc_hash": "21bd6e6a586d88a56b805bc105d67d781ffddb639fd610de02ff2cada2ee31f5", "ref_doc_id": "d1bfe65c-28e3-4992-bffb-5825640cdd08"}, "d24367d1-aec8-4706-8eb4-b3b736961c95": {"doc_hash": "fed3b3ba42dc3eb968b6b201dabec1ef0bb77afed927d008eb2d304c32cfde95", "ref_doc_id": "8a9ea1a9-34c1-43c7-8e57-9aa932d8506d"}, "f356be95-84bb-4af2-b20d-5bb84072c937": {"doc_hash": "f4344faa9f309a11defd0dcaf1114ee6a795b294bf1aca208d30fe1200ccca72", "ref_doc_id": "5fa920a0-50c1-4c4b-8e16-b150b537936b"}, "6d622a73-65bf-487a-aacf-0135940bd173": {"doc_hash": "c466559ab6dad9eb6a80969b42db42d2a998af18ebe7f07cb2cc91503b61203d", "ref_doc_id": "9377a47f-46c2-4867-8316-add61c6da567"}, "8061263a-047e-468e-a339-50a86d1f0cdf": {"doc_hash": "cf7b0b9f19b71d0929e503e401e33ac6ba74919bdace1d66fd2cdf5a0093972b", "ref_doc_id": "272e87a0-91e2-432e-aae9-b5fb9ffe7444"}, "66d3d858-719f-4aa6-b017-c999939770f3": {"doc_hash": "81ce702516bd8b86544d5a343c3cfaa71ad22a4b76f81bdb83367b21b63510db", "ref_doc_id": "84c8f2e1-1494-4ff3-aef9-de480f737563"}, "b248f7f2-e3ac-4be8-810c-8d93c5d8e1ed": {"doc_hash": "35ba0e1c00867f1c6e764e41af16b4ca92a7f5a4d73ee3f3556533e33aaf441e", "ref_doc_id": "84c8f2e1-1494-4ff3-aef9-de480f737563"}, "01d94ed4-6737-4fd4-a45e-82b8dc1eb208": {"doc_hash": "60a5936a0e1a90b9dd00d1ff310f79805dacffeb27693cd3c0636b307e3eaff2", "ref_doc_id": "84c8f2e1-1494-4ff3-aef9-de480f737563"}, "6a7e29fe-76af-40a6-92f3-1d6352c4db37": {"doc_hash": "c9abb4db331b3a5c711f1d6c5a773ae29254a1fab3e0a80c4d9af7a81b26074b", "ref_doc_id": "84c8f2e1-1494-4ff3-aef9-de480f737563"}, "3264aed3-bc99-4b69-b264-7350e2945113": {"doc_hash": "def7e046673b3b07bd1edce2e858b9fa40ff65f49594570f02effad99eb81d51", "ref_doc_id": "638fe33f-050b-4e62-905f-e229dc0772e1"}, "9628fd2d-2c1c-4918-8454-6eb1a3d27961": {"doc_hash": "edad5f66aee756292113dc2569c35bed513f88a9d18439ec5458285e0bee53b8", "ref_doc_id": "6acff44f-e035-4df2-a482-2f37a1d52800"}, "182f69c3-30b2-4558-804d-e9a8e72d710d": {"doc_hash": "3b600064585c2f30f4284ffa5d8f20aad37c1718d68e246027729d02b1e535d8", "ref_doc_id": "6f132efe-0260-4c0e-b318-0ddea78861bd"}, "fd97a52b-11e4-4d03-8396-32f3ab0129dc": {"doc_hash": "4156e9a11cd50112d89770d26575c9488ecddcaa650f30ef5bc900eb7d40b0d2", "ref_doc_id": "512b20ea-86b8-4126-8a8d-896010f5867b"}, "cb400dcb-02fc-40b4-a390-e138996fb6e2": {"doc_hash": "a12bbaa4ebb74d0a1a0300ba3a0dc5b50763d19a3afd746c268276d1bd08d7e7", "ref_doc_id": "ff1cbba5-90d0-4f2c-883a-b0c47300b208"}, "ded4df9c-1c44-49c0-a7b5-a8916d7d6da0": {"doc_hash": "fd6c26202dec0df887752644f9cda559b00f787cb7b8e1dd03622307db50bd35", "ref_doc_id": "ff1cbba5-90d0-4f2c-883a-b0c47300b208"}, "162ef16d-c319-4da0-bf27-8c040fbc560f": {"doc_hash": "4d639ad90dbfa613eb201da44d6914b399ee3b2261d2661ba7f1819eb5291266", "ref_doc_id": "74181fcf-6715-451a-9f01-70dad7b3f492"}, "681cd387-4e45-40e5-9efa-fada0d9a122d": {"doc_hash": "c2536f35df99ebb3ef67c54113334eed41c167e44fdb9644804f4ccfd2772eec", "ref_doc_id": "74181fcf-6715-451a-9f01-70dad7b3f492"}, "d698cddc-4039-4d4b-a368-f17a2007921b": {"doc_hash": "e4a5d82bcb3f96726d88fc642dca6683066394ce264ac011eacbb60549070927", "ref_doc_id": "74181fcf-6715-451a-9f01-70dad7b3f492"}, "da09405c-05b3-433e-96c0-fd1fd0ca72d2": {"doc_hash": "7c98a426f6c6d87df91f8dc08e4292bb86d7e4ad81e4aa80fba88a0cd4916120", "ref_doc_id": "74181fcf-6715-451a-9f01-70dad7b3f492"}, "3d4a843f-4b2a-4d1b-93d7-9ced81e2c746": {"doc_hash": "8909e6fc251e5abd4fe3eb14c7545d5bc25ac81a942ecbaa519523feb23ad297", "ref_doc_id": "74181fcf-6715-451a-9f01-70dad7b3f492"}, "76ad0a4d-dd58-4505-a59b-1400c63dd820": {"doc_hash": "5b0b216872db36bff3018a79d9e6d963b4266101f7b0f90759855c8140c1ad21", "ref_doc_id": "ed177ef1-de4e-4ba0-a581-b2d09a06d946"}, "23a940da-7769-4ca8-a007-66de5637e5ca": {"doc_hash": "4e77fa2462b838f5bdf8ad84103d5fa97903a6bdbff8a6b91d7bd007a35f5e89", "ref_doc_id": "7be35d74-13cc-43a1-8339-7541afdfc08a"}, "afde9662-254f-4aa8-89d4-cfcc965ccbae": {"doc_hash": "fedb704a05648b3738c5dc8963e24e056e8956ad72cb314c7e2f3d6a33afff76", "ref_doc_id": "bba0e0b8-7ee4-4ce0-be9b-e5e3e946d0bd"}, "6480e81f-fb2a-48ee-94cf-ddc46c5bf5ee": {"doc_hash": "bbaa547d4158621738c13746830cfeaba52e6061c8a2fb271dbe3e231303c565", "ref_doc_id": "212bb3ac-6ae0-4466-9ae5-42c5787b7cc8"}, "c7b59a9a-5f89-47ff-8c2f-469b06d25f28": {"doc_hash": "4ea0fd5220705d6e0d385688092e7d86ca68db61ebd72b102a29020377edb69d", "ref_doc_id": "7cc742d0-c5e5-4646-8a49-2b9f3a1e07fe"}, "601534df-c3a8-4a8d-b300-377886a3fe68": {"doc_hash": "b3876ef7c1ae58ada1dc074d1bbdc04152e59f9203e57827af226ba778c7a259", "ref_doc_id": "27a6dbac-d228-4ba6-a9be-26e884cd8356"}, "ee518652-8d33-45e3-95fa-f07c71f23f7a": {"doc_hash": "2a9537bfdc57b5cbc71d4df8b5012c90afb9b000f8602d2860acb4c5810cd7b0", "ref_doc_id": "27a6dbac-d228-4ba6-a9be-26e884cd8356"}, "871a6ede-7e19-4512-96d7-e5ac9020f274": {"doc_hash": "341d368be79ae565a9e90f5e61bdd394b1d0153a83cd90747f9bd998012527d7", "ref_doc_id": "6445f7bb-e68d-43eb-bc9d-de57b1131ff1"}, "c607b158-7956-4e3e-89f1-b3865c9423e6": {"doc_hash": "c53b080e78074a4d7b0ffefc544dab08496af69bebf92568e9a7aeb625c80eb6", "ref_doc_id": "6445f7bb-e68d-43eb-bc9d-de57b1131ff1"}, "9138d686-bd6e-4912-952e-49a9ae95a89e": {"doc_hash": "95a1a66909704a4533f4e063f04687cd3ff66db4e006ca4d89eb1bd41e383cfd", "ref_doc_id": "6445f7bb-e68d-43eb-bc9d-de57b1131ff1"}, "d3632c0a-6cc4-4d53-9190-71a2ed4d3329": {"doc_hash": "0ae920d4cc5d8bcba5f9d9b7ddb4beb5f39393516528c7a2fd09ad3e842372ab", "ref_doc_id": "5d579761-247a-4833-aa30-4aa31ff4412f"}, "8c8ebcdf-a579-47be-bf10-688d6c29ccae": {"doc_hash": "5fab8866855109a464b82be23c3d6077394dfe915ce548d4981a385759920e1d", "ref_doc_id": "c6803de6-5ee4-4125-8431-3340f4931143"}, "35650091-39cb-4623-b66a-c600f4ba4834": {"doc_hash": "316f76129338f5249d49160fd395f07e6bdf97e0ea7639afc65038f5446f4d50", "ref_doc_id": "c6803de6-5ee4-4125-8431-3340f4931143"}, "96a3cf01-2bb1-44e2-b517-6d4ac7461b47": {"doc_hash": "a9a3d0a477b9f9e7b310db764b8c989a505ac9305db4cafac69e75b782735355", "ref_doc_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c"}, "c379f768-4f68-4b85-8221-bd49ed132db5": {"doc_hash": "7a06d6b869cf86d643b17e29a03da1992807c9490173936500a1de96ae14eab8", "ref_doc_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c"}, "05cb4718-5266-46b0-af81-3502bcd51122": {"doc_hash": "269a5525aef72d1f8816b32dbc60bbc03e53791298f6652be0907fb028344c8c", "ref_doc_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c"}, "23225086-f91f-4f78-b618-445c606ce599": {"doc_hash": "e58a420f6f495542050eb41a915deb89a7970adeb67b406ffd1239a16585612c", "ref_doc_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c"}, "ac98af0d-f350-4f9b-9dc7-7eff049e9f7f": {"doc_hash": "9e0cb89b86130746601d51e96f4f6f3a552ee373e5ed3f0635a14b41129cafb0", "ref_doc_id": "4af4f50f-370c-4bd3-b80c-48029bd21a1c"}, "60cfc60e-936f-4610-8fed-a074816c04ca": {"doc_hash": "750650a0709ea9010775a8a443548faf52162ef9ba46dd3413efd65efe6edb42", "ref_doc_id": "f25cf645-70eb-4cd6-8478-42a8b1c9d2cc"}, "3c76ff70-82d7-4738-a28a-460e5749a1f1": {"doc_hash": "f4be04547e828d2e804f8f1dcd79c9af39bf18db205bf412ee2e758f3c3502df", "ref_doc_id": "416a7264-956d-48d6-9fb1-d3c068366ec9"}, "588893be-708d-445f-9f5b-14d31392b654": {"doc_hash": "24783c2696b329e2fc344349e28919f41b0fd29d9c9b2e1fc8909db61bc7f047", "ref_doc_id": "bbb5ff5f-c763-4222-ae30-a4a8fec94cc2"}, "b36dafba-90e3-4c28-b0c7-738c5f487505": {"doc_hash": "2a0abd9d9e1a47041799974726ac68e4762aefbb661fe1791df370ef023d0bcb", "ref_doc_id": "bbb5ff5f-c763-4222-ae30-a4a8fec94cc2"}, "3de37428-c55c-457d-9e83-f23b72d95555": {"doc_hash": "0f06acf7d34107c2bd05154ada81950c01302bdad4b79a95083b419fc50969cb", "ref_doc_id": "7ccbcf9a-aa7e-4c84-bd6b-f77c189cbc6e"}, "4fb1ab5c-ff78-48a6-adc8-ad7c9268e72c": {"doc_hash": "9acbcd7fab0a1ddfb832b9ba37ff644e4f5ed65ab7669ecd7e8de2096e94930d", "ref_doc_id": "abdd1972-b2e2-48b6-81f2-53eafa90f318"}, "f2184771-2cad-4ab6-bd53-54f536f4cc28": {"doc_hash": "f5069dc56e4899f8d5125704ef30fb72f498a452a512ca97b051965e4d533d15", "ref_doc_id": "428a3c91-498d-4ab4-95c7-ef6be02f473f"}, "0cb652fa-530d-40ef-ab53-1b5e56383d41": {"doc_hash": "b0df6d4aacaaead4f3781f4dd901ce459005ff53ffce92d191bf951e6e90624f", "ref_doc_id": "a942bc55-b158-43fd-b032-721672aa0a8c"}, "55f6cbd0-d231-4f21-b3db-f277dc3822f1": {"doc_hash": "eb0b86367a8373836a3ba35f9f47adeb9b8f9737784e50e4ca0ef992a01acefd", "ref_doc_id": "563794c6-00e2-4f3d-aa0c-af991bdc4558"}, "42b32e2e-5958-4943-b0b7-94fe672c5df0": {"doc_hash": "7505bc2c5e1038e63b64896bde061459a523ff7529c12faaaac20024645f9a86", "ref_doc_id": "65d4c4cf-dee6-459f-9c8a-078b29106ce1"}, "809de6fd-3e9e-4678-9888-568d63099cfe": {"doc_hash": "b220327da5277a673225eada317186edf17e2a29ba591e7d1bb1d8932ca1caf6", "ref_doc_id": "2e38772e-12bc-46d7-8d86-18b5c5aedbdd"}, "293cff5d-33e0-4d56-8684-84a7da2ed30a": {"doc_hash": "f7184dbc1ea1e484968ab4e1d77d08bf966c3e314e9ca1e2366a03c08e2de633", "ref_doc_id": "ccf087e4-9ffe-47ed-900f-ce34e42f410b"}, "bc90d625-2307-40fc-91c6-0e0f54e59955": {"doc_hash": "c1d4abfc8359d8f24589225a75a8fdd760ef15766bf7392f4bca461ebd6b92a7", "ref_doc_id": "33a1398b-c0fc-4961-9a1d-3fe6dda49492"}, "a7946a32-1459-41da-91d5-a28b4d9eb043": {"doc_hash": "109bc4588b9783d300e93b8353a8d459d0d785557b95bda76251d3aea7170d11", "ref_doc_id": "74b5bfe5-2a9e-4b96-ad23-eed88a33b4f0"}, "4c532350-13b1-4bd2-8cfc-04f27c63855c": {"doc_hash": "18d6cd7eaace9fba76e7b429e0d01cce50b26f0edcfb46f67bf08d754359847a", "ref_doc_id": "e8c403c1-b4f9-4198-bf82-f7f6560fbdc5"}, "a9171cbc-7957-410b-9703-3559811a7c1c": {"doc_hash": "d06fcdd2e26bc997533356340ce9f75284981982e38e951c5af4add23ea2ddcd", "ref_doc_id": "3f474d81-0cd6-4ba8-a0a0-528253f57c85"}, "2f694c50-49a1-40a7-b558-12f7e3e510b6": {"doc_hash": "44ec26de83df1733c7e84f34525e559412a1007161c7d391ec856f56f6d50d69", "ref_doc_id": "b3a19d06-4684-4fa0-8ac0-739358908416"}, "67109efd-410a-4834-8c73-7332d46026ed": {"doc_hash": "6711cfdfdaf34e526b0372d903e35591c68f7746fdd224103cb848294c62d647", "ref_doc_id": "158ad2fb-63cb-45f4-aad6-034415c6d5f6"}, "de723bbf-86ed-4e56-9f9b-b5a83b25e656": {"doc_hash": "1af375eff15d6988fe09e3fe3f53a00c3051b07665d543cfd1671612daa06b3d", "ref_doc_id": "25c02450-2509-495e-a5d7-49ec897c7e2d"}, "37ffab05-330c-4b92-b3b1-b54fdf29c5c0": {"doc_hash": "850845403052db0ad84d15e125032e098d715b84055ced17ad8902ef2e20979c", "ref_doc_id": "771dc622-6b0b-4eca-8abf-06c1a2b0f84a"}, "4a1a20a6-6da1-4d59-966b-21728bfa5be1": {"doc_hash": "7f7a7686328c8c55be42fd730ef2d5b0fe725a59c3b336715c4b7ac9e17d3f77", "ref_doc_id": "819ced54-a80a-4ae0-905e-9f5acf7a9e00"}, "5e401298-50ba-4fc7-b0e4-d2b919ff7e81": {"doc_hash": "27ca13607347e2799517790f79bb63ceed1ba031ca52475ca30c73851a44e9c9", "ref_doc_id": "32e424bb-9646-4ffb-a4b5-cff32bdbdcf6"}, "fc59dcbc-afc6-494b-a215-e64327404c14": {"doc_hash": "cddbe37d9bfc5f96dfaf2d1ed97d3ed8a33a8b7b07d79618dbcf6ebad64bc41c", "ref_doc_id": "32e424bb-9646-4ffb-a4b5-cff32bdbdcf6"}, "6716489e-95d6-4170-af2f-1839a296d8bb": {"doc_hash": "4e4458ddfb6296c7543f2456b6139bda49520bee143deb1a0298ade457d370e5", "ref_doc_id": "0e0aa969-d8c2-4bb6-a135-e08f0700bc79"}, "7c31bc10-29eb-41b5-8d8b-aaf60c8ab9a1": {"doc_hash": "528e3a8a00c84a85475b4d6a77d6c12650319a1a0f66a59492a27bed8888aaf5", "ref_doc_id": "2d351948-b3e0-4286-9043-ee86fb4847c8"}, "07b60809-d644-4b27-81e5-65a600f51d8d": {"doc_hash": "63553ea47ea14be08bd7069902cef0a51c30d32710879615a598df514606f5c3", "ref_doc_id": "8e5e00f7-ba30-49b7-be3e-b49b88145958"}, "6b53868a-8826-49c4-a063-f7fbc5ef5136": {"doc_hash": "bd3a0cf77eac20306d5eae709b4d9da2977c6540f3b263346a468088249bd361", "ref_doc_id": "2e33b2ab-f387-432c-9938-70b7c8eab311"}, "6323901f-858e-4c02-ac2e-320c5d430842": {"doc_hash": "841cd7e22a5f668bb885c9789f81eb9fa62e6b4c9776c90c161a7a99d45546c8", "ref_doc_id": "e4727b0c-6303-499a-98e5-1a383d2df8e6"}, "5ceee623-db21-447f-b8c5-9b77a46ba385": {"doc_hash": "f032f700b21995c788e97e4cd5cc667ff61d9e7f060a7c424e9ffe9c28efa9b6", "ref_doc_id": "0d9aa071-f457-4fdc-be1a-1831222b8325"}, "f1c5df75-5b78-4fd5-8607-9e5ff21befcc": {"doc_hash": "1d4334742aa256faf82391ddc2aa791aa9b1375bb561e6b2d92446b865be20fd", "ref_doc_id": "9b0e2d30-4ee0-42ab-b017-f31e95d938a8"}, "ad729b16-65a1-462d-bccf-a08f1b3b501b": {"doc_hash": "bd936e0234050873a7de453b2630dbd892d75888f9fc2f4922d9d30bb9a04802", "ref_doc_id": "d5957cd9-995d-4fe2-9eb9-63374b176813"}, "c20fc30e-9a84-4b9f-b4eb-805386bc41ea": {"doc_hash": "b645c1fcf614915e974199bb4c03505a51f6fac3d79632f7cce09a64a733d44e", "ref_doc_id": "d5957cd9-995d-4fe2-9eb9-63374b176813"}, "8f335690-1924-44a9-87d9-2c92779df3bd": {"doc_hash": "290a87549a9c06ab901e15c501761d414214a1630ad31d5ac34a4072e302d9f2", "ref_doc_id": "d5957cd9-995d-4fe2-9eb9-63374b176813"}, "5b714d03-e694-470f-9d8a-75768212d3c0": {"doc_hash": "ddbc502b3dcd8866c12d932bb025197a3ef9b4f9b38ad6335a56bc4c57347461", "ref_doc_id": "d5957cd9-995d-4fe2-9eb9-63374b176813"}, "cd9bad05-68aa-4f13-afc8-83c704d9909b": {"doc_hash": "ff2690553fb268eedce07cef9fbaa7344e7ef6a3fb9bb04afff7674a539b29be", "ref_doc_id": "01e6acbd-91fd-42fc-a97d-3f52f428f928"}, "d0d5b2b0-9537-4599-9b01-0e81b00c5a57": {"doc_hash": "b69e7e951004603c312b2506fbe5bcfe252af4e0f45b8ff8dc25aad95b3f29b5", "ref_doc_id": "1dae8122-396a-4dd2-b7e7-b3f7d21d3842"}, "617fa82e-528f-4ecb-8ca2-1a40f4d8d4ac": {"doc_hash": "1b12cd0dd091decbf7ca652b98a27ee0e377e1b0f36ef2b88bbe2989eb1f0c91", "ref_doc_id": "c2122b8c-e1ab-42cd-9102-529fb328176f"}, "586e7e8a-26e6-482c-813a-8b4a7a1c55d5": {"doc_hash": "f6a7aa22fb1aa37450ebb7567c6ff85f731789a33e1bb3b48e7bcd28e8e59e69", "ref_doc_id": "c2122b8c-e1ab-42cd-9102-529fb328176f"}, "b6d96529-ab8b-44cf-b035-fbdf61d0fd71": {"doc_hash": "7b907eeeaf20227c51cc74244ea76bb9775ecb985e6b7a8596cebc6017be3d82", "ref_doc_id": "c2122b8c-e1ab-42cd-9102-529fb328176f"}, "3f82252e-2254-4a28-9f51-a30a77aaecfe": {"doc_hash": "d6d46bce8a84e76cae4dafed144a04a849efedb30f61c46a6e2beb7c22581646", "ref_doc_id": "2760374a-0143-4162-b121-a16ae2a93df7"}, "0b62e877-6092-49c9-97b5-56a6a14dc64e": {"doc_hash": "d51ead2b34e71bac5253bd44b7a09c3515d7b4d33ef80e8999b975e29941e34b", "ref_doc_id": "a914b9c7-c65e-46c2-8f0b-aa056eafa77c"}, "5b6f04fe-f2e2-4827-8981-f8d1943d6196": {"doc_hash": "5124153ba278b72c56a373f078341aee832b4c997926252865bf51978e490f04", "ref_doc_id": "ba59e68c-b4ff-42e8-ab62-904044e23810"}, "31311ca4-dcd8-444a-bc86-27a659f5b5ac": {"doc_hash": "30017a6ada65fec987648909687fd753c44cb3156ce3ca3b9e90a72f8b802875", "ref_doc_id": "68be0038-76e1-4592-ad76-feb0bc25c791"}, "36ef8216-5298-4380-a294-f5a98bdea665": {"doc_hash": "2d8c6d882a9e78bd4c6894c5668be868180cbe8c9f82d105d29b2580677e09aa", "ref_doc_id": "68be0038-76e1-4592-ad76-feb0bc25c791"}, "1a131d8f-cbd7-4e88-9ad4-0ec0dc5cf230": {"doc_hash": "8f9e83a74813d94425384d5bcc6c0f0946712b716c568ff98d8336810e113740", "ref_doc_id": "ff311b0e-81c4-46a6-8716-712f923fcafa"}, "3ca65b70-9464-424e-a780-0f488a7da7c0": {"doc_hash": "b59b96c8102ae8fdb16026177791e52632c3e4db8be7a0edc918e51183a994fe", "ref_doc_id": "2788a7fb-0c13-4940-bcf4-00f8e667e10d"}, "1b9d0abd-10da-4f73-b0c5-fc81edd78e3d": {"doc_hash": "1220d252b2e401c3f7709e05b09b4298d2880ba7a59e25726df8257407e04a6a", "ref_doc_id": "909dd98e-0694-4459-a1a5-14ffbfe6584a"}, "acc4f59b-003b-4ebc-80bf-58f2b77ff254": {"doc_hash": "b5454cf20b9aaf44685c83db1727889a47b232125ed4e0e87b25b3604ca8a4f5", "ref_doc_id": "909dd98e-0694-4459-a1a5-14ffbfe6584a"}, "041b41c1-5a0a-438d-bb1a-b11f1b9e4ca5": {"doc_hash": "03b63888e5d754e5e779815446a92f8adae65190bb22b596a67b4642286f529a", "ref_doc_id": "1b794e97-6d50-46cd-ad00-1c9fc2edee80"}, "c9130195-bee9-4067-bf3c-51a6e70c2a2d": {"doc_hash": "b4071f8839e02e94a0219530b38fd378977481c827d6f354e57d582e3afedf6e", "ref_doc_id": "d3698f2b-197f-4b44-9f74-afadd30b6ca3"}, "5eff4ab7-a96d-46aa-91d2-719274fdee2b": {"doc_hash": "8b6c9eaf384f3cfd14fbe007f55def711a1b4241f1b8cedbc4b53ff0f6ae0e71", "ref_doc_id": "d3698f2b-197f-4b44-9f74-afadd30b6ca3"}, "1176edad-bb91-4075-9762-2a0ac70355d4": {"doc_hash": "eb43c1e7ae63a1064770a8cec49afbe3b3120b74e64c8aea9d950ae0c921e87f", "ref_doc_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b"}, "328c48b9-dca0-4348-9524-a3a84eb56146": {"doc_hash": "12e59b42a48664cd886a6a8dfd52d7e472a759edd6cf8d85e0e9090e65bf0ae7", "ref_doc_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b"}, "98116255-8c8e-497b-8e49-1cc5077b841a": {"doc_hash": "3aee93f8e796686adfae1f3063237edc34a51246321164ebd96654a392b61fb0", "ref_doc_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b"}, "b170668e-3ac5-45e1-b447-9dfa31c91eee": {"doc_hash": "f75ec271b074f2d64613bba5b1414f371a7b5417b02ec6c686a70625aae68f53", "ref_doc_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b"}, "344c4d54-81ff-438d-8ea6-e15cb4bd7428": {"doc_hash": "cc94fcc51244fca9d0dd7f4aa5a20cf418a0748e75dc97ed3c71df65a0dfe8d4", "ref_doc_id": "d9c218b8-2469-46aa-80cb-1a2de5ffc38b"}, "e99b5dc3-1c82-43fb-a29b-2ab9d1020e04": {"doc_hash": "f6cb20ef208e491b93c3710d60817f0ab97752df5e161b0d7cfc6d72678cb16d", "ref_doc_id": "e8f2fd47-aa00-4e98-b2c9-e19ba9fe6cc5"}, "73049401-6879-4776-9960-1b650fa33b9d": {"doc_hash": "b3c145f4a56c3293c85f5834dfac2ef0ef2e0aa9a2db86038a00f978e6600f0d", "ref_doc_id": "fd14f87f-0312-4d2c-b90f-55dbc54df855"}, "4b7295a8-08e2-485c-bd36-e6d667b6ad89": {"doc_hash": "71a94b137ee016769014bc5d7bb05072fd1e36ede296a7bc0b1397131f6ffa20", "ref_doc_id": "a02b3d32-5e53-46e4-bd12-3e64f02dc01d"}, "be0a21e4-92d8-4cc7-9b30-d4d8e8736b7e": {"doc_hash": "a842996b6f547481f2269eed60bd27ad2bbe3397b896a8a7d9ae87757020714f", "ref_doc_id": "b5dfcd96-7560-4c64-8d7b-eb37bcfb251b"}, "d07314e8-e784-46df-926e-dc8591b82d1d": {"doc_hash": "280d9be081147e2ed8ad389834155d27581704f7129c02c44e36aef8a2e7d260", "ref_doc_id": "59b1af06-1a16-42b9-b599-4bb7b62dcc41"}, "bd81ef25-52d1-4fd7-8fac-d540698dea85": {"doc_hash": "079e27321eab4653c51ac4714ba9bd6cda533e8cda9968e01b45912d19447ad7", "ref_doc_id": "fd4e44fa-6c6b-4cc1-a168-a755fd12cacd"}, "243e53fb-718c-46c6-847b-fdc198e3e897": {"doc_hash": "670e1a7d1bb3b77e8eaccd6980bf6a42dd7a29724038b040396f807990006f36", "ref_doc_id": "eab75e70-88b5-4292-93c5-62ca8097f72e"}, "352e50bd-4041-43e6-baba-ad7f3182fda5": {"doc_hash": "aab1e8f2970a3998baec18711de4a7aa883dcf4ecac666dfc3efc878968f873a", "ref_doc_id": "35bff56c-aa2c-471f-ac7e-38b11f6e9623"}, "4045acca-7c7c-4c8e-870b-59c95effb7ab": {"doc_hash": "f7345d453a89a5526b5e22db0521ed58d095c7a35da4fd820308633d36b119fb", "ref_doc_id": "839cf95f-3d0c-4f49-914e-146ce49a500a"}, "745196d7-0177-4262-a579-ceb0c2fed024": {"doc_hash": "7a28b40a91695488d005bfebceda404c9023ae1af63886bd23be82b1bac87297", "ref_doc_id": "370f91a2-e6c6-44fd-bb00-c3e402b480ac"}, "aca7aa55-e0fd-4bbf-91e4-26b64c82075a": {"doc_hash": "47565e0ed79c3ca755b96cb8199cc712dd4419cc3c5e6d2c9d901a15843d605a", "ref_doc_id": "370f91a2-e6c6-44fd-bb00-c3e402b480ac"}, "22b01e02-8219-4cab-b88e-69b270b6f690": {"doc_hash": "d882a3a3b31bcce2f3bc3ae28a4846f8379f53c1758928732eb43892df129bad", "ref_doc_id": "d9f1599b-c6df-4a72-93f6-553de0f14938"}, "5e225d9b-4bc3-4302-8888-3f797afc3788": {"doc_hash": "b7b3f4e144b42e64ebd1647211e5c22b58f3f4bcfb7139e52311ca97954d8a4f", "ref_doc_id": "3259b3ea-190f-4370-b8ca-a2bf6099ee91"}, "6aa4aa57-3a80-4e79-a9e2-6c5484435d57": {"doc_hash": "81131534d3a8325d06607d1e88d840987d62efbd5debcc078996a63d6362204c", "ref_doc_id": "3259b3ea-190f-4370-b8ca-a2bf6099ee91"}, "2426f942-d8f6-4210-b8c0-0ff09cf456c3": {"doc_hash": "80f710791d348abdab7f15ec218f40cead780eeece7365c72e1f82ddcc3d1ce3", "ref_doc_id": "91ae219a-7b06-4859-851a-d194168f8f0a"}, "98931f20-960f-46f7-b393-a6ed8a3f11b5": {"doc_hash": "7851f1da441983aff717e9ea33354b9fe2e35190eb052ec8156b4211d27d2b2a", "ref_doc_id": "1589627b-e286-468c-8683-b722866fdfac"}, "45a23438-9e4a-4b1f-a48f-c0da4db3cd7f": {"doc_hash": "200127d842a4b799acdb58d3a539b7ccb3b3bf670e061d796609932978acd02e", "ref_doc_id": "1589627b-e286-468c-8683-b722866fdfac"}, "860fd782-3638-4791-8108-eca938f081f2": {"doc_hash": "59ae4d88ea2bfe8e44e9ae3dac387f57114c88e992684afcad74cd4cb3a2ff7a", "ref_doc_id": "550ab989-7266-4ba3-8f7d-fb3997604359"}, "c1edf92d-c4a3-41fc-a231-937043823c81": {"doc_hash": "549bc1a338dd62d22c1b46beb7cd8e291eee819b3272619a4f23e0977590c0d4", "ref_doc_id": "550ab989-7266-4ba3-8f7d-fb3997604359"}, "7167263b-9f15-479f-a18d-aa21af50d846": {"doc_hash": "26f6502b8828c013bd1c868d6cf6ce674a77000654bf520716b8b3e67e220902", "ref_doc_id": "550ab989-7266-4ba3-8f7d-fb3997604359"}, "41d34ca6-51d4-40bb-80ac-a91af2217051": {"doc_hash": "e3c957876de1b9dacb890bf9733a218870105522b8267777ad2dd3981e157f95", "ref_doc_id": "f2ac2c15-b346-4f7b-86c3-7c6727516673"}, "eb11256f-18d9-4018-bef0-cc91242f353e": {"doc_hash": "95d8112e46f2b8a26a50a926015c1e515b9442dc0022d905413dd2d3b3432780", "ref_doc_id": "43d94c9d-c438-4918-bc57-d6203464af11"}, "871d8e56-f95a-4e35-ad16-3821faf655ce": {"doc_hash": "98e81a1b3c8f7560ff15bbbb55d3d079c6b12a940c0b9d6199c5da9b8bd091ba", "ref_doc_id": "43d94c9d-c438-4918-bc57-d6203464af11"}, "01450b42-b296-465e-b688-1cc41f6b3ee4": {"doc_hash": "217a02bdd5f0472e4b369ba9571380bb8fc3071418fed6f3393365819cc50396", "ref_doc_id": "0aa5f664-d604-41b9-835b-9e67e02c9ebd"}, "e743fd2f-ef2a-4974-ace7-3763fba29dd0": {"doc_hash": "6d2d151a02db64d0a268b028b917f05d45b3513761721e05e11fabc421872d4e", "ref_doc_id": "dc80056d-41f7-4254-85f4-ac621240a508"}, "a3a95083-8439-4c5b-b7d7-4c20691681c7": {"doc_hash": "dddd427fd4a5e48adcda95ce8c3ce292a411ecc62f9aaa9c959e0767da6c7f58", "ref_doc_id": "dc80056d-41f7-4254-85f4-ac621240a508"}, "950bdf37-0955-44d2-af82-fe85d8e153d5": {"doc_hash": "e576863a7d48b364209934be14b270cddfcf9159af5462682810b255d929e6be", "ref_doc_id": "407114f8-4297-4934-82cc-5f0b35ff681f"}, "f8c3d138-5159-4cf0-9fb9-f797963d2f4d": {"doc_hash": "f7b25984a172803a911b190e83ee6a6bd521f9c94243c8539c335b5e5a774396", "ref_doc_id": "5771e42a-0ac9-4d0e-b6a4-5fd3a83abe82"}, "da0ccd92-d0f6-44d7-92ae-bc1fba68b199": {"doc_hash": "156fe33fa0adb7a0ccd1b08b5868224d90ad20b7a9042a3e2c5ce97b5039a42a", "ref_doc_id": "fd493bb4-7905-416e-8e72-977ac426fdb0"}, "00a2ef53-7e13-4a12-b790-1fb9fb5b5aac": {"doc_hash": "f6458284a69ba84d4674b77c1211cd5bd23a68cf168b7a8f96abaefeea313945", "ref_doc_id": "f036ec8d-e692-48df-a0eb-15ee8582f38b"}, "7cad7f7d-8d70-4104-8374-179c517d60a2": {"doc_hash": "534333acafd4f04a659816d2b4122a900e9f7dd94b7a4c64f152c2c0e6be5c6c", "ref_doc_id": "34842591-2885-45ca-a1d7-4fceeacd1e58"}, "aea18028-5e7f-44f2-b3fa-fe3df1795835": {"doc_hash": "1cfccfe0f224acefdbfc42ee7321152badf5da300c9307bc982408dde410108d", "ref_doc_id": "cfef4dce-12aa-413e-8964-73fc842ec310"}, "3be98f36-17e8-4e64-9ebd-70d8938cf539": {"doc_hash": "f8407dd1a27d192188c1b80702780a73a9f1e18d66b1f15dfc6432c67a4c6230", "ref_doc_id": "cfef4dce-12aa-413e-8964-73fc842ec310"}, "dacbbe57-6bdd-4988-af2c-5772ebaef4b4": {"doc_hash": "8f8eeb277792cd6fbe4be582232324ed8efc29bfbe5a78447ded70a2a45bf653", "ref_doc_id": "ce3e6856-3dc5-4a43-8a2d-27b374f56b18"}, "7a129efd-f054-43e9-9140-86cc6b03a7c3": {"doc_hash": "98c60894c7c329b08e008d1509e6432e67258725eccf5433491af57d83089545", "ref_doc_id": "586e6e69-198f-4810-b04f-40b336c7e0f3"}, "f51bf376-5b25-449a-9913-a9e226025534": {"doc_hash": "d59283190b4ab5e7c97539f035d57e3de1090e7c314af7f967d9c5d5e5695d76", "ref_doc_id": "440e260f-abad-418d-8625-6954a2066a6b"}, "744eda12-d396-4ee4-be20-b1ffff7f6c0c": {"doc_hash": "5106b98f3fcb6f2689965db93ad3b8bbd98e96efee7e7505e817aa64e2a0fb21", "ref_doc_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38"}, "67c60400-9402-4fef-8fdf-f16cd5205294": {"doc_hash": "1968e8ad48114644c6c7c86b80b4bbff9ec0efdd4458fc4bdba3f8d1821c6459", "ref_doc_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38"}, "1befcdd4-39a7-4714-b0e3-b6e1454f9855": {"doc_hash": "da5e37bf4dc03af65ffb9129f9dd62e6d90c25a06ba9b53853a8a3875d0116b5", "ref_doc_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38"}, "f2f22e8f-ce50-40c9-bfa6-ce4990cc269f": {"doc_hash": "b768eb6cee17cd867fe03aaf10cd479a01c2bbb53535cf19e18ce8231456f967", "ref_doc_id": "a13fa4e7-c2dd-4cf4-81a5-5cce1c4e2d38"}}}