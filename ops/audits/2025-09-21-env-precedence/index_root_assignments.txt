#   â€¢ INDEX_ROOT defaults to ./data/index (created & probed for writability).
Check OPENAI_API_KEY, KB_EMBED_MODEL, and INDEX_ROOT writability. See logs for the error class.
ENV_INDEX_ROOT = os.getenv("INDEX_ROOT")
INDEX_DIR = Path(os.getenv("INDEX_DIR", str(INDEX_ROOT / MODEL_NAME)))
INDEX_ROOT
INDEX_ROOT = Path(os.getenv("INDEX_ROOT", str(DEFAULT_PROJECT_ROOT / "index" / ENV_NAME)))
INDEX_ROOT mounted & writable (volume)
INDEX_ROOT â€” persistent, writable path for KB index
INDEX_ROOT,
INDEX_ROOT: Path = Path(ENV_INDEX_ROOT or str(_CFG_INDEX_ROOT)).resolve()
INDEX_ROOT=./data/index
_CFG_INDEX_DIR = _CFG_INDEX_ROOT
_CFG_INDEX_ROOT = _INDEX_ROOT_FALLBACK
_INDEX_ROOT_FALLBACK = Path("./data/index").resolve()
from services.config import INDEX_DIR as _CFG_INDEX_DIR, INDEX_ROOT as _CFG_INDEX_ROOT  # type: ignore
index_root = Path(_env("INDEX_ROOT") or "./data/index").resolve()
logger.info("ðŸ”Ž KB module loaded | INDEX_DIR=%s INDEX_ROOT=%s", INDEX_DIR, INDEX_ROOT)
monkeypatch.setenv("INDEX_ROOT", str(tmp_path / "index"))
return Path(_env("INDEX_ROOT", "./data/index")).resolve()
| `INDEX_DIR` | default `<INDEX_ROOT>/<MODEL>` | services/config.py:16 | Final index directory; created on import. |
| `INDEX_ROOT` | default `./index/<ENV>` | services/config.py:15 | Root for persisted LlamaIndex storage. |
â”œâ”€> /docs/refresh_kb â†’ services/kb.api_reindex() â†’ INDEX_ROOT
